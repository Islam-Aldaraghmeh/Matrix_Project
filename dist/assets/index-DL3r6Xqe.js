(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function up(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function eP(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var iE={exports:{}},_0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cN;function tP(){if(cN)return _0;cN=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:r,type:n,key:s,ref:i!==void 0?i:null,props:a}}return _0.Fragment=e,_0.jsx=t,_0.jsxs=t,_0}var fN;function nP(){return fN||(fN=1,iE.exports=tP()),iE.exports}var oe=nP(),aE={exports:{}},Nn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hN;function rP(){if(hN)return Nn;hN=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),m=Symbol.iterator;function v(Q){return Q===null||typeof Q!="object"?null:(Q=m&&Q[m]||Q["@@iterator"],typeof Q=="function"?Q:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,M={};function _(Q,k,ae){this.props=Q,this.context=k,this.refs=M,this.updater=ae||x}_.prototype.isReactComponent={},_.prototype.setState=function(Q,k){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,k,"setState")},_.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function T(){}T.prototype=_.prototype;function E(Q,k,ae){this.props=Q,this.context=k,this.refs=M,this.updater=ae||x}var A=E.prototype=new T;A.constructor=E,b(A,_.prototype),A.isPureReactComponent=!0;var D=Array.isArray;function N(){}var O={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function C(Q,k,ae){var J=ae.ref;return{$$typeof:r,type:Q,key:k,ref:J!==void 0?J:null,props:ae}}function R(Q,k){return C(Q.type,k,Q.props)}function F(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===r}function H(Q){var k={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(ae){return k[ae]})}var X=/\/+/g;function $(Q,k){return typeof Q=="object"&&Q!==null&&Q.key!=null?H(""+Q.key):k.toString(36)}function Y(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(N,N):(Q.status="pending",Q.then(function(k){Q.status==="pending"&&(Q.status="fulfilled",Q.value=k)},function(k){Q.status==="pending"&&(Q.status="rejected",Q.reason=k)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function I(Q,k,ae,J,De){var pe=typeof Q;(pe==="undefined"||pe==="boolean")&&(Q=null);var _e=!1;if(Q===null)_e=!0;else switch(pe){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(Q.$$typeof){case r:case e:_e=!0;break;case h:return _e=Q._init,I(_e(Q._payload),k,ae,J,De)}}if(_e)return De=De(Q),_e=J===""?"."+$(Q,0):J,D(De)?(ae="",_e!=null&&(ae=_e.replace(X,"$&/")+"/"),I(De,k,ae,"",function(ge){return ge})):De!=null&&(F(De)&&(De=R(De,ae+(De.key==null||Q&&Q.key===De.key?"":(""+De.key).replace(X,"$&/")+"/")+_e)),k.push(De)),1;_e=0;var ne=J===""?".":J+":";if(D(Q))for(var ue=0;ue<Q.length;ue++)J=Q[ue],pe=ne+$(J,ue),_e+=I(J,k,ae,pe,De);else if(ue=v(Q),typeof ue=="function")for(Q=ue.call(Q),ue=0;!(J=Q.next()).done;)J=J.value,pe=ne+$(J,ue++),_e+=I(J,k,ae,pe,De);else if(pe==="object"){if(typeof Q.then=="function")return I(Y(Q),k,ae,J,De);throw k=String(Q),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return _e}function Z(Q,k,ae){if(Q==null)return Q;var J=[],De=0;return I(Q,J,"","",function(pe){return k.call(ae,pe,De++)}),J}function W(Q){if(Q._status===-1){var k=Q._result;k=k(),k.then(function(ae){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=ae)},function(ae){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=ae)}),Q._status===-1&&(Q._status=0,Q._result=k)}if(Q._status===1)return Q._result.default;throw Q._result}var te=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},le={map:Z,forEach:function(Q,k,ae){Z(Q,function(){k.apply(this,arguments)},ae)},count:function(Q){var k=0;return Z(Q,function(){k++}),k},toArray:function(Q){return Z(Q,function(k){return k})||[]},only:function(Q){if(!F(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return Nn.Activity=d,Nn.Children=le,Nn.Component=_,Nn.Fragment=t,Nn.Profiler=i,Nn.PureComponent=E,Nn.StrictMode=n,Nn.Suspense=c,Nn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Nn.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return O.H.useMemoCache(Q)}},Nn.cache=function(Q){return function(){return Q.apply(null,arguments)}},Nn.cacheSignal=function(){return null},Nn.cloneElement=function(Q,k,ae){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var J=b({},Q.props),De=Q.key;if(k!=null)for(pe in k.key!==void 0&&(De=""+k.key),k)!z.call(k,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&k.ref===void 0||(J[pe]=k[pe]);var pe=arguments.length-2;if(pe===1)J.children=ae;else if(1<pe){for(var _e=Array(pe),ne=0;ne<pe;ne++)_e[ne]=arguments[ne+2];J.children=_e}return C(Q.type,De,J)},Nn.createContext=function(Q){return Q={$$typeof:s,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:a,_context:Q},Q},Nn.createElement=function(Q,k,ae){var J,De={},pe=null;if(k!=null)for(J in k.key!==void 0&&(pe=""+k.key),k)z.call(k,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(De[J]=k[J]);var _e=arguments.length-2;if(_e===1)De.children=ae;else if(1<_e){for(var ne=Array(_e),ue=0;ue<_e;ue++)ne[ue]=arguments[ue+2];De.children=ne}if(Q&&Q.defaultProps)for(J in _e=Q.defaultProps,_e)De[J]===void 0&&(De[J]=_e[J]);return C(Q,pe,De)},Nn.createRef=function(){return{current:null}},Nn.forwardRef=function(Q){return{$$typeof:o,render:Q}},Nn.isValidElement=F,Nn.lazy=function(Q){return{$$typeof:h,_payload:{_status:-1,_result:Q},_init:W}},Nn.memo=function(Q,k){return{$$typeof:u,type:Q,compare:k===void 0?null:k}},Nn.startTransition=function(Q){var k=O.T,ae={};O.T=ae;try{var J=Q(),De=O.S;De!==null&&De(ae,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(N,te)}catch(pe){te(pe)}finally{k!==null&&ae.types!==null&&(k.types=ae.types),O.T=k}},Nn.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Nn.use=function(Q){return O.H.use(Q)},Nn.useActionState=function(Q,k,ae){return O.H.useActionState(Q,k,ae)},Nn.useCallback=function(Q,k){return O.H.useCallback(Q,k)},Nn.useContext=function(Q){return O.H.useContext(Q)},Nn.useDebugValue=function(){},Nn.useDeferredValue=function(Q,k){return O.H.useDeferredValue(Q,k)},Nn.useEffect=function(Q,k){return O.H.useEffect(Q,k)},Nn.useEffectEvent=function(Q){return O.H.useEffectEvent(Q)},Nn.useId=function(){return O.H.useId()},Nn.useImperativeHandle=function(Q,k,ae){return O.H.useImperativeHandle(Q,k,ae)},Nn.useInsertionEffect=function(Q,k){return O.H.useInsertionEffect(Q,k)},Nn.useLayoutEffect=function(Q,k){return O.H.useLayoutEffect(Q,k)},Nn.useMemo=function(Q,k){return O.H.useMemo(Q,k)},Nn.useOptimistic=function(Q,k){return O.H.useOptimistic(Q,k)},Nn.useReducer=function(Q,k,ae){return O.H.useReducer(Q,k,ae)},Nn.useRef=function(Q){return O.H.useRef(Q)},Nn.useState=function(Q){return O.H.useState(Q)},Nn.useSyncExternalStore=function(Q,k,ae){return O.H.useSyncExternalStore(Q,k,ae)},Nn.useTransition=function(){return O.H.useTransition()},Nn.version="19.2.0",Nn}var dN;function Uv(){return dN||(dN=1,aE.exports=rP()),aE.exports}var Ue=Uv();const Wb=up(Ue);var sE={exports:{}},S0={},oE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN;function iP(){return pN||(pN=1,(function(r){function e(I,Z){var W=I.length;I.push(Z);e:for(;0<W;){var te=W-1>>>1,le=I[te];if(0<i(le,Z))I[te]=Z,I[W]=le,W=te;else break e}}function t(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var Z=I[0],W=I.pop();if(W!==Z){I[0]=W;e:for(var te=0,le=I.length,Q=le>>>1;te<Q;){var k=2*(te+1)-1,ae=I[k],J=k+1,De=I[J];if(0>i(ae,W))J<le&&0>i(De,ae)?(I[te]=De,I[J]=W,te=J):(I[te]=ae,I[k]=W,te=k);else if(J<le&&0>i(De,W))I[te]=De,I[J]=W,te=J;else break e}}return Z}function i(I,Z){var W=I.sortIndex-Z.sortIndex;return W!==0?W:I.id-Z.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();r.unstable_now=function(){return s.now()-o}}var c=[],u=[],h=1,d=null,m=3,v=!1,x=!1,b=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function A(I){for(var Z=t(u);Z!==null;){if(Z.callback===null)n(u);else if(Z.startTime<=I)n(u),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(u)}}function D(I){if(b=!1,A(I),!x)if(t(c)!==null)x=!0,N||(N=!0,H());else{var Z=t(u);Z!==null&&Y(D,Z.startTime-I)}}var N=!1,O=-1,z=5,C=-1;function R(){return M?!0:!(r.unstable_now()-C<z)}function F(){if(M=!1,N){var I=r.unstable_now();C=I;var Z=!0;try{e:{x=!1,b&&(b=!1,T(O),O=-1),v=!0;var W=m;try{t:{for(A(I),d=t(c);d!==null&&!(d.expirationTime>I&&R());){var te=d.callback;if(typeof te=="function"){d.callback=null,m=d.priorityLevel;var le=te(d.expirationTime<=I);if(I=r.unstable_now(),typeof le=="function"){d.callback=le,A(I),Z=!0;break t}d===t(c)&&n(c),A(I)}else n(c);d=t(c)}if(d!==null)Z=!0;else{var Q=t(u);Q!==null&&Y(D,Q.startTime-I),Z=!1}}break e}finally{d=null,m=W,v=!1}Z=void 0}}finally{Z?H():N=!1}}}var H;if(typeof E=="function")H=function(){E(F)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,$=X.port2;X.port1.onmessage=F,H=function(){$.postMessage(null)}}else H=function(){_(F,0)};function Y(I,Z){O=_(function(){I(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(I){I.callback=null},r.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<I?Math.floor(1e3/I):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_next=function(I){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var W=m;m=Z;try{return I()}finally{m=W}},r.unstable_requestPaint=function(){M=!0},r.unstable_runWithPriority=function(I,Z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var W=m;m=I;try{return Z()}finally{m=W}},r.unstable_scheduleCallback=function(I,Z,W){var te=r.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?te+W:te):W=te,I){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=W+le,I={id:h++,callback:Z,priorityLevel:I,startTime:W,expirationTime:le,sortIndex:-1},W>te?(I.sortIndex=W,e(u,I),t(c)===null&&I===t(u)&&(b?(T(O),O=-1):b=!0,Y(D,W-te))):(I.sortIndex=le,e(c,I),x||v||(x=!0,N||(N=!0,H()))),I},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(I){var Z=m;return function(){var W=m;m=Z;try{return I.apply(this,arguments)}finally{m=W}}}})(lE)),lE}var mN;function aP(){return mN||(mN=1,oE.exports=iP()),oE.exports}var uE={exports:{}},ls={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vN;function sP(){if(vN)return ls;vN=1;var r=Uv();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:c,containerInfo:u,implementation:h}}var s=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ls.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ls.createPortal=function(c,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,h)},ls.flushSync=function(c){var u=s.T,h=n.p;try{if(s.T=null,n.p=2,c)return c()}finally{s.T=u,n.p=h,n.d.f()}},ls.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},ls.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},ls.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var h=u.as,d=o(h,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:d,integrity:m,fetchPriority:v}):h==="script"&&n.d.X(c,{crossOrigin:d,integrity:m,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ls.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=o(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},ls.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,d=o(h,u.crossOrigin);n.d.L(c,h,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ls.preloadModule=function(c,u){if(typeof c=="string")if(u){var h=o(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},ls.requestFormReset=function(c){n.d.r(c)},ls.unstable_batchedUpdates=function(c,u){return c(u)},ls.useFormState=function(c,u,h){return s.H.useFormState(c,u,h)},ls.useFormStatus=function(){return s.H.useHostTransitionStatus()},ls.version="19.2.0",ls}var gN;function oP(){if(gN)return uE.exports;gN=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),uE.exports=sP(),uE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yN;function lP(){if(yN)return S0;yN=1;var r=aP(),e=Uv(),t=oP();function n(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var f=l,y=l;if(l.alternate)for(;f.return;)f=f.return;else{l=f;do f=l,(f.flags&4098)!==0&&(y=f.return),l=f.return;while(l)}return f.tag===3?y:null}function s(l){if(l.tag===13){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function o(l){if(l.tag===31){var f=l.memoizedState;if(f===null&&(l=l.alternate,l!==null&&(f=l.memoizedState)),f!==null)return f.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(n(188))}function u(l){var f=l.alternate;if(!f){if(f=a(l),f===null)throw Error(n(188));return f!==l?null:l}for(var y=l,S=f;;){var B=y.return;if(B===null)break;var L=B.alternate;if(L===null){if(S=B.return,S!==null){y=S;continue}break}if(B.child===L.child){for(L=B.child;L;){if(L===y)return c(B),l;if(L===S)return c(B),f;L=L.sibling}throw Error(n(188))}if(y.return!==S.return)y=B,S=L;else{for(var K=!1,ce=B.child;ce;){if(ce===y){K=!0,y=B,S=L;break}if(ce===S){K=!0,S=B,y=L;break}ce=ce.sibling}if(!K){for(ce=L.child;ce;){if(ce===y){K=!0,y=L,S=B;break}if(ce===S){K=!0,S=L,y=B;break}ce=ce.sibling}if(!K)throw Error(n(189))}}if(y.alternate!==S)throw Error(n(190))}if(y.tag!==3)throw Error(n(188));return y.stateNode.current===y?l:f}function h(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l;for(l=l.child;l!==null;){if(f=h(l),f!==null)return f;l=l.sibling}return null}var d=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function H(l){return l===null||typeof l!="object"?null:(l=F&&l[F]||l["@@iterator"],typeof l=="function"?l:null)}var X=Symbol.for("react.client.reference");function $(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===X?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case b:return"Fragment";case _:return"Profiler";case M:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList";case C:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case x:return"Portal";case E:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case A:var f=l.render;return l=l.displayName,l||(l=f.displayName||f.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return f=l.displayName||null,f!==null?f:$(l.type)||"Memo";case z:f=l._payload,l=l._init;try{return $(l(f))}catch{}}return null}var Y=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},te=[],le=-1;function Q(l){return{current:l}}function k(l){0>le||(l.current=te[le],te[le]=null,le--)}function ae(l,f){le++,te[le]=l.current,l.current=f}var J=Q(null),De=Q(null),pe=Q(null),_e=Q(null);function ne(l,f){switch(ae(pe,f),ae(De,l),ae(J,null),f.nodeType){case 9:case 11:l=(l=f.documentElement)&&(l=l.namespaceURI)?BT(l):0;break;default:if(l=f.tagName,f=f.namespaceURI)f=BT(f),l=UT(f,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}k(J),ae(J,l)}function ue(){k(J),k(De),k(pe)}function ge(l){l.memoizedState!==null&&ae(_e,l);var f=J.current,y=UT(f,l.type);f!==y&&(ae(De,l),ae(J,y))}function Ae(l){De.current===l&&(k(J),k(De)),_e.current===l&&(k(_e),g0._currentValue=W)}var Te,se;function Me(l){if(Te===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);Te=f&&f[1]||"",se=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+l+se}var Be=!1;function Le(l,f){if(!l||Be)return"";Be=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(lt){var nt=lt}Reflect.construct(l,[],xt)}else{try{xt.call()}catch(lt){nt=lt}l.call(xt.prototype)}}else{try{throw Error()}catch(lt){nt=lt}(xt=l())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(lt){if(lt&&nt&&typeof lt.stack=="string")return[lt.stack,nt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var B=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");B&&B.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=S.DetermineComponentFrameRoot(),K=L[0],ce=L[1];if(K&&ce){var Oe=K.split(`
`),Je=ce.split(`
`);for(B=S=0;S<Oe.length&&!Oe[S].includes("DetermineComponentFrameRoot");)S++;for(;B<Je.length&&!Je[B].includes("DetermineComponentFrameRoot");)B++;if(S===Oe.length||B===Je.length)for(S=Oe.length-1,B=Je.length-1;1<=S&&0<=B&&Oe[S]!==Je[B];)B--;for(;1<=S&&0<=B;S--,B--)if(Oe[S]!==Je[B]){if(S!==1||B!==1)do if(S--,B--,0>B||Oe[S]!==Je[B]){var dt=`
`+Oe[S].replace(" at new "," at ");return l.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",l.displayName)),dt}while(1<=S&&0<=B);break}}}finally{Be=!1,Error.prepareStackTrace=y}return(y=l?l.displayName||l.name:"")?Me(y):""}function Pe(l,f){switch(l.tag){case 26:case 27:case 5:return Me(l.type);case 16:return Me("Lazy");case 13:return l.child!==f&&f!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return Le(l.type,!1);case 11:return Le(l.type.render,!1);case 1:return Le(l.type,!0);case 31:return Me("Activity");default:return""}}function Ye(l){try{var f="",y=null;do f+=Pe(l,y),y=l,l=l.return;while(l);return f}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var Ze=Object.prototype.hasOwnProperty,re=r.unstable_scheduleCallback,be=r.unstable_cancelCallback,Ce=r.unstable_shouldYield,q=r.unstable_requestPaint,V=r.unstable_now,ie=r.unstable_getCurrentPriorityLevel,fe=r.unstable_ImmediatePriority,Se=r.unstable_UserBlockingPriority,ve=r.unstable_NormalPriority,qe=r.unstable_LowPriority,Fe=r.unstable_IdlePriority,We=r.log,Ge=r.unstable_setDisableYieldValue,rt=null,ot=null;function St(l){if(typeof We=="function"&&Ge(l),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(rt,l)}catch{}}var ye=Math.clz32?Math.clz32:ee,Ve=Math.log,G=Math.LN2;function ee(l){return l>>>=0,l===0?32:31-(Ve(l)/G|0)|0}var Ee=256,ze=262144,ft=4194304;function it(l){var f=l&42;if(f!==0)return f;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ct(l,f,y){var S=l.pendingLanes;if(S===0)return 0;var B=0,L=l.suspendedLanes,K=l.pingedLanes;l=l.warmLanes;var ce=S&134217727;return ce!==0?(S=ce&~L,S!==0?B=it(S):(K&=ce,K!==0?B=it(K):y||(y=ce&~l,y!==0&&(B=it(y))))):(ce=S&~L,ce!==0?B=it(ce):K!==0?B=it(K):y||(y=S&~l,y!==0&&(B=it(y)))),B===0?0:f!==0&&f!==B&&(f&L)===0&&(L=B&-B,y=f&-f,L>=y||L===32&&(y&4194048)!==0)?f:B}function Nt(l,f){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&f)===0}function It(l,f){switch(l){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yn(){var l=ft;return ft<<=1,(ft&62914560)===0&&(ft=4194304),l}function on(l){for(var f=[],y=0;31>y;y++)f.push(l);return f}function Dr(l,f){l.pendingLanes|=f,f!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ni(l,f,y,S,B,L){var K=l.pendingLanes;l.pendingLanes=y,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=y,l.entangledLanes&=y,l.errorRecoveryDisabledLanes&=y,l.shellSuspendCounter=0;var ce=l.entanglements,Oe=l.expirationTimes,Je=l.hiddenUpdates;for(y=K&~y;0<y;){var dt=31-ye(y),xt=1<<dt;ce[dt]=0,Oe[dt]=-1;var nt=Je[dt];if(nt!==null)for(Je[dt]=null,dt=0;dt<nt.length;dt++){var lt=nt[dt];lt!==null&&(lt.lane&=-536870913)}y&=~xt}S!==0&&Es(l,S,0),L!==0&&B===0&&l.tag!==0&&(l.suspendedLanes|=L&~(K&~f))}function Es(l,f,y){l.pendingLanes|=f,l.suspendedLanes&=~f;var S=31-ye(f);l.entangledLanes|=f,l.entanglements[S]=l.entanglements[S]|1073741824|y&261930}function _i(l,f){var y=l.entangledLanes|=f;for(l=l.entanglements;y;){var S=31-ye(y),B=1<<S;B&f|l[S]&f&&(l[S]|=f),y&=~B}}function Ci(l,f){var y=f&-f;return y=(y&42)!==0?1:Ri(y),(y&(l.suspendedLanes|f))!==0?0:y}function Ri(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Wa(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function ht(){var l=Z.p;return l!==0?l:(l=window.event,l===void 0?32:rN(l.type))}function ln(l,f){var y=Z.p;try{return Z.p=l,f()}finally{Z.p=y}}var qr=Math.random().toString(36).slice(2),tn="__reactFiber$"+qr,zr="__reactProps$"+qr,$a="__reactContainer$"+qr,Yo="__reactEvents$"+qr,pu="__reactListeners$"+qr,Dl="__reactHandles$"+qr,As="__reactResources$"+qr,Zi="__reactMarker$"+qr;function he(l){delete l[tn],delete l[zr],delete l[Yo],delete l[pu],delete l[Dl]}function He(l){var f=l[tn];if(f)return f;for(var y=l.parentNode;y;){if(f=y[$a]||y[tn]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(l=VT(l);l!==null;){if(y=l[tn])return y;l=VT(l)}return f}l=y,y=l.parentNode}return null}function $e(l){if(l=l[tn]||l[$a]){var f=l.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return l}return null}function Qe(l){var f=l.tag;if(f===5||f===26||f===27||f===6)return l.stateNode;throw Error(n(33))}function Ne(l){var f=l[As];return f||(f=l[As]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function ut(l){l[Zi]=!0}var wt=new Set,Ot={};function Tt(l,f){Lt(l,f),Lt(l+"Capture",f)}function Lt(l,f){for(Ot[l]=f,l=0;l<f.length;l++)wt.add(f[l])}var Vt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qt={},mn={};function Jn(l){return Ze.call(mn,l)?!0:Ze.call(qt,l)?!1:Vt.test(l)?mn[l]=!0:(qt[l]=!0,!1)}function $n(l,f,y){if(Jn(f))if(y===null)l.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":l.removeAttribute(f);return;case"boolean":var S=f.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){l.removeAttribute(f);return}}l.setAttribute(f,""+y)}}function sr(l,f,y){if(y===null)l.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttribute(f,""+y)}}function Cn(l,f,y,S){if(S===null)l.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(y);return}l.setAttributeNS(f,y,""+S)}}function Ut(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Cr(l){var f=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function kn(l,f,y){var S=Object.getOwnPropertyDescriptor(l.constructor.prototype,f);if(!l.hasOwnProperty(f)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var B=S.get,L=S.set;return Object.defineProperty(l,f,{configurable:!0,get:function(){return B.call(this)},set:function(K){y=""+K,L.call(this,K)}}),Object.defineProperty(l,f,{enumerable:S.enumerable}),{getValue:function(){return y},setValue:function(K){y=""+K},stopTracking:function(){l._valueTracker=null,delete l[f]}}}}function wr(l){if(!l._valueTracker){var f=Cr(l)?"checked":"value";l._valueTracker=kn(l,f,""+l[f])}}function Ki(l){if(!l)return!1;var f=l._valueTracker;if(!f)return!0;var y=f.getValue(),S="";return l&&(S=Cr(l)?l.checked?"true":"false":l.value),l=S,l!==y?(f.setValue(l),!0):!1}function ai(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var at=/[\n"\\]/g;function tt(l){return l.replace(at,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Dt(l,f,y,S,B,L,K,ce){l.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?l.type=K:l.removeAttribute("type"),f!=null?K==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+Ut(f)):l.value!==""+Ut(f)&&(l.value=""+Ut(f)):K!=="submit"&&K!=="reset"||l.removeAttribute("value"),f!=null?nn(l,K,Ut(f)):y!=null?nn(l,K,Ut(y)):S!=null&&l.removeAttribute("value"),B==null&&L!=null&&(l.defaultChecked=!!L),B!=null&&(l.checked=B&&typeof B!="function"&&typeof B!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?l.name=""+Ut(ce):l.removeAttribute("name")}function Yt(l,f,y,S,B,L,K,ce){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(l.type=L),f!=null||y!=null){if(!(L!=="submit"&&L!=="reset"||f!=null)){wr(l);return}y=y!=null?""+Ut(y):"",f=f!=null?""+Ut(f):y,ce||f===l.value||(l.value=f),l.defaultValue=f}S=S??B,S=typeof S!="function"&&typeof S!="symbol"&&!!S,l.checked=ce?l.checked:!!S,l.defaultChecked=!!S,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(l.name=K),wr(l)}function nn(l,f,y){f==="number"&&ai(l.ownerDocument)===l||l.defaultValue===""+y||(l.defaultValue=""+y)}function An(l,f,y,S){if(l=l.options,f){f={};for(var B=0;B<y.length;B++)f["$"+y[B]]=!0;for(y=0;y<l.length;y++)B=f.hasOwnProperty("$"+l[y].value),l[y].selected!==B&&(l[y].selected=B),B&&S&&(l[y].defaultSelected=!0)}else{for(y=""+Ut(y),f=null,B=0;B<l.length;B++){if(l[B].value===y){l[B].selected=!0,S&&(l[B].defaultSelected=!0);return}f!==null||l[B].disabled||(f=l[B])}f!==null&&(f.selected=!0)}}function Rr(l,f,y){if(f!=null&&(f=""+Ut(f),f!==l.value&&(l.value=f),y==null)){l.defaultValue!==f&&(l.defaultValue=f);return}l.defaultValue=y!=null?""+Ut(y):""}function er(l,f,y,S){if(f==null){if(S!=null){if(y!=null)throw Error(n(92));if(Y(S)){if(1<S.length)throw Error(n(93));S=S[0]}y=S}y==null&&(y=""),f=y}y=Ut(f),l.defaultValue=y,S=l.textContent,S===y&&S!==""&&S!==null&&(l.value=S),wr(l)}function Gt(l,f){if(f){var y=l.firstChild;if(y&&y===l.lastChild&&y.nodeType===3){y.nodeValue=f;return}}l.textContent=f}var or=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vn(l,f,y){var S=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?l.setProperty(f,""):f==="float"?l.cssFloat="":l[f]="":S?l.setProperty(f,y):typeof y!="number"||y===0||or.has(f)?f==="float"?l.cssFloat=y:l[f]=(""+y).trim():l[f]=y+"px"}function Za(l,f,y){if(f!=null&&typeof f!="object")throw Error(n(62));if(l=l.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||f!=null&&f.hasOwnProperty(S)||(S.indexOf("--")===0?l.setProperty(S,""):S==="float"?l.cssFloat="":l[S]="");for(var B in f)S=f[B],f.hasOwnProperty(B)&&y[B]!==S&&vn(l,B,S)}else for(var L in f)f.hasOwnProperty(L)&&vn(l,L,f[L])}function Oi(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tr(l){return Bi.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function lr(){}var ws=null;function bo(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ra=null,_o=null;function hf(l){var f=$e(l);if(f&&(l=f.stateNode)){var y=l[zr]||null;e:switch(l=f.stateNode,f.type){case"input":if(Dt(l,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=l;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+tt(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var S=y[f];if(S!==l&&S.form===l.form){var B=S[zr]||null;if(!B)throw Error(n(90));Dt(S,B.value,B.defaultValue,B.defaultValue,B.checked,B.defaultChecked,B.type,B.name)}}for(f=0;f<y.length;f++)S=y[f],S.form===l.form&&Ki(S)}break e;case"textarea":Rr(l,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&An(l,!!y.multiple,f,!1)}}}var Oa=!1;function Wo(l,f,y){if(Oa)return l(f,y);Oa=!0;try{var S=l(f);return S}finally{if(Oa=!1,(Ra!==null||_o!==null)&&(me(),Ra&&(f=Ra,l=_o,_o=Ra=null,hf(f),l)))for(f=0;f<l.length;f++)hf(l[f])}}function Cl(l,f){var y=l.stateNode;if(y===null)return null;var S=y[zr]||null;if(S===null)return null;y=S[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(l=l.type,S=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!S;break e;default:l=!1}if(l)return null;if(y&&typeof y!="function")throw Error(n(231,f,typeof y));return y}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Si=!1;if(Zr)try{var $o={};Object.defineProperty($o,"passive",{get:function(){Si=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{Si=!1}var So=null,Fh=null,Mo=null;function Lh(){if(Mo)return Mo;var l,f=Fh,y=f.length,S,B="value"in So?So.value:So.textContent,L=B.length;for(l=0;l<y&&f[l]===B[l];l++);var K=y-l;for(S=1;S<=K&&f[y-S]===B[L-S];S++);return Mo=B.slice(l,1<S?1-S:void 0)}function mu(l){var f=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&f===13&&(l=13)):l=f,l===10&&(l=13),32<=l||l===13?l:0}function ma(){return!0}function Rl(){return!1}function Ui(l){function f(y,S,B,L,K){this._reactName=y,this._targetInst=B,this.type=S,this.nativeEvent=L,this.target=K,this.currentTarget=null;for(var ce in l)l.hasOwnProperty(ce)&&(y=l[ce],this[ce]=y?y(L):L[ce]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?ma:Rl,this.isPropagationStopped=Rl,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=ma)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=ma)},persist:function(){},isPersistent:ma}),f}var vu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ih=Ui(vu),Eo=d({},vu,{view:0,detail:0}),Ep=Ui(Eo),Ap,Ph,df,Hh=d({},Eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qh,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==df&&(df&&l.type==="mousemove"?(Ap=l.screenX-df.screenX,Ph=l.screenY-df.screenY):Ph=Ap=0,df=l),Ap)},movementY:function(l){return"movementY"in l?l.movementY:Ph}}),Zy=Ui(Hh),Qi=d({},Hh,{dataTransfer:0}),Ky=Ui(Qi),Qy=d({},Eo,{relatedTarget:0}),wp=Ui(Qy),Jy=d({},vu,{animationName:0,elapsedTime:0,pseudoElement:0}),e1=Ui(Jy),Vh=d({},vu,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),tg=Ui(Vh),t1=d({},vu,{data:0}),ng=Ui(t1),n1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ig={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r1(l){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(l):(l=ig[l])?!!f[l]:!1}function qh(){return r1}var ag=d({},Eo,{key:function(l){if(l.key){var f=n1[l.key]||l.key;if(f!=="Unidentified")return f}return l.type==="keypress"?(l=mu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?rg[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qh,charCode:function(l){return l.type==="keypress"?mu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?mu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),sg=Ui(ag),i1=d({},Hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tp=Ui(i1),a1=d({},Eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qh}),Ol=Ui(a1),og=d({},vu,{propertyName:0,elapsedTime:0,pseudoElement:0}),MM=Ui(og),s1=d({},Hh,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),gu=Ui(s1),Bl=d({},vu,{newState:0,oldState:0}),lg=Ui(Bl),ug=[9,13,27,32],fc=Zr&&"CompositionEvent"in window,yu=null;Zr&&"documentMode"in document&&(yu=document.documentMode);var hc=Zr&&"TextEvent"in window&&!yu,Ji=Zr&&(!fc||yu&&8<yu&&11>=yu),Gh=" ",cg=!1;function Np(l,f){switch(l){case"keyup":return ug.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pf(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var xu=!1;function Dp(l,f){switch(l){case"compositionend":return pf(f);case"keypress":return f.which!==32?null:(cg=!0,Gh);case"textInput":return l=f.data,l===Gh&&cg?null:l;default:return null}}function o1(l,f){if(xu)return l==="compositionend"||!fc&&Np(l,f)?(l=Lh(),Mo=Fh=So=null,xu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Ji&&f.locale!=="ko"?null:f.data;default:return null}}var Ts={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f==="input"?!!Ts[l.type]:f==="textarea"}function Cp(l,f,y,S){Ra?_o?_o.push(S):_o=[S]:Ra=S,f=Q1(f,"onChange"),0<f.length&&(y=new Ih("onChange","change",null,y,S),l.push({event:y,listeners:f}))}var mf=null,vf=null;function hg(l){TT(l,0)}function gf(l){var f=Qe(l);if(Ki(f))return l}function dg(l,f){if(l==="change")return f}var kh=!1;if(Zr){var dc;if(Zr){var Kr="oninput"in document;if(!Kr){var l1=document.createElement("div");l1.setAttribute("oninput","return;"),Kr=typeof l1.oninput=="function"}dc=Kr}else dc=!1;kh=dc&&(!document.documentMode||9<document.documentMode)}function u1(){mf&&(mf.detachEvent("onpropertychange",pg),vf=mf=null)}function pg(l){if(l.propertyName==="value"&&gf(vf)){var f=[];Cp(f,vf,l,bo(l)),Wo(hg,f)}}function Xh(l,f,y){l==="focusin"?(u1(),mf=f,vf=y,mf.attachEvent("onpropertychange",pg)):l==="focusout"&&u1()}function bu(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return gf(vf)}function c1(l,f){if(l==="click")return gf(f)}function f1(l,f){if(l==="input"||l==="change")return gf(f)}function pc(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var Qr=typeof Object.is=="function"?Object.is:pc;function yf(l,f){if(Qr(l,f))return!0;if(typeof l!="object"||l===null||typeof f!="object"||f===null)return!1;var y=Object.keys(l),S=Object.keys(f);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var B=y[S];if(!Ze.call(f,B)||!Qr(l[B],f[B]))return!1}return!0}function mg(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function vg(l,f){var y=mg(l);l=0;for(var S;y;){if(y.nodeType===3){if(S=l+y.textContent.length,l<=f&&S>=f)return{node:y,offset:f-l};l=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=mg(y)}}function Rp(l,f){return l&&f?l===f?!0:l&&l.nodeType===3?!1:f&&f.nodeType===3?Rp(l,f.parentNode):"contains"in l?l.contains(f):l.compareDocumentPosition?!!(l.compareDocumentPosition(f)&16):!1:!1}function Op(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var f=ai(l.document);f instanceof l.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)l=f.contentWindow;else break;f=ai(l.document)}return f}function xf(l){var f=l&&l.nodeName&&l.nodeName.toLowerCase();return f&&(f==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||f==="textarea"||l.contentEditable==="true")}var h1=Zr&&"documentMode"in document&&11>=document.documentMode,bf=null,Bp=null,_f=null,Ns=!1;function Up(l,f,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Ns||bf==null||bf!==ai(S)||(S=bf,"selectionStart"in S&&xf(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),_f&&yf(_f,S)||(_f=S,S=Q1(Bp,"onSelect"),0<S.length&&(f=new Ih("onSelect","select",null,f,y),l.push({event:f,listeners:S}),f.target=bf)))}function _u(l,f){var y={};return y[l.toLowerCase()]=f.toLowerCase(),y["Webkit"+l]="webkit"+f,y["Moz"+l]="moz"+f,y}var Sf={animationend:_u("Animation","AnimationEnd"),animationiteration:_u("Animation","AnimationIteration"),animationstart:_u("Animation","AnimationStart"),transitionrun:_u("Transition","TransitionRun"),transitionstart:_u("Transition","TransitionStart"),transitioncancel:_u("Transition","TransitionCancel"),transitionend:_u("Transition","TransitionEnd")},jh={},Ba={};Zr&&(Ba=document.createElement("div").style,"AnimationEvent"in window||(delete Sf.animationend.animation,delete Sf.animationiteration.animation,delete Sf.animationstart.animation),"TransitionEvent"in window||delete Sf.transitionend.transition);function Su(l){if(jh[l])return jh[l];if(!Sf[l])return l;var f=Sf[l],y;for(y in f)if(f.hasOwnProperty(y)&&y in Ba)return jh[l]=f[y];return l}var Ka=Su("animationend"),gg=Su("animationiteration"),Zo=Su("animationstart"),Mf=Su("transitionrun"),Mu=Su("transitionstart"),yg=Su("transitioncancel"),zp=Su("transitionend"),Ul=new Map,Fp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fp.push("scrollEnd");function va(l,f){Ul.set(l,f),Tt(f,[l])}var Eu=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Gi=[],mc=0,Lp=0;function Au(){for(var l=mc,f=Lp=mc=0;f<l;){var y=Gi[f];Gi[f++]=null;var S=Gi[f];Gi[f++]=null;var B=Gi[f];Gi[f++]=null;var L=Gi[f];if(Gi[f++]=null,S!==null&&B!==null){var K=S.pending;K===null?B.next=B:(B.next=K.next,K.next=B),S.pending=B}L!==0&&Ip(y,B,L)}}function Yh(l,f,y,S){Gi[mc++]=l,Gi[mc++]=f,Gi[mc++]=y,Gi[mc++]=S,Lp|=S,l.lanes|=S,l=l.alternate,l!==null&&(l.lanes|=S)}function Ef(l,f,y,S){return Yh(l,f,y,S),Af(l)}function wu(l,f){return Yh(l,null,null,f),Af(l)}function Ip(l,f,y){l.lanes|=y;var S=l.alternate;S!==null&&(S.lanes|=y);for(var B=!1,L=l.return;L!==null;)L.childLanes|=y,S=L.alternate,S!==null&&(S.childLanes|=y),L.tag===22&&(l=L.stateNode,l===null||l._visibility&1||(B=!0)),l=L,L=L.return;return l.tag===3?(L=l.stateNode,B&&f!==null&&(B=31-ye(y),l=L.hiddenUpdates,S=l[B],S===null?l[B]=[f]:S.push(f),f.lane=y|536870912),L):null}function Af(l){if(50<Oc)throw Oc=0,Bc=null,Error(n(185));for(var f=l.return;f!==null;)l=f,f=l.return;return l.tag===3?l.stateNode:null}var Tu={};function d1(l,f,y,S){this.tag=l,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ua(l,f,y,S){return new d1(l,f,y,S)}function za(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ko(l,f){var y=l.alternate;return y===null?(y=Ua(l.tag,f,l.key,l.mode),y.elementType=l.elementType,y.type=l.type,y.stateNode=l.stateNode,y.alternate=l,l.alternate=y):(y.pendingProps=f,y.type=l.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=l.flags&65011712,y.childLanes=l.childLanes,y.lanes=l.lanes,y.child=l.child,y.memoizedProps=l.memoizedProps,y.memoizedState=l.memoizedState,y.updateQueue=l.updateQueue,f=l.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=l.sibling,y.index=l.index,y.ref=l.ref,y.refCleanup=l.refCleanup,y}function ga(l,f){l.flags&=65011714;var y=l.alternate;return y===null?(l.childLanes=0,l.lanes=f,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=y.childLanes,l.lanes=y.lanes,l.child=y.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=y.memoizedProps,l.memoizedState=y.memoizedState,l.updateQueue=y.updateQueue,l.type=y.type,f=y.dependencies,l.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),l}function Wh(l,f,y,S,B,L){var K=0;if(S=l,typeof l=="function")za(l)&&(K=1);else if(typeof l=="string")K=qI(l,y,J.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case C:return l=Ua(31,y,f,B),l.elementType=C,l.lanes=L,l;case b:return zl(y.children,B,L,f);case M:K=8,B|=24;break;case _:return l=Ua(12,y,f,B|2),l.elementType=_,l.lanes=L,l;case D:return l=Ua(13,y,f,B),l.elementType=D,l.lanes=L,l;case N:return l=Ua(19,y,f,B),l.elementType=N,l.lanes=L,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:K=10;break e;case T:K=9;break e;case A:K=11;break e;case O:K=14;break e;case z:K=16,S=null;break e}K=29,y=Error(n(130,l===null?"null":typeof l,"")),S=null}return f=Ua(K,y,f,B),f.elementType=l,f.type=S,f.lanes=L,f}function zl(l,f,y,S){return l=Ua(7,l,S,f),l.lanes=y,l}function Pp(l,f,y){return l=Ua(6,l,null,f),l.lanes=y,l}function p1(l){var f=Ua(18,null,null,0);return f.stateNode=l,f}function Ao(l,f,y){return f=Ua(4,l.children!==null?l.children:[],l.key,f),f.lanes=y,f.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},f}var xg=new WeakMap;function Qa(l,f){if(typeof l=="object"&&l!==null){var y=xg.get(l);return y!==void 0?y:(f={value:l,source:f,stack:Ye(f)},xg.set(l,f),f)}return{value:l,source:f,stack:Ye(f)}}var wo=[],vc=0,$h=null,wf=0,Ds=[],Ja=0,Qo=null,Jo=1,el="";function Fl(l,f){wo[vc++]=wf,wo[vc++]=$h,$h=l,wf=f}function bg(l,f,y){Ds[Ja++]=Jo,Ds[Ja++]=el,Ds[Ja++]=Qo,Qo=l;var S=Jo;l=el;var B=32-ye(S)-1;S&=~(1<<B),y+=1;var L=32-ye(f)+B;if(30<L){var K=B-B%5;L=(S&(1<<K)-1).toString(32),S>>=K,B-=K,Jo=1<<32-ye(f)+B|y<<B|S,el=L+l}else Jo=1<<L|y<<B|S,el=l}function Hp(l){l.return!==null&&(Fl(l,1),bg(l,1,0))}function Nu(l){for(;l===$h;)$h=wo[--vc],wo[vc]=null,wf=wo[--vc],wo[vc]=null;for(;l===Qo;)Qo=Ds[--Ja],Ds[Ja]=null,el=Ds[--Ja],Ds[Ja]=null,Jo=Ds[--Ja],Ds[Ja]=null}function Zh(l,f){Ds[Ja++]=Jo,Ds[Ja++]=el,Ds[Ja++]=Qo,Jo=f.id,el=f.overflow,Qo=l}var ki=null,Gr=null,Zn=!1,Ll=null,Xi=!1,Vp=Error(n(519));function jn(l){var f=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kh(Qa(f,l)),Vp}function qp(l){var f=l.stateNode,y=l.type,S=l.memoizedProps;switch(f[tn]=l,f[zr]=S,y){case"dialog":Kn("cancel",f),Kn("close",f);break;case"iframe":case"object":case"embed":Kn("load",f);break;case"video":case"audio":for(y=0;y<h0.length;y++)Kn(h0[y],f);break;case"source":Kn("error",f);break;case"img":case"image":case"link":Kn("error",f),Kn("load",f);break;case"details":Kn("toggle",f);break;case"input":Kn("invalid",f),Yt(f,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":Kn("invalid",f);break;case"textarea":Kn("invalid",f),er(f,S.value,S.defaultValue,S.children)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||S.suppressHydrationWarning===!0||RT(f.textContent,y)?(S.popover!=null&&(Kn("beforetoggle",f),Kn("toggle",f)),S.onScroll!=null&&Kn("scroll",f),S.onScrollEnd!=null&&Kn("scrollend",f),S.onClick!=null&&(f.onclick=lr),f=!0):f=!1,f||jn(l,!0)}function m1(l){for(ki=l.return;ki;)switch(ki.tag){case 5:case 31:case 13:Xi=!1;return;case 27:case 3:Xi=!0;return;default:ki=ki.return}}function gc(l){if(l!==ki)return!1;if(!Zn)return m1(l),Zn=!0,!1;var f=l.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=l.type,y=!(y!=="form"&&y!=="button")||GM(l.type,l.memoizedProps)),y=!y),y&&Gr&&jn(l),m1(l),f===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Gr=HT(l)}else if(f===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Gr=HT(l)}else f===27?(f=Gr,Xf(l.type)?(l=WM,WM=null,Gr=l):Gr=f):Gr=ki?fl(l.stateNode.nextSibling):null;return!0}function yc(){Gr=ki=null,Zn=!1}function _g(){var l=Ll;return l!==null&&(Ma===null?Ma=l:Ma.push.apply(Ma,l),Ll=null),l}function Kh(l){Ll===null?Ll=[l]:Ll.push(l)}var Sg=Q(null),Il=null,ya=null;function Pl(l,f,y){ae(Sg,f._currentValue),f._currentValue=y}function eo(l){l._currentValue=Sg.current,k(Sg)}function Hl(l,f,y){for(;l!==null;){var S=l.alternate;if((l.childLanes&f)!==f?(l.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),l===y)break;l=l.return}}function Gp(l,f,y,S){var B=l.child;for(B!==null&&(B.return=l);B!==null;){var L=B.dependencies;if(L!==null){var K=B.child;L=L.firstContext;e:for(;L!==null;){var ce=L;L=B;for(var Oe=0;Oe<f.length;Oe++)if(ce.context===f[Oe]){L.lanes|=y,ce=L.alternate,ce!==null&&(ce.lanes|=y),Hl(L.return,y,l),S||(K=null);break e}L=ce.next}}else if(B.tag===18){if(K=B.return,K===null)throw Error(n(341));K.lanes|=y,L=K.alternate,L!==null&&(L.lanes|=y),Hl(K,y,l),K=null}else K=B.child;if(K!==null)K.return=B;else for(K=B;K!==null;){if(K===l){K=null;break}if(B=K.sibling,B!==null){B.return=K.return,K=B;break}K=K.return}B=K}}function Du(l,f,y,S){l=null;for(var B=f,L=!1;B!==null;){if(!L){if((B.flags&524288)!==0)L=!0;else if((B.flags&262144)!==0)break}if(B.tag===10){var K=B.alternate;if(K===null)throw Error(n(387));if(K=K.memoizedProps,K!==null){var ce=B.type;Qr(B.pendingProps.value,K.value)||(l!==null?l.push(ce):l=[ce])}}else if(B===_e.current){if(K=B.alternate,K===null)throw Error(n(387));K.memoizedState.memoizedState!==B.memoizedState.memoizedState&&(l!==null?l.push(g0):l=[g0])}B=B.return}l!==null&&Gp(f,l,y,S),f.flags|=262144}function Tf(l){for(l=l.firstContext;l!==null;){if(!Qr(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function xc(l){Il=l,ya=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ji(l){return Mg(Il,l)}function Qh(l,f){return Il===null&&xc(l),Mg(l,f)}function Mg(l,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},ya===null){if(l===null)throw Error(n(308));ya=f,l.dependencies={lanes:0,firstContext:f},l.flags|=524288}else ya=ya.next=f;return y}var v1=typeof AbortController<"u"?AbortController:function(){var l=[],f=this.signal={aborted:!1,addEventListener:function(y,S){l.push(S)}};this.abort=function(){f.aborted=!0,l.forEach(function(y){return y()})}},g1=r.unstable_scheduleCallback,Eg=r.unstable_NormalPriority,Zt={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ag(){return{controller:new v1,data:new Map,refCount:0}}function ea(l){l.refCount--,l.refCount===0&&g1(Eg,function(){l.controller.abort()})}var bc=null,wg=0,Vl=0,To=null;function Nf(l,f){if(bc===null){var y=bc=[];wg=0,Vl=UM(),To={status:"pending",value:void 0,then:function(S){y.push(S)}}}return wg++,f.then(Tg,Tg),f}function Tg(){if(--wg===0&&bc!==null){To!==null&&(To.status="fulfilled");var l=bc;bc=null,Vl=0,To=null;for(var f=0;f<l.length;f++)(0,l[f])()}}function Ng(l,f){var y=[],S={status:"pending",value:null,reason:null,then:function(B){y.push(B)}};return l.then(function(){S.status="fulfilled",S.value=f;for(var B=0;B<y.length;B++)(0,y[B])(f)},function(B){for(S.status="rejected",S.reason=B,B=0;B<y.length;B++)(0,y[B])(void 0)}),S}var y1=I.S;I.S=function(l,f){qf=V(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&Nf(l,f),y1!==null&&y1(l,f)};var Cu=Q(null);function tl(){var l=Cu.current;return l!==null?l:_r.pooledCache}function Df(l,f){f===null?ae(Cu,Cu.current):ae(Cu,f.pool)}function kp(){var l=tl();return l===null?null:{parent:Zt._currentValue,pool:l}}var Ru=Error(n(460)),Jh=Error(n(474)),No=Error(n(542)),ed={then:function(){}};function x1(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Dg(l,f,y){switch(y=l[y],y===void 0?l.push(f):y!==f&&(f.then(lr,lr),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,Cg(l),l;default:if(typeof f.status=="string")f.then(lr,lr);else{if(l=_r,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=f,l.status="pending",l.then(function(S){if(f.status==="pending"){var B=f;B.status="fulfilled",B.value=S}},function(S){if(f.status==="pending"){var B=f;B.status="rejected",B.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw l=f.reason,Cg(l),l}throw an=f,Ru}}function _c(l){try{var f=l._init;return f(l._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(an=y,Ru):y}}var an=null;function Xp(){if(an===null)throw Error(n(459));var l=an;return an=null,l}function Cg(l){if(l===Ru||l===No)throw Error(n(483))}var Ou=null,Bu=0;function jp(l){var f=Bu;return Bu+=1,Ou===null&&(Ou=[]),Dg(Ou,l,f)}function td(l,f){f=f.props.ref,l.ref=f!==void 0?f:null}function nd(l,f){throw f.$$typeof===m?Error(n(525)):(l=Object.prototype.toString.call(f),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":l)))}function Cf(l){function f(Xe,Ie){if(l){var Ke=Xe.deletions;Ke===null?(Xe.deletions=[Ie],Xe.flags|=16):Ke.push(Ie)}}function y(Xe,Ie){if(!l)return null;for(;Ie!==null;)f(Xe,Ie),Ie=Ie.sibling;return null}function S(Xe){for(var Ie=new Map;Xe!==null;)Xe.key!==null?Ie.set(Xe.key,Xe):Ie.set(Xe.index,Xe),Xe=Xe.sibling;return Ie}function B(Xe,Ie){return Xe=Ko(Xe,Ie),Xe.index=0,Xe.sibling=null,Xe}function L(Xe,Ie,Ke){return Xe.index=Ke,l?(Ke=Xe.alternate,Ke!==null?(Ke=Ke.index,Ke<Ie?(Xe.flags|=67108866,Ie):Ke):(Xe.flags|=67108866,Ie)):(Xe.flags|=1048576,Ie)}function K(Xe){return l&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function ce(Xe,Ie,Ke,yt){return Ie===null||Ie.tag!==6?(Ie=Pp(Ke,Xe.mode,yt),Ie.return=Xe,Ie):(Ie=B(Ie,Ke),Ie.return=Xe,Ie)}function Oe(Xe,Ie,Ke,yt){var en=Ke.type;return en===b?dt(Xe,Ie,Ke.props.children,yt,Ke.key):Ie!==null&&(Ie.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===z&&_c(en)===Ie.type)?(Ie=B(Ie,Ke.props),td(Ie,Ke),Ie.return=Xe,Ie):(Ie=Wh(Ke.type,Ke.key,Ke.props,null,Xe.mode,yt),td(Ie,Ke),Ie.return=Xe,Ie)}function Je(Xe,Ie,Ke,yt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ke.containerInfo||Ie.stateNode.implementation!==Ke.implementation?(Ie=Ao(Ke,Xe.mode,yt),Ie.return=Xe,Ie):(Ie=B(Ie,Ke.children||[]),Ie.return=Xe,Ie)}function dt(Xe,Ie,Ke,yt,en){return Ie===null||Ie.tag!==7?(Ie=zl(Ke,Xe.mode,yt,en),Ie.return=Xe,Ie):(Ie=B(Ie,Ke),Ie.return=Xe,Ie)}function xt(Xe,Ie,Ke){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=Pp(""+Ie,Xe.mode,Ke),Ie.return=Xe,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case v:return Ke=Wh(Ie.type,Ie.key,Ie.props,null,Xe.mode,Ke),td(Ke,Ie),Ke.return=Xe,Ke;case x:return Ie=Ao(Ie,Xe.mode,Ke),Ie.return=Xe,Ie;case z:return Ie=_c(Ie),xt(Xe,Ie,Ke)}if(Y(Ie)||H(Ie))return Ie=zl(Ie,Xe.mode,Ke,null),Ie.return=Xe,Ie;if(typeof Ie.then=="function")return xt(Xe,jp(Ie),Ke);if(Ie.$$typeof===E)return xt(Xe,Qh(Xe,Ie),Ke);nd(Xe,Ie)}return null}function nt(Xe,Ie,Ke,yt){var en=Ie!==null?Ie.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return en!==null?null:ce(Xe,Ie,""+Ke,yt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case v:return Ke.key===en?Oe(Xe,Ie,Ke,yt):null;case x:return Ke.key===en?Je(Xe,Ie,Ke,yt):null;case z:return Ke=_c(Ke),nt(Xe,Ie,Ke,yt)}if(Y(Ke)||H(Ke))return en!==null?null:dt(Xe,Ie,Ke,yt,null);if(typeof Ke.then=="function")return nt(Xe,Ie,jp(Ke),yt);if(Ke.$$typeof===E)return nt(Xe,Ie,Qh(Xe,Ke),yt);nd(Xe,Ke)}return null}function lt(Xe,Ie,Ke,yt,en){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return Xe=Xe.get(Ke)||null,ce(Ie,Xe,""+yt,en);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case v:return Xe=Xe.get(yt.key===null?Ke:yt.key)||null,Oe(Ie,Xe,yt,en);case x:return Xe=Xe.get(yt.key===null?Ke:yt.key)||null,Je(Ie,Xe,yt,en);case z:return yt=_c(yt),lt(Xe,Ie,Ke,yt,en)}if(Y(yt)||H(yt))return Xe=Xe.get(Ke)||null,dt(Ie,Xe,yt,en,null);if(typeof yt.then=="function")return lt(Xe,Ie,Ke,jp(yt),en);if(yt.$$typeof===E)return lt(Xe,Ie,Ke,Qh(Ie,yt),en);nd(Ie,yt)}return null}function kt(Xe,Ie,Ke,yt){for(var en=null,Mr=null,jt=Ie,Hn=Ie=0,ir=null;jt!==null&&Hn<Ke.length;Hn++){jt.index>Hn?(ir=jt,jt=null):ir=jt.sibling;var Er=nt(Xe,jt,Ke[Hn],yt);if(Er===null){jt===null&&(jt=ir);break}l&&jt&&Er.alternate===null&&f(Xe,jt),Ie=L(Er,Ie,Hn),Mr===null?en=Er:Mr.sibling=Er,Mr=Er,jt=ir}if(Hn===Ke.length)return y(Xe,jt),Zn&&Fl(Xe,Hn),en;if(jt===null){for(;Hn<Ke.length;Hn++)jt=xt(Xe,Ke[Hn],yt),jt!==null&&(Ie=L(jt,Ie,Hn),Mr===null?en=jt:Mr.sibling=jt,Mr=jt);return Zn&&Fl(Xe,Hn),en}for(jt=S(jt);Hn<Ke.length;Hn++)ir=lt(jt,Xe,Hn,Ke[Hn],yt),ir!==null&&(l&&ir.alternate!==null&&jt.delete(ir.key===null?Hn:ir.key),Ie=L(ir,Ie,Hn),Mr===null?en=ir:Mr.sibling=ir,Mr=ir);return l&&jt.forEach(function(Zf){return f(Xe,Zf)}),Zn&&Fl(Xe,Hn),en}function un(Xe,Ie,Ke,yt){if(Ke==null)throw Error(n(151));for(var en=null,Mr=null,jt=Ie,Hn=Ie=0,ir=null,Er=Ke.next();jt!==null&&!Er.done;Hn++,Er=Ke.next()){jt.index>Hn?(ir=jt,jt=null):ir=jt.sibling;var Zf=nt(Xe,jt,Er.value,yt);if(Zf===null){jt===null&&(jt=ir);break}l&&jt&&Zf.alternate===null&&f(Xe,jt),Ie=L(Zf,Ie,Hn),Mr===null?en=Zf:Mr.sibling=Zf,Mr=Zf,jt=ir}if(Er.done)return y(Xe,jt),Zn&&Fl(Xe,Hn),en;if(jt===null){for(;!Er.done;Hn++,Er=Ke.next())Er=xt(Xe,Er.value,yt),Er!==null&&(Ie=L(Er,Ie,Hn),Mr===null?en=Er:Mr.sibling=Er,Mr=Er);return Zn&&Fl(Xe,Hn),en}for(jt=S(jt);!Er.done;Hn++,Er=Ke.next())Er=lt(jt,Xe,Hn,Er.value,yt),Er!==null&&(l&&Er.alternate!==null&&jt.delete(Er.key===null?Hn:Er.key),Ie=L(Er,Ie,Hn),Mr===null?en=Er:Mr.sibling=Er,Mr=Er);return l&&jt.forEach(function(JI){return f(Xe,JI)}),Zn&&Fl(Xe,Hn),en}function jr(Xe,Ie,Ke,yt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===b&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case v:e:{for(var en=Ke.key;Ie!==null;){if(Ie.key===en){if(en=Ke.type,en===b){if(Ie.tag===7){y(Xe,Ie.sibling),yt=B(Ie,Ke.props.children),yt.return=Xe,Xe=yt;break e}}else if(Ie.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===z&&_c(en)===Ie.type){y(Xe,Ie.sibling),yt=B(Ie,Ke.props),td(yt,Ke),yt.return=Xe,Xe=yt;break e}y(Xe,Ie);break}else f(Xe,Ie);Ie=Ie.sibling}Ke.type===b?(yt=zl(Ke.props.children,Xe.mode,yt,Ke.key),yt.return=Xe,Xe=yt):(yt=Wh(Ke.type,Ke.key,Ke.props,null,Xe.mode,yt),td(yt,Ke),yt.return=Xe,Xe=yt)}return K(Xe);case x:e:{for(en=Ke.key;Ie!==null;){if(Ie.key===en)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ke.containerInfo&&Ie.stateNode.implementation===Ke.implementation){y(Xe,Ie.sibling),yt=B(Ie,Ke.children||[]),yt.return=Xe,Xe=yt;break e}else{y(Xe,Ie);break}else f(Xe,Ie);Ie=Ie.sibling}yt=Ao(Ke,Xe.mode,yt),yt.return=Xe,Xe=yt}return K(Xe);case z:return Ke=_c(Ke),jr(Xe,Ie,Ke,yt)}if(Y(Ke))return kt(Xe,Ie,Ke,yt);if(H(Ke)){if(en=H(Ke),typeof en!="function")throw Error(n(150));return Ke=en.call(Ke),un(Xe,Ie,Ke,yt)}if(typeof Ke.then=="function")return jr(Xe,Ie,jp(Ke),yt);if(Ke.$$typeof===E)return jr(Xe,Ie,Qh(Xe,Ke),yt);nd(Xe,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Ie!==null&&Ie.tag===6?(y(Xe,Ie.sibling),yt=B(Ie,Ke),yt.return=Xe,Xe=yt):(y(Xe,Ie),yt=Pp(Ke,Xe.mode,yt),yt.return=Xe,Xe=yt),K(Xe)):y(Xe,Ie)}return function(Xe,Ie,Ke,yt){try{Bu=0;var en=jr(Xe,Ie,Ke,yt);return Ou=null,en}catch(jt){if(jt===Ru||jt===No)throw jt;var Mr=Ua(29,jt,null,Xe.mode);return Mr.lanes=yt,Mr.return=Xe,Mr}finally{}}}var Sc=Cf(!0),b1=Cf(!1),Uu=!1;function Rg(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Og(l,f){l=l.updateQueue,f.updateQueue===l&&(f.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function nl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ql(l,f,y){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(nr&2)!==0){var B=S.pending;return B===null?f.next=f:(f.next=B.next,B.next=f),S.pending=f,f=Af(l),Ip(l,null,y),f}return Yh(l,S,f,y),Af(l)}function zu(l,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var S=f.lanes;S&=l.pendingLanes,y|=S,f.lanes=y,_i(l,y)}}function Yp(l,f){var y=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var B=null,L=null;if(y=y.firstBaseUpdate,y!==null){do{var K={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};L===null?B=L=K:L=L.next=K,y=y.next}while(y!==null);L===null?B=L=f:L=L.next=f}else B=L=f;y={baseState:S.baseState,firstBaseUpdate:B,lastBaseUpdate:L,shared:S.shared,callbacks:S.callbacks},l.updateQueue=y;return}l=y.lastBaseUpdate,l===null?y.firstBaseUpdate=f:l.next=f,y.lastBaseUpdate=f}var Bg=!1;function rd(){if(Bg){var l=To;if(l!==null)throw l}}function Mc(l,f,y,S){Bg=!1;var B=l.updateQueue;Uu=!1;var L=B.firstBaseUpdate,K=B.lastBaseUpdate,ce=B.shared.pending;if(ce!==null){B.shared.pending=null;var Oe=ce,Je=Oe.next;Oe.next=null,K===null?L=Je:K.next=Je,K=Oe;var dt=l.alternate;dt!==null&&(dt=dt.updateQueue,ce=dt.lastBaseUpdate,ce!==K&&(ce===null?dt.firstBaseUpdate=Je:ce.next=Je,dt.lastBaseUpdate=Oe))}if(L!==null){var xt=B.baseState;K=0,dt=Je=Oe=null,ce=L;do{var nt=ce.lane&-536870913,lt=nt!==ce.lane;if(lt?(Yn&nt)===nt:(S&nt)===nt){nt!==0&&nt===Vl&&(Bg=!0),dt!==null&&(dt=dt.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var kt=l,un=ce;nt=f;var jr=y;switch(un.tag){case 1:if(kt=un.payload,typeof kt=="function"){xt=kt.call(jr,xt,nt);break e}xt=kt;break e;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=un.payload,nt=typeof kt=="function"?kt.call(jr,xt,nt):kt,nt==null)break e;xt=d({},xt,nt);break e;case 2:Uu=!0}}nt=ce.callback,nt!==null&&(l.flags|=64,lt&&(l.flags|=8192),lt=B.callbacks,lt===null?B.callbacks=[nt]:lt.push(nt))}else lt={lane:nt,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},dt===null?(Je=dt=lt,Oe=xt):dt=dt.next=lt,K|=nt;if(ce=ce.next,ce===null){if(ce=B.shared.pending,ce===null)break;lt=ce,ce=lt.next,lt.next=null,B.lastBaseUpdate=lt,B.shared.pending=null}}while(!0);dt===null&&(Oe=xt),B.baseState=Oe,B.firstBaseUpdate=Je,B.lastBaseUpdate=dt,L===null&&(B.shared.lanes=0),Hs|=K,l.lanes=K,l.memoizedState=xt}}function rl(l,f){if(typeof l!="function")throw Error(n(191,l));l.call(f)}function ta(l,f){var y=l.callbacks;if(y!==null)for(l.callbacks=null,l=0;l<y.length;l++)rl(y[l],f)}var Cs=Q(null),Fa=Q(0);function Ug(l,f){l=yi,ae(Fa,l),ae(Cs,f),yi=l|f.baseLanes}function zg(){ae(Fa,yi),ae(Cs,Cs.current)}function xa(){yi=Fa.current,k(Cs),k(Fa)}var zi=Q(null),to=null;function Fu(l){var f=l.alternate;ae(si,si.current&1),ae(zi,l),to===null&&(f===null||Cs.current!==null||f.memoizedState!==null)&&(to=l)}function Fg(l){ae(si,si.current),ae(zi,l),to===null&&(to=l)}function _1(l){l.tag===22?(ae(si,si.current),ae(zi,l),to===null&&(to=l)):Gl()}function Gl(){ae(si,si.current),ae(zi,zi.current)}function Rs(l){k(zi),to===l&&(to=null),k(si)}var si=Q(0);function Wp(l){for(var f=l;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||jM(y)||YM(y)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var es=0,hn=null,Or=null,Mi=null,$p=!1,il=!1,Ec=!1,Zp=0,id=0,al=null,EM=0;function oi(){throw Error(n(321))}function Lg(l,f){if(f===null)return!1;for(var y=0;y<f.length&&y<l.length;y++)if(!Qr(l[y],f[y]))return!1;return!0}function Ig(l,f,y,S,B,L){return es=L,hn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,I.H=l===null||l.memoizedState===null?V1:Bf,Ec=!1,L=y(S,B),Ec=!1,il&&(L=M1(f,y,S,B)),S1(l),L}function S1(l){I.H=ud;var f=Or!==null&&Or.next!==null;if(es=0,Mi=Or=hn=null,$p=!1,id=0,al=null,f)throw Error(n(300));l===null||Jr||(l=l.dependencies,l!==null&&Tf(l)&&(Jr=!0))}function M1(l,f,y,S){hn=l;var B=0;do{if(il&&(al=null),id=0,il=!1,25<=B)throw Error(n(301));if(B+=1,Mi=Or=null,l.updateQueue!=null){var L=l.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}I.H=cd,L=f(y,S)}while(il);return L}function AM(){var l=I.H,f=l.useState()[0];return f=typeof f.then=="function"?sd(f):f,l=l.useState()[0],(Or!==null?Or.memoizedState:null)!==l&&(hn.flags|=1024),f}function Pg(){var l=Zp!==0;return Zp=0,l}function Hg(l,f,y){f.updateQueue=l.updateQueue,f.flags&=-2053,l.lanes&=~y}function Vg(l){if($p){for(l=l.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}$p=!1}es=0,Mi=Or=hn=null,il=!1,id=Zp=0,al=null}function La(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mi===null?hn.memoizedState=Mi=l:Mi=Mi.next=l,Mi}function pi(){if(Or===null){var l=hn.alternate;l=l!==null?l.memoizedState:null}else l=Or.next;var f=Mi===null?hn.memoizedState:Mi.next;if(f!==null)Mi=f,Or=l;else{if(l===null)throw hn.alternate===null?Error(n(467)):Error(n(310));Or=l,l={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},Mi===null?hn.memoizedState=Mi=l:Mi=Mi.next=l}return Mi}function ad(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sd(l){var f=id;return id+=1,al===null&&(al=[]),l=Dg(al,l,f),f=hn,(Mi===null?f.memoizedState:Mi.next)===null&&(f=f.alternate,I.H=f===null||f.memoizedState===null?V1:Bf),l}function Kp(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return sd(l);if(l.$$typeof===E)return ji(l)}throw Error(n(438,String(l)))}function qg(l){var f=null,y=hn.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var S=hn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(B){return B.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=ad(),hn.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(l),S=0;S<l;S++)y[S]=R;return f.index++,y}function kl(l,f){return typeof f=="function"?f(l):f}function Qp(l){var f=pi();return Gg(f,Or,l)}function Gg(l,f,y){var S=l.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=y;var B=l.baseQueue,L=S.pending;if(L!==null){if(B!==null){var K=B.next;B.next=L.next,L.next=K}f.baseQueue=B=L,S.pending=null}if(L=l.baseState,B===null)l.memoizedState=L;else{f=B.next;var ce=K=null,Oe=null,Je=f,dt=!1;do{var xt=Je.lane&-536870913;if(xt!==Je.lane?(Yn&xt)===xt:(es&xt)===xt){var nt=Je.revertLane;if(nt===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),xt===Vl&&(dt=!0);else if((es&nt)===nt){Je=Je.next,nt===Vl&&(dt=!0);continue}else xt={lane:0,revertLane:Je.revertLane,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Oe===null?(ce=Oe=xt,K=L):Oe=Oe.next=xt,hn.lanes|=nt,Hs|=nt;xt=Je.action,Ec&&y(L,xt),L=Je.hasEagerState?Je.eagerState:y(L,xt)}else nt={lane:xt,revertLane:Je.revertLane,gesture:Je.gesture,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Oe===null?(ce=Oe=nt,K=L):Oe=Oe.next=nt,hn.lanes|=xt,Hs|=xt;Je=Je.next}while(Je!==null&&Je!==f);if(Oe===null?K=L:Oe.next=ce,!Qr(L,l.memoizedState)&&(Jr=!0,dt&&(y=To,y!==null)))throw y;l.memoizedState=L,l.baseState=K,l.baseQueue=Oe,S.lastRenderedState=L}return B===null&&(S.lanes=0),[l.memoizedState,S.dispatch]}function Jp(l){var f=pi(),y=f.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=l;var S=y.dispatch,B=y.pending,L=f.memoizedState;if(B!==null){y.pending=null;var K=B=B.next;do L=l(L,K.action),K=K.next;while(K!==B);Qr(L,f.memoizedState)||(Jr=!0),f.memoizedState=L,f.baseQueue===null&&(f.baseState=L),y.lastRenderedState=L}return[L,S]}function kg(l,f,y){var S=hn,B=pi(),L=Zn;if(L){if(y===void 0)throw Error(n(407));y=y()}else y=f();var K=!Qr((Or||B).memoizedState,y);if(K&&(B.memoizedState=y,Jr=!0),B=B.queue,$g(jg.bind(null,S,B,l),[l]),B.getSnapshot!==f||K||Mi!==null&&Mi.memoizedState.tag&1){if(S.flags|=2048,Rf(9,{destroy:void 0},Xg.bind(null,S,B,y,f),null),_r===null)throw Error(n(349));L||(es&127)!==0||E1(S,f,y)}return y}function E1(l,f,y){l.flags|=16384,l={getSnapshot:f,value:y},f=hn.updateQueue,f===null?(f=ad(),hn.updateQueue=f,f.stores=[l]):(y=f.stores,y===null?f.stores=[l]:y.push(l))}function Xg(l,f,y,S){f.value=y,f.getSnapshot=S,Yg(f)&&em(l)}function jg(l,f,y){return y(function(){Yg(f)&&em(l)})}function Yg(l){var f=l.getSnapshot;l=l.value;try{var y=f();return!Qr(l,y)}catch{return!0}}function em(l){var f=wu(l,2);f!==null&&g(f,l,2)}function od(l){var f=La();if(typeof l=="function"){var y=l;if(l=y(),Ec){St(!0);try{y()}finally{St(!1)}}}return f.memoizedState=f.baseState=l,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:l},f}function A1(l,f,y,S){return l.baseState=y,Gg(l,Or,typeof S=="function"?S:kl)}function wM(l,f,y,S,B){if(Xl(l))throw Error(n(485));if(l=f.action,l!==null){var L={payload:B,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){L.listeners.push(K)}};I.T!==null?y(!0):L.isTransition=!1,S(L),y=f.pending,y===null?(L.next=f.pending=L,w1(f,L)):(L.next=y.next,f.pending=y.next=L)}}function w1(l,f){var y=f.action,S=f.payload,B=l.state;if(f.isTransition){var L=I.T,K={};I.T=K;try{var ce=y(B,S),Oe=I.S;Oe!==null&&Oe(K,ce),T1(l,f,ce)}catch(Je){tm(l,f,Je)}finally{L!==null&&K.types!==null&&(L.types=K.types),I.T=L}}else try{L=y(B,S),T1(l,f,L)}catch(Je){tm(l,f,Je)}}function T1(l,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){Wg(l,f,S)},function(S){return tm(l,f,S)}):Wg(l,f,y)}function Wg(l,f,y){f.status="fulfilled",f.value=y,N1(f),l.state=y,f=l.pending,f!==null&&(y=f.next,y===f?l.pending=null:(y=y.next,f.next=y,w1(l,y)))}function tm(l,f,y){var S=l.pending;if(l.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=y,N1(f),f=f.next;while(f!==S)}l.action=null}function N1(l){l=l.listeners;for(var f=0;f<l.length;f++)(0,l[f])()}function D1(l,f){return f}function C1(l,f){if(Zn){var y=_r.formState;if(y!==null){e:{var S=hn;if(Zn){if(Gr){t:{for(var B=Gr,L=Xi;B.nodeType!==8;){if(!L){B=null;break t}if(B=fl(B.nextSibling),B===null){B=null;break t}}L=B.data,B=L==="F!"||L==="F"?B:null}if(B){Gr=fl(B.nextSibling),S=B.data==="F!";break e}}jn(S)}S=!1}S&&(f=y[0])}}return y=La(),y.memoizedState=y.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:D1,lastRenderedState:f},y.queue=S,y=H1.bind(null,hn,S),S.dispatch=y,S=od(!1),L=ld.bind(null,hn,!1,S.queue),S=La(),B={state:f,dispatch:null,action:l,pending:null},S.queue=B,y=wM.bind(null,hn,B,L,y),B.dispatch=y,S.memoizedState=l,[f,y,!1]}function R1(l){var f=pi();return O1(f,Or,l)}function O1(l,f,y){if(f=Gg(l,f,D1)[0],l=Qp(kl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var S=sd(f)}catch(K){throw K===Ru?No:K}else S=f;f=pi();var B=f.queue,L=B.dispatch;return y!==f.memoizedState&&(hn.flags|=2048,Rf(9,{destroy:void 0},TM.bind(null,B,y),null)),[S,L,l]}function TM(l,f){l.action=f}function B1(l){var f=pi(),y=Or;if(y!==null)return O1(f,y,l);pi(),f=f.memoizedState,y=pi();var S=y.queue.dispatch;return y.memoizedState=l,[f,S,!1]}function Rf(l,f,y,S){return l={tag:l,create:y,deps:S,inst:f,next:null},f=hn.updateQueue,f===null&&(f=ad(),hn.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=l.next=l:(S=y.next,y.next=l,l.next=S,f.lastEffect=l),l}function U1(){return pi().memoizedState}function nm(l,f,y,S){var B=La();hn.flags|=l,B.memoizedState=Rf(1|f,{destroy:void 0},y,S===void 0?null:S)}function rm(l,f,y,S){var B=pi();S=S===void 0?null:S;var L=B.memoizedState.inst;Or!==null&&S!==null&&Lg(S,Or.memoizedState.deps)?B.memoizedState=Rf(f,L,y,S):(hn.flags|=l,B.memoizedState=Rf(1|f,L,y,S))}function z1(l,f){nm(8390656,8,l,f)}function $g(l,f){rm(2048,8,l,f)}function F1(l){hn.flags|=4;var f=hn.updateQueue;if(f===null)f=ad(),hn.updateQueue=f,f.events=[l];else{var y=f.events;y===null?f.events=[l]:y.push(l)}}function L1(l){var f=pi().memoizedState;return F1({ref:f,nextImpl:l}),function(){if((nr&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}function I1(l,f){return rm(4,2,l,f)}function Os(l,f){return rm(4,4,l,f)}function Zg(l,f){if(typeof f=="function"){l=l();var y=f(l);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return l=l(),f.current=l,function(){f.current=null}}function im(l,f,y){y=y!=null?y.concat([l]):null,rm(4,4,Zg.bind(null,f,l),y)}function am(){}function Kg(l,f){var y=pi();f=f===void 0?null:f;var S=y.memoizedState;return f!==null&&Lg(f,S[1])?S[0]:(y.memoizedState=[l,f],l)}function Qg(l,f){var y=pi();f=f===void 0?null:f;var S=y.memoizedState;if(f!==null&&Lg(f,S[1]))return S[0];if(S=l(),Ec){St(!0);try{l()}finally{St(!1)}}return y.memoizedState=[S,f],S}function Jg(l,f,y){return y===void 0||(es&1073741824)!==0&&(Yn&261930)===0?l.memoizedState=f:(l.memoizedState=y,l=p(),hn.lanes|=l,Hs|=l,y)}function e0(l,f,y,S){return Qr(y,f)?y:Cs.current!==null?(l=Jg(l,y,S),Qr(l,f)||(Jr=!0),l):(es&42)===0||(es&1073741824)!==0&&(Yn&261930)===0?(Jr=!0,l.memoizedState=y):(l=p(),hn.lanes|=l,Hs|=l,f)}function t0(l,f,y,S,B){var L=Z.p;Z.p=L!==0&&8>L?L:8;var K=I.T,ce={};I.T=ce,ld(l,!1,f,y);try{var Oe=B(),Je=I.S;if(Je!==null&&Je(ce,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var dt=Ng(Oe,S);Of(l,f,dt,Pa(l))}else Of(l,f,S,Pa(l))}catch(xt){Of(l,f,{then:function(){},status:"rejected",reason:xt},Pa())}finally{Z.p=L,K!==null&&ce.types!==null&&(K.types=ce.types),I.T=K}}function NM(){}function n0(l,f,y,S){if(l.tag!==5)throw Error(n(476));var B=P1(l).queue;t0(l,B,f,W,y===null?NM:function(){return r0(l),y(S)})}function P1(l){var f=l.memoizedState;if(f!==null)return f;f={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:W},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:y},next:null},l.memoizedState=f,l=l.alternate,l!==null&&(l.memoizedState=f),f}function r0(l){var f=P1(l);f.next===null&&(f=l.alternate.memoizedState),Of(l,f.next.queue,{},Pa())}function i0(){return ji(g0)}function na(){return pi().memoizedState}function a0(){return pi().memoizedState}function DM(l){for(var f=l.return;f!==null;){switch(f.tag){case 24:case 3:var y=Pa();l=nl(y);var S=ql(f,l,y);S!==null&&(g(S,f,y),zu(S,f,y)),f={cache:Ag()},l.payload=f;return}f=f.return}}function CM(l,f,y){var S=Pa();y={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Xl(l)?Ac(f,y):(y=Ef(l,f,y,S),y!==null&&(g(y,l,S),ts(y,f,S)))}function H1(l,f,y){var S=Pa();Of(l,f,y,S)}function Of(l,f,y,S){var B={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(Xl(l))Ac(f,B);else{var L=l.alternate;if(l.lanes===0&&(L===null||L.lanes===0)&&(L=f.lastRenderedReducer,L!==null))try{var K=f.lastRenderedState,ce=L(K,y);if(B.hasEagerState=!0,B.eagerState=ce,Qr(ce,K))return Yh(l,f,B,0),_r===null&&Au(),!1}catch{}finally{}if(y=Ef(l,f,B,S),y!==null)return g(y,l,S),ts(y,f,S),!0}return!1}function ld(l,f,y,S){if(S={lane:2,revertLane:UM(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},Xl(l)){if(f)throw Error(n(479))}else f=Ef(l,y,S,2),f!==null&&g(f,l,2)}function Xl(l){var f=l.alternate;return l===hn||f!==null&&f===hn}function Ac(l,f){il=$p=!0;var y=l.pending;y===null?f.next=f:(f.next=y.next,y.next=f),l.pending=f}function ts(l,f,y){if((y&4194048)!==0){var S=f.lanes;S&=l.pendingLanes,y|=S,f.lanes=y,_i(l,y)}}var ud={readContext:ji,use:Kp,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useLayoutEffect:oi,useInsertionEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useSyncExternalStore:oi,useId:oi,useHostTransitionStatus:oi,useFormState:oi,useActionState:oi,useOptimistic:oi,useMemoCache:oi,useCacheRefresh:oi};ud.useEffectEvent=oi;var V1={readContext:ji,use:Kp,useCallback:function(l,f){return La().memoizedState=[l,f===void 0?null:f],l},useContext:ji,useEffect:z1,useImperativeHandle:function(l,f,y){y=y!=null?y.concat([l]):null,nm(4194308,4,Zg.bind(null,f,l),y)},useLayoutEffect:function(l,f){return nm(4194308,4,l,f)},useInsertionEffect:function(l,f){nm(4,2,l,f)},useMemo:function(l,f){var y=La();f=f===void 0?null:f;var S=l();if(Ec){St(!0);try{l()}finally{St(!1)}}return y.memoizedState=[S,f],S},useReducer:function(l,f,y){var S=La();if(y!==void 0){var B=y(f);if(Ec){St(!0);try{y(f)}finally{St(!1)}}}else B=f;return S.memoizedState=S.baseState=B,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:B},S.queue=l,l=l.dispatch=CM.bind(null,hn,l),[S.memoizedState,l]},useRef:function(l){var f=La();return l={current:l},f.memoizedState=l},useState:function(l){l=od(l);var f=l.queue,y=H1.bind(null,hn,f);return f.dispatch=y,[l.memoizedState,y]},useDebugValue:am,useDeferredValue:function(l,f){var y=La();return Jg(y,l,f)},useTransition:function(){var l=od(!1);return l=t0.bind(null,hn,l.queue,!0,!1),La().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,f,y){var S=hn,B=La();if(Zn){if(y===void 0)throw Error(n(407));y=y()}else{if(y=f(),_r===null)throw Error(n(349));(Yn&127)!==0||E1(S,f,y)}B.memoizedState=y;var L={value:y,getSnapshot:f};return B.queue=L,z1(jg.bind(null,S,L,l),[l]),S.flags|=2048,Rf(9,{destroy:void 0},Xg.bind(null,S,L,y,f),null),y},useId:function(){var l=La(),f=_r.identifierPrefix;if(Zn){var y=el,S=Jo;y=(S&~(1<<32-ye(S)-1)).toString(32)+y,f="_"+f+"R_"+y,y=Zp++,0<y&&(f+="H"+y.toString(32)),f+="_"}else y=EM++,f="_"+f+"r_"+y.toString(32)+"_";return l.memoizedState=f},useHostTransitionStatus:i0,useFormState:C1,useActionState:C1,useOptimistic:function(l){var f=La();f.memoizedState=f.baseState=l;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=ld.bind(null,hn,!0,y),y.dispatch=f,[l,f]},useMemoCache:qg,useCacheRefresh:function(){return La().memoizedState=DM.bind(null,hn)},useEffectEvent:function(l){var f=La(),y={impl:l};return f.memoizedState=y,function(){if((nr&2)!==0)throw Error(n(440));return y.impl.apply(void 0,arguments)}}},Bf={readContext:ji,use:Kp,useCallback:Kg,useContext:ji,useEffect:$g,useImperativeHandle:im,useInsertionEffect:I1,useLayoutEffect:Os,useMemo:Qg,useReducer:Qp,useRef:U1,useState:function(){return Qp(kl)},useDebugValue:am,useDeferredValue:function(l,f){var y=pi();return e0(y,Or.memoizedState,l,f)},useTransition:function(){var l=Qp(kl)[0],f=pi().memoizedState;return[typeof l=="boolean"?l:sd(l),f]},useSyncExternalStore:kg,useId:na,useHostTransitionStatus:i0,useFormState:R1,useActionState:R1,useOptimistic:function(l,f){var y=pi();return A1(y,Or,l,f)},useMemoCache:qg,useCacheRefresh:a0};Bf.useEffectEvent=L1;var cd={readContext:ji,use:Kp,useCallback:Kg,useContext:ji,useEffect:$g,useImperativeHandle:im,useInsertionEffect:I1,useLayoutEffect:Os,useMemo:Qg,useReducer:Jp,useRef:U1,useState:function(){return Jp(kl)},useDebugValue:am,useDeferredValue:function(l,f){var y=pi();return Or===null?Jg(y,l,f):e0(y,Or.memoizedState,l,f)},useTransition:function(){var l=Jp(kl)[0],f=pi().memoizedState;return[typeof l=="boolean"?l:sd(l),f]},useSyncExternalStore:kg,useId:na,useHostTransitionStatus:i0,useFormState:B1,useActionState:B1,useOptimistic:function(l,f){var y=pi();return Or!==null?A1(y,Or,l,f):(y.baseState=l,[l,y.queue.dispatch])},useMemoCache:qg,useCacheRefresh:a0};cd.useEffectEvent=L1;function Uf(l,f,y,S){f=l.memoizedState,y=y(S,f),y=y==null?f:d({},f,y),l.memoizedState=y,l.lanes===0&&(l.updateQueue.baseState=y)}var fd={enqueueSetState:function(l,f,y){l=l._reactInternals;var S=Pa(),B=nl(S);B.payload=f,y!=null&&(B.callback=y),f=ql(l,B,S),f!==null&&(g(f,l,S),zu(f,l,S))},enqueueReplaceState:function(l,f,y){l=l._reactInternals;var S=Pa(),B=nl(S);B.tag=1,B.payload=f,y!=null&&(B.callback=y),f=ql(l,B,S),f!==null&&(g(f,l,S),zu(f,l,S))},enqueueForceUpdate:function(l,f){l=l._reactInternals;var y=Pa(),S=nl(y);S.tag=2,f!=null&&(S.callback=f),f=ql(l,S,y),f!==null&&(g(f,l,y),zu(f,l,y))}};function q1(l,f,y,S,B,L,K){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,L,K):f.prototype&&f.prototype.isPureReactComponent?!yf(y,S)||!yf(B,L):!0}function G1(l,f,y,S){l=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,S),f.state!==l&&fd.enqueueReplaceState(f,f.state,null)}function ra(l,f){var y=f;if("ref"in f){y={};for(var S in f)S!=="ref"&&(y[S]=f[S])}if(l=l.defaultProps){y===f&&(y=d({},y));for(var B in l)y[B]===void 0&&(y[B]=l[B])}return y}function s0(l){Eu(l)}function k1(l){console.error(l)}function sm(l){Eu(l)}function om(l,f){try{var y=l.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function X1(l,f,y){try{var S=l.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(B){setTimeout(function(){throw B})}}function o0(l,f,y){return y=nl(y),y.tag=3,y.payload={element:null},y.callback=function(){om(l,f)},y}function zf(l){return l=nl(l),l.tag=3,l}function ns(l,f,y,S){var B=y.type.getDerivedStateFromError;if(typeof B=="function"){var L=S.value;l.payload=function(){return B(L)},l.callback=function(){X1(f,y,S)}}var K=y.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(l.callback=function(){X1(f,y,S),typeof B!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var ce=S.stack;this.componentDidCatch(S.value,{componentStack:ce!==null?ce:""})})}function Bs(l,f,y,S,B){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=y.alternate,f!==null&&Du(f,y,B,!0),y=zi.current,y!==null){switch(y.tag){case 31:case 13:return to===null?xn():y.alternate===null&&Sr===0&&(Sr=3),y.flags&=-257,y.flags|=65536,y.lanes=B,S===ed?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([S]):f.add(S),RM(l,S,B)),!1;case 22:return y.flags|=65536,S===ed?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([S]):y.add(S)),RM(l,S,B)),!1}throw Error(n(435,y.tag))}return RM(l,S,B),xn(),!1}if(Zn)return f=zi.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=B,S!==Vp&&(l=Error(n(422),{cause:S}),Kh(Qa(l,y)))):(S!==Vp&&(f=Error(n(423),{cause:S}),Kh(Qa(f,y))),l=l.current.alternate,l.flags|=65536,B&=-B,l.lanes|=B,S=Qa(S,y),B=o0(l.stateNode,S,B),Yp(l,B),Sr!==4&&(Sr=2)),!1;var L=Error(n(520),{cause:S});if(L=Qa(L,y),Bo===null?Bo=[L]:Bo.push(L),Sr!==4&&(Sr=2),f===null)return!0;S=Qa(S,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,l=B&-B,y.lanes|=l,l=o0(y.stateNode,S,l),Yp(y,l),!1;case 1:if(f=y.type,L=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(cl===null||!cl.has(L))))return y.flags|=65536,B&=-B,y.lanes|=B,B=zf(B),ns(B,l,y,S),Yp(y,B),!1}y=y.return}while(y!==null);return!1}var lm=Error(n(461)),Jr=!1;function li(l,f,y,S){f.child=l===null?b1(f,null,y,S):Sc(f,l.child,y,S)}function hd(l,f,y,S,B){y=y.render;var L=f.ref;if("ref"in S){var K={};for(var ce in S)ce!=="ref"&&(K[ce]=S[ce])}else K=S;return xc(f),S=Ig(l,f,y,K,L,B),ce=Pg(),l!==null&&!Jr?(Hg(l,f,B),Ro(l,f,B)):(Zn&&ce&&Hp(f),f.flags|=1,li(l,f,S,B),f.child)}function dd(l,f,y,S,B){if(l===null){var L=y.type;return typeof L=="function"&&!za(L)&&L.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=L,Us(l,f,L,S,B)):(l=Wh(y.type,null,S,f,f.mode,B),l.ref=f.ref,l.return=f,f.child=l)}if(L=l.child,!Iu(l,B)){var K=L.memoizedProps;if(y=y.compare,y=y!==null?y:yf,y(K,S)&&l.ref===f.ref)return Ro(l,f,B)}return f.flags|=1,l=Ko(L,S),l.ref=f.ref,l.return=f,f.child=l}function Us(l,f,y,S,B){if(l!==null){var L=l.memoizedProps;if(yf(L,S)&&l.ref===f.ref)if(Jr=!1,f.pendingProps=S=L,Iu(l,B))(l.flags&131072)!==0&&(Jr=!0);else return f.lanes=l.lanes,Ro(l,f,B)}return Ff(l,f,y,S,B)}function zs(l,f,y,S){var B=S.children,L=l!==null?l.memoizedState:null;if(l===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((f.flags&128)!==0){if(L=L!==null?L.baseLanes|y:y,l!==null){for(S=f.child=l.child,B=0;S!==null;)B=B|S.lanes|S.childLanes,S=S.sibling;S=B&~L}else S=0,f.child=null;return sl(l,f,L,y,S)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},l!==null&&Df(f,L!==null?L.cachePool:null),L!==null?Ug(f,L):zg(),_1(f);else return S=f.lanes=536870912,sl(l,f,L!==null?L.baseLanes|y:y,y,S)}else L!==null?(Df(f,L.cachePool),Ug(f,L),Gl(),f.memoizedState=null):(l!==null&&Df(f,null),zg(),Gl());return li(l,f,B,y),f.child}function Do(l,f){return l!==null&&l.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function sl(l,f,y,S,B){var L=tl();return L=L===null?null:{parent:Zt._currentValue,pool:L},f.memoizedState={baseLanes:y,cachePool:L},l!==null&&Df(f,null),zg(),_1(f),l!==null&&Du(l,f,S,!0),f.childLanes=B,null}function no(l,f){return f=Lf({mode:f.mode,children:f.children},l.mode),f.ref=l.ref,l.child=f,f.return=l,f}function Yi(l,f,y){return Sc(f,l.child,null,y),l=no(f,f.pendingProps),l.flags|=2,Rs(f),f.memoizedState=null,l}function pd(l,f,y){var S=f.pendingProps,B=(f.flags&128)!==0;if(f.flags&=-129,l===null){if(Zn){if(S.mode==="hidden")return l=no(f,S),f.lanes=536870912,Do(null,l);if(Fg(f),(l=Gr)?(l=PT(l,Xi),l=l!==null&&l.data==="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:Qo!==null?{id:Jo,overflow:el}:null,retryLane:536870912,hydrationErrors:null},y=p1(l),y.return=f,f.child=y,ki=f,Gr=null)):l=null,l===null)throw jn(f);return f.lanes=536870912,null}return no(f,S)}var L=l.memoizedState;if(L!==null){var K=L.dehydrated;if(Fg(f),B)if(f.flags&256)f.flags&=-257,f=Yi(l,f,y);else if(f.memoizedState!==null)f.child=l.child,f.flags|=128,f=null;else throw Error(n(558));else if(Jr||Du(l,f,y,!1),B=(y&l.childLanes)!==0,Jr||B){if(S=_r,S!==null&&(K=Ci(S,y),K!==0&&K!==L.retryLane))throw L.retryLane=K,wu(l,K),g(S,l,K),lm;xn(),f=Yi(l,f,y)}else l=L.treeContext,Gr=fl(K.nextSibling),ki=f,Zn=!0,Ll=null,Xi=!1,l!==null&&Zh(f,l),f=no(f,S),f.flags|=4096;return f}return l=Ko(l.child,{mode:S.mode,children:S.children}),l.ref=f.ref,f.child=l,l.return=f,l}function Co(l,f){var y=f.ref;if(y===null)l!==null&&l.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(n(284));(l===null||l.ref!==y)&&(f.flags|=4194816)}}function Ff(l,f,y,S,B){return xc(f),y=Ig(l,f,y,S,void 0,B),S=Pg(),l!==null&&!Jr?(Hg(l,f,B),Ro(l,f,B)):(Zn&&S&&Hp(f),f.flags|=1,li(l,f,y,B),f.child)}function ba(l,f,y,S,B,L){return xc(f),f.updateQueue=null,y=M1(f,S,y,B),S1(l),S=Pg(),l!==null&&!Jr?(Hg(l,f,L),Ro(l,f,L)):(Zn&&S&&Hp(f),f.flags|=1,li(l,f,y,L),f.child)}function ia(l,f,y,S,B){if(xc(f),f.stateNode===null){var L=Tu,K=y.contextType;typeof K=="object"&&K!==null&&(L=ji(K)),L=new y(S,L),f.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=fd,f.stateNode=L,L._reactInternals=f,L=f.stateNode,L.props=S,L.state=f.memoizedState,L.refs={},Rg(f),K=y.contextType,L.context=typeof K=="object"&&K!==null?ji(K):Tu,L.state=f.memoizedState,K=y.getDerivedStateFromProps,typeof K=="function"&&(Uf(f,y,K,S),L.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(K=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),K!==L.state&&fd.enqueueReplaceState(L,L.state,null),Mc(f,S,L,B),rd(),L.state=f.memoizedState),typeof L.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(l===null){L=f.stateNode;var ce=f.memoizedProps,Oe=ra(y,ce);L.props=Oe;var Je=L.context,dt=y.contextType;K=Tu,typeof dt=="object"&&dt!==null&&(K=ji(dt));var xt=y.getDerivedStateFromProps;dt=typeof xt=="function"||typeof L.getSnapshotBeforeUpdate=="function",ce=f.pendingProps!==ce,dt||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(ce||Je!==K)&&G1(f,L,S,K),Uu=!1;var nt=f.memoizedState;L.state=nt,Mc(f,S,L,B),rd(),Je=f.memoizedState,ce||nt!==Je||Uu?(typeof xt=="function"&&(Uf(f,y,xt,S),Je=f.memoizedState),(Oe=Uu||q1(f,y,Oe,S,nt,Je,K))?(dt||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(f.flags|=4194308)):(typeof L.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=Je),L.props=S,L.state=Je,L.context=K,S=Oe):(typeof L.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{L=f.stateNode,Og(l,f),K=f.memoizedProps,dt=ra(y,K),L.props=dt,xt=f.pendingProps,nt=L.context,Je=y.contextType,Oe=Tu,typeof Je=="object"&&Je!==null&&(Oe=ji(Je)),ce=y.getDerivedStateFromProps,(Je=typeof ce=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(K!==xt||nt!==Oe)&&G1(f,L,S,Oe),Uu=!1,nt=f.memoizedState,L.state=nt,Mc(f,S,L,B),rd();var lt=f.memoizedState;K!==xt||nt!==lt||Uu||l!==null&&l.dependencies!==null&&Tf(l.dependencies)?(typeof ce=="function"&&(Uf(f,y,ce,S),lt=f.memoizedState),(dt=Uu||q1(f,y,dt,S,nt,lt,Oe)||l!==null&&l.dependencies!==null&&Tf(l.dependencies))?(Je||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(S,lt,Oe),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(S,lt,Oe)),typeof L.componentDidUpdate=="function"&&(f.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof L.componentDidUpdate!="function"||K===l.memoizedProps&&nt===l.memoizedState||(f.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||K===l.memoizedProps&&nt===l.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=lt),L.props=S,L.state=lt,L.context=Oe,S=dt):(typeof L.componentDidUpdate!="function"||K===l.memoizedProps&&nt===l.memoizedState||(f.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||K===l.memoizedProps&&nt===l.memoizedState||(f.flags|=1024),S=!1)}return L=S,Co(l,f),S=(f.flags&128)!==0,L||S?(L=f.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:L.render(),f.flags|=1,l!==null&&S?(f.child=Sc(f,l.child,null,B),f.child=Sc(f,null,y,B)):li(l,f,y,B),f.memoizedState=L.state,l=f.child):l=Ro(l,f,B),l}function ur(l,f,y,S){return yc(),f.flags|=256,li(l,f,y,S),f.child}var Fs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ro(l){return{baseLanes:l,cachePool:kp()}}function md(l,f,y){return l=l!==null?l.childLanes&~y:0,f&&(l|=rr),l}function Ls(l,f,y){var S=f.pendingProps,B=!1,L=(f.flags&128)!==0,K;if((K=L)||(K=l!==null&&l.memoizedState===null?!1:(si.current&2)!==0),K&&(B=!0,f.flags&=-129),K=(f.flags&32)!==0,f.flags&=-33,l===null){if(Zn){if(B?Fu(f):Gl(),(l=Gr)?(l=PT(l,Xi),l=l!==null&&l.data!=="&"?l:null,l!==null&&(f.memoizedState={dehydrated:l,treeContext:Qo!==null?{id:Jo,overflow:el}:null,retryLane:536870912,hydrationErrors:null},y=p1(l),y.return=f,f.child=y,ki=f,Gr=null)):l=null,l===null)throw jn(f);return YM(l)?f.lanes=32:f.lanes=536870912,null}var ce=S.children;return S=S.fallback,B?(Gl(),B=f.mode,ce=Lf({mode:"hidden",children:ce},B),S=zl(S,B,y,null),ce.return=f,S.return=f,ce.sibling=S,f.child=ce,S=f.child,S.memoizedState=ro(y),S.childLanes=md(l,K,y),f.memoizedState=Fs,Do(null,S)):(Fu(f),Lu(f,ce))}var Oe=l.memoizedState;if(Oe!==null&&(ce=Oe.dehydrated,ce!==null)){if(L)f.flags&256?(Fu(f),f.flags&=-257,f=If(l,f,y)):f.memoizedState!==null?(Gl(),f.child=l.child,f.flags|=128,f=null):(Gl(),ce=S.fallback,B=f.mode,S=Lf({mode:"visible",children:S.children},B),ce=zl(ce,B,y,null),ce.flags|=2,S.return=f,ce.return=f,S.sibling=ce,f.child=S,Sc(f,l.child,null,y),S=f.child,S.memoizedState=ro(y),S.childLanes=md(l,K,y),f.memoizedState=Fs,f=Do(null,S));else if(Fu(f),YM(ce)){if(K=ce.nextSibling&&ce.nextSibling.dataset,K)var Je=K.dgst;K=Je,S=Error(n(419)),S.stack="",S.digest=K,Kh({value:S,source:null,stack:null}),f=If(l,f,y)}else if(Jr||Du(l,f,y,!1),K=(y&l.childLanes)!==0,Jr||K){if(K=_r,K!==null&&(S=Ci(K,y),S!==0&&S!==Oe.retryLane))throw Oe.retryLane=S,wu(l,S),g(K,l,S),lm;jM(ce)||xn(),f=If(l,f,y)}else jM(ce)?(f.flags|=192,f.child=l.child,f=null):(l=Oe.treeContext,Gr=fl(ce.nextSibling),ki=f,Zn=!0,Ll=null,Xi=!1,l!==null&&Zh(f,l),f=Lu(f,S.children),f.flags|=4096);return f}return B?(Gl(),ce=S.fallback,B=f.mode,Oe=l.child,Je=Oe.sibling,S=Ko(Oe,{mode:"hidden",children:S.children}),S.subtreeFlags=Oe.subtreeFlags&65011712,Je!==null?ce=Ko(Je,ce):(ce=zl(ce,B,y,null),ce.flags|=2),ce.return=f,S.return=f,S.sibling=ce,f.child=S,Do(null,S),S=f.child,ce=l.child.memoizedState,ce===null?ce=ro(y):(B=ce.cachePool,B!==null?(Oe=Zt._currentValue,B=B.parent!==Oe?{parent:Oe,pool:Oe}:B):B=kp(),ce={baseLanes:ce.baseLanes|y,cachePool:B}),S.memoizedState=ce,S.childLanes=md(l,K,y),f.memoizedState=Fs,Do(l.child,S)):(Fu(f),y=l.child,l=y.sibling,y=Ko(y,{mode:"visible",children:S.children}),y.return=f,y.sibling=null,l!==null&&(K=f.deletions,K===null?(f.deletions=[l],f.flags|=16):K.push(l)),f.child=y,f.memoizedState=null,y)}function Lu(l,f){return f=Lf({mode:"visible",children:f},l.mode),f.return=l,l.child=f}function Lf(l,f){return l=Ua(22,l,null,f),l.lanes=0,l}function If(l,f,y){return Sc(f,l.child,null,y),l=Lu(f,f.pendingProps.children),l.flags|=2,f.memoizedState=null,l}function wc(l,f,y){l.lanes|=f;var S=l.alternate;S!==null&&(S.lanes|=f),Hl(l.return,f,y)}function vd(l,f,y,S,B,L){var K=l.memoizedState;K===null?l.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:B,treeForkCount:L}:(K.isBackwards=f,K.rendering=null,K.renderingStartTime=0,K.last=S,K.tail=y,K.tailMode=B,K.treeForkCount=L)}function gd(l,f,y){var S=f.pendingProps,B=S.revealOrder,L=S.tail;S=S.children;var K=si.current,ce=(K&2)!==0;if(ce?(K=K&1|2,f.flags|=128):K&=1,ae(si,K),li(l,f,S,y),S=Zn?wf:0,!ce&&l!==null&&(l.flags&128)!==0)e:for(l=f.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&wc(l,y,f);else if(l.tag===19)wc(l,y,f);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===f)break e;for(;l.sibling===null;){if(l.return===null||l.return===f)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(B){case"forwards":for(y=f.child,B=null;y!==null;)l=y.alternate,l!==null&&Wp(l)===null&&(B=y),y=y.sibling;y=B,y===null?(B=f.child,f.child=null):(B=y.sibling,y.sibling=null),vd(f,!1,B,y,L,S);break;case"backwards":case"unstable_legacy-backwards":for(y=null,B=f.child,f.child=null;B!==null;){if(l=B.alternate,l!==null&&Wp(l)===null){f.child=B;break}l=B.sibling,B.sibling=y,y=B,B=l}vd(f,!0,y,null,L,S);break;case"together":vd(f,!1,null,null,void 0,S);break;default:f.memoizedState=null}return f.child}function Ro(l,f,y){if(l!==null&&(f.dependencies=l.dependencies),Hs|=f.lanes,(y&f.childLanes)===0)if(l!==null){if(Du(l,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(l!==null&&f.child!==l.child)throw Error(n(153));if(f.child!==null){for(l=f.child,y=Ko(l,l.pendingProps),f.child=y,y.return=f;l.sibling!==null;)l=l.sibling,y=y.sibling=Ko(l,l.pendingProps),y.return=f;y.sibling=null}return f.child}function Iu(l,f){return(l.lanes&f)!==0?!0:(l=l.dependencies,!!(l!==null&&Tf(l)))}function yd(l,f,y){switch(f.tag){case 3:ne(f,f.stateNode.containerInfo),Pl(f,Zt,l.memoizedState.cache),yc();break;case 27:case 5:ge(f);break;case 4:ne(f,f.stateNode.containerInfo);break;case 10:Pl(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,Fg(f),null;break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(Fu(f),f.flags|=128,null):(y&f.child.childLanes)!==0?Ls(l,f,y):(Fu(f),l=Ro(l,f,y),l!==null?l.sibling:null);Fu(f);break;case 19:var B=(l.flags&128)!==0;if(S=(y&f.childLanes)!==0,S||(Du(l,f,y,!1),S=(y&f.childLanes)!==0),B){if(S)return gd(l,f,y);f.flags|=128}if(B=f.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),ae(si,si.current),S)break;return null;case 22:return f.lanes=0,zs(l,f,y,f.pendingProps);case 24:Pl(f,Zt,l.memoizedState.cache)}return Ro(l,f,y)}function um(l,f,y){if(l!==null)if(l.memoizedProps!==f.pendingProps)Jr=!0;else{if(!Iu(l,y)&&(f.flags&128)===0)return Jr=!1,yd(l,f,y);Jr=(l.flags&131072)!==0}else Jr=!1,Zn&&(f.flags&1048576)!==0&&bg(f,wf,f.index);switch(f.lanes=0,f.tag){case 16:e:{var S=f.pendingProps;if(l=_c(f.elementType),f.type=l,typeof l=="function")za(l)?(S=ra(l,S),f.tag=1,f=ia(null,f,l,S,y)):(f.tag=0,f=Ff(null,f,l,S,y));else{if(l!=null){var B=l.$$typeof;if(B===A){f.tag=11,f=hd(null,f,l,S,y);break e}else if(B===O){f.tag=14,f=dd(null,f,l,S,y);break e}}throw f=$(l)||l,Error(n(306,f,""))}}return f;case 0:return Ff(l,f,f.type,f.pendingProps,y);case 1:return S=f.type,B=ra(S,f.pendingProps),ia(l,f,S,B,y);case 3:e:{if(ne(f,f.stateNode.containerInfo),l===null)throw Error(n(387));S=f.pendingProps;var L=f.memoizedState;B=L.element,Og(l,f),Mc(f,S,null,y);var K=f.memoizedState;if(S=K.cache,Pl(f,Zt,S),S!==L.cache&&Gp(f,[Zt],y,!0),rd(),S=K.element,L.isDehydrated)if(L={element:S,isDehydrated:!1,cache:K.cache},f.updateQueue.baseState=L,f.memoizedState=L,f.flags&256){f=ur(l,f,S,y);break e}else if(S!==B){B=Qa(Error(n(424)),f),Kh(B),f=ur(l,f,S,y);break e}else{switch(l=f.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Gr=fl(l.firstChild),ki=f,Zn=!0,Ll=null,Xi=!0,y=b1(f,null,S,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(yc(),S===B){f=Ro(l,f,y);break e}li(l,f,S,y)}f=f.child}return f;case 26:return Co(l,f),l===null?(y=XT(f.type,null,f.pendingProps,null))?f.memoizedState=y:Zn||(y=f.type,l=f.pendingProps,S=J1(pe.current).createElement(y),S[tn]=f,S[zr]=l,Ha(S,y,l),ut(S),f.stateNode=S):f.memoizedState=XT(f.type,l.memoizedProps,f.pendingProps,l.memoizedState),null;case 27:return ge(f),l===null&&Zn&&(S=f.stateNode=qT(f.type,f.pendingProps,pe.current),ki=f,Xi=!0,B=Gr,Xf(f.type)?(WM=B,Gr=fl(S.firstChild)):Gr=B),li(l,f,f.pendingProps.children,y),Co(l,f),l===null&&(f.flags|=4194304),f.child;case 5:return l===null&&Zn&&((B=S=Gr)&&(S=DI(S,f.type,f.pendingProps,Xi),S!==null?(f.stateNode=S,ki=f,Gr=fl(S.firstChild),Xi=!1,B=!0):B=!1),B||jn(f)),ge(f),B=f.type,L=f.pendingProps,K=l!==null?l.memoizedProps:null,S=L.children,GM(B,L)?S=null:K!==null&&GM(B,K)&&(f.flags|=32),f.memoizedState!==null&&(B=Ig(l,f,AM,null,null,y),g0._currentValue=B),Co(l,f),li(l,f,S,y),f.child;case 6:return l===null&&Zn&&((l=y=Gr)&&(y=CI(y,f.pendingProps,Xi),y!==null?(f.stateNode=y,ki=f,Gr=null,l=!0):l=!1),l||jn(f)),null;case 13:return Ls(l,f,y);case 4:return ne(f,f.stateNode.containerInfo),S=f.pendingProps,l===null?f.child=Sc(f,null,S,y):li(l,f,S,y),f.child;case 11:return hd(l,f,f.type,f.pendingProps,y);case 7:return li(l,f,f.pendingProps,y),f.child;case 8:return li(l,f,f.pendingProps.children,y),f.child;case 12:return li(l,f,f.pendingProps.children,y),f.child;case 10:return S=f.pendingProps,Pl(f,f.type,S.value),li(l,f,S.children,y),f.child;case 9:return B=f.type._context,S=f.pendingProps.children,xc(f),B=ji(B),S=S(B),f.flags|=1,li(l,f,S,y),f.child;case 14:return dd(l,f,f.type,f.pendingProps,y);case 15:return Us(l,f,f.type,f.pendingProps,y);case 19:return gd(l,f,y);case 31:return pd(l,f,y);case 22:return zs(l,f,y,f.pendingProps);case 24:return xc(f),S=ji(Zt),l===null?(B=tl(),B===null&&(B=_r,L=Ag(),B.pooledCache=L,L.refCount++,L!==null&&(B.pooledCacheLanes|=y),B=L),f.memoizedState={parent:S,cache:B},Rg(f),Pl(f,Zt,B)):((l.lanes&y)!==0&&(Og(l,f),Mc(f,null,null,y),rd()),B=l.memoizedState,L=f.memoizedState,B.parent!==S?(B={parent:S,cache:S},f.memoizedState=B,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=B),Pl(f,Zt,S)):(S=L.cache,Pl(f,Zt,S),S!==B.cache&&Gp(f,[Zt],y,!0))),li(l,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function rs(l){l.flags|=4}function Pu(l,f,y,S,B){if((f=(l.mode&32)!==0)&&(f=!1),f){if(l.flags|=16777216,(B&335544128)===B)if(l.stateNode.complete)l.flags|=8192;else if(At())l.flags|=8192;else throw an=ed,Jh}else l.flags&=-16777217}function jl(l,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!ZT(f))if(At())l.flags|=8192;else throw an=ed,Jh}function Pf(l,f){f!==null&&(l.flags|=4),l.flags&16384&&(f=l.tag!==22?yn():536870912,l.lanes|=f,Vs|=f)}function xd(l,f){if(!Zn)switch(l.tailMode){case"hidden":f=l.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?l.tail=null:y.sibling=null;break;case"collapsed":y=l.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?f||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function Nr(l){var f=l.alternate!==null&&l.alternate.child===l.child,y=0,S=0;if(f)for(var B=l.child;B!==null;)y|=B.lanes|B.childLanes,S|=B.subtreeFlags&65011712,S|=B.flags&65011712,B.return=l,B=B.sibling;else for(B=l.child;B!==null;)y|=B.lanes|B.childLanes,S|=B.subtreeFlags,S|=B.flags,B.return=l,B=B.sibling;return l.subtreeFlags|=S,l.childLanes=y,f}function l0(l,f,y){var S=f.pendingProps;switch(Nu(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(f),null;case 1:return Nr(f),null;case 3:return y=f.stateNode,S=null,l!==null&&(S=l.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),eo(Zt),ue(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(gc(f)?rs(f):l===null||l.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,_g())),Nr(f),null;case 26:var B=f.type,L=f.memoizedState;return l===null?(rs(f),L!==null?(Nr(f),jl(f,L)):(Nr(f),Pu(f,B,null,S,y))):L?L!==l.memoizedState?(rs(f),Nr(f),jl(f,L)):(Nr(f),f.flags&=-16777217):(l=l.memoizedProps,l!==S&&rs(f),Nr(f),Pu(f,B,l,S,y)),null;case 27:if(Ae(f),y=pe.current,B=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==S&&rs(f);else{if(!S){if(f.stateNode===null)throw Error(n(166));return Nr(f),null}l=J.current,gc(f)?qp(f):(l=qT(B,S,y),f.stateNode=l,rs(f))}return Nr(f),null;case 5:if(Ae(f),B=f.type,l!==null&&f.stateNode!=null)l.memoizedProps!==S&&rs(f);else{if(!S){if(f.stateNode===null)throw Error(n(166));return Nr(f),null}if(L=J.current,gc(f))qp(f);else{var K=J1(pe.current);switch(L){case 1:L=K.createElementNS("http://www.w3.org/2000/svg",B);break;case 2:L=K.createElementNS("http://www.w3.org/1998/Math/MathML",B);break;default:switch(B){case"svg":L=K.createElementNS("http://www.w3.org/2000/svg",B);break;case"math":L=K.createElementNS("http://www.w3.org/1998/Math/MathML",B);break;case"script":L=K.createElement("div"),L.innerHTML="<script><\/script>",L=L.removeChild(L.firstChild);break;case"select":L=typeof S.is=="string"?K.createElement("select",{is:S.is}):K.createElement("select"),S.multiple?L.multiple=!0:S.size&&(L.size=S.size);break;default:L=typeof S.is=="string"?K.createElement(B,{is:S.is}):K.createElement(B)}}L[tn]=f,L[zr]=S;e:for(K=f.child;K!==null;){if(K.tag===5||K.tag===6)L.appendChild(K.stateNode);else if(K.tag!==4&&K.tag!==27&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===f)break e;for(;K.sibling===null;){if(K.return===null||K.return===f)break e;K=K.return}K.sibling.return=K.return,K=K.sibling}f.stateNode=L;e:switch(Ha(L,B,S),B){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&rs(f)}}return Nr(f),Pu(f,f.type,l===null?null:l.memoizedProps,f.pendingProps,y),null;case 6:if(l&&f.stateNode!=null)l.memoizedProps!==S&&rs(f);else{if(typeof S!="string"&&f.stateNode===null)throw Error(n(166));if(l=pe.current,gc(f)){if(l=f.stateNode,y=f.memoizedProps,S=null,B=ki,B!==null)switch(B.tag){case 27:case 5:S=B.memoizedProps}l[tn]=f,l=!!(l.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||RT(l.nodeValue,y)),l||jn(f,!0)}else l=J1(l).createTextNode(S),l[tn]=f,f.stateNode=l}return Nr(f),null;case 31:if(y=f.memoizedState,l===null||l.memoizedState!==null){if(S=gc(f),y!==null){if(l===null){if(!S)throw Error(n(318));if(l=f.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[tn]=f}else yc(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Nr(f),l=!1}else y=_g(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=y),l=!0;if(!l)return f.flags&256?(Rs(f),f):(Rs(f),null);if((f.flags&128)!==0)throw Error(n(558))}return Nr(f),null;case 13:if(S=f.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(B=gc(f),S!==null&&S.dehydrated!==null){if(l===null){if(!B)throw Error(n(318));if(B=f.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(n(317));B[tn]=f}else yc(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Nr(f),B=!1}else B=_g(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=B),B=!0;if(!B)return f.flags&256?(Rs(f),f):(Rs(f),null)}return Rs(f),(f.flags&128)!==0?(f.lanes=y,f):(y=S!==null,l=l!==null&&l.memoizedState!==null,y&&(S=f.child,B=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(B=S.alternate.memoizedState.cachePool.pool),L=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(L=S.memoizedState.cachePool.pool),L!==B&&(S.flags|=2048)),y!==l&&y&&(f.child.flags|=8192),Pf(f,f.updateQueue),Nr(f),null);case 4:return ue(),l===null&&IM(f.stateNode.containerInfo),Nr(f),null;case 10:return eo(f.type),Nr(f),null;case 19:if(k(si),S=f.memoizedState,S===null)return Nr(f),null;if(B=(f.flags&128)!==0,L=S.rendering,L===null)if(B)xd(S,!1);else{if(Sr!==0||l!==null&&(l.flags&128)!==0)for(l=f.child;l!==null;){if(L=Wp(l),L!==null){for(f.flags|=128,xd(S,!1),l=L.updateQueue,f.updateQueue=l,Pf(f,l),f.subtreeFlags=0,l=y,y=f.child;y!==null;)ga(y,l),y=y.sibling;return ae(si,si.current&1|2),Zn&&Fl(f,S.treeForkCount),f.child}l=l.sibling}S.tail!==null&&V()>qs&&(f.flags|=128,B=!0,xd(S,!1),f.lanes=4194304)}else{if(!B)if(l=Wp(L),l!==null){if(f.flags|=128,B=!0,l=l.updateQueue,f.updateQueue=l,Pf(f,l),xd(S,!0),S.tail===null&&S.tailMode==="hidden"&&!L.alternate&&!Zn)return Nr(f),null}else 2*V()-S.renderingStartTime>qs&&y!==536870912&&(f.flags|=128,B=!0,xd(S,!1),f.lanes=4194304);S.isBackwards?(L.sibling=f.child,f.child=L):(l=S.last,l!==null?l.sibling=L:f.child=L,S.last=L)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=V(),l.sibling=null,y=si.current,ae(si,B?y&1|2:y&1),Zn&&Fl(f,S.treeForkCount),l):(Nr(f),null);case 22:case 23:return Rs(f),xa(),S=f.memoizedState!==null,l!==null?l.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?(y&536870912)!==0&&(f.flags&128)===0&&(Nr(f),f.subtreeFlags&6&&(f.flags|=8192)):Nr(f),y=f.updateQueue,y!==null&&Pf(f,y.retryQueue),y=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==y&&(f.flags|=2048),l!==null&&k(Cu),null;case 24:return y=null,l!==null&&(y=l.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),eo(Zt),Nr(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function cm(l,f){switch(Nu(f),f.tag){case 1:return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 3:return eo(Zt),ue(),l=f.flags,(l&65536)!==0&&(l&128)===0?(f.flags=l&-65537|128,f):null;case 26:case 27:case 5:return Ae(f),null;case 31:if(f.memoizedState!==null){if(Rs(f),f.alternate===null)throw Error(n(340));yc()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 13:if(Rs(f),l=f.memoizedState,l!==null&&l.dehydrated!==null){if(f.alternate===null)throw Error(n(340));yc()}return l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 19:return k(si),null;case 4:return ue(),null;case 10:return eo(f.type),null;case 22:case 23:return Rs(f),xa(),l!==null&&k(Cu),l=f.flags,l&65536?(f.flags=l&-65537|128,f):null;case 24:return eo(Zt),null;case 25:return null;default:return null}}function Tc(l,f){switch(Nu(f),f.tag){case 3:eo(Zt),ue();break;case 26:case 27:case 5:Ae(f);break;case 4:ue();break;case 31:f.memoizedState!==null&&Rs(f);break;case 13:Rs(f);break;case 19:k(si);break;case 10:eo(f.type);break;case 22:case 23:Rs(f),xa(),l!==null&&k(Cu);break;case 24:eo(Zt)}}function ol(l,f){try{var y=f.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var B=S.next;y=B;do{if((y.tag&l)===l){S=void 0;var L=y.create,K=y.inst;S=L(),K.destroy=S}y=y.next}while(y!==B)}}catch(ce){Fr(f,f.return,ce)}}function io(l,f,y){try{var S=f.updateQueue,B=S!==null?S.lastEffect:null;if(B!==null){var L=B.next;S=L;do{if((S.tag&l)===l){var K=S.inst,ce=K.destroy;if(ce!==void 0){K.destroy=void 0,B=f;var Oe=y,Je=ce;try{Je()}catch(dt){Fr(B,Oe,dt)}}}S=S.next}while(S!==L)}}catch(dt){Fr(f,f.return,dt)}}function Hu(l){var f=l.updateQueue;if(f!==null){var y=l.stateNode;try{ta(f,y)}catch(S){Fr(l,l.return,S)}}}function u0(l,f,y){y.props=ra(l.type,l.memoizedProps),y.state=l.memoizedState;try{y.componentWillUnmount()}catch(S){Fr(l,f,S)}}function ll(l,f){try{var y=l.ref;if(y!==null){switch(l.tag){case 26:case 27:case 5:var S=l.stateNode;break;case 30:S=l.stateNode;break;default:S=l.stateNode}typeof y=="function"?l.refCleanup=y(S):y.current=S}}catch(B){Fr(l,f,B)}}function Is(l,f){var y=l.ref,S=l.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(B){Fr(l,f,B)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(B){Fr(l,f,B)}else y.current=null}function Ps(l){var f=l.type,y=l.memoizedProps,S=l.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(B){Fr(l,l.return,B)}}function ao(l,f,y){try{var S=l.stateNode;MI(S,l.type,y,f),S[zr]=f}catch(B){Fr(l,l.return,B)}}function Ei(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Xf(l.type)||l.tag===4}function ul(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Ei(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Xf(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Rn(l,f,y){var S=l.tag;if(S===5||S===6)l=l.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(l,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(l),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=lr));else if(S!==4&&(S===27&&Xf(l.type)&&(y=l.stateNode,f=null),l=l.child,l!==null))for(Rn(l,f,y),l=l.sibling;l!==null;)Rn(l,f,y),l=l.sibling}function gr(l,f,y){var S=l.tag;if(S===5||S===6)l=l.stateNode,f?y.insertBefore(l,f):y.appendChild(l);else if(S!==4&&(S===27&&Xf(l.type)&&(y=l.stateNode),l=l.child,l!==null))for(gr(l,f,y),l=l.sibling;l!==null;)gr(l,f,y),l=l.sibling}function mi(l){var f=l.stateNode,y=l.memoizedProps;try{for(var S=l.type,B=f.attributes;B.length;)f.removeAttributeNode(B[0]);Ha(f,S,y),f[tn]=l,f[zr]=y}catch(L){Fr(l,l.return,L)}}var so=!1,ei=!1,Yl=!1,bd=typeof WeakSet=="function"?WeakSet:Set,ui=null;function Hf(l,f){if(l=l.containerInfo,VM=sx,l=Op(l),xf(l)){if("selectionStart"in l)var y={start:l.selectionStart,end:l.selectionEnd};else e:{y=(y=l.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var B=S.anchorOffset,L=S.focusNode;S=S.focusOffset;try{y.nodeType,L.nodeType}catch{y=null;break e}var K=0,ce=-1,Oe=-1,Je=0,dt=0,xt=l,nt=null;t:for(;;){for(var lt;xt!==y||B!==0&&xt.nodeType!==3||(ce=K+B),xt!==L||S!==0&&xt.nodeType!==3||(Oe=K+S),xt.nodeType===3&&(K+=xt.nodeValue.length),(lt=xt.firstChild)!==null;)nt=xt,xt=lt;for(;;){if(xt===l)break t;if(nt===y&&++Je===B&&(ce=K),nt===L&&++dt===S&&(Oe=K),(lt=xt.nextSibling)!==null)break;xt=nt,nt=xt.parentNode}xt=lt}y=ce===-1||Oe===-1?null:{start:ce,end:Oe}}else y=null}y=y||{start:0,end:0}}else y=null;for(qM={focusedElem:l,selectionRange:y},sx=!1,ui=f;ui!==null;)if(f=ui,l=f.child,(f.subtreeFlags&1028)!==0&&l!==null)l.return=f,ui=l;else for(;ui!==null;){switch(f=ui,L=f.alternate,l=f.flags,f.tag){case 0:if((l&4)!==0&&(l=f.updateQueue,l=l!==null?l.events:null,l!==null))for(y=0;y<l.length;y++)B=l[y],B.ref.impl=B.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&L!==null){l=void 0,y=f,B=L.memoizedProps,L=L.memoizedState,S=y.stateNode;try{var kt=ra(y.type,B);l=S.getSnapshotBeforeUpdate(kt,L),S.__reactInternalSnapshotBeforeUpdate=l}catch(un){Fr(y,y.return,un)}}break;case 3:if((l&1024)!==0){if(l=f.stateNode.containerInfo,y=l.nodeType,y===9)XM(l);else if(y===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":XM(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=f.sibling,l!==null){l.return=f.return,ui=l;break}ui=f.return}}function j1(l,f,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:Wl(l,y),S&4&&ol(5,y);break;case 1:if(Wl(l,y),S&4)if(l=y.stateNode,f===null)try{l.componentDidMount()}catch(K){Fr(y,y.return,K)}else{var B=ra(y.type,f.memoizedProps);f=f.memoizedState;try{l.componentDidUpdate(B,f,l.__reactInternalSnapshotBeforeUpdate)}catch(K){Fr(y,y.return,K)}}S&64&&Hu(y),S&512&&ll(y,y.return);break;case 3:if(Wl(l,y),S&64&&(l=y.updateQueue,l!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{ta(l,f)}catch(K){Fr(y,y.return,K)}}break;case 27:f===null&&S&4&&mi(y);case 26:case 5:Wl(l,y),f===null&&S&4&&Ps(y),S&512&&ll(y,y.return);break;case 12:Wl(l,y);break;case 31:Wl(l,y),S&4&&hm(l,y);break;case 13:Wl(l,y),S&4&&c0(l,y),S&64&&(l=y.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(y=fI.bind(null,y),RI(l,y))));break;case 22:if(S=y.memoizedState!==null||so,!S){f=f!==null&&f.memoizedState!==null||ei,B=so;var L=ei;so=S,(ei=f)&&!L?br(l,y,(y.subtreeFlags&8772)!==0):Wl(l,y),so=B,ei=L}break;case 30:break;default:Wl(l,y)}}function fm(l){var f=l.alternate;f!==null&&(l.alternate=null,fm(f)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(f=l.stateNode,f!==null&&he(f)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var cr=null,Ai=!1;function _a(l,f,y){for(y=y.child;y!==null;)Vu(l,f,y),y=y.sibling}function Vu(l,f,y){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(rt,y)}catch{}switch(y.tag){case 26:ei||Is(y,f),_a(l,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:ei||Is(y,f);var S=cr,B=Ai;Xf(y.type)&&(cr=y.stateNode,Ai=!1),_a(l,f,y),p0(y.stateNode),cr=S,Ai=B;break;case 5:ei||Is(y,f);case 6:if(S=cr,B=Ai,cr=null,_a(l,f,y),cr=S,Ai=B,cr!==null)if(Ai)try{(cr.nodeType===9?cr.body:cr.nodeName==="HTML"?cr.ownerDocument.body:cr).removeChild(y.stateNode)}catch(L){Fr(y,f,L)}else try{cr.removeChild(y.stateNode)}catch(L){Fr(y,f,L)}break;case 18:cr!==null&&(Ai?(l=cr,LT(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,y.stateNode),Mm(l)):LT(cr,y.stateNode));break;case 4:S=cr,B=Ai,cr=y.stateNode.containerInfo,Ai=!0,_a(l,f,y),cr=S,Ai=B;break;case 0:case 11:case 14:case 15:io(2,y,f),ei||io(4,y,f),_a(l,f,y);break;case 1:ei||(Is(y,f),S=y.stateNode,typeof S.componentWillUnmount=="function"&&u0(y,f,S)),_a(l,f,y);break;case 21:_a(l,f,y);break;case 22:ei=(S=ei)||y.memoizedState!==null,_a(l,f,y),ei=S;break;default:_a(l,f,y)}}function hm(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Mm(l)}catch(y){Fr(f,f.return,y)}}}function c0(l,f){if(f.memoizedState===null&&(l=f.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Mm(l)}catch(y){Fr(f,f.return,y)}}function Y1(l){switch(l.tag){case 31:case 13:case 19:var f=l.stateNode;return f===null&&(f=l.stateNode=new bd),f;case 22:return l=l.stateNode,f=l._retryCache,f===null&&(f=l._retryCache=new bd),f;default:throw Error(n(435,l.tag))}}function vi(l,f){var y=Y1(l);f.forEach(function(S){if(!y.has(S)){y.add(S);var B=hI.bind(null,l,S);S.then(B,B)}})}function Sa(l,f){var y=f.deletions;if(y!==null)for(var S=0;S<y.length;S++){var B=y[S],L=l,K=f,ce=K;e:for(;ce!==null;){switch(ce.tag){case 27:if(Xf(ce.type)){cr=ce.stateNode,Ai=!1;break e}break;case 5:cr=ce.stateNode,Ai=!1;break e;case 3:case 4:cr=ce.stateNode.containerInfo,Ai=!0;break e}ce=ce.return}if(cr===null)throw Error(n(160));Vu(L,K,B),cr=null,Ai=!1,L=B.alternate,L!==null&&(L.return=null),B.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)qu(f,l),f=f.sibling}var is=null;function qu(l,f){var y=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Sa(f,l),ci(l),S&4&&(io(3,l,l.return),ol(3,l),io(5,l,l.return));break;case 1:Sa(f,l),ci(l),S&512&&(ei||y===null||Is(y,y.return)),S&64&&so&&(l=l.updateQueue,l!==null&&(S=l.callbacks,S!==null&&(y=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var B=is;if(Sa(f,l),ci(l),S&512&&(ei||y===null||Is(y,y.return)),S&4){var L=y!==null?y.memoizedState:null;if(S=l.memoizedState,y===null)if(S===null)if(l.stateNode===null){e:{S=l.type,y=l.memoizedProps,B=B.ownerDocument||B;t:switch(S){case"title":L=B.getElementsByTagName("title")[0],(!L||L[Zi]||L[tn]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=B.createElement(S),B.head.insertBefore(L,B.querySelector("head > title"))),Ha(L,S,y),L[tn]=l,ut(L),S=L;break e;case"link":var K=WT("link","href",B).get(S+(y.href||""));if(K){for(var ce=0;ce<K.length;ce++)if(L=K[ce],L.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&L.getAttribute("rel")===(y.rel==null?null:y.rel)&&L.getAttribute("title")===(y.title==null?null:y.title)&&L.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){K.splice(ce,1);break t}}L=B.createElement(S),Ha(L,S,y),B.head.appendChild(L);break;case"meta":if(K=WT("meta","content",B).get(S+(y.content||""))){for(ce=0;ce<K.length;ce++)if(L=K[ce],L.getAttribute("content")===(y.content==null?null:""+y.content)&&L.getAttribute("name")===(y.name==null?null:y.name)&&L.getAttribute("property")===(y.property==null?null:y.property)&&L.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&L.getAttribute("charset")===(y.charSet==null?null:y.charSet)){K.splice(ce,1);break t}}L=B.createElement(S),Ha(L,S,y),B.head.appendChild(L);break;default:throw Error(n(468,S))}L[tn]=l,ut(L),S=L}l.stateNode=S}else $T(B,l.type,l.stateNode);else l.stateNode=YT(B,S,l.memoizedProps);else L!==S?(L===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):L.count--,S===null?$T(B,l.type,l.stateNode):YT(B,S,l.memoizedProps)):S===null&&l.stateNode!==null&&ao(l,l.memoizedProps,y.memoizedProps)}break;case 27:Sa(f,l),ci(l),S&512&&(ei||y===null||Is(y,y.return)),y!==null&&S&4&&ao(l,l.memoizedProps,y.memoizedProps);break;case 5:if(Sa(f,l),ci(l),S&512&&(ei||y===null||Is(y,y.return)),l.flags&32){B=l.stateNode;try{Gt(B,"")}catch(kt){Fr(l,l.return,kt)}}S&4&&l.stateNode!=null&&(B=l.memoizedProps,ao(l,B,y!==null?y.memoizedProps:B)),S&1024&&(Yl=!0);break;case 6:if(Sa(f,l),ci(l),S&4){if(l.stateNode===null)throw Error(n(162));S=l.memoizedProps,y=l.stateNode;try{y.nodeValue=S}catch(kt){Fr(l,l.return,kt)}}break;case 3:if(nx=null,B=is,is=ex(f.containerInfo),Sa(f,l),is=B,ci(l),S&4&&y!==null&&y.memoizedState.isDehydrated)try{Mm(f.containerInfo)}catch(kt){Fr(l,l.return,kt)}Yl&&(Yl=!1,W1(l));break;case 4:S=is,is=ex(l.stateNode.containerInfo),Sa(f,l),ci(l),is=S;break;case 12:Sa(f,l),ci(l);break;case 31:Sa(f,l),ci(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,vi(l,S)));break;case 13:Sa(f,l),ci(l),l.child.flags&8192&&l.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Kl=V()),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,vi(l,S)));break;case 22:B=l.memoizedState!==null;var Oe=y!==null&&y.memoizedState!==null,Je=so,dt=ei;if(so=Je||B,ei=dt||Oe,Sa(f,l),ei=dt,so=Je,ci(l),S&8192)e:for(f=l.stateNode,f._visibility=B?f._visibility&-2:f._visibility|1,B&&(y===null||Oe||so||ei||Nc(l)),y=null,f=l;;){if(f.tag===5||f.tag===26){if(y===null){Oe=y=f;try{if(L=Oe.stateNode,B)K=L.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{ce=Oe.stateNode;var xt=Oe.memoizedProps.style,nt=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;ce.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(kt){Fr(Oe,Oe.return,kt)}}}else if(f.tag===6){if(y===null){Oe=f;try{Oe.stateNode.nodeValue=B?"":Oe.memoizedProps}catch(kt){Fr(Oe,Oe.return,kt)}}}else if(f.tag===18){if(y===null){Oe=f;try{var lt=Oe.stateNode;B?IT(lt,!0):IT(Oe.stateNode,!1)}catch(kt){Fr(Oe,Oe.return,kt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===l)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break e;for(;f.sibling===null;){if(f.return===null||f.return===l)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}S&4&&(S=l.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,vi(l,y))));break;case 19:Sa(f,l),ci(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,vi(l,S)));break;case 30:break;case 21:break;default:Sa(f,l),ci(l)}}function ci(l){var f=l.flags;if(f&2){try{for(var y,S=l.return;S!==null;){if(Ei(S)){y=S;break}S=S.return}if(y==null)throw Error(n(160));switch(y.tag){case 27:var B=y.stateNode,L=ul(l);gr(l,L,B);break;case 5:var K=y.stateNode;y.flags&32&&(Gt(K,""),y.flags&=-33);var ce=ul(l);gr(l,ce,K);break;case 3:case 4:var Oe=y.stateNode.containerInfo,Je=ul(l);Rn(l,Je,Oe);break;default:throw Error(n(161))}}catch(dt){Fr(l,l.return,dt)}l.flags&=-3}f&4096&&(l.flags&=-4097)}function W1(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var f=l;W1(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),l=l.sibling}}function Wl(l,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)j1(l,f.alternate,f),f=f.sibling}function Nc(l){for(l=l.child;l!==null;){var f=l;switch(f.tag){case 0:case 11:case 14:case 15:io(4,f,f.return),Nc(f);break;case 1:Is(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&u0(f,f.return,y),Nc(f);break;case 27:p0(f.stateNode);case 26:case 5:Is(f,f.return),Nc(f);break;case 22:f.memoizedState===null&&Nc(f);break;case 30:Nc(f);break;default:Nc(f)}l=l.sibling}}function br(l,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,B=l,L=f,K=L.flags;switch(L.tag){case 0:case 11:case 15:br(B,L,y),ol(4,L);break;case 1:if(br(B,L,y),S=L,B=S.stateNode,typeof B.componentDidMount=="function")try{B.componentDidMount()}catch(Je){Fr(S,S.return,Je)}if(S=L,B=S.updateQueue,B!==null){var ce=S.stateNode;try{var Oe=B.shared.hiddenCallbacks;if(Oe!==null)for(B.shared.hiddenCallbacks=null,B=0;B<Oe.length;B++)rl(Oe[B],ce)}catch(Je){Fr(S,S.return,Je)}}y&&K&64&&Hu(L),ll(L,L.return);break;case 27:mi(L);case 26:case 5:br(B,L,y),y&&S===null&&K&4&&Ps(L),ll(L,L.return);break;case 12:br(B,L,y);break;case 31:br(B,L,y),y&&K&4&&hm(B,L);break;case 13:br(B,L,y),y&&K&4&&c0(B,L);break;case 22:L.memoizedState===null&&br(B,L,y),ll(L,L.return);break;case 30:break;default:br(B,L,y)}f=f.sibling}}function dm(l,f){var y=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),l=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(l=f.memoizedState.cachePool.pool),l!==y&&(l!=null&&l.refCount++,y!=null&&ea(y))}function $l(l,f){l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&ea(l))}function Fi(l,f,y,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)ri(l,f,y,S),f=f.sibling}function ri(l,f,y,S){var B=f.flags;switch(f.tag){case 0:case 11:case 15:Fi(l,f,y,S),B&2048&&ol(9,f);break;case 1:Fi(l,f,y,S);break;case 3:Fi(l,f,y,S),B&2048&&(l=null,f.alternate!==null&&(l=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==l&&(f.refCount++,l!=null&&ea(l)));break;case 12:if(B&2048){Fi(l,f,y,S),l=f.stateNode;try{var L=f.memoizedProps,K=L.id,ce=L.onPostCommit;typeof ce=="function"&&ce(K,f.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Oe){Fr(f,f.return,Oe)}}else Fi(l,f,y,S);break;case 31:Fi(l,f,y,S);break;case 13:Fi(l,f,y,S);break;case 23:break;case 22:L=f.stateNode,K=f.alternate,f.memoizedState!==null?L._visibility&2?Fi(l,f,y,S):Vf(l,f):L._visibility&2?Fi(l,f,y,S):(L._visibility|=2,Gu(l,f,y,S,(f.subtreeFlags&10256)!==0||!1)),B&2048&&dm(K,f);break;case 24:Fi(l,f,y,S),B&2048&&$l(f.alternate,f);break;default:Fi(l,f,y,S)}}function Gu(l,f,y,S,B){for(B=B&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var L=l,K=f,ce=y,Oe=S,Je=K.flags;switch(K.tag){case 0:case 11:case 15:Gu(L,K,ce,Oe,B),ol(8,K);break;case 23:break;case 22:var dt=K.stateNode;K.memoizedState!==null?dt._visibility&2?Gu(L,K,ce,Oe,B):Vf(L,K):(dt._visibility|=2,Gu(L,K,ce,Oe,B)),B&&Je&2048&&dm(K.alternate,K);break;case 24:Gu(L,K,ce,Oe,B),B&&Je&2048&&$l(K.alternate,K);break;default:Gu(L,K,ce,Oe,B)}f=f.sibling}}function Vf(l,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=l,S=f,B=S.flags;switch(S.tag){case 22:Vf(y,S),B&2048&&dm(S.alternate,S);break;case 24:Vf(y,S),B&2048&&$l(S.alternate,S);break;default:Vf(y,S)}f=f.sibling}}var fi=8192;function Dc(l,f,y){if(l.subtreeFlags&fi)for(l=l.child;l!==null;)gi(l,f,y),l=l.sibling}function gi(l,f,y){switch(l.tag){case 26:Dc(l,f,y),l.flags&fi&&l.memoizedState!==null&&GI(y,is,l.memoizedState,l.memoizedProps);break;case 5:Dc(l,f,y);break;case 3:case 4:var S=is;is=ex(l.stateNode.containerInfo),Dc(l,f,y),is=S;break;case 22:l.memoizedState===null&&(S=l.alternate,S!==null&&S.memoizedState!==null?(S=fi,fi=16777216,Dc(l,f,y),fi=S):Dc(l,f,y));break;default:Dc(l,f,y)}}function as(l){var f=l.alternate;if(f!==null&&(l=f.child,l!==null)){f.child=null;do f=l.sibling,l.sibling=null,l=f;while(l!==null)}}function Ia(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];ui=S,_d(S,l)}as(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Cc(l),l=l.sibling}function Cc(l){switch(l.tag){case 0:case 11:case 15:Ia(l),l.flags&2048&&io(9,l,l.return);break;case 3:Ia(l);break;case 12:Ia(l);break;case 22:var f=l.stateNode;l.memoizedState!==null&&f._visibility&2&&(l.return===null||l.return.tag!==13)?(f._visibility&=-3,pm(l)):Ia(l);break;default:Ia(l)}}function pm(l){var f=l.deletions;if((l.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];ui=S,_d(S,l)}as(l)}for(l=l.child;l!==null;){switch(f=l,f.tag){case 0:case 11:case 15:io(8,f,f.return),pm(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,pm(f));break;default:pm(f)}l=l.sibling}}function _d(l,f){for(;ui!==null;){var y=ui;switch(y.tag){case 0:case 11:case 15:io(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:ea(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,ui=S;else e:for(y=l;ui!==null;){S=ui;var B=S.sibling,L=S.return;if(fm(S),S===y){ui=null;break e}if(B!==null){B.return=L,ui=B;break e}ui=L}}}var mm={getCacheForType:function(l){var f=ji(Zt),y=f.data.get(l);return y===void 0&&(y=l(),f.data.set(l,y)),y},cacheSignal:function(){return ji(Zt).controller.signal}},vm=typeof WeakMap=="function"?WeakMap:Map,nr=0,_r=null,On=null,Yn=0,Kt=0,qn=null,Mn=!1,Pn=!1,Br=!1,yi=0,Sr=0,Hs=0,Zl=0,Oo=0,rr=0,Vs=0,Bo=null,Ma=null,ss=!1,Kl=0,qf=0,qs=1/0,Gf=null,cl=null,ii=0,Uo=null,Gs=null,oo=0,Ql=0,Rc=null,gm=null,Oc=0,Bc=null;function Pa(){return(nr&2)!==0&&Yn!==0?Yn&-Yn:I.T!==null?UM():ht()}function p(){if(rr===0)if((Yn&536870912)===0||Zn){var l=ze;ze<<=1,(ze&3932160)===0&&(ze=262144),rr=l}else rr=536870912;return l=zi.current,l!==null&&(l.flags|=32),rr}function g(l,f,y){(l===_r&&(Kt===2||Kt===9)||l.cancelPendingCommit!==null)&&(je(l,0),j(l,Yn,rr,!1)),Dr(l,y),((nr&2)===0||l!==_r)&&(l===_r&&((nr&2)===0&&(Zl|=y),Sr===4&&j(l,Yn,rr,!1)),ku(l))}function w(l,f,y){if((nr&6)!==0)throw Error(n(327));var S=!y&&(f&127)===0&&(f&l.expiredLanes)===0||Nt(l,f),B=S?Uc(l,f):os(l,f,!0),L=S;do{if(B===0){Pn&&!S&&j(l,f,0,!1);break}else{if(y=l.current.alternate,L&&!P(y)){B=os(l,f,!1),L=!1;continue}if(B===2){if(L=f,l.errorRecoveryDisabledLanes&L)var K=0;else K=l.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){f=K;e:{var ce=l;B=Bo;var Oe=ce.current.memoizedState.isDehydrated;if(Oe&&(je(ce,K).flags|=256),K=os(ce,K,!1),K!==2){if(Br&&!Oe){ce.errorRecoveryDisabledLanes|=L,Zl|=L,B=4;break e}L=Ma,Ma=B,L!==null&&(Ma===null?Ma=L:Ma.push.apply(Ma,L))}B=K}if(L=!1,B!==2)continue}}if(B===1){je(l,0),j(l,f,0,!0);break}e:{switch(S=l,L=B,L){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:j(S,f,rr,!Mn);break e;case 2:Ma=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(B=Kl+300-V(),10<B)){if(j(S,f,rr,!Mn),ct(S,0,!0)!==0)break e;oo=f,S.timeoutHandle=zT(U.bind(null,S,y,Ma,Gf,ss,f,rr,Zl,Vs,Mn,L,"Throttled",-0,0),B);break e}U(S,y,Ma,Gf,ss,f,rr,Zl,Vs,Mn,L,null,-0,0)}}break}while(!0);ku(l)}function U(l,f,y,S,B,L,K,ce,Oe,Je,dt,xt,nt,lt){if(l.timeoutHandle=-1,xt=f.subtreeFlags,xt&8192||(xt&16785408)===16785408){xt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lr},gi(f,L,xt);var kt=(L&62914560)===L?Kl-V():(L&4194048)===L?qf-V():0;if(kt=kI(xt,kt),kt!==null){oo=L,l.cancelPendingCommit=kt(dn.bind(null,l,f,L,y,S,B,K,ce,Oe,dt,xt,null,nt,lt)),j(l,L,K,!Je);return}}dn(l,f,L,y,S,B,K,ce,Oe)}function P(l){for(var f=l;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var B=y[S],L=B.getSnapshot;B=B.value;try{if(!Qr(L(),B))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function j(l,f,y,S){f&=~Oo,f&=~Zl,l.suspendedLanes|=f,l.pingedLanes&=~f,S&&(l.warmLanes|=f),S=l.expirationTimes;for(var B=f;0<B;){var L=31-ye(B),K=1<<L;S[L]=-1,B&=~K}y!==0&&Es(l,y,f)}function me(){return(nr&6)===0?(f0(0),!1):!0}function Re(){if(On!==null){if(Kt===0)var l=On.return;else l=On,ya=Il=null,Vg(l),Ou=null,Bu=0,l=On;for(;l!==null;)Tc(l.alternate,l),l=l.return;On=null}}function je(l,f){var y=l.timeoutHandle;y!==-1&&(l.timeoutHandle=-1,wI(y)),y=l.cancelPendingCommit,y!==null&&(l.cancelPendingCommit=null,y()),oo=0,Re(),_r=l,On=y=Ko(l.current,null),Yn=f,Kt=0,qn=null,Mn=!1,Pn=Nt(l,f),Br=!1,Vs=rr=Oo=Zl=Hs=Sr=0,Ma=Bo=null,ss=!1,(f&8)!==0&&(f|=f&32);var S=l.entangledLanes;if(S!==0)for(l=l.entanglements,S&=f;0<S;){var B=31-ye(S),L=1<<B;f|=l[B],S&=~L}return yi=f,Au(),y}function vt(l,f){hn=null,I.H=ud,f===Ru||f===No?(f=Xp(),Kt=3):f===Jh?(f=Xp(),Kt=4):Kt=f===lm?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,qn=f,On===null&&(Sr=1,om(l,Qa(f,l.current)))}function At(){var l=zi.current;return l===null?!0:(Yn&4194048)===Yn?to===null:(Yn&62914560)===Yn||(Yn&536870912)!==0?l===to:!1}function Bt(){var l=I.H;return I.H=ud,l===null?ud:l}function Ft(){var l=I.A;return I.A=mm,l}function xn(){Sr=4,Mn||(Yn&4194048)!==Yn&&zi.current!==null||(Pn=!0),(Hs&134217727)===0&&(Zl&134217727)===0||_r===null||j(_r,Yn,rr,!1)}function os(l,f,y){var S=nr;nr|=2;var B=Bt(),L=Ft();(_r!==l||Yn!==f)&&(Gf=null,je(l,f)),f=!1;var K=Sr;e:do try{if(Kt!==0&&On!==null){var ce=On,Oe=qn;switch(Kt){case 8:Re(),K=6;break e;case 3:case 2:case 9:case 6:zi.current===null&&(f=!0);var Je=Kt;if(Kt=0,qn=null,Mt(l,ce,Oe,Je),y&&Pn){K=0;break e}break;default:Je=Kt,Kt=0,qn=null,Mt(l,ce,Oe,Je)}}Sd(),K=Sr;break}catch(dt){vt(l,dt)}while(!0);return f&&l.shellSuspendCounter++,ya=Il=null,nr=S,I.H=B,I.A=L,On===null&&(_r=null,Yn=0,Au()),K}function Sd(){for(;On!==null;)ke(On)}function Uc(l,f){var y=nr;nr|=2;var S=Bt(),B=Ft();_r!==l||Yn!==f?(Gf=null,qs=V()+500,je(l,f)):Pn=Nt(l,f);e:do try{if(Kt!==0&&On!==null){f=On;var L=qn;t:switch(Kt){case 1:Kt=0,qn=null,Mt(l,f,L,1);break;case 2:case 9:if(x1(L)){Kt=0,qn=null,st(f);break}f=function(){Kt!==2&&Kt!==9||_r!==l||(Kt=7),ku(l)},L.then(f,f);break e;case 3:Kt=7;break e;case 4:Kt=5;break e;case 7:x1(L)?(Kt=0,qn=null,st(f)):(Kt=0,qn=null,Mt(l,f,L,7));break;case 5:var K=null;switch(On.tag){case 26:K=On.memoizedState;case 5:case 27:var ce=On;if(K?ZT(K):ce.stateNode.complete){Kt=0,qn=null;var Oe=ce.sibling;if(Oe!==null)On=Oe;else{var Je=ce.return;Je!==null?(On=Je,Wt(Je)):On=null}break t}}Kt=0,qn=null,Mt(l,f,L,5);break;case 6:Kt=0,qn=null,Mt(l,f,L,6);break;case 8:Re(),Sr=6;break e;default:throw Error(n(462))}}et();break}catch(dt){vt(l,dt)}while(!0);return ya=Il=null,I.H=S,I.A=B,nr=y,On!==null?0:(_r=null,Yn=0,Au(),Sr)}function et(){for(;On!==null&&!Ce();)ke(On)}function ke(l){var f=um(l.alternate,l,yi);l.memoizedProps=l.pendingProps,f===null?Wt(l):On=f}function st(l){var f=l,y=f.alternate;switch(f.tag){case 15:case 0:f=ba(y,f,f.pendingProps,f.type,void 0,Yn);break;case 11:f=ba(y,f,f.pendingProps,f.type.render,f.ref,Yn);break;case 5:Vg(f);default:Tc(y,f),f=On=ga(f,yi),f=um(y,f,yi)}l.memoizedProps=l.pendingProps,f===null?Wt(l):On=f}function Mt(l,f,y,S){ya=Il=null,Vg(f),Ou=null,Bu=0;var B=f.return;try{if(Bs(l,B,f,y,Yn)){Sr=1,om(l,Qa(y,l.current)),On=null;return}}catch(L){if(B!==null)throw On=B,L;Sr=1,om(l,Qa(y,l.current)),On=null;return}f.flags&32768?(Zn||S===1?l=!0:Pn||(Yn&536870912)!==0?l=!1:(Mn=l=!0,(S===2||S===9||S===3||S===6)&&(S=zi.current,S!==null&&S.tag===13&&(S.flags|=16384))),kr(f,l)):Wt(f)}function Wt(l){var f=l;do{if((f.flags&32768)!==0){kr(f,Mn);return}l=f.return;var y=l0(f.alternate,f,yi);if(y!==null){On=y;return}if(f=f.sibling,f!==null){On=f;return}On=f=l}while(f!==null);Sr===0&&(Sr=5)}function kr(l,f){do{var y=cm(l.alternate,l);if(y!==null){y.flags&=32767,On=y;return}if(y=l.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(l=l.sibling,l!==null)){On=l;return}On=l=y}while(l!==null);Sr=6,On=null}function dn(l,f,y,S,B,L,K,ce,Oe){l.cancelPendingCommit=null;do ym();while(ii!==0);if((nr&6)!==0)throw Error(n(327));if(f!==null){if(f===l.current)throw Error(n(177));if(L=f.lanes|f.childLanes,L|=Lp,ni(l,y,L,K,ce,Oe),l===_r&&(On=_r=null,Yn=0),Gs=f,Uo=l,oo=y,Ql=L,Rc=B,gm=S,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,dI(ve,function(){return yT(),null})):(l.callbackNode=null,l.callbackPriority=0),S=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||S){S=I.T,I.T=null,B=Z.p,Z.p=2,K=nr,nr|=4;try{Hf(l,f,y)}finally{nr=K,Z.p=B,I.T=S}}ii=1,fr(),Li(),hr()}}function fr(){if(ii===1){ii=0;var l=Uo,f=Gs,y=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||y){y=I.T,I.T=null;var S=Z.p;Z.p=2;var B=nr;nr|=4;try{qu(f,l);var L=qM,K=Op(l.containerInfo),ce=L.focusedElem,Oe=L.selectionRange;if(K!==ce&&ce&&ce.ownerDocument&&Rp(ce.ownerDocument.documentElement,ce)){if(Oe!==null&&xf(ce)){var Je=Oe.start,dt=Oe.end;if(dt===void 0&&(dt=Je),"selectionStart"in ce)ce.selectionStart=Je,ce.selectionEnd=Math.min(dt,ce.value.length);else{var xt=ce.ownerDocument||document,nt=xt&&xt.defaultView||window;if(nt.getSelection){var lt=nt.getSelection(),kt=ce.textContent.length,un=Math.min(Oe.start,kt),jr=Oe.end===void 0?un:Math.min(Oe.end,kt);!lt.extend&&un>jr&&(K=jr,jr=un,un=K);var Xe=vg(ce,un),Ie=vg(ce,jr);if(Xe&&Ie&&(lt.rangeCount!==1||lt.anchorNode!==Xe.node||lt.anchorOffset!==Xe.offset||lt.focusNode!==Ie.node||lt.focusOffset!==Ie.offset)){var Ke=xt.createRange();Ke.setStart(Xe.node,Xe.offset),lt.removeAllRanges(),un>jr?(lt.addRange(Ke),lt.extend(Ie.node,Ie.offset)):(Ke.setEnd(Ie.node,Ie.offset),lt.addRange(Ke))}}}}for(xt=[],lt=ce;lt=lt.parentNode;)lt.nodeType===1&&xt.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<xt.length;ce++){var yt=xt[ce];yt.element.scrollLeft=yt.left,yt.element.scrollTop=yt.top}}sx=!!VM,qM=VM=null}finally{nr=B,Z.p=S,I.T=y}}l.current=f,ii=2}}function Li(){if(ii===2){ii=0;var l=Uo,f=Gs,y=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||y){y=I.T,I.T=null;var S=Z.p;Z.p=2;var B=nr;nr|=4;try{j1(l,f.alternate,f)}finally{nr=B,Z.p=S,I.T=y}}ii=3}}function hr(){if(ii===4||ii===3){ii=0,q();var l=Uo,f=Gs,y=oo,S=gm;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ii=5:(ii=0,Gs=Uo=null,Jl(l,l.pendingLanes));var B=l.pendingLanes;if(B===0&&(cl=null),Wa(y),f=f.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(rt,f,void 0,(f.current.flags&128)===128)}catch{}if(S!==null){f=I.T,B=Z.p,Z.p=2,I.T=null;try{for(var L=l.onRecoverableError,K=0;K<S.length;K++){var ce=S[K];L(ce.value,{componentStack:ce.stack})}}finally{I.T=f,Z.p=B}}(oo&3)!==0&&ym(),ku(l),B=l.pendingLanes,(y&261930)!==0&&(B&42)!==0?l===Bc?Oc++:(Oc=0,Bc=l):Oc=0,f0(0)}}function Jl(l,f){(l.pooledCacheLanes&=f)===0&&(f=l.pooledCache,f!=null&&(l.pooledCache=null,ea(f)))}function ym(){return fr(),Li(),hr(),yT()}function yT(){if(ii!==5)return!1;var l=Uo,f=Ql;Ql=0;var y=Wa(oo),S=I.T,B=Z.p;try{Z.p=32>y?32:y,I.T=null,y=Rc,Rc=null;var L=Uo,K=oo;if(ii=0,Gs=Uo=null,oo=0,(nr&6)!==0)throw Error(n(331));var ce=nr;if(nr|=4,Cc(L.current),ri(L,L.current,K,y),nr=ce,f0(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(rt,L)}catch{}return!0}finally{Z.p=B,I.T=S,Jl(l,f)}}function xT(l,f,y){f=Qa(y,f),f=o0(l.stateNode,f,2),l=ql(l,f,2),l!==null&&(Dr(l,2),ku(l))}function Fr(l,f,y){if(l.tag===3)xT(l,l,y);else for(;f!==null;){if(f.tag===3){xT(f,l,y);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(cl===null||!cl.has(S))){l=Qa(y,l),y=zf(2),S=ql(f,y,2),S!==null&&(ns(y,S,f,l),Dr(S,2),ku(S));break}}f=f.return}}function RM(l,f,y){var S=l.pingCache;if(S===null){S=l.pingCache=new vm;var B=new Set;S.set(f,B)}else B=S.get(f),B===void 0&&(B=new Set,S.set(f,B));B.has(y)||(Br=!0,B.add(y),l=cI.bind(null,l,f,y),f.then(l,l))}function cI(l,f,y){var S=l.pingCache;S!==null&&S.delete(f),l.pingedLanes|=l.suspendedLanes&y,l.warmLanes&=~y,_r===l&&(Yn&y)===y&&(Sr===4||Sr===3&&(Yn&62914560)===Yn&&300>V()-Kl?(nr&2)===0&&je(l,0):Oo|=y,Vs===Yn&&(Vs=0)),ku(l)}function bT(l,f){f===0&&(f=yn()),l=wu(l,f),l!==null&&(Dr(l,f),ku(l))}function fI(l){var f=l.memoizedState,y=0;f!==null&&(y=f.retryLane),bT(l,y)}function hI(l,f){var y=0;switch(l.tag){case 31:case 13:var S=l.stateNode,B=l.memoizedState;B!==null&&(y=B.retryLane);break;case 19:S=l.stateNode;break;case 22:S=l.stateNode._retryCache;break;default:throw Error(n(314))}S!==null&&S.delete(f),bT(l,y)}function dI(l,f){return re(l,f)}var $1=null,xm=null,OM=!1,Z1=!1,BM=!1,kf=0;function ku(l){l!==xm&&l.next===null&&(xm===null?$1=xm=l:xm=xm.next=l),Z1=!0,OM||(OM=!0,mI())}function f0(l,f){if(!BM&&Z1){BM=!0;do for(var y=!1,S=$1;S!==null;){if(l!==0){var B=S.pendingLanes;if(B===0)var L=0;else{var K=S.suspendedLanes,ce=S.pingedLanes;L=(1<<31-ye(42|l)+1)-1,L&=B&~(K&~ce),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(y=!0,ET(S,L))}else L=Yn,L=ct(S,S===_r?L:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(L&3)===0||Nt(S,L)||(y=!0,ET(S,L));S=S.next}while(y);BM=!1}}function pI(){_T()}function _T(){Z1=OM=!1;var l=0;kf!==0&&AI()&&(l=kf);for(var f=V(),y=null,S=$1;S!==null;){var B=S.next,L=ST(S,f);L===0?(S.next=null,y===null?$1=B:y.next=B,B===null&&(xm=y)):(y=S,(l!==0||(L&3)!==0)&&(Z1=!0)),S=B}ii!==0&&ii!==5||f0(l),kf!==0&&(kf=0)}function ST(l,f){for(var y=l.suspendedLanes,S=l.pingedLanes,B=l.expirationTimes,L=l.pendingLanes&-62914561;0<L;){var K=31-ye(L),ce=1<<K,Oe=B[K];Oe===-1?((ce&y)===0||(ce&S)!==0)&&(B[K]=It(ce,f)):Oe<=f&&(l.expiredLanes|=ce),L&=~ce}if(f=_r,y=Yn,y=ct(l,l===f?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S=l.callbackNode,y===0||l===f&&(Kt===2||Kt===9)||l.cancelPendingCommit!==null)return S!==null&&S!==null&&be(S),l.callbackNode=null,l.callbackPriority=0;if((y&3)===0||Nt(l,y)){if(f=y&-y,f===l.callbackPriority)return f;switch(S!==null&&be(S),Wa(y)){case 2:case 8:y=Se;break;case 32:y=ve;break;case 268435456:y=Fe;break;default:y=ve}return S=MT.bind(null,l),y=re(y,S),l.callbackPriority=f,l.callbackNode=y,f}return S!==null&&S!==null&&be(S),l.callbackPriority=2,l.callbackNode=null,2}function MT(l,f){if(ii!==0&&ii!==5)return l.callbackNode=null,l.callbackPriority=0,null;var y=l.callbackNode;if(ym()&&l.callbackNode!==y)return null;var S=Yn;return S=ct(l,l===_r?S:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S===0?null:(w(l,S,f),ST(l,V()),l.callbackNode!=null&&l.callbackNode===y?MT.bind(null,l):null)}function ET(l,f){if(ym())return null;w(l,f,!0)}function mI(){TI(function(){(nr&6)!==0?re(fe,pI):_T()})}function UM(){if(kf===0){var l=Vl;l===0&&(l=Ee,Ee<<=1,(Ee&261888)===0&&(Ee=256)),kf=l}return kf}function AT(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Tr(""+l)}function wT(l,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,l.id&&y.setAttribute("form",l.id),f.parentNode.insertBefore(y,f),l=new FormData(l),y.parentNode.removeChild(y),l}function vI(l,f,y,S,B){if(f==="submit"&&y&&y.stateNode===B){var L=AT((B[zr]||null).action),K=S.submitter;K&&(f=(f=K[zr]||null)?AT(f.formAction):K.getAttribute("formAction"),f!==null&&(L=f,K=null));var ce=new Ih("action","action",null,S,B);l.push({event:ce,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(kf!==0){var Oe=K?wT(B,K):new FormData(B);n0(y,{pending:!0,data:Oe,method:B.method,action:L},null,Oe)}}else typeof L=="function"&&(ce.preventDefault(),Oe=K?wT(B,K):new FormData(B),n0(y,{pending:!0,data:Oe,method:B.method,action:L},L,Oe))},currentTarget:B}]})}}for(var zM=0;zM<Fp.length;zM++){var FM=Fp[zM],gI=FM.toLowerCase(),yI=FM[0].toUpperCase()+FM.slice(1);va(gI,"on"+yI)}va(Ka,"onAnimationEnd"),va(gg,"onAnimationIteration"),va(Zo,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(Mf,"onTransitionRun"),va(Mu,"onTransitionStart"),va(yg,"onTransitionCancel"),va(zp,"onTransitionEnd"),Lt("onMouseEnter",["mouseout","mouseover"]),Lt("onMouseLeave",["mouseout","mouseover"]),Lt("onPointerEnter",["pointerout","pointerover"]),Lt("onPointerLeave",["pointerout","pointerover"]),Tt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var h0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(h0));function TT(l,f){f=(f&4)!==0;for(var y=0;y<l.length;y++){var S=l[y],B=S.event;S=S.listeners;e:{var L=void 0;if(f)for(var K=S.length-1;0<=K;K--){var ce=S[K],Oe=ce.instance,Je=ce.currentTarget;if(ce=ce.listener,Oe!==L&&B.isPropagationStopped())break e;L=ce,B.currentTarget=Je;try{L(B)}catch(dt){Eu(dt)}B.currentTarget=null,L=Oe}else for(K=0;K<S.length;K++){if(ce=S[K],Oe=ce.instance,Je=ce.currentTarget,ce=ce.listener,Oe!==L&&B.isPropagationStopped())break e;L=ce,B.currentTarget=Je;try{L(B)}catch(dt){Eu(dt)}B.currentTarget=null,L=Oe}}}}function Kn(l,f){var y=f[Yo];y===void 0&&(y=f[Yo]=new Set);var S=l+"__bubble";y.has(S)||(NT(f,l,2,!1),y.add(S))}function LM(l,f,y){var S=0;f&&(S|=4),NT(y,l,S,f)}var K1="_reactListening"+Math.random().toString(36).slice(2);function IM(l){if(!l[K1]){l[K1]=!0,wt.forEach(function(y){y!=="selectionchange"&&(xI.has(y)||LM(y,!1,l),LM(y,!0,l))});var f=l.nodeType===9?l:l.ownerDocument;f===null||f[K1]||(f[K1]=!0,LM("selectionchange",!1,f))}}function NT(l,f,y,S){switch(rN(f)){case 2:var B=YI;break;case 8:B=WI;break;default:B=JM}y=B.bind(null,f,y,l),B=void 0,!Si||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(B=!0),S?B!==void 0?l.addEventListener(f,y,{capture:!0,passive:B}):l.addEventListener(f,y,!0):B!==void 0?l.addEventListener(f,y,{passive:B}):l.addEventListener(f,y,!1)}function PM(l,f,y,S,B){var L=S;if((f&1)===0&&(f&2)===0&&S!==null)e:for(;;){if(S===null)return;var K=S.tag;if(K===3||K===4){var ce=S.stateNode.containerInfo;if(ce===B)break;if(K===4)for(K=S.return;K!==null;){var Oe=K.tag;if((Oe===3||Oe===4)&&K.stateNode.containerInfo===B)return;K=K.return}for(;ce!==null;){if(K=He(ce),K===null)return;if(Oe=K.tag,Oe===5||Oe===6||Oe===26||Oe===27){S=L=K;continue e}ce=ce.parentNode}}S=S.return}Wo(function(){var Je=L,dt=bo(y),xt=[];e:{var nt=Ul.get(l);if(nt!==void 0){var lt=Ih,kt=l;switch(l){case"keypress":if(mu(y)===0)break e;case"keydown":case"keyup":lt=sg;break;case"focusin":kt="focus",lt=wp;break;case"focusout":kt="blur",lt=wp;break;case"beforeblur":case"afterblur":lt=wp;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Zy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Ky;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Ol;break;case Ka:case gg:case Zo:lt=e1;break;case zp:lt=MM;break;case"scroll":case"scrollend":lt=Ep;break;case"wheel":lt=gu;break;case"copy":case"cut":case"paste":lt=tg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Tp;break;case"toggle":case"beforetoggle":lt=lg}var un=(f&4)!==0,jr=!un&&(l==="scroll"||l==="scrollend"),Xe=un?nt!==null?nt+"Capture":null:nt;un=[];for(var Ie=Je,Ke;Ie!==null;){var yt=Ie;if(Ke=yt.stateNode,yt=yt.tag,yt!==5&&yt!==26&&yt!==27||Ke===null||Xe===null||(yt=Cl(Ie,Xe),yt!=null&&un.push(d0(Ie,yt,Ke))),jr)break;Ie=Ie.return}0<un.length&&(nt=new lt(nt,kt,null,y,dt),xt.push({event:nt,listeners:un}))}}if((f&7)===0){e:{if(nt=l==="mouseover"||l==="pointerover",lt=l==="mouseout"||l==="pointerout",nt&&y!==ws&&(kt=y.relatedTarget||y.fromElement)&&(He(kt)||kt[$a]))break e;if((lt||nt)&&(nt=dt.window===dt?dt:(nt=dt.ownerDocument)?nt.defaultView||nt.parentWindow:window,lt?(kt=y.relatedTarget||y.toElement,lt=Je,kt=kt?He(kt):null,kt!==null&&(jr=a(kt),un=kt.tag,kt!==jr||un!==5&&un!==27&&un!==6)&&(kt=null)):(lt=null,kt=Je),lt!==kt)){if(un=Zy,yt="onMouseLeave",Xe="onMouseEnter",Ie="mouse",(l==="pointerout"||l==="pointerover")&&(un=Tp,yt="onPointerLeave",Xe="onPointerEnter",Ie="pointer"),jr=lt==null?nt:Qe(lt),Ke=kt==null?nt:Qe(kt),nt=new un(yt,Ie+"leave",lt,y,dt),nt.target=jr,nt.relatedTarget=Ke,yt=null,He(dt)===Je&&(un=new un(Xe,Ie+"enter",kt,y,dt),un.target=Ke,un.relatedTarget=jr,yt=un),jr=yt,lt&&kt)t:{for(un=bI,Xe=lt,Ie=kt,Ke=0,yt=Xe;yt;yt=un(yt))Ke++;yt=0;for(var en=Ie;en;en=un(en))yt++;for(;0<Ke-yt;)Xe=un(Xe),Ke--;for(;0<yt-Ke;)Ie=un(Ie),yt--;for(;Ke--;){if(Xe===Ie||Ie!==null&&Xe===Ie.alternate){un=Xe;break t}Xe=un(Xe),Ie=un(Ie)}un=null}else un=null;lt!==null&&DT(xt,nt,lt,un,!1),kt!==null&&jr!==null&&DT(xt,jr,kt,un,!0)}}e:{if(nt=Je?Qe(Je):window,lt=nt.nodeName&&nt.nodeName.toLowerCase(),lt==="select"||lt==="input"&&nt.type==="file")var Mr=dg;else if(fg(nt))if(kh)Mr=f1;else{Mr=bu;var jt=Xh}else lt=nt.nodeName,!lt||lt.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?Je&&Oi(Je.elementType)&&(Mr=dg):Mr=c1;if(Mr&&(Mr=Mr(l,Je))){Cp(xt,Mr,y,dt);break e}jt&&jt(l,nt,Je),l==="focusout"&&Je&&nt.type==="number"&&Je.memoizedProps.value!=null&&nn(nt,"number",nt.value)}switch(jt=Je?Qe(Je):window,l){case"focusin":(fg(jt)||jt.contentEditable==="true")&&(bf=jt,Bp=Je,_f=null);break;case"focusout":_f=Bp=bf=null;break;case"mousedown":Ns=!0;break;case"contextmenu":case"mouseup":case"dragend":Ns=!1,Up(xt,y,dt);break;case"selectionchange":if(h1)break;case"keydown":case"keyup":Up(xt,y,dt)}var Hn;if(fc)e:{switch(l){case"compositionstart":var ir="onCompositionStart";break e;case"compositionend":ir="onCompositionEnd";break e;case"compositionupdate":ir="onCompositionUpdate";break e}ir=void 0}else xu?Np(l,y)&&(ir="onCompositionEnd"):l==="keydown"&&y.keyCode===229&&(ir="onCompositionStart");ir&&(Ji&&y.locale!=="ko"&&(xu||ir!=="onCompositionStart"?ir==="onCompositionEnd"&&xu&&(Hn=Lh()):(So=dt,Fh="value"in So?So.value:So.textContent,xu=!0)),jt=Q1(Je,ir),0<jt.length&&(ir=new ng(ir,l,null,y,dt),xt.push({event:ir,listeners:jt}),Hn?ir.data=Hn:(Hn=pf(y),Hn!==null&&(ir.data=Hn)))),(Hn=hc?Dp(l,y):o1(l,y))&&(ir=Q1(Je,"onBeforeInput"),0<ir.length&&(jt=new ng("onBeforeInput","beforeinput",null,y,dt),xt.push({event:jt,listeners:ir}),jt.data=Hn)),vI(xt,l,Je,y,dt)}TT(xt,f)})}function d0(l,f,y){return{instance:l,listener:f,currentTarget:y}}function Q1(l,f){for(var y=f+"Capture",S=[];l!==null;){var B=l,L=B.stateNode;if(B=B.tag,B!==5&&B!==26&&B!==27||L===null||(B=Cl(l,y),B!=null&&S.unshift(d0(l,B,L)),B=Cl(l,f),B!=null&&S.push(d0(l,B,L))),l.tag===3)return S;l=l.return}return[]}function bI(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function DT(l,f,y,S,B){for(var L=f._reactName,K=[];y!==null&&y!==S;){var ce=y,Oe=ce.alternate,Je=ce.stateNode;if(ce=ce.tag,Oe!==null&&Oe===S)break;ce!==5&&ce!==26&&ce!==27||Je===null||(Oe=Je,B?(Je=Cl(y,L),Je!=null&&K.unshift(d0(y,Je,Oe))):B||(Je=Cl(y,L),Je!=null&&K.push(d0(y,Je,Oe)))),y=y.return}K.length!==0&&l.push({event:f,listeners:K})}var _I=/\r\n?/g,SI=/\u0000|\uFFFD/g;function CT(l){return(typeof l=="string"?l:""+l).replace(_I,`
`).replace(SI,"")}function RT(l,f){return f=CT(f),CT(l)===f}function Xr(l,f,y,S,B,L){switch(y){case"children":typeof S=="string"?f==="body"||f==="textarea"&&S===""||Gt(l,S):(typeof S=="number"||typeof S=="bigint")&&f!=="body"&&Gt(l,""+S);break;case"className":sr(l,"class",S);break;case"tabIndex":sr(l,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":sr(l,y,S);break;case"style":Za(l,S,L);break;case"data":if(f!=="object"){sr(l,"data",S);break}case"src":case"href":if(S===""&&(f!=="a"||y!=="href")){l.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(y);break}S=Tr(""+S),l.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){l.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(y==="formAction"?(f!=="input"&&Xr(l,f,"name",B.name,B,null),Xr(l,f,"formEncType",B.formEncType,B,null),Xr(l,f,"formMethod",B.formMethod,B,null),Xr(l,f,"formTarget",B.formTarget,B,null)):(Xr(l,f,"encType",B.encType,B,null),Xr(l,f,"method",B.method,B,null),Xr(l,f,"target",B.target,B,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(y);break}S=Tr(""+S),l.setAttribute(y,S);break;case"onClick":S!=null&&(l.onclick=lr);break;case"onScroll":S!=null&&Kn("scroll",l);break;case"onScrollEnd":S!=null&&Kn("scrollend",l);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(n(61));if(y=S.__html,y!=null){if(B.children!=null)throw Error(n(60));l.innerHTML=y}}break;case"multiple":l.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":l.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){l.removeAttribute("xlink:href");break}y=Tr(""+S),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(y,""+S):l.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(y,""):l.removeAttribute(y);break;case"capture":case"download":S===!0?l.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(y,S):l.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?l.setAttribute(y,S):l.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?l.removeAttribute(y):l.setAttribute(y,S);break;case"popover":Kn("beforetoggle",l),Kn("toggle",l),$n(l,"popover",S);break;case"xlinkActuate":Cn(l,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Cn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Cn(l,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Cn(l,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Cn(l,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Cn(l,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Cn(l,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Cn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Cn(l,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":$n(l,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=tr.get(y)||y,$n(l,y,S))}}function HM(l,f,y,S,B,L){switch(y){case"style":Za(l,S,L);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(n(61));if(y=S.__html,y!=null){if(B.children!=null)throw Error(n(60));l.innerHTML=y}}break;case"children":typeof S=="string"?Gt(l,S):(typeof S=="number"||typeof S=="bigint")&&Gt(l,""+S);break;case"onScroll":S!=null&&Kn("scroll",l);break;case"onScrollEnd":S!=null&&Kn("scrollend",l);break;case"onClick":S!=null&&(l.onclick=lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ot.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(B=y.endsWith("Capture"),f=y.slice(2,B?y.length-7:void 0),L=l[zr]||null,L=L!=null?L[y]:null,typeof L=="function"&&l.removeEventListener(f,L,B),typeof S=="function")){typeof L!="function"&&L!==null&&(y in l?l[y]=null:l.hasAttribute(y)&&l.removeAttribute(y)),l.addEventListener(f,S,B);break e}y in l?l[y]=S:S===!0?l.setAttribute(y,""):$n(l,y,S)}}}function Ha(l,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kn("error",l),Kn("load",l);var S=!1,B=!1,L;for(L in y)if(y.hasOwnProperty(L)){var K=y[L];if(K!=null)switch(L){case"src":S=!0;break;case"srcSet":B=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Xr(l,f,L,K,y,null)}}B&&Xr(l,f,"srcSet",y.srcSet,y,null),S&&Xr(l,f,"src",y.src,y,null);return;case"input":Kn("invalid",l);var ce=L=K=B=null,Oe=null,Je=null;for(S in y)if(y.hasOwnProperty(S)){var dt=y[S];if(dt!=null)switch(S){case"name":B=dt;break;case"type":K=dt;break;case"checked":Oe=dt;break;case"defaultChecked":Je=dt;break;case"value":L=dt;break;case"defaultValue":ce=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(n(137,f));break;default:Xr(l,f,S,dt,y,null)}}Yt(l,L,ce,Oe,Je,K,B,!1);return;case"select":Kn("invalid",l),S=K=L=null;for(B in y)if(y.hasOwnProperty(B)&&(ce=y[B],ce!=null))switch(B){case"value":L=ce;break;case"defaultValue":K=ce;break;case"multiple":S=ce;default:Xr(l,f,B,ce,y,null)}f=L,y=K,l.multiple=!!S,f!=null?An(l,!!S,f,!1):y!=null&&An(l,!!S,y,!0);return;case"textarea":Kn("invalid",l),L=B=S=null;for(K in y)if(y.hasOwnProperty(K)&&(ce=y[K],ce!=null))switch(K){case"value":S=ce;break;case"defaultValue":B=ce;break;case"children":L=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(91));break;default:Xr(l,f,K,ce,y,null)}er(l,S,B,L);return;case"option":for(Oe in y)if(y.hasOwnProperty(Oe)&&(S=y[Oe],S!=null))switch(Oe){case"selected":l.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:Xr(l,f,Oe,S,y,null)}return;case"dialog":Kn("beforetoggle",l),Kn("toggle",l),Kn("cancel",l),Kn("close",l);break;case"iframe":case"object":Kn("load",l);break;case"video":case"audio":for(S=0;S<h0.length;S++)Kn(h0[S],l);break;case"image":Kn("error",l),Kn("load",l);break;case"details":Kn("toggle",l);break;case"embed":case"source":case"link":Kn("error",l),Kn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in y)if(y.hasOwnProperty(Je)&&(S=y[Je],S!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Xr(l,f,Je,S,y,null)}return;default:if(Oi(f)){for(dt in y)y.hasOwnProperty(dt)&&(S=y[dt],S!==void 0&&HM(l,f,dt,S,y,void 0));return}}for(ce in y)y.hasOwnProperty(ce)&&(S=y[ce],S!=null&&Xr(l,f,ce,S,y,null))}function MI(l,f,y,S){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var B=null,L=null,K=null,ce=null,Oe=null,Je=null,dt=null;for(lt in y){var xt=y[lt];if(y.hasOwnProperty(lt)&&xt!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":Oe=xt;default:S.hasOwnProperty(lt)||Xr(l,f,lt,null,S,xt)}}for(var nt in S){var lt=S[nt];if(xt=y[nt],S.hasOwnProperty(nt)&&(lt!=null||xt!=null))switch(nt){case"type":L=lt;break;case"name":B=lt;break;case"checked":Je=lt;break;case"defaultChecked":dt=lt;break;case"value":K=lt;break;case"defaultValue":ce=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(n(137,f));break;default:lt!==xt&&Xr(l,f,nt,lt,S,xt)}}Dt(l,K,ce,Oe,Je,dt,L,B);return;case"select":lt=K=ce=nt=null;for(L in y)if(Oe=y[L],y.hasOwnProperty(L)&&Oe!=null)switch(L){case"value":break;case"multiple":lt=Oe;default:S.hasOwnProperty(L)||Xr(l,f,L,null,S,Oe)}for(B in S)if(L=S[B],Oe=y[B],S.hasOwnProperty(B)&&(L!=null||Oe!=null))switch(B){case"value":nt=L;break;case"defaultValue":ce=L;break;case"multiple":K=L;default:L!==Oe&&Xr(l,f,B,L,S,Oe)}f=ce,y=K,S=lt,nt!=null?An(l,!!y,nt,!1):!!S!=!!y&&(f!=null?An(l,!!y,f,!0):An(l,!!y,y?[]:"",!1));return;case"textarea":lt=nt=null;for(ce in y)if(B=y[ce],y.hasOwnProperty(ce)&&B!=null&&!S.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:Xr(l,f,ce,null,S,B)}for(K in S)if(B=S[K],L=y[K],S.hasOwnProperty(K)&&(B!=null||L!=null))switch(K){case"value":nt=B;break;case"defaultValue":lt=B;break;case"children":break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(n(91));break;default:B!==L&&Xr(l,f,K,B,S,L)}Rr(l,nt,lt);return;case"option":for(var kt in y)if(nt=y[kt],y.hasOwnProperty(kt)&&nt!=null&&!S.hasOwnProperty(kt))switch(kt){case"selected":l.selected=!1;break;default:Xr(l,f,kt,null,S,nt)}for(Oe in S)if(nt=S[Oe],lt=y[Oe],S.hasOwnProperty(Oe)&&nt!==lt&&(nt!=null||lt!=null))switch(Oe){case"selected":l.selected=nt&&typeof nt!="function"&&typeof nt!="symbol";break;default:Xr(l,f,Oe,nt,S,lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var un in y)nt=y[un],y.hasOwnProperty(un)&&nt!=null&&!S.hasOwnProperty(un)&&Xr(l,f,un,null,S,nt);for(Je in S)if(nt=S[Je],lt=y[Je],S.hasOwnProperty(Je)&&nt!==lt&&(nt!=null||lt!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,f));break;default:Xr(l,f,Je,nt,S,lt)}return;default:if(Oi(f)){for(var jr in y)nt=y[jr],y.hasOwnProperty(jr)&&nt!==void 0&&!S.hasOwnProperty(jr)&&HM(l,f,jr,void 0,S,nt);for(dt in S)nt=S[dt],lt=y[dt],!S.hasOwnProperty(dt)||nt===lt||nt===void 0&&lt===void 0||HM(l,f,dt,nt,S,lt);return}}for(var Xe in y)nt=y[Xe],y.hasOwnProperty(Xe)&&nt!=null&&!S.hasOwnProperty(Xe)&&Xr(l,f,Xe,null,S,nt);for(xt in S)nt=S[xt],lt=y[xt],!S.hasOwnProperty(xt)||nt===lt||nt==null&&lt==null||Xr(l,f,xt,nt,S,lt)}function OT(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EI(){if(typeof performance.getEntriesByType=="function"){for(var l=0,f=0,y=performance.getEntriesByType("resource"),S=0;S<y.length;S++){var B=y[S],L=B.transferSize,K=B.initiatorType,ce=B.duration;if(L&&ce&&OT(K)){for(K=0,ce=B.responseEnd,S+=1;S<y.length;S++){var Oe=y[S],Je=Oe.startTime;if(Je>ce)break;var dt=Oe.transferSize,xt=Oe.initiatorType;dt&&OT(xt)&&(Oe=Oe.responseEnd,K+=dt*(Oe<ce?1:(ce-Je)/(Oe-Je)))}if(--S,f+=8*(L+K)/(B.duration/1e3),l++,10<l)break}}if(0<l)return f/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var VM=null,qM=null;function J1(l){return l.nodeType===9?l:l.ownerDocument}function BT(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function UT(l,f){if(l===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&f==="foreignObject"?0:l}function GM(l,f){return l==="textarea"||l==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var kM=null;function AI(){var l=window.event;return l&&l.type==="popstate"?l===kM?!1:(kM=l,!0):(kM=null,!1)}var zT=typeof setTimeout=="function"?setTimeout:void 0,wI=typeof clearTimeout=="function"?clearTimeout:void 0,FT=typeof Promise=="function"?Promise:void 0,TI=typeof queueMicrotask=="function"?queueMicrotask:typeof FT<"u"?function(l){return FT.resolve(null).then(l).catch(NI)}:zT;function NI(l){setTimeout(function(){throw l})}function Xf(l){return l==="head"}function LT(l,f){var y=f,S=0;do{var B=y.nextSibling;if(l.removeChild(y),B&&B.nodeType===8)if(y=B.data,y==="/$"||y==="/&"){if(S===0){l.removeChild(B),Mm(f);return}S--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")S++;else if(y==="html")p0(l.ownerDocument.documentElement);else if(y==="head"){y=l.ownerDocument.head,p0(y);for(var L=y.firstChild;L;){var K=L.nextSibling,ce=L.nodeName;L[Zi]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&L.rel.toLowerCase()==="stylesheet"||y.removeChild(L),L=K}}else y==="body"&&p0(l.ownerDocument.body);y=B}while(y);Mm(f)}function IT(l,f){var y=l;l=0;do{var S=y.nextSibling;if(y.nodeType===1?f?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(f?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),S&&S.nodeType===8)if(y=S.data,y==="/$"){if(l===0)break;l--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||l++;y=S}while(y)}function XM(l){var f=l.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":XM(y),he(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}l.removeChild(y)}}function DI(l,f,y,S){for(;l.nodeType===1;){var B=y;if(l.nodeName.toLowerCase()!==f.toLowerCase()){if(!S&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(S){if(!l[Zi])switch(f){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(L=l.getAttribute("rel"),L==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(L!==B.rel||l.getAttribute("href")!==(B.href==null||B.href===""?null:B.href)||l.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin)||l.getAttribute("title")!==(B.title==null?null:B.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(L=l.getAttribute("src"),(L!==(B.src==null?null:B.src)||l.getAttribute("type")!==(B.type==null?null:B.type)||l.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin))&&L&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(f==="input"&&l.type==="hidden"){var L=B.name==null?null:""+B.name;if(B.type==="hidden"&&l.getAttribute("name")===L)return l}else return l;if(l=fl(l.nextSibling),l===null)break}return null}function CI(l,f,y){if(f==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!y||(l=fl(l.nextSibling),l===null))return null;return l}function PT(l,f){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=fl(l.nextSibling),l===null))return null;return l}function jM(l){return l.data==="$?"||l.data==="$~"}function YM(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function RI(l,f){var y=l.ownerDocument;if(l.data==="$~")l._reactRetry=f;else if(l.data!=="$?"||y.readyState!=="loading")f();else{var S=function(){f(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),l._reactRetry=S}}function fl(l){for(;l!=null;l=l.nextSibling){var f=l.nodeType;if(f===1||f===3)break;if(f===8){if(f=l.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return l}var WM=null;function HT(l){l=l.nextSibling;for(var f=0;l;){if(l.nodeType===8){var y=l.data;if(y==="/$"||y==="/&"){if(f===0)return fl(l.nextSibling);f--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||f++}l=l.nextSibling}return null}function VT(l){l=l.previousSibling;for(var f=0;l;){if(l.nodeType===8){var y=l.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(f===0)return l;f--}else y!=="/$"&&y!=="/&"||f++}l=l.previousSibling}return null}function qT(l,f,y){switch(f=J1(y),l){case"html":if(l=f.documentElement,!l)throw Error(n(452));return l;case"head":if(l=f.head,!l)throw Error(n(453));return l;case"body":if(l=f.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function p0(l){for(var f=l.attributes;f.length;)l.removeAttributeNode(f[0]);he(l)}var hl=new Map,GT=new Set;function ex(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var zc=Z.d;Z.d={f:OI,r:BI,D:UI,C:zI,L:FI,m:LI,X:PI,S:II,M:HI};function OI(){var l=zc.f(),f=me();return l||f}function BI(l){var f=$e(l);f!==null&&f.tag===5&&f.type==="form"?r0(f):zc.r(l)}var bm=typeof document>"u"?null:document;function kT(l,f,y){var S=bm;if(S&&typeof f=="string"&&f){var B=tt(f);B='link[rel="'+l+'"][href="'+B+'"]',typeof y=="string"&&(B+='[crossorigin="'+y+'"]'),GT.has(B)||(GT.add(B),l={rel:l,crossOrigin:y,href:f},S.querySelector(B)===null&&(f=S.createElement("link"),Ha(f,"link",l),ut(f),S.head.appendChild(f)))}}function UI(l){zc.D(l),kT("dns-prefetch",l,null)}function zI(l,f){zc.C(l,f),kT("preconnect",l,f)}function FI(l,f,y){zc.L(l,f,y);var S=bm;if(S&&l&&f){var B='link[rel="preload"][as="'+tt(f)+'"]';f==="image"&&y&&y.imageSrcSet?(B+='[imagesrcset="'+tt(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(B+='[imagesizes="'+tt(y.imageSizes)+'"]')):B+='[href="'+tt(l)+'"]';var L=B;switch(f){case"style":L=_m(l);break;case"script":L=Sm(l)}hl.has(L)||(l=d({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:l,as:f},y),hl.set(L,l),S.querySelector(B)!==null||f==="style"&&S.querySelector(m0(L))||f==="script"&&S.querySelector(v0(L))||(f=S.createElement("link"),Ha(f,"link",l),ut(f),S.head.appendChild(f)))}}function LI(l,f){zc.m(l,f);var y=bm;if(y&&l){var S=f&&typeof f.as=="string"?f.as:"script",B='link[rel="modulepreload"][as="'+tt(S)+'"][href="'+tt(l)+'"]',L=B;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=Sm(l)}if(!hl.has(L)&&(l=d({rel:"modulepreload",href:l},f),hl.set(L,l),y.querySelector(B)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(v0(L)))return}S=y.createElement("link"),Ha(S,"link",l),ut(S),y.head.appendChild(S)}}}function II(l,f,y){zc.S(l,f,y);var S=bm;if(S&&l){var B=Ne(S).hoistableStyles,L=_m(l);f=f||"default";var K=B.get(L);if(!K){var ce={loading:0,preload:null};if(K=S.querySelector(m0(L)))ce.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":f},y),(y=hl.get(L))&&$M(l,y);var Oe=K=S.createElement("link");ut(Oe),Ha(Oe,"link",l),Oe._p=new Promise(function(Je,dt){Oe.onload=Je,Oe.onerror=dt}),Oe.addEventListener("load",function(){ce.loading|=1}),Oe.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,tx(K,f,S)}K={type:"stylesheet",instance:K,count:1,state:ce},B.set(L,K)}}}function PI(l,f){zc.X(l,f);var y=bm;if(y&&l){var S=Ne(y).hoistableScripts,B=Sm(l),L=S.get(B);L||(L=y.querySelector(v0(B)),L||(l=d({src:l,async:!0},f),(f=hl.get(B))&&ZM(l,f),L=y.createElement("script"),ut(L),Ha(L,"link",l),y.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},S.set(B,L))}}function HI(l,f){zc.M(l,f);var y=bm;if(y&&l){var S=Ne(y).hoistableScripts,B=Sm(l),L=S.get(B);L||(L=y.querySelector(v0(B)),L||(l=d({src:l,async:!0,type:"module"},f),(f=hl.get(B))&&ZM(l,f),L=y.createElement("script"),ut(L),Ha(L,"link",l),y.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},S.set(B,L))}}function XT(l,f,y,S){var B=(B=pe.current)?ex(B):null;if(!B)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=_m(y.href),y=Ne(B).hoistableStyles,S=y.get(f),S||(S={type:"style",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){l=_m(y.href);var L=Ne(B).hoistableStyles,K=L.get(l);if(K||(B=B.ownerDocument||B,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(l,K),(L=B.querySelector(m0(l)))&&!L._p&&(K.instance=L,K.state.loading=5),hl.has(l)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},hl.set(l,y),L||VI(B,l,y,K.state))),f&&S===null)throw Error(n(528,""));return K}if(f&&S!==null)throw Error(n(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Sm(y),y=Ne(B).hoistableScripts,S=y.get(f),S||(S={type:"script",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function _m(l){return'href="'+tt(l)+'"'}function m0(l){return'link[rel="stylesheet"]['+l+"]"}function jT(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function VI(l,f,y,S){l.querySelector('link[rel="preload"][as="style"]['+f+"]")?S.loading=1:(f=l.createElement("link"),S.preload=f,f.addEventListener("load",function(){return S.loading|=1}),f.addEventListener("error",function(){return S.loading|=2}),Ha(f,"link",y),ut(f),l.head.appendChild(f))}function Sm(l){return'[src="'+tt(l)+'"]'}function v0(l){return"script[async]"+l}function YT(l,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var S=l.querySelector('style[data-href~="'+tt(y.href)+'"]');if(S)return f.instance=S,ut(S),S;var B=d({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(l.ownerDocument||l).createElement("style"),ut(S),Ha(S,"style",B),tx(S,y.precedence,l),f.instance=S;case"stylesheet":B=_m(y.href);var L=l.querySelector(m0(B));if(L)return f.state.loading|=4,f.instance=L,ut(L),L;S=jT(y),(B=hl.get(B))&&$M(S,B),L=(l.ownerDocument||l).createElement("link"),ut(L);var K=L;return K._p=new Promise(function(ce,Oe){K.onload=ce,K.onerror=Oe}),Ha(L,"link",S),f.state.loading|=4,tx(L,y.precedence,l),f.instance=L;case"script":return L=Sm(y.src),(B=l.querySelector(v0(L)))?(f.instance=B,ut(B),B):(S=y,(B=hl.get(L))&&(S=d({},y),ZM(S,B)),l=l.ownerDocument||l,B=l.createElement("script"),ut(B),Ha(B,"link",S),l.head.appendChild(B),f.instance=B);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(S=f.instance,f.state.loading|=4,tx(S,y.precedence,l));return f.instance}function tx(l,f,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),B=S.length?S[S.length-1]:null,L=B,K=0;K<S.length;K++){var ce=S[K];if(ce.dataset.precedence===f)L=ce;else if(L!==B)break}L?L.parentNode.insertBefore(l,L.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(l,f.firstChild))}function $M(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.title==null&&(l.title=f.title)}function ZM(l,f){l.crossOrigin==null&&(l.crossOrigin=f.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=f.referrerPolicy),l.integrity==null&&(l.integrity=f.integrity)}var nx=null;function WT(l,f,y){if(nx===null){var S=new Map,B=nx=new Map;B.set(y,S)}else B=nx,S=B.get(y),S||(S=new Map,B.set(y,S));if(S.has(l))return S;for(S.set(l,null),y=y.getElementsByTagName(l),B=0;B<y.length;B++){var L=y[B];if(!(L[Zi]||L[tn]||l==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var K=L.getAttribute(f)||"";K=l+K;var ce=S.get(K);ce?ce.push(L):S.set(K,[L])}}return S}function $T(l,f,y){l=l.ownerDocument||l,l.head.insertBefore(y,f==="title"?l.querySelector("head > title"):null)}function qI(l,f,y){if(y===1||f.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return l=f.disabled,typeof f.precedence=="string"&&l==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function ZT(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function GI(l,f,y,S){if(y.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var B=_m(S.href),L=f.querySelector(m0(B));if(L){f=L._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(l.count++,l=rx.bind(l),f.then(l,l)),y.state.loading|=4,y.instance=L,ut(L);return}L=f.ownerDocument||f,S=jT(S),(B=hl.get(B))&&$M(S,B),L=L.createElement("link"),ut(L);var K=L;K._p=new Promise(function(ce,Oe){K.onload=ce,K.onerror=Oe}),Ha(L,"link",S),y.instance=L}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(y,f),(f=y.state.preload)&&(y.state.loading&3)===0&&(l.count++,y=rx.bind(l),f.addEventListener("load",y),f.addEventListener("error",y))}}var KM=0;function kI(l,f){return l.stylesheets&&l.count===0&&ax(l,l.stylesheets),0<l.count||0<l.imgCount?function(y){var S=setTimeout(function(){if(l.stylesheets&&ax(l,l.stylesheets),l.unsuspend){var L=l.unsuspend;l.unsuspend=null,L()}},6e4+f);0<l.imgBytes&&KM===0&&(KM=62500*EI());var B=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&ax(l,l.stylesheets),l.unsuspend)){var L=l.unsuspend;l.unsuspend=null,L()}},(l.imgBytes>KM?50:800)+f);return l.unsuspend=y,function(){l.unsuspend=null,clearTimeout(S),clearTimeout(B)}}:null}function rx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ax(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var ix=null;function ax(l,f){l.stylesheets=null,l.unsuspend!==null&&(l.count++,ix=new Map,f.forEach(XI,l),ix=null,rx.call(l))}function XI(l,f){if(!(f.state.loading&4)){var y=ix.get(l);if(y)var S=y.get(null);else{y=new Map,ix.set(l,y);for(var B=l.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<B.length;L++){var K=B[L];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(y.set(K.dataset.precedence,K),S=K)}S&&y.set(null,S)}B=f.instance,K=B.getAttribute("data-precedence"),L=y.get(K)||S,L===S&&y.set(null,B),y.set(K,B),this.count++,S=rx.bind(this),B.addEventListener("load",S),B.addEventListener("error",S),L?L.parentNode.insertBefore(B,L.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(B,l.firstChild)),f.state.loading|=4}}var g0={$$typeof:E,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function jI(l,f,y,S,B,L,K,ce,Oe){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=on(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=on(0),this.hiddenUpdates=on(null),this.identifierPrefix=S,this.onUncaughtError=B,this.onCaughtError=L,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Oe,this.incompleteTransitions=new Map}function KT(l,f,y,S,B,L,K,ce,Oe,Je,dt,xt){return l=new jI(l,f,y,K,Oe,Je,dt,xt,ce),f=1,L===!0&&(f|=24),L=Ua(3,null,null,f),l.current=L,L.stateNode=l,f=Ag(),f.refCount++,l.pooledCache=f,f.refCount++,L.memoizedState={element:S,isDehydrated:y,cache:f},Rg(L),l}function QT(l){return l?(l=Tu,l):Tu}function JT(l,f,y,S,B,L){B=QT(B),S.context===null?S.context=B:S.pendingContext=B,S=nl(f),S.payload={element:y},L=L===void 0?null:L,L!==null&&(S.callback=L),y=ql(l,S,f),y!==null&&(g(y,l,f),zu(y,l,f))}function eN(l,f){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var y=l.retryLane;l.retryLane=y!==0&&y<f?y:f}}function QM(l,f){eN(l,f),(l=l.alternate)&&eN(l,f)}function tN(l){if(l.tag===13||l.tag===31){var f=wu(l,67108864);f!==null&&g(f,l,67108864),QM(l,67108864)}}function nN(l){if(l.tag===13||l.tag===31){var f=Pa();f=Ri(f);var y=wu(l,f);y!==null&&g(y,l,f),QM(l,f)}}var sx=!0;function YI(l,f,y,S){var B=I.T;I.T=null;var L=Z.p;try{Z.p=2,JM(l,f,y,S)}finally{Z.p=L,I.T=B}}function WI(l,f,y,S){var B=I.T;I.T=null;var L=Z.p;try{Z.p=8,JM(l,f,y,S)}finally{Z.p=L,I.T=B}}function JM(l,f,y,S){if(sx){var B=eE(S);if(B===null)PM(l,f,S,ox,y),iN(l,S);else if(ZI(B,l,f,y,S))S.stopPropagation();else if(iN(l,S),f&4&&-1<$I.indexOf(l)){for(;B!==null;){var L=$e(B);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var K=it(L.pendingLanes);if(K!==0){var ce=L;for(ce.pendingLanes|=2,ce.entangledLanes|=2;K;){var Oe=1<<31-ye(K);ce.entanglements[1]|=Oe,K&=~Oe}ku(L),(nr&6)===0&&(qs=V()+500,f0(0))}}break;case 31:case 13:ce=wu(L,2),ce!==null&&g(ce,L,2),me(),QM(L,2)}if(L=eE(S),L===null&&PM(l,f,S,ox,y),L===B)break;B=L}B!==null&&S.stopPropagation()}else PM(l,f,S,null,y)}}function eE(l){return l=bo(l),tE(l)}var ox=null;function tE(l){if(ox=null,l=He(l),l!==null){var f=a(l);if(f===null)l=null;else{var y=f.tag;if(y===13){if(l=s(f),l!==null)return l;l=null}else if(y===31){if(l=o(f),l!==null)return l;l=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;l=null}else f!==l&&(l=null)}}return ox=l,null}function rN(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case fe:return 2;case Se:return 8;case ve:case qe:return 32;case Fe:return 268435456;default:return 32}default:return 32}}var nE=!1,jf=null,Yf=null,Wf=null,y0=new Map,x0=new Map,$f=[],$I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iN(l,f){switch(l){case"focusin":case"focusout":jf=null;break;case"dragenter":case"dragleave":Yf=null;break;case"mouseover":case"mouseout":Wf=null;break;case"pointerover":case"pointerout":y0.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":x0.delete(f.pointerId)}}function b0(l,f,y,S,B,L){return l===null||l.nativeEvent!==L?(l={blockedOn:f,domEventName:y,eventSystemFlags:S,nativeEvent:L,targetContainers:[B]},f!==null&&(f=$e(f),f!==null&&tN(f)),l):(l.eventSystemFlags|=S,f=l.targetContainers,B!==null&&f.indexOf(B)===-1&&f.push(B),l)}function ZI(l,f,y,S,B){switch(f){case"focusin":return jf=b0(jf,l,f,y,S,B),!0;case"dragenter":return Yf=b0(Yf,l,f,y,S,B),!0;case"mouseover":return Wf=b0(Wf,l,f,y,S,B),!0;case"pointerover":var L=B.pointerId;return y0.set(L,b0(y0.get(L)||null,l,f,y,S,B)),!0;case"gotpointercapture":return L=B.pointerId,x0.set(L,b0(x0.get(L)||null,l,f,y,S,B)),!0}return!1}function aN(l){var f=He(l.target);if(f!==null){var y=a(f);if(y!==null){if(f=y.tag,f===13){if(f=s(y),f!==null){l.blockedOn=f,ln(l.priority,function(){nN(y)});return}}else if(f===31){if(f=o(y),f!==null){l.blockedOn=f,ln(l.priority,function(){nN(y)});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){l.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}l.blockedOn=null}function lx(l){if(l.blockedOn!==null)return!1;for(var f=l.targetContainers;0<f.length;){var y=eE(l.nativeEvent);if(y===null){y=l.nativeEvent;var S=new y.constructor(y.type,y);ws=S,y.target.dispatchEvent(S),ws=null}else return f=$e(y),f!==null&&tN(f),l.blockedOn=y,!1;f.shift()}return!0}function sN(l,f,y){lx(l)&&y.delete(f)}function KI(){nE=!1,jf!==null&&lx(jf)&&(jf=null),Yf!==null&&lx(Yf)&&(Yf=null),Wf!==null&&lx(Wf)&&(Wf=null),y0.forEach(sN),x0.forEach(sN)}function ux(l,f){l.blockedOn===f&&(l.blockedOn=null,nE||(nE=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,KI)))}var cx=null;function oN(l){cx!==l&&(cx=l,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){cx===l&&(cx=null);for(var f=0;f<l.length;f+=3){var y=l[f],S=l[f+1],B=l[f+2];if(typeof S!="function"){if(tE(S||y)===null)continue;break}var L=$e(y);L!==null&&(l.splice(f,3),f-=3,n0(L,{pending:!0,data:B,method:y.method,action:S},S,B))}}))}function Mm(l){function f(Oe){return ux(Oe,l)}jf!==null&&ux(jf,l),Yf!==null&&ux(Yf,l),Wf!==null&&ux(Wf,l),y0.forEach(f),x0.forEach(f);for(var y=0;y<$f.length;y++){var S=$f[y];S.blockedOn===l&&(S.blockedOn=null)}for(;0<$f.length&&(y=$f[0],y.blockedOn===null);)aN(y),y.blockedOn===null&&$f.shift();if(y=(l.ownerDocument||l).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var B=y[S],L=y[S+1],K=B[zr]||null;if(typeof L=="function")K||oN(y);else if(K){var ce=null;if(L&&L.hasAttribute("formAction")){if(B=L,K=L[zr]||null)ce=K.formAction;else if(tE(B)!==null)continue}else ce=K.action;typeof ce=="function"?y[S+1]=ce:(y.splice(S,3),S-=3),oN(y)}}}function lN(){function l(L){L.canIntercept&&L.info==="react-transition"&&L.intercept({handler:function(){return new Promise(function(K){return B=K})},focusReset:"manual",scroll:"manual"})}function f(){B!==null&&(B(),B=null),S||setTimeout(y,20)}function y(){if(!S&&!navigation.transition){var L=navigation.currentEntry;L&&L.url!=null&&navigation.navigate(L.url,{state:L.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,B=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(y,100),function(){S=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),B!==null&&(B(),B=null)}}}function rE(l){this._internalRoot=l}fx.prototype.render=rE.prototype.render=function(l){var f=this._internalRoot;if(f===null)throw Error(n(409));var y=f.current,S=Pa();JT(y,S,l,f,null,null)},fx.prototype.unmount=rE.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var f=l.containerInfo;JT(l.current,2,null,l,null,null),me(),f[$a]=null}};function fx(l){this._internalRoot=l}fx.prototype.unstable_scheduleHydration=function(l){if(l){var f=ht();l={blockedOn:null,target:l,priority:f};for(var y=0;y<$f.length&&f!==0&&f<$f[y].priority;y++);$f.splice(y,0,l),y===0&&aN(l)}};var uN=e.version;if(uN!=="19.2.0")throw Error(n(527,uN,"19.2.0"));Z.findDOMNode=function(l){var f=l._reactInternals;if(f===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=u(f),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var QI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hx.isDisabled&&hx.supportsFiber)try{rt=hx.inject(QI),ot=hx}catch{}}return S0.createRoot=function(l,f){if(!i(l))throw Error(n(299));var y=!1,S="",B=s0,L=k1,K=sm;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(B=f.onUncaughtError),f.onCaughtError!==void 0&&(L=f.onCaughtError),f.onRecoverableError!==void 0&&(K=f.onRecoverableError)),f=KT(l,1,!1,null,null,y,S,null,B,L,K,lN),l[$a]=f.current,IM(l),new rE(f)},S0.hydrateRoot=function(l,f,y){if(!i(l))throw Error(n(299));var S=!1,B="",L=s0,K=k1,ce=sm,Oe=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(B=y.identifierPrefix),y.onUncaughtError!==void 0&&(L=y.onUncaughtError),y.onCaughtError!==void 0&&(K=y.onCaughtError),y.onRecoverableError!==void 0&&(ce=y.onRecoverableError),y.formState!==void 0&&(Oe=y.formState)),f=KT(l,1,!0,f,y??null,S,B,Oe,L,K,ce,lN),f.context=QT(null),y=f.current,S=Pa(),S=Ri(S),B=nl(S),B.callback=null,ql(y,B,S),y=S,f.current.lanes=y,Dr(f,y),ku(f),l[$a]=f.current,IM(l),new fx(f)},S0.version="19.2.0",S0}var xN;function uP(){if(xN)return sE.exports;xN=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),sE.exports=lP(),sE.exports}var cP=uP();const fP=up(cP);function Ar(){return Ar=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ar.apply(null,arguments)}var EB={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function Ys(r,e){if($b(r,e))return r[e];throw typeof r[e]=="function"&&B2(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function pv(r,e,t){if($b(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function $b(r,e){return!dP(r)&&!Array.isArray(r)?!1:Pt(pP,e)?!0:!(e in Object.prototype||e in Function.prototype)}function hP(r,e){if(!B2(r,e))throw new Error('No access to method "'+e+'"');return r[e]}function B2(r,e){return r==null||typeof r[e]!="function"||Pt(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:Pt(mP,e)?!0:!(e in Object.prototype||e in Function.prototype)}function dP(r){return typeof r=="object"&&r&&r.constructor===Object}var pP={length:!0,name:!0},mP={toString:!0,valueOf:!0,toLocaleString:!0};class mS{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Ys(this.wrappedObject,e)}set(e,t){return pv(this.wrappedObject,e,t),this}has(e){return $b(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return wB(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){$b(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class AB{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return wB(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function wB(r,e){return{next:()=>{var t=r.next();return t.done?t:{value:e(t.value),done:!1}}}}function ry(){return new Map}function ov(r){if(!r)return ry();if(DB(r))return r;if(gS(r))return new mS(r);throw new Error("createMap can create maps from objects or Maps")}function vP(r){if(r instanceof mS)return r.wrappedObject;var e={};for(var t of r.keys()){var n=r.get(t);pv(e,t,n)}return e}function Qt(r){return typeof r=="number"}function wn(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function k0(r){return typeof r=="bigint"}function Jc(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function Ny(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function Lo(r){return r&&r.constructor.prototype.isUnit===!0||!1}function Ti(r){return typeof r=="string"}var Ir=Array.isArray;function rn(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function qo(r){return Array.isArray(r)||rn(r)}function Zb(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Xd(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function U2(r){return r&&r.constructor.prototype.isRange===!0||!1}function vS(r){return r&&r.constructor.prototype.isIndex===!0||!1}function gP(r){return typeof r=="boolean"}function yP(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function TB(r){return r&&r.constructor.prototype.isHelp===!0||!1}function NB(r){return typeof r=="function"}function xP(r){return r instanceof Date}function bP(r){return r instanceof RegExp}function gS(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!Jc(r)&&!Ny(r))}function DB(r){return r?r instanceof Map||r instanceof mS||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}function _P(r){return r===null}function SP(r){return r===void 0}function rp(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function gl(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function MP(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function EP(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function AP(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Qn(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function IA(r){return Qn(r)||Pi(r)&&r.args.length===1&&Qn(r.args[0])&&"-+~".includes(r.op)}function Dy(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function ph(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function zv(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ur(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function yS(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function Pi(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function rf(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function wP(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function TP(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Na(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function CB(r){return r&&r.constructor.prototype.isChain===!0||!1}function Hr(r){var e=typeof r;return e==="object"?r===null?"null":wn(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function bn(r){var e=typeof r;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return bn(t)});if(r instanceof Date)return new Date(r.valueOf());if(wn(r))return r;if(gS(r))return NP(r,bn);if(e==="function")return r;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(r,")"))}function NP(r,e){var t={};for(var n in r)Pt(r,n)&&(t[n]=e(r[n]));return t}function RB(r,e){for(var t in e)Pt(e,t)&&(r[t]=e[t]);return r}function af(r,e){var t,n,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,i=r.length;n<i;n++)if(!af(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!af(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function DP(r,e,t){var n=!0,i;Object.defineProperty(r,e,{get:function(){return n&&(i=t(),n=!1),i},set:function(s){i=s,n=!1},configurable:!0,enumerable:!0})}function Pt(r,e){return r&&Object.hasOwnProperty.call(r,e)}function CP(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=r[i];a!==void 0&&(t[i]=a)}return t}var RP=["Matrix","Array"],OP=["number","BigNumber","bigint","Fraction"],mt=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(EB)};Ar(mt,EB,{MATRIX_OPTIONS:RP,NUMBER_OPTIONS:OP});function bN(){return!0}function dl(){return!1}function Em(){}const _N="Argument is not a typed-function.";function OB(){function r(q){return typeof q=="object"&&q!==null&&q.constructor===Object}const e=[{name:"number",test:function(q){return typeof q=="number"}},{name:"string",test:function(q){return typeof q=="string"}},{name:"boolean",test:function(q){return typeof q=="boolean"}},{name:"Function",test:function(q){return typeof q=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(q){return q instanceof Date}},{name:"RegExp",test:function(q){return q instanceof RegExp}},{name:"Object",test:r},{name:"null",test:function(q){return q===null}},{name:"undefined",test:function(q){return q===void 0}}],t={name:"any",test:bN,isAny:!0};let n,i,a=0,s={createCount:0};function o(q){const V=n.get(q);if(V)return V;let ie='Unknown type "'+q+'"';const fe=q.toLowerCase();let Se;for(Se of i)if(Se.toLowerCase()===fe){ie+='. Did you mean "'+Se+'" ?';break}throw new TypeError(ie)}function c(q){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const ie=V?o(V).index:i.length,fe=[];for(let ve=0;ve<q.length;++ve){if(!q[ve]||typeof q[ve].name!="string"||typeof q[ve].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const qe=q[ve].name;if(n.has(qe))throw new TypeError('Duplicate type name "'+qe+'"');fe.push(qe),n.set(qe,{name:qe,test:q[ve].test,isAny:q[ve].isAny,index:ie+ve,conversionsTo:[]})}const Se=i.slice(ie);i=i.slice(0,ie).concat(fe).concat(Se);for(let ve=ie+fe.length;ve<i.length;++ve)n.get(i[ve]).index=ve}function u(){n=new Map,i=[],a=0,c([t],!1)}u(),c(e);function h(){let q;for(q of i)n.get(q).conversionsTo=[];a=0}function d(q){const V=i.filter(ie=>{const fe=n.get(ie);return!fe.isAny&&fe.test(q)});return V.length?V:["any"]}function m(q){return q&&typeof q=="function"&&"_typedFunctionData"in q}function v(q,V,ie){if(!m(q))throw new TypeError(_N);const fe=ie&&ie.exact,Se=Array.isArray(V)?V.join(","):V,ve=A(Se),qe=M(ve);if(!fe||qe in q.signatures){const rt=q._typedFunctionData.signatureMap.get(qe);if(rt)return rt}const Fe=ve.length;let We;if(fe){We=[];let rt;for(rt in q.signatures)We.push(q._typedFunctionData.signatureMap.get(rt))}else We=q._typedFunctionData.signatures;for(let rt=0;rt<Fe;++rt){const ot=ve[rt],St=[];let ye;for(ye of We){const Ve=z(ye.params,rt);if(!(!Ve||ot.restParam&&!Ve.restParam)){if(!Ve.hasAny){const G=E(Ve);if(ot.types.some(ee=>!G.has(ee.name)))continue}St.push(ye)}}if(We=St,We.length===0)break}let Ge;for(Ge of We)if(Ge.params.length<=Fe)return Ge;throw new TypeError("Signature not found (signature: "+(q.name||"unnamed")+"("+M(ve,", ")+"))")}function x(q,V,ie){return v(q,V,ie).implementation}function b(q,V){const ie=o(V);if(ie.test(q))return q;const fe=ie.conversionsTo;if(fe.length===0)throw new Error("There are no conversions to "+V+" defined.");for(let Se=0;Se<fe.length;Se++)if(o(fe[Se].from).test(q))return fe[Se].convert(q);throw new Error("Cannot convert "+q+" to "+V)}function M(q){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return q.map(ie=>ie.name).join(V)}function _(q){const V=q.indexOf("...")===0,fe=(V?q.length>3?q.slice(3):"any":q).split("|").map(Fe=>o(Fe.trim()));let Se=!1,ve=V?"...":"";return{types:fe.map(function(Fe){return Se=Fe.isAny||Se,ve+=Fe.name+"|",{name:Fe.name,typeIndex:Fe.index,test:Fe.test,isAny:Fe.isAny,conversion:null,conversionIndex:-1}}),name:ve.slice(0,-1),hasAny:Se,hasConversion:!1,restParam:V}}function T(q){const V=q.types.map(qe=>qe.name),ie=Z(V);let fe=q.hasAny,Se=q.name;const ve=ie.map(function(qe){const Fe=o(qe.from);return fe=Fe.isAny||fe,Se+="|"+qe.from,{name:qe.from,typeIndex:Fe.index,test:Fe.test,isAny:Fe.isAny,conversion:qe,conversionIndex:qe.index}});return{types:q.types.concat(ve),name:Se,hasAny:fe,hasConversion:ve.length>0,restParam:q.restParam}}function E(q){return q.typeSet||(q.typeSet=new Set,q.types.forEach(V=>q.typeSet.add(V.name))),q.typeSet}function A(q){const V=[];if(typeof q!="string")throw new TypeError("Signatures must be strings");const ie=q.trim();if(ie==="")return V;const fe=ie.split(",");for(let Se=0;Se<fe.length;++Se){const ve=_(fe[Se].trim());if(ve.restParam&&Se!==fe.length-1)throw new SyntaxError('Unexpected rest parameter "'+fe[Se]+'": only allowed for the last parameter');if(ve.types.length===0)return null;V.push(ve)}return V}function D(q){const V=ue(q);return V?V.restParam:!1}function N(q){if(!q||q.types.length===0)return bN;if(q.types.length===1)return o(q.types[0].name).test;if(q.types.length===2){const V=o(q.types[0].name).test,ie=o(q.types[1].name).test;return function(Se){return V(Se)||ie(Se)}}else{const V=q.types.map(function(ie){return o(ie.name).test});return function(fe){for(let Se=0;Se<V.length;Se++)if(V[Se](fe))return!0;return!1}}}function O(q){let V,ie,fe;if(D(q)){V=ne(q).map(N);const Se=V.length,ve=N(ue(q)),qe=function(Fe){for(let We=Se;We<Fe.length;We++)if(!ve(Fe[We]))return!1;return!0};return function(We){for(let Ge=0;Ge<V.length;Ge++)if(!V[Ge](We[Ge]))return!1;return qe(We)&&We.length>=Se+1}}else return q.length===0?function(ve){return ve.length===0}:q.length===1?(ie=N(q[0]),function(ve){return ie(ve[0])&&ve.length===1}):q.length===2?(ie=N(q[0]),fe=N(q[1]),function(ve){return ie(ve[0])&&fe(ve[1])&&ve.length===2}):(V=q.map(N),function(ve){for(let qe=0;qe<V.length;qe++)if(!V[qe](ve[qe]))return!1;return ve.length===V.length})}function z(q,V){return V<q.length?q[V]:D(q)?ue(q):null}function C(q,V){const ie=z(q,V);return ie?E(ie):new Set}function R(q){return q.conversion===null||q.conversion===void 0}function F(q,V){const ie=new Set;return q.forEach(fe=>{const Se=C(fe.params,V);let ve;for(ve of Se)ie.add(ve)}),ie.has("any")?["any"]:Array.from(ie)}function H(q,V,ie){let fe,Se;const ve=q||"unnamed";let qe=ie,Fe;for(Fe=0;Fe<V.length;Fe++){const ot=[];if(qe.forEach(St=>{const ye=z(St.params,Fe),Ve=N(ye);(Fe<St.params.length||D(St.params))&&Ve(V[Fe])&&ot.push(St)}),ot.length===0){if(Se=F(qe,Fe),Se.length>0){const St=d(V[Fe]);return fe=new TypeError("Unexpected type of argument in function "+ve+" (expected: "+Se.join(" or ")+", actual: "+St.join(" | ")+", index: "+Fe+")"),fe.data={category:"wrongType",fn:ve,index:Fe,actual:St,expected:Se},fe}}else qe=ot}const We=qe.map(function(ot){return D(ot.params)?1/0:ot.params.length});if(V.length<Math.min.apply(null,We))return Se=F(qe,Fe),fe=new TypeError("Too few arguments in function "+ve+" (expected: "+Se.join(" or ")+", index: "+V.length+")"),fe.data={category:"tooFewArgs",fn:ve,index:V.length,expected:Se},fe;const Ge=Math.max.apply(null,We);if(V.length>Ge)return fe=new TypeError("Too many arguments in function "+ve+" (expected: "+Ge+", actual: "+V.length+")"),fe.data={category:"tooManyArgs",fn:ve,index:V.length,expectedLength:Ge},fe;const rt=[];for(let ot=0;ot<V.length;++ot)rt.push(d(V[ot]).join("|"));return fe=new TypeError('Arguments of type "'+rt.join(", ")+'" do not match any of the defined signatures of function '+ve+"."),fe.data={category:"mismatch",actual:rt},fe}function X(q){let V=i.length+1;for(let ie=0;ie<q.types.length;ie++)R(q.types[ie])&&(V=Math.min(V,q.types[ie].typeIndex));return V}function $(q){let V=a+1;for(let ie=0;ie<q.types.length;ie++)R(q.types[ie])||(V=Math.min(V,q.types[ie].conversionIndex));return V}function Y(q,V){if(q.hasAny){if(!V.hasAny)return 1}else if(V.hasAny)return-1;if(q.restParam){if(!V.restParam)return 1}else if(V.restParam)return-1;if(q.hasConversion){if(!V.hasConversion)return 1}else if(V.hasConversion)return-1;const ie=X(q)-X(V);if(ie<0)return-1;if(ie>0)return 1;const fe=$(q)-$(V);return fe<0?-1:fe>0?1:0}function I(q,V){const ie=q.params,fe=V.params,Se=ue(ie),ve=ue(fe),qe=D(ie),Fe=D(fe);if(qe&&Se.hasAny){if(!Fe||!ve.hasAny)return 1}else if(Fe&&ve.hasAny)return-1;let We=0,Ge=0,rt;for(rt of ie)rt.hasAny&&++We,rt.hasConversion&&++Ge;let ot=0,St=0;for(rt of fe)rt.hasAny&&++ot,rt.hasConversion&&++St;if(We!==ot)return We-ot;if(qe&&Se.hasConversion){if(!Fe||!ve.hasConversion)return 1}else if(Fe&&ve.hasConversion)return-1;if(Ge!==St)return Ge-St;if(qe){if(!Fe)return 1}else if(Fe)return-1;const ye=(ie.length-fe.length)*(qe?-1:1);if(ye!==0)return ye;const Ve=[];let G=0;for(let Ee=0;Ee<ie.length;++Ee){const ze=Y(ie[Ee],fe[Ee]);Ve.push(ze),G+=ze}if(G!==0)return G;let ee;for(ee of Ve)if(ee!==0)return ee;return 0}function Z(q){if(q.length===0)return[];const V=q.map(o);q.length>1&&V.sort((Se,ve)=>Se.index-ve.index);let ie=V[0].conversionsTo;if(q.length===1)return ie;ie=ie.concat([]);const fe=new Set(q);for(let Se=1;Se<V.length;++Se){let ve;for(ve of V[Se].conversionsTo)fe.has(ve.from)||(ie.push(ve),fe.add(ve.from))}return ie}function W(q,V){let ie=V;if(q.some(Se=>Se.hasConversion)){const Se=D(q),ve=q.map(te);ie=function(){const Fe=[],We=Se?arguments.length-1:arguments.length;for(let Ge=0;Ge<We;Ge++)Fe[Ge]=ve[Ge](arguments[Ge]);return Se&&(Fe[We]=arguments[We].map(ve[We])),V.apply(this,Fe)}}let fe=ie;if(D(q)){const Se=q.length-1;fe=function(){return ie.apply(this,ge(arguments,0,Se).concat([ge(arguments,Se)]))}}return fe}function te(q){let V,ie,fe,Se;const ve=[],qe=[];switch(q.types.forEach(function(Fe){Fe.conversion&&(ve.push(o(Fe.conversion.from).test),qe.push(Fe.conversion.convert))}),qe.length){case 0:return function(We){return We};case 1:return V=ve[0],fe=qe[0],function(We){return V(We)?fe(We):We};case 2:return V=ve[0],ie=ve[1],fe=qe[0],Se=qe[1],function(We){return V(We)?fe(We):ie(We)?Se(We):We};default:return function(We){for(let Ge=0;Ge<qe.length;Ge++)if(ve[Ge](We))return qe[Ge](We);return We}}}function le(q){function V(ie,fe,Se){if(fe<ie.length){const ve=ie[fe];let qe=[];if(ve.restParam){const Fe=ve.types.filter(R);Fe.length<ve.types.length&&qe.push({types:Fe,name:"..."+Fe.map(We=>We.name).join("|"),hasAny:Fe.some(We=>We.isAny),hasConversion:!1,restParam:!0}),qe.push(ve)}else qe=ve.types.map(function(Fe){return{types:[Fe],name:Fe.name,hasAny:Fe.isAny,hasConversion:Fe.conversion,restParam:!1}});return Te(qe,function(Fe){return V(ie,fe+1,Se.concat([Fe]))})}else return[Se]}return V(q,0,[])}function Q(q,V){const ie=Math.max(q.length,V.length);for(let Fe=0;Fe<ie;Fe++){const We=C(q,Fe),Ge=C(V,Fe);let rt=!1,ot;for(ot of Ge)if(We.has(ot)){rt=!0;break}if(!rt)return!1}const fe=q.length,Se=V.length,ve=D(q),qe=D(V);return ve?qe?fe===Se:Se>=fe:qe?fe>=Se:fe===Se}function k(q){return q.map(V=>Pe(V)?Be(V.referToSelf.callback):Le(V)?Me(V.referTo.references,V.referTo.callback):V)}function ae(q,V,ie){const fe=[];let Se;for(Se of q){let ve=ie[Se];if(typeof ve!="number")throw new TypeError('No definition for referenced signature "'+Se+'"');if(ve=V[ve],typeof ve!="function")return!1;fe.push(ve)}return fe}function J(q,V,ie){const fe=k(q),Se=new Array(fe.length).fill(!1);let ve=!0;for(;ve;){ve=!1;let qe=!0;for(let Fe=0;Fe<fe.length;++Fe){if(Se[Fe])continue;const We=fe[Fe];if(Pe(We))fe[Fe]=We.referToSelf.callback(ie),fe[Fe].referToSelf=We.referToSelf,Se[Fe]=!0,qe=!1;else if(Le(We)){const Ge=ae(We.referTo.references,fe,V);Ge?(fe[Fe]=We.referTo.callback.apply(this,Ge),fe[Fe].referTo=We.referTo,Se[Fe]=!0,qe=!1):ve=!0}}if(qe&&ve)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return fe}function De(q){const V=/\bthis(\(|\.signatures\b)/;Object.keys(q).forEach(ie=>{const fe=q[ie];if(V.test(fe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function pe(q,V){if(s.createCount++,Object.keys(V).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&De(V);const ie=[],fe=[],Se={},ve=[];let qe;for(qe in V){if(!Object.prototype.hasOwnProperty.call(V,qe))continue;const Ne=A(qe);if(!Ne)continue;ie.forEach(function(Tt){if(Q(Tt,Ne))throw new TypeError('Conflicting signatures "'+M(Tt)+'" and "'+M(Ne)+'".')}),ie.push(Ne);const ut=fe.length;fe.push(V[qe]);const wt=Ne.map(T);let Ot;for(Ot of le(wt)){const Tt=M(Ot);ve.push({params:Ot,name:Tt,fn:ut}),Ot.every(Lt=>!Lt.hasConversion)&&(Se[Tt]=ut)}}ve.sort(I);const Fe=J(fe,Se,Qe);let We;for(We in Se)Object.prototype.hasOwnProperty.call(Se,We)&&(Se[We]=Fe[Se[We]]);const Ge=[],rt=new Map;for(We of ve)rt.has(We.name)||(We.fn=Fe[We.fn],Ge.push(We),rt.set(We.name,We));const ot=Ge[0]&&Ge[0].params.length<=2&&!D(Ge[0].params),St=Ge[1]&&Ge[1].params.length<=2&&!D(Ge[1].params),ye=Ge[2]&&Ge[2].params.length<=2&&!D(Ge[2].params),Ve=Ge[3]&&Ge[3].params.length<=2&&!D(Ge[3].params),G=Ge[4]&&Ge[4].params.length<=2&&!D(Ge[4].params),ee=Ge[5]&&Ge[5].params.length<=2&&!D(Ge[5].params),Ee=ot&&St&&ye&&Ve&&G&&ee;for(let Ne=0;Ne<Ge.length;++Ne)Ge[Ne].test=O(Ge[Ne].params);const ze=ot?N(Ge[0].params[0]):dl,ft=St?N(Ge[1].params[0]):dl,it=ye?N(Ge[2].params[0]):dl,ct=Ve?N(Ge[3].params[0]):dl,Nt=G?N(Ge[4].params[0]):dl,It=ee?N(Ge[5].params[0]):dl,yn=ot?N(Ge[0].params[1]):dl,on=St?N(Ge[1].params[1]):dl,Dr=ye?N(Ge[2].params[1]):dl,ni=Ve?N(Ge[3].params[1]):dl,Es=G?N(Ge[4].params[1]):dl,_i=ee?N(Ge[5].params[1]):dl;for(let Ne=0;Ne<Ge.length;++Ne)Ge[Ne].implementation=W(Ge[Ne].params,Ge[Ne].fn);const Ci=ot?Ge[0].implementation:Em,Ri=St?Ge[1].implementation:Em,Wa=ye?Ge[2].implementation:Em,ht=Ve?Ge[3].implementation:Em,ln=G?Ge[4].implementation:Em,qr=ee?Ge[5].implementation:Em,tn=ot?Ge[0].params.length:-1,zr=St?Ge[1].params.length:-1,$a=ye?Ge[2].params.length:-1,Yo=Ve?Ge[3].params.length:-1,pu=G?Ge[4].params.length:-1,Dl=ee?Ge[5].params.length:-1,As=Ee?6:0,Zi=Ge.length,he=Ge.map(Ne=>Ne.test),He=Ge.map(Ne=>Ne.implementation),$e=function(){for(let ut=As;ut<Zi;ut++)if(he[ut](arguments))return He[ut].apply(this,arguments);return s.onMismatch(q,arguments,Ge)};function Qe(Ne,ut){return arguments.length===tn&&ze(Ne)&&yn(ut)?Ci.apply(this,arguments):arguments.length===zr&&ft(Ne)&&on(ut)?Ri.apply(this,arguments):arguments.length===$a&&it(Ne)&&Dr(ut)?Wa.apply(this,arguments):arguments.length===Yo&&ct(Ne)&&ni(ut)?ht.apply(this,arguments):arguments.length===pu&&Nt(Ne)&&Es(ut)?ln.apply(this,arguments):arguments.length===Dl&&It(Ne)&&_i(ut)?qr.apply(this,arguments):$e.apply(this,arguments)}try{Object.defineProperty(Qe,"name",{value:q})}catch{}return Qe.signatures=Se,Qe._typedFunctionData={signatures:Ge,signatureMap:rt},Qe}function _e(q,V,ie){throw H(q,V,ie)}function ne(q){return ge(q,0,q.length-1)}function ue(q){return q[q.length-1]}function ge(q,V,ie){return Array.prototype.slice.call(q,V,ie)}function Ae(q,V){for(let ie=0;ie<q.length;ie++)if(V(q[ie]))return q[ie]}function Te(q,V){return Array.prototype.concat.apply([],q.map(V))}function se(){const q=ne(arguments).map(ie=>M(A(ie))),V=ue(arguments);if(typeof V!="function")throw new TypeError("Callback function expected as last argument");return Me(q,V)}function Me(q,V){return{referTo:{references:q,callback:V}}}function Be(q){if(typeof q!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:q}}}function Le(q){return q&&typeof q.referTo=="object"&&Array.isArray(q.referTo.references)&&typeof q.referTo.callback=="function"}function Pe(q){return q&&typeof q.referToSelf=="object"&&typeof q.referToSelf.callback=="function"}function Ye(q,V){if(!q)return V;if(V&&V!==q){const ie=new Error("Function names do not match (expected: "+q+", actual: "+V+")");throw ie.data={actual:V,expected:q},ie}return q}function Ze(q){let V;for(const ie in q)Object.prototype.hasOwnProperty.call(q,ie)&&(m(q[ie])||typeof q[ie].signature=="string")&&(V=Ye(V,q[ie].name));return V}function re(q,V){let ie;for(ie in V)if(Object.prototype.hasOwnProperty.call(V,ie)){if(ie in q&&V[ie]!==q[ie]){const fe=new Error('Signature "'+ie+'" is defined twice');throw fe.data={signature:ie,sourceFunction:V[ie],destFunction:q[ie]},fe}q[ie]=V[ie]}}const be=s;s=function(q){const V=typeof q=="string",ie=V?1:0;let fe=V?q:"";const Se={};for(let ve=ie;ve<arguments.length;++ve){const qe=arguments[ve];let Fe={},We;if(typeof qe=="function"?(We=qe.name,typeof qe.signature=="string"?Fe[qe.signature]=qe:m(qe)&&(Fe=qe.signatures)):r(qe)&&(Fe=qe,V||(We=Ze(qe))),Object.keys(Fe).length===0){const Ge=new TypeError("Argument to 'typed' at index "+ve+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ge.data={index:ve,argument:qe},Ge}V||(fe=Ye(fe,We)),re(Se,Fe)}return pe(fe||"",Se)},s.create=OB,s.createCount=be.createCount,s.onMismatch=_e,s.throwMismatchError=_e,s.createError=H,s.clear=u,s.clearConversions=h,s.addTypes=c,s._findType=o,s.referTo=se,s.referToSelf=Be,s.convert=b,s.findSignature=v,s.find=x,s.isTypedFunction=m,s.warnAgainstDeprecatedThis=!0,s.addType=function(q,V){let ie="any";V!==!1&&n.has("Object")&&(ie="Object"),s.addTypes([q],ie)};function Ce(q){if(!q||typeof q.from!="string"||typeof q.to!="string"||typeof q.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(q.to===q.from)throw new SyntaxError('Illegal to define conversion from "'+q.from+'" to itself.')}return s.addConversion=function(q){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Ce(q);const ie=o(q.to),fe=ie.conversionsTo.find(Se=>Se.from===q.from);if(fe)if(V&&V.override)s.removeConversion({from:fe.from,to:q.to,convert:fe.convert});else throw new Error('There is already a conversion from "'+q.from+'" to "'+ie.name+'"');ie.conversionsTo.push({from:q.from,convert:q.convert,index:a++})},s.addConversions=function(q,V){q.forEach(ie=>s.addConversion(ie,V))},s.removeConversion=function(q){Ce(q);const V=o(q.to),ie=Ae(V.conversionsTo,Se=>Se.from===q.from);if(!ie)throw new Error("Attempt to remove nonexistent conversion from "+q.from+" to "+q.to);if(ie.convert!==q.convert)throw new Error("Conversion to remove does not match existing conversion");const fe=V.conversionsTo.indexOf(ie);V.conversionsTo.splice(fe,1)},s.resolve=function(q,V){if(!m(q))throw new TypeError(_N);const ie=q._typedFunctionData.signatures;for(let fe=0;fe<ie.length;++fe)if(ie[fe].test(V))return ie[fe];return null},s}const Kb=OB();function de(r,e,t,n){function i(a){var s=CP(a,e.map(zP));return BP(r,e,a),t(s)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function BP(r,e,t){var n=e.filter(a=>!UP(a)).every(a=>t[a]!==void 0);if(!n){var i=e.filter(a=>t[a]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function UP(r){return r&&r[0]==="?"}function zP(r){return r&&r[0]==="?"?r.slice(1):r}function Xt(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}function _h(r,e){if(e.number==="bigint")try{BigInt(r)}catch{return e.numberFallback}return e.number}var uh=Math.sign||function(r){return r>0?1:r<0?-1:0},FP=Math.log2||function(e){return Math.log(e)/Math.LN2},LP=Math.log10||function(e){return Math.log(e)/Math.LN10},IP=Math.log1p||function(r){return Math.log(r+1)},PP=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},HP=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function cE(r,e,t){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Xt(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Xt(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),a="i".concat(t)}var s="";return r<0&&(r=-r,s="-"),"".concat(s).concat(i).concat(r.toString(e)).concat(a)}function Zd(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var{notation:t,precision:n,wordSize:i}=BB(e);switch(t){case"fixed":return UB(r,n);case"exponential":return zB(r,n);case"engineering":return VP(r,n);case"bin":return cE(r,2,i);case"oct":return cE(r,8,i);case"hex":return cE(r,16,i);case"auto":return qP(r,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function BB(r){var e="auto",t,n;if(r!==void 0)if(Qt(r))t=r;else if(wn(r))t=r.toNumber();else if(gS(r))r.precision!==void 0&&(t=SN(r.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),r.wordSize!==void 0&&(n=SN(r.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),r.notation&&(e=r.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:n}}function Cy(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return s.length===0&&(s.push(0),i++),{sign:t,coefficients:s,exponent:i}}function VP(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Cy(r),n=xS(t,e),i=n.exponent,a=n.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Qt(e))for(;e>a.length||i-s+1>a.length;)a.push(0);else for(var o=Math.abs(i-s)-(a.length-1),c=0;c<o;c++)a.push(0);for(var u=Math.abs(i-s),h=1;u>0;)h++,u--;var d=a.slice(h).join(""),m=Qt(e)&&d.length||d.match(/[1-9]/)?"."+d:"",v=a.slice(0,h).join("")+m+"e"+(i>=0?"+":"")+s.toString();return n.sign+v}function UB(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Cy(r),n=typeof e=="number"?xS(t,t.exponent+1+e):t,i=n.coefficients,a=n.exponent+1,s=a+(e||0);return i.length<s&&(i=i.concat(lv(s-i.length))),a<0&&(i=lv(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function zB(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Cy(r),n=e?xS(t,e):t,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(lv(e-i.length)));var s=i.shift();return n.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function qP(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var n=MN(t==null?void 0:t.lowerExp,-3),i=MN(t==null?void 0:t.upperExp,5),a=Cy(r),s=e?xS(a,e):a;if(s.exponent<n||s.exponent>=i)return zB(r,e);var o=s.coefficients,c=s.exponent;o.length<e&&(o=o.concat(lv(e-o.length))),o=o.concat(lv(c-o.length+1+(o.length<e?e-o.length:0))),o=lv(-c).concat(o);var u=c>0?c:0;return u<o.length-1&&o.splice(u+1,0,"."),s.sign+o.join("")}function xS(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),t.exponent++,a++),a--,n[a]++}}return t}function lv(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function GP(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Ca(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(r)||isNaN(e)?!1:!isFinite(r)||!isFinite(e)?r===e:r===e?!0:Math.abs(r-e)<=Math.max(t*Math.max(Math.abs(r),Math.abs(e)),n)}var kP=Math.acosh||function(r){return Math.log(Math.sqrt(r*r-1)+r)},XP=Math.asinh||function(r){return Math.log(Math.sqrt(r*r+1)+r)},jP=Math.atanh||function(r){return Math.log((1+r)/(1-r))/2},YP=Math.cosh||function(r){return(Math.exp(r)+Math.exp(-r))/2},WP=Math.sinh||function(r){return(Math.exp(r)-Math.exp(-r))/2},$P=Math.tanh||function(r){var e=Math.exp(2*r);return(e-1)/(e+1)};function ZP(r,e){var t=!0,n=e>0?!0:e<0?!1:1/e===1/0;return t^n?-r:r}function SN(r,e){if(Qt(r))return r;if(wn(r))return r.toNumber();e()}function MN(r,e){return Qt(r)?r:wn(r)?r.toNumber():e}var FB=function(){return FB=Kb.create,Kb},KP=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],QP=de("typed",KP,function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:a}=e,s=FB();return s.clear(),s.addTypes([{name:"number",test:Qt},{name:"Complex",test:Jc},{name:"BigNumber",test:wn},{name:"bigint",test:k0},{name:"Fraction",test:Ny},{name:"Unit",test:Lo},{name:"identifier",test:o=>Ti&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:Ti},{name:"Chain",test:CB},{name:"Array",test:Ir},{name:"Matrix",test:rn},{name:"DenseMatrix",test:Zb},{name:"SparseMatrix",test:Xd},{name:"Range",test:U2},{name:"Index",test:vS},{name:"boolean",test:gP},{name:"ResultSet",test:yP},{name:"Help",test:TB},{name:"function",test:NB},{name:"Date",test:xP},{name:"RegExp",test:bP},{name:"null",test:_P},{name:"undefined",test:SP},{name:"AccessorNode",test:rp},{name:"ArrayNode",test:gl},{name:"AssignmentNode",test:MP},{name:"BlockNode",test:EP},{name:"ConditionalNode",test:AP},{name:"ConstantNode",test:Qn},{name:"FunctionNode",test:ph},{name:"FunctionAssignmentNode",test:Dy},{name:"IndexNode",test:zv},{name:"Node",test:Ur},{name:"ObjectNode",test:yS},{name:"OperatorNode",test:Pi},{name:"ParenthesisNode",test:rf},{name:"RangeNode",test:wP},{name:"RelationalNode",test:TP},{name:"SymbolNode",test:Na},{name:"Map",test:DB},{name:"Object",test:gS}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(c){if(t||dx(c),GP(c)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+c+"). Use function bignumber(x) to convert to BigNumber.");return new t(c)}},{from:"number",to:"Complex",convert:function(c){return n||px(c),new n(c,0)}},{from:"BigNumber",to:"Complex",convert:function(c){return n||px(c),new n(c.toNumber(),0)}},{from:"bigint",to:"number",convert:function(c){if(c>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+c+")");return Number(c)}},{from:"bigint",to:"BigNumber",convert:function(c){return t||dx(c),new t(c.toString())}},{from:"bigint",to:"Fraction",convert:function(c){return a||mx(c),new a(c)}},{from:"Fraction",to:"BigNumber",convert:function(c){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(c){return n||px(c),new n(c.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(c){a||mx(c);var u=new a(c);if(u.valueOf()!==c)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+c+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(c){var u=Number(c);if(isNaN(u))throw new Error('Cannot convert "'+c+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(c){t||dx(c);try{return new t(c)}catch{throw new Error('Cannot convert "'+c+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(c){try{return BigInt(c)}catch{throw new Error('Cannot convert "'+c+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(c){a||mx(c);try{return new a(c)}catch{throw new Error('Cannot convert "'+c+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(c){n||px(c);try{return new n(c)}catch{throw new Error('Cannot convert "'+c+'" to Complex')}}},{from:"boolean",to:"number",convert:function(c){return+c}},{from:"boolean",to:"BigNumber",convert:function(c){return t||dx(c),new t(+c)}},{from:"boolean",to:"bigint",convert:function(c){return BigInt(+c)}},{from:"boolean",to:"Fraction",convert:function(c){return a||mx(c),new a(+c)}},{from:"boolean",to:"string",convert:function(c){return String(c)}},{from:"Array",to:"Matrix",convert:function(c){return i||JP(),new i(c)}},{from:"Matrix",to:"Array",convert:function(c){return c.valueOf()}}]),s.onMismatch=(o,c,u)=>{var h=s.createError(o,c,u);if(["wrongType","mismatch"].includes(h.data.category)&&c.length===1&&qo(c[0])&&u.some(m=>!m.params.includes(","))){var d=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw d.data=h.data,d}throw h},s.onMismatch=(o,c,u)=>{var h=s.createError(o,c,u);if(["wrongType","mismatch"].includes(h.data.category)&&c.length===1&&qo(c[0])&&u.some(m=>!m.params.includes(","))){var d=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw d.data=h.data,d}throw h},s});function dx(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function px(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function JP(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function mx(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var e8="ResultSet",t8=[],n8=de(e8,t8,()=>{function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return r.prototype.type="ResultSet",r.prototype.isResultSet=!0,r.prototype.valueOf=function(){return this.entries},r.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},r.fromJSON=function(e){return new r(e.entries)},r},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var ev=9e15,Sh=1e9,PA="0123456789abcdef",Qb="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Jb="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",HA={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ev,maxE:ev,crypto:!1},LB,Kc,En=!0,bS="[DecimalError] ",mh=bS+"Invalid argument: ",IB=bS+"Precision limit exceeded",PB=bS+"crypto unavailable",HB="[object Decimal]",xs=Math.floor,aa=Math.pow,r8=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,i8=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,a8=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,VB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,lu=1e7,cn=7,s8=9007199254740991,o8=Qb.length-1,VA=Jb.length-1,_t={toStringTag:HB};_t.absoluteValue=_t.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),Jt(r)};_t.ceil=function(){return Jt(new this.constructor(this),this.e+1,2)};_t.clampedTo=_t.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(mh+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};_t.comparedTo=_t.cmp=function(r){var e,t,n,i,a=this,s=a.d,o=(r=new a.constructor(r)).d,c=a.s,u=r.s;if(!s||!o)return!c||!u?NaN:c!==u?c:s===o?0:!s^c<0?1:-1;if(!s[0]||!o[0])return s[0]?c:o[0]?-u:0;if(c!==u)return c;if(a.e!==r.e)return a.e>r.e^c<0?1:-1;for(n=s.length,i=o.length,e=0,t=n<i?n:i;e<t;++e)if(s[e]!==o[e])return s[e]>o[e]^c<0?1:-1;return n===i?0:n>i^c<0?1:-1};_t.cosine=_t.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+cn,n.rounding=1,t=l8(n,jB(n,t)),n.precision=r,n.rounding=e,Jt(Kc==2||Kc==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};_t.cubeRoot=_t.cbrt=function(){var r,e,t,n,i,a,s,o,c,u,h=this,d=h.constructor;if(!h.isFinite()||h.isZero())return new d(h);for(En=!1,a=h.s*aa(h.s*h,1/3),!a||Math.abs(a)==1/0?(t=ka(h.d),r=h.e,(a=(r-t.length+1)%3)&&(t+=a==1||a==-2?"0":"00"),a=aa(t,1/3),r=xs((r+1)/3)-(r%3==(r<0?-1:2)),a==1/0?t="5e"+r:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new d(t),n.s=h.s):n=new d(a.toString()),s=(r=d.precision)+3;;)if(o=n,c=o.times(o).times(o),u=c.plus(h),n=ti(u.plus(h).times(o),u.plus(c),s+2,1),ka(o.d).slice(0,s)===(t=ka(n.d)).slice(0,s))if(t=t.slice(s-3,s+1),t=="9999"||!i&&t=="4999"){if(!i&&(Jt(o,r+1,0),o.times(o).times(o).eq(h))){n=o;break}s+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Jt(n,r+1,1),e=!n.times(n).times(n).eq(h));break}return En=!0,Jt(n,r,d.rounding,e)};_t.decimalPlaces=_t.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-xs(this.e/cn))*cn,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};_t.dividedBy=_t.div=function(r){return ti(this,new this.constructor(r))};_t.dividedToIntegerBy=_t.divToInt=function(r){var e=this,t=e.constructor;return Jt(ti(e,new t(r),0,1,1),t.precision,t.rounding)};_t.equals=_t.eq=function(r){return this.cmp(r)===0};_t.floor=function(){return Jt(new this.constructor(this),this.e+1,3)};_t.greaterThan=_t.gt=function(r){return this.cmp(r)>0};_t.greaterThanOrEqualTo=_t.gte=function(r){var e=this.cmp(r);return e==1||e===0};_t.hyperbolicCosine=_t.cosh=function(){var r,e,t,n,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;t=s.precision,n=s.rounding,s.precision=t+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(r=Math.ceil(i/3),e=(1/SS(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),a=mv(s,1,a.times(e),new s(1),!0);for(var c,u=r,h=new s(8);u--;)c=a.times(a),a=o.minus(c.times(h.minus(c.times(h))));return Jt(a,s.precision=t,s.rounding=n,!0)};_t.hyperbolicSine=_t.sinh=function(){var r,e,t,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,t=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=mv(a,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/SS(5,r)),i=mv(a,2,i,i,!0);for(var s,o=new a(5),c=new a(16),u=new a(20);r--;)s=i.times(i),i=i.times(o.plus(s.times(c.times(s).plus(u))))}return a.precision=e,a.rounding=t,Jt(i,e,t,!0)};_t.hyperbolicTangent=_t.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,ti(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};_t.inverseCosine=_t.acos=function(){var r=this,e=r.constructor,t=r.abs().cmp(1),n=e.precision,i=e.rounding;return t!==-1?t===0?r.isNeg()?Ju(e,n,i):new e(0):new e(NaN):r.isZero()?Ju(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,r=new e(1).minus(r).div(r.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,r.times(2))};_t.inverseHyperbolicCosine=_t.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,En=!1,t=t.times(t).minus(1).sqrt().plus(t),En=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};_t.inverseHyperbolicSine=_t.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,En=!1,t=t.times(t).plus(1).sqrt().plus(t),En=!0,n.precision=r,n.rounding=e,t.ln())};_t.inverseHyperbolicTangent=_t.atanh=function(){var r,e,t,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=a.precision,e=a.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?Jt(new a(i),r,e,!0):(a.precision=t=n-i.e,i=ti(i.plus(1),new a(1).minus(i),t+r,1),a.precision=r+4,a.rounding=1,i=i.ln(),a.precision=r,a.rounding=e,i.times(.5))):new a(NaN)};_t.inverseSine=_t.asin=function(){var r,e,t,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),t=a.precision,n=a.rounding,e!==-1?e===0?(r=Ju(a,t+4,n).times(.5),r.s=i.s,r):new a(NaN):(a.precision=t+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=t,a.rounding=n,i.times(2)))};_t.inverseTangent=_t.atan=function(){var r,e,t,n,i,a,s,o,c,u=this,h=u.constructor,d=h.precision,m=h.rounding;if(u.isFinite()){if(u.isZero())return new h(u);if(u.abs().eq(1)&&d+4<=VA)return s=Ju(h,d+4,m).times(.25),s.s=u.s,s}else{if(!u.s)return new h(NaN);if(d+4<=VA)return s=Ju(h,d+4,m).times(.5),s.s=u.s,s}for(h.precision=o=d+10,h.rounding=1,t=Math.min(28,o/cn+2|0),r=t;r;--r)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(En=!1,e=Math.ceil(o/cn),n=1,c=u.times(u),s=new h(u),i=u;r!==-1;)if(i=i.times(c),a=s.minus(i.div(n+=2)),i=i.times(c),s=a.plus(i.div(n+=2)),s.d[e]!==void 0)for(r=e;s.d[r]===a.d[r]&&r--;);return t&&(s=s.times(2<<t-1)),En=!0,Jt(s,h.precision=d,h.rounding=m,!0)};_t.isFinite=function(){return!!this.d};_t.isInteger=_t.isInt=function(){return!!this.d&&xs(this.e/cn)>this.d.length-2};_t.isNaN=function(){return!this.s};_t.isNegative=_t.isNeg=function(){return this.s<0};_t.isPositive=_t.isPos=function(){return this.s>0};_t.isZero=function(){return!!this.d&&this.d[0]===0};_t.lessThan=_t.lt=function(r){return this.cmp(r)<0};_t.lessThanOrEqualTo=_t.lte=function(r){return this.cmp(r)<1};_t.logarithm=_t.log=function(r){var e,t,n,i,a,s,o,c,u=this,h=u.constructor,d=h.precision,m=h.rounding,v=5;if(r==null)r=new h(10),e=!0;else{if(r=new h(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new h(NaN);e=r.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new h(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)a=!0;else{for(i=t[0];i%10===0;)i/=10;a=i!==1}if(En=!1,o=d+v,s=ch(u,o),n=e?e_(h,o+10):ch(r,o),c=ti(s,n,o,1),iy(c.d,i=d,m))do if(o+=10,s=ch(u,o),n=e?e_(h,o+10):ch(r,o),c=ti(s,n,o,1),!a){+ka(c.d).slice(i+1,i+15)+1==1e14&&(c=Jt(c,d+1,0));break}while(iy(c.d,i+=10,m));return En=!0,Jt(c,d,m)};_t.minus=_t.sub=function(r){var e,t,n,i,a,s,o,c,u,h,d,m,v=this,x=v.constructor;if(r=new x(r),!v.d||!r.d)return!v.s||!r.s?r=new x(NaN):v.d?r.s=-r.s:r=new x(r.d||v.s!==r.s?v:NaN),r;if(v.s!=r.s)return r.s=-r.s,v.plus(r);if(u=v.d,m=r.d,o=x.precision,c=x.rounding,!u[0]||!m[0]){if(m[0])r.s=-r.s;else if(u[0])r=new x(v);else return new x(c===3?-0:0);return En?Jt(r,o,c):r}if(t=xs(r.e/cn),h=xs(v.e/cn),u=u.slice(),a=h-t,a){for(d=a<0,d?(e=u,a=-a,s=m.length):(e=m,t=h,s=u.length),n=Math.max(Math.ceil(o/cn),s)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=u.length,s=m.length,d=n<s,d&&(s=n),n=0;n<s;n++)if(u[n]!=m[n]){d=u[n]<m[n];break}a=0}for(d&&(e=u,u=m,m=e,r.s=-r.s),s=u.length,n=m.length-s;n>0;--n)u[s++]=0;for(n=m.length;n>a;){if(u[--n]<m[n]){for(i=n;i&&u[--i]===0;)u[i]=lu-1;--u[i],u[n]+=lu}u[n]-=m[n]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(r.d=u,r.e=_S(u,t),En?Jt(r,o,c):r):new x(c===3?-0:0)};_t.modulo=_t.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?Jt(new n(t),n.precision,n.rounding):(En=!1,n.modulo==9?(e=ti(t,r.abs(),0,3,1),e.s*=r.s):e=ti(t,r,0,n.modulo,1),e=e.times(r),En=!0,t.minus(e))};_t.naturalExponential=_t.exp=function(){return qA(this)};_t.naturalLogarithm=_t.ln=function(){return ch(this)};_t.negated=_t.neg=function(){var r=new this.constructor(this);return r.s=-r.s,Jt(r)};_t.plus=_t.add=function(r){var e,t,n,i,a,s,o,c,u,h,d=this,m=d.constructor;if(r=new m(r),!d.d||!r.d)return!d.s||!r.s?r=new m(NaN):d.d||(r=new m(r.d||d.s===r.s?d:NaN)),r;if(d.s!=r.s)return r.s=-r.s,d.minus(r);if(u=d.d,h=r.d,o=m.precision,c=m.rounding,!u[0]||!h[0])return h[0]||(r=new m(d)),En?Jt(r,o,c):r;if(a=xs(d.e/cn),n=xs(r.e/cn),u=u.slice(),i=a-n,i){for(i<0?(t=u,i=-i,s=h.length):(t=h,n=a,s=u.length),a=Math.ceil(o/cn),s=a>s?a+1:s+1,i>s&&(i=s,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(s=u.length,i=h.length,s-i<0&&(i=s,t=h,h=u,u=t),e=0;i;)e=(u[--i]=u[i]+h[i]+e)/lu|0,u[i]%=lu;for(e&&(u.unshift(e),++n),s=u.length;u[--s]==0;)u.pop();return r.d=u,r.e=_S(u,n),En?Jt(r,o,c):r};_t.precision=_t.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(mh+r);return t.d?(e=qB(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};_t.round=function(){var r=this,e=r.constructor;return Jt(new e(r),r.e+1,e.rounding)};_t.sine=_t.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+cn,n.rounding=1,t=c8(n,jB(n,t)),n.precision=r,n.rounding=e,Jt(Kc>2?t.neg():t,r,e,!0)):new n(NaN)};_t.squareRoot=_t.sqrt=function(){var r,e,t,n,i,a,s=this,o=s.d,c=s.e,u=s.s,h=s.constructor;if(u!==1||!o||!o[0])return new h(!u||u<0&&(!o||o[0])?NaN:o?s:1/0);for(En=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=ka(o),(e.length+c)%2==0&&(e+="0"),u=Math.sqrt(e),c=xs((c+1)/2)-(c<0||c%2),u==1/0?e="5e"+c:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),n=new h(e)):n=new h(u.toString()),t=(c=h.precision)+3;;)if(a=n,n=a.plus(ti(s,a,t+2,1)).times(.5),ka(a.d).slice(0,t)===(e=ka(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Jt(a,c+1,0),a.times(a).eq(s))){n=a;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Jt(n,c+1,1),r=!n.times(n).eq(s));break}return En=!0,Jt(n,c,h.rounding,r)};_t.tangent=_t.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=ti(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,Jt(Kc==2||Kc==4?t.neg():t,r,e,!0)):new n(NaN)};_t.times=_t.mul=function(r){var e,t,n,i,a,s,o,c,u,h=this,d=h.constructor,m=h.d,v=(r=new d(r)).d;if(r.s*=h.s,!m||!m[0]||!v||!v[0])return new d(!r.s||m&&!m[0]&&!v||v&&!v[0]&&!m?NaN:!m||!v?r.s/0:r.s*0);for(t=xs(h.e/cn)+xs(r.e/cn),c=m.length,u=v.length,c<u&&(a=m,m=v,v=a,s=c,c=u,u=s),a=[],s=c+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,i=c+n;i>n;)o=a[i]+v[n]*m[i-n-1]+e,a[i--]=o%lu|0,e=o/lu|0;a[i]=(a[i]+e)%lu|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),r.d=a,r.e=_S(a,t),En?Jt(r,d.precision,d.rounding):r};_t.toBinary=function(r,e){return z2(this,2,r,e)};_t.toDecimalPlaces=_t.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(go(r,0,Sh),e===void 0?e=n.rounding:go(e,0,8),Jt(t,r+t.e+1,e))};_t.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=ic(n,!0):(go(r,0,Sh),e===void 0?e=i.rounding:go(e,0,8),n=Jt(new i(n),r+1,e),t=ic(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};_t.toFixed=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?t=ic(i):(go(r,0,Sh),e===void 0?e=a.rounding:go(e,0,8),n=Jt(new a(i),r+i.e+1,e),t=ic(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};_t.toFraction=function(r){var e,t,n,i,a,s,o,c,u,h,d,m,v=this,x=v.d,b=v.constructor;if(!x)return new b(v);if(u=t=new b(1),n=c=new b(0),e=new b(n),a=e.e=qB(x)-v.e-1,s=a%cn,e.d[0]=aa(10,s<0?cn+s:s),r==null)r=a>0?e:u;else{if(o=new b(r),!o.isInt()||o.lt(u))throw Error(mh+o);r=o.gt(e)?a>0?e:u:o}for(En=!1,o=new b(ka(x)),h=b.precision,b.precision=a=x.length*cn*2;d=ti(o,e,0,1,1),i=t.plus(d.times(n)),i.cmp(r)!=1;)t=n,n=i,i=u,u=c.plus(d.times(i)),c=i,i=e,e=o.minus(d.times(i)),o=i;return i=ti(r.minus(t),n,0,1,1),c=c.plus(i.times(u)),t=t.plus(i.times(n)),c.s=u.s=v.s,m=ti(u,n,a,1).minus(v).abs().cmp(ti(c,t,a,1).minus(v).abs())<1?[u,n]:[c,t],b.precision=h,En=!0,m};_t.toHexadecimal=_t.toHex=function(r,e){return z2(this,16,r,e)};_t.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:go(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(En=!1,t=ti(t,r,0,e,1).times(r),En=!0,Jt(t)):(r.s=t.s,t=r),t};_t.toNumber=function(){return+this};_t.toOctal=function(r,e){return z2(this,8,r,e)};_t.toPower=_t.pow=function(r){var e,t,n,i,a,s,o=this,c=o.constructor,u=+(r=new c(r));if(!o.d||!r.d||!o.d[0]||!r.d[0])return new c(aa(+o,u));if(o=new c(o),o.eq(1))return o;if(n=c.precision,a=c.rounding,r.eq(1))return Jt(o,n,a);if(e=xs(r.e/cn),e>=r.d.length-1&&(t=u<0?-u:u)<=s8)return i=GB(c,o,t,n),r.s<0?new c(1).div(i):Jt(i,n,a);if(s=o.s,s<0){if(e<r.d.length-1)return new c(NaN);if((r.d[e]&1)==0&&(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return t=aa(+o,u),e=t==0||!isFinite(t)?xs(u*(Math.log("0."+ka(o.d))/Math.LN10+o.e+1)):new c(t+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?s/0:0):(En=!1,c.rounding=o.s=1,t=Math.min(12,(e+"").length),i=qA(r.times(ch(o,n+t)),n),i.d&&(i=Jt(i,n+5,1),iy(i.d,n,a)&&(e=n+10,i=Jt(qA(r.times(ch(o,e+t)),e),e+5,1),+ka(i.d).slice(n+1,n+15)+1==1e14&&(i=Jt(i,n+1,0)))),i.s=s,En=!0,c.rounding=a,Jt(i,n,a))};_t.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=ic(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(go(r,1,Sh),e===void 0?e=i.rounding:go(e,0,8),n=Jt(new i(n),r,e),t=ic(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};_t.toSignificantDigits=_t.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(go(r,1,Sh),e===void 0?e=n.rounding:go(e,0,8)),Jt(new n(t),r,e)};_t.toString=function(){var r=this,e=r.constructor,t=ic(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};_t.truncated=_t.trunc=function(){return Jt(new this.constructor(this),this.e+1,1)};_t.valueOf=_t.toJSON=function(){var r=this,e=r.constructor,t=ic(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function ka(r){var e,t,n,i=r.length-1,a="",s=r[0];if(i>0){for(a+=s,e=1;e<i;e++)n=r[e]+"",t=cn-n.length,t&&(a+=ah(t)),a+=n;s=r[e],n=s+"",t=cn-n.length,t&&(a+=ah(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function go(r,e,t){if(r!==~~r||r<e||r>t)throw Error(mh+r)}function iy(r,e,t,n){var i,a,s,o;for(a=r[0];a>=10;a/=10)--e;return--e<0?(e+=cn,i=0):(i=Math.ceil((e+1)/cn),e%=cn),a=aa(10,cn-e),o=r[i]%a|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=t<4&&o==99999||t>3&&o==49999||o==5e4||o==0):s=(t<4&&o+1==a||t>3&&o+1==a/2)&&(r[i+1]/a/100|0)==aa(10,e-2)-1||(o==a/2||o==0)&&(r[i+1]/a/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(n||t<4)&&o==9999||!n&&t>3&&o==4999):s=((n||t<4)&&o+1==a||!n&&t>3&&o+1==a/2)&&(r[i+1]/a/1e3|0)==aa(10,e-3)-1,s}function Rb(r,e,t){for(var n,i=[0],a,s=0,o=r.length;s<o;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=PA.indexOf(r.charAt(s++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function l8(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/SS(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=mv(r,1,e.times(i),new r(1));for(var a=t;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return r.precision-=t,e}var ti=(function(){function r(n,i,a){var s,o=0,c=n.length;for(n=n.slice();c--;)s=n[c]*i+o,n[c]=s%a|0,o=s/a|0;return o&&n.unshift(o),n}function e(n,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(n[o]!=i[o]){c=n[o]>i[o]?1:-1;break}return c}function t(n,i,a,s){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*s+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s,o,c){var u,h,d,m,v,x,b,M,_,T,E,A,D,N,O,z,C,R,F,H,X=n.constructor,$=n.s==i.s?1:-1,Y=n.d,I=i.d;if(!Y||!Y[0]||!I||!I[0])return new X(!n.s||!i.s||(Y?I&&Y[0]==I[0]:!I)?NaN:Y&&Y[0]==0||!I?$*0:$/0);for(c?(v=1,h=n.e-i.e):(c=lu,v=cn,h=xs(n.e/v)-xs(i.e/v)),F=I.length,C=Y.length,_=new X($),T=_.d=[],d=0;I[d]==(Y[d]||0);d++);if(I[d]>(Y[d]||0)&&h--,a==null?(N=a=X.precision,s=X.rounding):o?N=a+(n.e-i.e)+1:N=a,N<0)T.push(1),x=!0;else{if(N=N/v+2|0,d=0,F==1){for(m=0,I=I[0],N++;(d<C||m)&&N--;d++)O=m*c+(Y[d]||0),T[d]=O/I|0,m=O%I|0;x=m||d<C}else{for(m=c/(I[0]+1)|0,m>1&&(I=r(I,m,c),Y=r(Y,m,c),F=I.length,C=Y.length),z=F,E=Y.slice(0,F),A=E.length;A<F;)E[A++]=0;H=I.slice(),H.unshift(0),R=I[0],I[1]>=c/2&&++R;do m=0,u=e(I,E,F,A),u<0?(D=E[0],F!=A&&(D=D*c+(E[1]||0)),m=D/R|0,m>1?(m>=c&&(m=c-1),b=r(I,m,c),M=b.length,A=E.length,u=e(b,E,M,A),u==1&&(m--,t(b,F<M?H:I,M,c))):(m==0&&(u=m=1),b=I.slice()),M=b.length,M<A&&b.unshift(0),t(E,b,A,c),u==-1&&(A=E.length,u=e(I,E,F,A),u<1&&(m++,t(E,F<A?H:I,A,c))),A=E.length):u===0&&(m++,E=[0]),T[d++]=m,u&&E[0]?E[A++]=Y[z]||0:(E=[Y[z]],A=1);while((z++<C||E[0]!==void 0)&&N--);x=E[0]!==void 0}T[0]||T.shift()}if(v==1)_.e=h,LB=x;else{for(d=1,m=T[0];m>=10;m/=10)d++;_.e=d+h*v-1,Jt(_,o?a+_.e+1:a,s,x)}return _}})();function Jt(r,e,t,n){var i,a,s,o,c,u,h,d,m,v=r.constructor;e:if(e!=null){if(d=r.d,!d)return r;for(i=1,o=d[0];o>=10;o/=10)i++;if(a=e-i,a<0)a+=cn,s=e,h=d[m=0],c=h/aa(10,i-s-1)%10|0;else if(m=Math.ceil((a+1)/cn),o=d.length,m>=o)if(n){for(;o++<=m;)d.push(0);h=c=0,i=1,a%=cn,s=a-cn+1}else break e;else{for(h=o=d[m],i=1;o>=10;o/=10)i++;a%=cn,s=a-cn+i,c=s<0?0:h/aa(10,i-s-1)%10|0}if(n=n||e<0||d[m+1]!==void 0||(s<0?h:h%aa(10,i-s-1)),u=t<4?(c||n)&&(t==0||t==(r.s<0?3:2)):c>5||c==5&&(t==4||n||t==6&&(a>0?s>0?h/aa(10,i-s):0:d[m-1])%10&1||t==(r.s<0?8:7)),e<1||!d[0])return d.length=0,u?(e-=r.e+1,d[0]=aa(10,(cn-e%cn)%cn),r.e=-e||0):d[0]=r.e=0,r;if(a==0?(d.length=m,o=1,m--):(d.length=m+1,o=aa(10,cn-a),d[m]=s>0?(h/aa(10,i-s)%aa(10,s)|0)*o:0),u)for(;;)if(m==0){for(a=1,s=d[0];s>=10;s/=10)a++;for(s=d[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(r.e++,d[0]==lu&&(d[0]=1));break}else{if(d[m]+=o,d[m]!=lu)break;d[m--]=0,o=1}for(a=d.length;d[--a]===0;)d.pop()}return En&&(r.e>v.maxE?(r.d=null,r.e=NaN):r.e<v.minE&&(r.e=0,r.d=[0])),r}function ic(r,e,t){if(!r.isFinite())return XB(r);var n,i=r.e,a=ka(r.d),s=a.length;return e?(t&&(n=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+ah(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r.e<0?"e":"e+")+r.e):i<0?(a="0."+ah(-i-1)+a,t&&(n=t-s)>0&&(a+=ah(n))):i>=s?(a+=ah(i+1-s),t&&(n=t-i-1)>0&&(a=a+"."+ah(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),t&&(n=t-s)>0&&(i+1===s&&(a+="."),a+=ah(n))),a}function _S(r,e){var t=r[0];for(e*=cn;t>=10;t/=10)e++;return e}function e_(r,e,t){if(e>o8)throw En=!0,t&&(r.precision=t),Error(IB);return Jt(new r(Qb),e,1,!0)}function Ju(r,e,t){if(e>VA)throw Error(IB);return Jt(new r(Jb),e,t,!0)}function qB(r){var e=r.length-1,t=e*cn+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function ah(r){for(var e="";r--;)e+="0";return e}function GB(r,e,t,n){var i,a=new r(1),s=Math.ceil(n/cn+4);for(En=!1;;){if(t%2&&(a=a.times(e),AN(a.d,s)&&(i=!0)),t=xs(t/2),t===0){t=a.d.length-1,i&&a.d[t]===0&&++a.d[t];break}e=e.times(e),AN(e.d,s)}return En=!0,a}function EN(r){return r.d[r.d.length-1]&1}function kB(r,e,t){for(var n,i,a=new r(e[0]),s=0;++s<e.length;){if(i=new r(e[s]),!i.s){a=i;break}n=a.cmp(i),(n===t||n===0&&a.s===t)&&(a=i)}return a}function qA(r,e){var t,n,i,a,s,o,c,u=0,h=0,d=0,m=r.constructor,v=m.rounding,x=m.precision;if(!r.d||!r.d[0]||r.e>17)return new m(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(En=!1,c=x):c=e,o=new m(.03125);r.e>-2;)r=r.times(o),d+=5;for(n=Math.log(aa(2,d))/Math.LN10*2+5|0,c+=n,t=a=s=new m(1),m.precision=c;;){if(a=Jt(a.times(r),c,1),t=t.times(++h),o=s.plus(ti(a,t,c,1)),ka(o.d).slice(0,c)===ka(s.d).slice(0,c)){for(i=d;i--;)s=Jt(s.times(s),c,1);if(e==null)if(u<3&&iy(s.d,c-n,v,u))m.precision=c+=10,t=a=o=new m(1),h=0,u++;else return Jt(s,m.precision=x,v,En=!0);else return m.precision=x,s}s=o}}function ch(r,e){var t,n,i,a,s,o,c,u,h,d,m,v=1,x=10,b=r,M=b.d,_=b.constructor,T=_.rounding,E=_.precision;if(b.s<0||!M||!M[0]||!b.e&&M[0]==1&&M.length==1)return new _(M&&!M[0]?-1/0:b.s!=1?NaN:M?0:b);if(e==null?(En=!1,h=E):h=e,_.precision=h+=x,t=ka(M),n=t.charAt(0),Math.abs(a=b.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)b=b.times(r),t=ka(b.d),n=t.charAt(0),v++;a=b.e,n>1?(b=new _("0."+t),a++):b=new _(n+"."+t.slice(1))}else return u=e_(_,h+2,E).times(a+""),b=ch(new _(n+"."+t.slice(1)),h-x).plus(u),_.precision=E,e==null?Jt(b,E,T,En=!0):b;for(d=b,c=s=b=ti(b.minus(1),b.plus(1),h,1),m=Jt(b.times(b),h,1),i=3;;){if(s=Jt(s.times(m),h,1),u=c.plus(ti(s,new _(i),h,1)),ka(u.d).slice(0,h)===ka(c.d).slice(0,h))if(c=c.times(2),a!==0&&(c=c.plus(e_(_,h+2,E).times(a+""))),c=ti(c,new _(v),h,1),e==null)if(iy(c.d,h-x,T,o))_.precision=h+=x,u=s=b=ti(d.minus(1),d.plus(1),h,1),m=Jt(b.times(b),h,1),i=o=1;else return Jt(c,_.precision=E,T,En=!0);else return _.precision=E,c;c=u,i+=2}}function XB(r){return String(r.s*r.s/0)}function Ob(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%cn,t<0&&(n+=cn),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=cn;n<i;)r.d.push(+e.slice(n,n+=cn));e=e.slice(n),n=cn-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),En&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function u8(r,e){var t,n,i,a,s,o,c,u,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),VB.test(e))return Ob(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(i8.test(e))t=16,e=e.toLowerCase();else if(r8.test(e))t=2;else if(a8.test(e))t=8;else throw Error(mh+e);for(a=e.search(/p/i),a>0?(c=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,n=r.constructor,s&&(e=e.replace(".",""),o=e.length,a=o-a,i=GB(n,new n(t),a,a*2)),u=Rb(e,t,lu),h=u.length-1,a=h;u[a]===0;--a)u.pop();return a<0?new n(r.s*0):(r.e=_S(u,h),r.d=u,En=!1,s&&(r=ti(r,i,o*4)),c&&(r=r.times(Math.abs(c)<54?aa(2,c):vh.pow(2,c))),En=!0,r)}function c8(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:mv(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/SS(5,t)),e=mv(r,2,e,e);for(var i,a=new r(5),s=new r(16),o=new r(20);t--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(o))));return e}function mv(r,e,t,n,i){var a,s,o,c,u=r.precision,h=Math.ceil(u/cn);for(En=!1,c=t.times(t),o=new r(n);;){if(s=ti(o.times(c),new r(e++*e++),u,1),o=i?n.plus(s):n.minus(s),n=ti(s.times(c),new r(e++*e++),u,1),s=o.plus(n),s.d[h]!==void 0){for(a=h;s.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=n,n=s,s=a}return En=!0,s.d.length=h+1,s}function SS(r,e){for(var t=r;--e;)t*=r;return t}function jB(r,e){var t,n=e.s<0,i=Ju(r,r.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Kc=n?4:1,e;if(t=e.divToInt(i),t.isZero())Kc=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(a))return Kc=EN(t)?n?2:3:n?4:1,e;Kc=EN(t)?n?1:4:n?3:2}return e.minus(i).abs()}function z2(r,e,t,n){var i,a,s,o,c,u,h,d,m,v=r.constructor,x=t!==void 0;if(x?(go(t,1,Sh),n===void 0?n=v.rounding:go(n,0,8)):(t=v.precision,n=v.rounding),!r.isFinite())h=XB(r);else{for(h=ic(r),s=h.indexOf("."),x?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,s>=0&&(h=h.replace(".",""),m=new v(1),m.e=h.length-s,m.d=Rb(ic(m),10,i),m.e=m.d.length),d=Rb(h,10,i),a=c=d.length;d[--c]==0;)d.pop();if(!d[0])h=x?"0p+0":"0";else{if(s<0?a--:(r=new v(r),r.d=d,r.e=a,r=ti(r,m,t,n,0,i),d=r.d,a=r.e,u=LB),s=d[t],o=i/2,u=u||d[t+1]!==void 0,u=n<4?(s!==void 0||u)&&(n===0||n===(r.s<0?3:2)):s>o||s===o&&(n===4||u||n===6&&d[t-1]&1||n===(r.s<0?8:7)),d.length=t,u)for(;++d[--t]>i-1;)d[t]=0,t||(++a,d.unshift(1));for(c=d.length;!d[c-1];--c);for(s=0,h="";s<c;s++)h+=PA.charAt(d[s]);if(x){if(c>1)if(e==16||e==8){for(s=e==16?4:3,--c;c%s;c++)h+="0";for(d=Rb(h,i,e),c=d.length;!d[c-1];--c);for(s=1,h="1.";s<c;s++)h+=PA.charAt(d[s])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>c)for(a-=c;a--;)h+="0";else a<c&&(h=h.slice(0,a)+"."+h.slice(a))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return r.s<0?"-"+h:h}function AN(r,e){if(r.length>e)return r.length=e,!0}function f8(r){return new this(r).abs()}function h8(r){return new this(r).acos()}function d8(r){return new this(r).acosh()}function p8(r,e){return new this(r).plus(e)}function m8(r){return new this(r).asin()}function v8(r){return new this(r).asinh()}function g8(r){return new this(r).atan()}function y8(r){return new this(r).atanh()}function x8(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,a=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Ju(this,a,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Ju(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Ju(this,a,1).times(.5),t.s=r.s):e.s<0?(this.precision=a,this.rounding=1,t=this.atan(ti(r,e,a,1)),e=Ju(this,a,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(ti(r,e,a,1)),t}function b8(r){return new this(r).cbrt()}function _8(r){return Jt(r=new this(r),r.e+1,2)}function S8(r,e,t){return new this(r).clamp(e,t)}function M8(r){if(!r||typeof r!="object")throw Error(bS+"Object expected");var e,t,n,i=r.defaults===!0,a=["precision",1,Sh,"rounding",0,8,"toExpNeg",-ev,0,"toExpPos",0,ev,"maxE",0,ev,"minE",-ev,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(t=a[e],i&&(this[t]=HA[t]),(n=r[t])!==void 0)if(xs(n)===n&&n>=a[e+1]&&n<=a[e+2])this[t]=n;else throw Error(mh+t+": "+n);if(t="crypto",i&&(this[t]=HA[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(PB);else this[t]=!1;else throw Error(mh+t+": "+n);return this}function E8(r){return new this(r).cos()}function A8(r){return new this(r).cosh()}function YB(r){var e,t,n;function i(a){var s,o,c,u=this;if(!(u instanceof i))return new i(a);if(u.constructor=i,wN(a)){u.s=a.s,En?!a.d||a.e>i.maxE?(u.e=NaN,u.d=null):a.e<i.minE?(u.e=0,u.d=[0]):(u.e=a.e,u.d=a.d.slice()):(u.e=a.e,u.d=a.d?a.d.slice():a.d);return}if(c=typeof a,c==="number"){if(a===0){u.s=1/a<0?-1:1,u.e=0,u.d=[0];return}if(a<0?(a=-a,u.s=-1):u.s=1,a===~~a&&a<1e7){for(s=0,o=a;o>=10;o/=10)s++;En?s>i.maxE?(u.e=NaN,u.d=null):s<i.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[a]):(u.e=s,u.d=[a]);return}if(a*0!==0){a||(u.s=NaN),u.e=NaN,u.d=null;return}return Ob(u,a.toString())}if(c==="string")return(o=a.charCodeAt(0))===45?(a=a.slice(1),u.s=-1):(o===43&&(a=a.slice(1)),u.s=1),VB.test(a)?Ob(u,a):u8(u,a);if(c==="bigint")return a<0?(a=-a,u.s=-1):u.s=1,Ob(u,a.toString());throw Error(mh+a)}if(i.prototype=_t,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=M8,i.clone=YB,i.isDecimal=wN,i.abs=f8,i.acos=h8,i.acosh=d8,i.add=p8,i.asin=m8,i.asinh=v8,i.atan=g8,i.atanh=y8,i.atan2=x8,i.cbrt=b8,i.ceil=_8,i.clamp=S8,i.cos=E8,i.cosh=A8,i.div=w8,i.exp=T8,i.floor=N8,i.hypot=D8,i.ln=C8,i.log=R8,i.log10=B8,i.log2=O8,i.max=U8,i.min=z8,i.mod=F8,i.mul=L8,i.pow=I8,i.random=P8,i.round=H8,i.sign=V8,i.sin=q8,i.sinh=G8,i.sqrt=k8,i.sub=X8,i.sum=j8,i.tan=Y8,i.tanh=W8,i.trunc=$8,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function w8(r,e){return new this(r).div(e)}function T8(r){return new this(r).exp()}function N8(r){return Jt(r=new this(r),r.e+1,3)}function D8(){var r,e,t=new this(0);for(En=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return En=!0,new this(1/0);t=e}return En=!0,t.sqrt()}function wN(r){return r instanceof vh||r&&r.toStringTag===HB||!1}function C8(r){return new this(r).ln()}function R8(r,e){return new this(r).log(e)}function O8(r){return new this(r).log(2)}function B8(r){return new this(r).log(10)}function U8(){return kB(this,arguments,-1)}function z8(){return kB(this,arguments,1)}function F8(r,e){return new this(r).mod(e)}function L8(r,e){return new this(r).mul(e)}function I8(r,e){return new this(r).pow(e)}function P8(r){var e,t,n,i,a=0,s=new this(1),o=[];if(r===void 0?r=this.precision:go(r,1,Sh),n=Math.ceil(r/cn),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(o.push(i%1e7),a+=4);a=n/4}else throw Error(PB);else for(;a<n;)o[a++]=Math.random()*1e7|0;for(n=o[--a],r%=cn,n&&r&&(i=aa(10,cn-r),o[a]=(n/i|0)*i);o[a]===0;a--)o.pop();if(a<0)t=0,o=[0];else{for(t=-1;o[0]===0;t-=cn)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<cn&&(t-=cn-n)}return s.e=t,s.d=o,s}function H8(r){return Jt(r=new this(r),r.e+1,this.rounding)}function V8(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function q8(r){return new this(r).sin()}function G8(r){return new this(r).sinh()}function k8(r){return new this(r).sqrt()}function X8(r,e){return new this(r).sub(e)}function j8(){var r=0,e=arguments,t=new this(e[r]);for(En=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return En=!0,Jt(t,this.precision,this.rounding)}function Y8(r){return new this(r).tan()}function W8(r){return new this(r).tanh()}function $8(r){return Jt(r=new this(r),r.e+1,1)}_t[Symbol.for("nodejs.util.inspect.custom")]=_t.toString;_t[Symbol.toStringTag]="Decimal";var vh=_t.constructor=YB(HA);Qb=new vh(Qb);Jb=new vh(Jb);var Z8="BigNumber",K8=["?on","config"],Q8=de(Z8,K8,r=>{var{on:e,config:t}=r,n=vh.clone({precision:t.precision,modulo:vh.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const us=Math.cosh||function(r){return Math.abs(r)<1e-9?1-r:(Math.exp(r)+Math.exp(-r))*.5},pl=Math.sinh||function(r){return Math.abs(r)<1e-9?r:(Math.exp(r)-Math.exp(-r))*.5},J8=function(r){const e=Math.PI/4;if(-e>r||r>e)return Math.cos(r)-1;const t=r*r;return t*(t*(t*(t*(t*(t*(t*(t/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},fE=function(r,e){return r=Math.abs(r),e=Math.abs(e),r<e&&([r,e]=[e,r]),r<1e8?Math.sqrt(r*r+e*e):(e/=r,r*Math.sqrt(1+e*e))},Am=function(){throw SyntaxError("Invalid Param")};function hE(r,e){const t=Math.abs(r),n=Math.abs(e);return r===0?Math.log(n):e===0?Math.log(t):t<3e3&&n<3e3?Math.log(r*r+e*e)*.5:(r=r*.5,e=e*.5,.5*Math.log(r*r+e*e)+Math.LN2)}const e6={re:0,im:0},Id=function(r,e){const t=e6;if(r==null)t.re=t.im=0;else if(e!==void 0)t.re=r,t.im=e;else switch(typeof r){case"object":if("im"in r&&"re"in r)t.re=r.re,t.im=r.im;else if("abs"in r&&"arg"in r){if(!isFinite(r.abs)&&isFinite(r.arg))return pt.INFINITY;t.re=r.abs*Math.cos(r.arg),t.im=r.abs*Math.sin(r.arg)}else if("r"in r&&"phi"in r){if(!isFinite(r.r)&&isFinite(r.phi))return pt.INFINITY;t.re=r.r*Math.cos(r.phi),t.im=r.r*Math.sin(r.phi)}else r.length===2?(t.re=r[0],t.im=r[1]):Am();break;case"string":t.im=t.re=0;const n=r.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,a=0;n===null&&Am();for(let s=0;s<n.length;s++){const o=n[s];o===" "||o==="	"||o===`
`||(o==="+"?i++:o==="-"?a++:o==="i"||o==="I"?(i+a===0&&Am(),n[s+1]!==" "&&!isNaN(n[s+1])?(t.im+=parseFloat((a%2?"-":"")+n[s+1]),s++):t.im+=parseFloat((a%2?"-":"")+"1"),i=a=0):((i+a===0||isNaN(o))&&Am(),n[s+1]==="i"||n[s+1]==="I"?(t.im+=parseFloat((a%2?"-":"")+o),s++):t.re+=parseFloat((a%2?"-":"")+o),i=a=0))}i+a>0&&Am();break;case"number":t.im=0,t.re=r;break;default:Am()}return isNaN(t.re)||isNaN(t.im),t};function pt(r,e){if(!(this instanceof pt))return new pt(r,e);const t=Id(r,e);this.re=t.re,this.im=t.im}pt.prototype={re:0,im:0,sign:function(){const r=fE(this.re,this.im);return new pt(this.re/r,this.im/r)},add:function(r,e){const t=Id(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?pt.NAN:pt.INFINITY:new pt(this.re+t.re,this.im+t.im)},sub:function(r,e){const t=Id(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?pt.NAN:pt.INFINITY:new pt(this.re-t.re,this.im-t.im)},mul:function(r,e){const t=Id(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),a=this.re===0&&this.im===0,s=t.re===0&&t.im===0;return n&&s||i&&a?pt.NAN:n||i?pt.INFINITY:t.im===0&&this.im===0?new pt(this.re*t.re,0):new pt(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)},div:function(r,e){const t=Id(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),a=this.re===0&&this.im===0,s=t.re===0&&t.im===0;if(a&&s||n&&i)return pt.NAN;if(s||n)return pt.INFINITY;if(a||i)return pt.ZERO;if(t.im===0)return new pt(this.re/t.re,this.im/t.re);if(Math.abs(t.re)<Math.abs(t.im)){const o=t.re/t.im,c=t.re*o+t.im;return new pt((this.re*o+this.im)/c,(this.im*o-this.re)/c)}else{const o=t.im/t.re,c=t.im*o+t.re;return new pt((this.re+this.im*o)/c,(this.im-this.re*o)/c)}},pow:function(r,e){const t=Id(r,e),n=this.re===0&&this.im===0;if(t.re===0&&t.im===0)return pt.ONE;if(t.im===0){if(this.im===0&&this.re>0)return new pt(Math.pow(this.re,t.re),0);if(this.re===0)switch((t.re%4+4)%4){case 0:return new pt(Math.pow(this.im,t.re),0);case 1:return new pt(0,Math.pow(this.im,t.re));case 2:return new pt(-Math.pow(this.im,t.re),0);case 3:return new pt(0,-Math.pow(this.im,t.re))}}if(n&&t.re>0)return pt.ZERO;const a=Math.atan2(this.im,this.re),s=hE(this.re,this.im);let o=Math.exp(t.re*s-t.im*a),c=t.im*s+t.re*a;return new pt(o*Math.cos(c),o*Math.sin(c))},sqrt:function(){const r=this.re,e=this.im;if(e===0)return r>=0?new pt(Math.sqrt(r),0):new pt(0,Math.sqrt(-r));const t=fE(r,e);let n=Math.sqrt(.5*(t+Math.abs(r))),i=Math.abs(e)/(2*n);return r>=0?new pt(n,e<0?-i:i):new pt(i,e<0?-n:n)},exp:function(){const r=Math.exp(this.re);return this.im===0?new pt(r,0):new pt(r*Math.cos(this.im),r*Math.sin(this.im))},expm1:function(){const r=this.re,e=this.im;return new pt(Math.expm1(r)*Math.cos(e)+J8(e),Math.exp(r)*Math.sin(e))},log:function(){const r=this.re,e=this.im;return e===0&&r>0?new pt(Math.log(r),0):new pt(hE(r,e),Math.atan2(e,r))},abs:function(){return fE(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const r=this.re,e=this.im;return new pt(Math.sin(r)*us(e),Math.cos(r)*pl(e))},cos:function(){const r=this.re,e=this.im;return new pt(Math.cos(r)*us(e),-Math.sin(r)*pl(e))},tan:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)+us(e);return new pt(Math.sin(r)/t,pl(e)/t)},cot:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)-us(e);return new pt(-Math.sin(r)/t,pl(e)/t)},sec:function(){const r=this.re,e=this.im,t=.5*us(2*e)+.5*Math.cos(2*r);return new pt(Math.cos(r)*us(e)/t,Math.sin(r)*pl(e)/t)},csc:function(){const r=this.re,e=this.im,t=.5*us(2*e)-.5*Math.cos(2*r);return new pt(Math.sin(r)*us(e)/t,-Math.cos(r)*pl(e)/t)},asin:function(){const r=this.re,e=this.im,t=new pt(e*e-r*r+1,-2*r*e).sqrt(),n=new pt(t.re-e,t.im+r).log();return new pt(n.im,-n.re)},acos:function(){const r=this.re,e=this.im,t=new pt(e*e-r*r+1,-2*r*e).sqrt(),n=new pt(t.re-e,t.im+r).log();return new pt(Math.PI/2-n.im,n.re)},atan:function(){const r=this.re,e=this.im;if(r===0){if(e===1)return new pt(0,1/0);if(e===-1)return new pt(0,-1/0)}const t=r*r+(1-e)*(1-e),n=new pt((1-e*e-r*r)/t,-2*r/t).log();return new pt(-.5*n.im,.5*n.re)},acot:function(){const r=this.re,e=this.im;if(e===0)return new pt(Math.atan2(1,r),0);const t=r*r+e*e;return t!==0?new pt(r/t,-e/t).atan():new pt(r!==0?r/0:0,e!==0?-e/0:0).atan()},asec:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new pt(0,1/0);const t=r*r+e*e;return t!==0?new pt(r/t,-e/t).acos():new pt(r!==0?r/0:0,e!==0?-e/0:0).acos()},acsc:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new pt(Math.PI/2,1/0);const t=r*r+e*e;return t!==0?new pt(r/t,-e/t).asin():new pt(r!==0?r/0:0,e!==0?-e/0:0).asin()},sinh:function(){const r=this.re,e=this.im;return new pt(pl(r)*Math.cos(e),us(r)*Math.sin(e))},cosh:function(){const r=this.re,e=this.im;return new pt(us(r)*Math.cos(e),pl(r)*Math.sin(e))},tanh:function(){const r=2*this.re,e=2*this.im,t=us(r)+Math.cos(e);return new pt(pl(r)/t,Math.sin(e)/t)},coth:function(){const r=2*this.re,e=2*this.im,t=us(r)-Math.cos(e);return new pt(pl(r)/t,-Math.sin(e)/t)},csch:function(){const r=this.re,e=this.im,t=Math.cos(2*e)-us(2*r);return new pt(-2*pl(r)*Math.cos(e)/t,2*us(r)*Math.sin(e)/t)},sech:function(){const r=this.re,e=this.im,t=Math.cos(2*e)+us(2*r);return new pt(2*us(r)*Math.cos(e)/t,-2*pl(r)*Math.sin(e)/t)},asinh:function(){let r=this.im;this.im=-this.re,this.re=r;const e=this.asin();return this.re=-this.im,this.im=r,r=e.re,e.re=-e.im,e.im=r,e},acosh:function(){const r=this.acos();if(r.im<=0){const e=r.re;r.re=-r.im,r.im=e}else{const e=r.im;r.im=-r.re,r.re=e}return r},atanh:function(){const r=this.re,e=this.im,t=r>1&&e===0,n=1-r,i=1+r,a=n*n+e*e,s=a!==0?new pt((i*n-e*e)/a,(e*n+i*e)/a):new pt(r!==-1?r/0:0,e!==0?e/0:0),o=s.re;return s.re=hE(s.re,s.im)/2,s.im=Math.atan2(s.im,o)/2,t&&(s.im=-s.im),s},acoth:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new pt(0,Math.PI/2);const t=r*r+e*e;return t!==0?new pt(r/t,-e/t).atanh():new pt(r!==0?r/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const r=this.re,e=this.im;if(e===0)return new pt(r!==0?Math.log(r+Math.sqrt(r*r+1)):1/0,0);const t=r*r+e*e;return t!==0?new pt(r/t,-e/t).asinh():new pt(r!==0?r/0:0,e!==0?-e/0:0).asinh()},asech:function(){const r=this.re,e=this.im;if(this.isZero())return pt.INFINITY;const t=r*r+e*e;return t!==0?new pt(r/t,-e/t).acosh():new pt(r!==0?r/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return pt.INFINITY;if(this.isInfinite())return pt.ZERO;const r=this.re,e=this.im,t=r*r+e*e;return new pt(r/t,-e/t)},conjugate:function(){return new pt(this.re,-this.im)},neg:function(){return new pt(-this.re,-this.im)},ceil:function(r){return r=Math.pow(10,r||0),new pt(Math.ceil(this.re*r)/r,Math.ceil(this.im*r)/r)},floor:function(r){return r=Math.pow(10,r||0),new pt(Math.floor(this.re*r)/r,Math.floor(this.im*r)/r)},round:function(r){return r=Math.pow(10,r||0),new pt(Math.round(this.re*r)/r,Math.round(this.im*r)/r)},equals:function(r,e){const t=Id(r,e);return Math.abs(t.re-this.re)<=pt.EPSILON&&Math.abs(t.im-this.im)<=pt.EPSILON},clone:function(){return new pt(this.re,this.im)},toString:function(){let r=this.re,e=this.im,t="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(r)<pt.EPSILON&&(r=0),Math.abs(e)<pt.EPSILON&&(e=0),e===0?t+r:(r!==0?(t+=r,t+=" ",e<0?(e=-e,t+="-"):t+="+",t+=" "):e<0&&(e=-e,t+="-"),e!==1&&(t+=e),t+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};pt.ZERO=new pt(0,0);pt.ONE=new pt(1,0);pt.I=new pt(0,1);pt.PI=new pt(Math.PI,0);pt.E=new pt(Math.E,0);pt.INFINITY=new pt(1/0,1/0);pt.NAN=new pt(NaN,NaN);pt.EPSILON=1e-15;var t6="Complex",n6=[],r6=de(t6,n6,()=>(Object.defineProperty(pt,"name",{value:"Complex"}),pt.prototype.constructor=pt,pt.prototype.type="Complex",pt.prototype.isComplex=!0,pt.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},pt.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},pt.prototype.format=function(r){var e="",t=this.im,n=this.re,i=Zd(this.re,r),a=Zd(this.im,r),s=Qt(r)?r:r?r.precision:null;if(s!==null){var o=Math.pow(10,-s);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return t===0?e=i:n===0?t===1?e="i":t===-1?e="-i":e=a+"i":t<0?t===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+a+"i",e},pt.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return pt(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(Qt(t)){if(Lo(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Qt(n))return new pt({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},pt.prototype.valueOf=pt.prototype.toString,pt.fromJSON=function(r){return new pt(r)},pt.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},pt),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(r){if(isNaN(r))throw new Error("");return r});const $t=BigInt(0),Gn=BigInt(1),Ta=BigInt(2),X0=BigInt(3),tv=BigInt(5),fo=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const i6=2e3,Rt={s:Gn,n:$t,d:Gn};function Fc(r,e){try{r=BigInt(r)}catch{throw ih()}return r*e}function eu(r){return typeof r=="bigint"?r:Math.floor(r)}function hi(r,e){if(e===$t)throw F2();const t=Object.create(vl.prototype);t.s=r<$t?-Gn:Gn,r=r<$t?-r:r;const n=Gd(r,e);return t.n=r/n,t.d=e/n,t}const a6=[Ta*Ta,Ta,Ta*Ta,Ta,Ta*Ta,Ta*X0,Ta,Ta*X0];function wm(r){const e=Object.create(null);if(r<=Gn)return e[r]=Gn,e;const t=n=>{e[n]=(e[n]||$t)+Gn};for(;r%Ta===$t;)t(Ta),r/=Ta;for(;r%X0===$t;)t(X0),r/=X0;for(;r%tv===$t;)t(tv),r/=tv;for(let n=0,i=Ta+tv;i*i<=r;){for(;r%i===$t;)t(i),r/=i;i+=a6[n],n=n+1&7}return r>Gn&&t(r),e}const wa=function(r,e){let t=$t,n=Gn,i=Gn;if(r!=null)if(e!==void 0){if(typeof r=="bigint")t=r;else{if(isNaN(r))throw ih();if(r%1!==0)throw TN();t=BigInt(r)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw ih();if(e%1!==0)throw TN();n=BigInt(e)}i=t*n}else if(typeof r=="object"){if("d"in r&&"n"in r)t=BigInt(r.n),n=BigInt(r.d),"s"in r&&(t*=BigInt(r.s));else if(0 in r)t=BigInt(r[0]),1 in r&&(n=BigInt(r[1]));else if(typeof r=="bigint")t=r;else throw ih();i=t*n}else if(typeof r=="number"){if(isNaN(r))throw ih();if(r<0&&(i=-Gn,r=-r),r%1===0)t=BigInt(r);else{let a=1,s=0,o=1,c=1,u=1,h=1e7;for(r>=1&&(a=10**Math.floor(1+Math.log10(r)),r/=a);o<=h&&u<=h;){let d=(s+c)/(o+u);if(r===d){o+u<=h?(t=s+c,n=o+u):u>o?(t=c,n=u):(t=s,n=o);break}else r>d?(s+=c,o+=u):(c+=s,u+=o),o>h?(t=c,n=u):(t=s,n=o)}t=BigInt(t)*BigInt(a),n=BigInt(n)}}else if(typeof r=="string"){let a=0,s=$t,o=$t,c=$t,u=Gn,h=Gn,d=r.replace(/_/g,"").match(/\d+|./g);if(d===null)throw ih();if(d[a]==="-"?(i=-Gn,a++):d[a]==="+"&&a++,d.length===a+1?o=Fc(d[a++],i):d[a+1]==="."||d[a]==="."?(d[a]!=="."&&(s=Fc(d[a++],i)),a++,(a+1===d.length||d[a+1]==="("&&d[a+3]===")"||d[a+1]==="'"&&d[a+3]==="'")&&(o=Fc(d[a],i),u=fo**BigInt(d[a].length),a++),(d[a]==="("&&d[a+2]===")"||d[a]==="'"&&d[a+2]==="'")&&(c=Fc(d[a+1],i),h=fo**BigInt(d[a+1].length)-Gn,a+=3)):d[a+1]==="/"||d[a+1]===":"?(o=Fc(d[a],i),u=Fc(d[a+2],Gn),a+=3):d[a+3]==="/"&&d[a+1]===" "&&(s=Fc(d[a],i),o=Fc(d[a+2],i),u=Fc(d[a+4],Gn),a+=5),d.length<=a)n=u*h,i=t=c+n*s+h*o;else throw ih()}else if(typeof r=="bigint")t=r,i=r,n=Gn;else throw ih();if(n===$t)throw F2();Rt.s=i<$t?-Gn:Gn,Rt.n=t<$t?-t:t,Rt.d=n<$t?-n:n};function s6(r,e,t){let n=Gn;for(;e>$t;r=r*r%t,e>>=Gn)e&Gn&&(n=n*r%t);return n}function o6(r,e){for(;e%Ta===$t;e/=Ta);for(;e%tv===$t;e/=tv);if(e===Gn)return $t;let t=fo%e,n=1;for(;t!==Gn;n++)if(t=t*fo%e,n>i6)return $t;return BigInt(n)}function l6(r,e,t){let n=Gn,i=s6(fo,t,e);for(let a=0;a<300;a++){if(n===i)return BigInt(a);n=n*fo%e,i=i*fo%e}return 0}function Gd(r,e){if(!r)return e;if(!e)return r;for(;;){if(r%=e,!r)return e;if(e%=r,!e)return r}}function vl(r,e){if(wa(r,e),this instanceof vl)r=Gd(Rt.d,Rt.n),this.s=Rt.s,this.n=Rt.n/r,this.d=Rt.d/r;else return hi(Rt.s*Rt.n,Rt.d)}const F2=function(){return new Error("Division by Zero")},ih=function(){return new Error("Invalid argument")},TN=function(){return new Error("Parameters must be integer")};vl.prototype={s:Gn,n:$t,d:Gn,abs:function(){return hi(this.n,this.d)},neg:function(){return hi(-this.s*this.n,this.d)},add:function(r,e){return wa(r,e),hi(this.s*this.n*Rt.d+Rt.s*this.d*Rt.n,this.d*Rt.d)},sub:function(r,e){return wa(r,e),hi(this.s*this.n*Rt.d-Rt.s*this.d*Rt.n,this.d*Rt.d)},mul:function(r,e){return wa(r,e),hi(this.s*Rt.s*this.n*Rt.n,this.d*Rt.d)},div:function(r,e){return wa(r,e),hi(this.s*Rt.s*this.n*Rt.d,this.d*Rt.n)},clone:function(){return hi(this.s*this.n,this.d)},mod:function(r,e){if(r===void 0)return hi(this.s*this.n%this.d,Gn);if(wa(r,e),$t===Rt.n*this.d)throw F2();return hi(this.s*(Rt.d*this.n)%(Rt.n*this.d),Rt.d*this.d)},gcd:function(r,e){return wa(r,e),hi(Gd(Rt.n,this.n)*Gd(Rt.d,this.d),Rt.d*this.d)},lcm:function(r,e){return wa(r,e),Rt.n===$t&&this.n===$t?hi($t,Gn):hi(Rt.n*this.n,Gd(Rt.n,this.n)*Gd(Rt.d,this.d))},inverse:function(){return hi(this.s*this.d,this.n)},pow:function(r,e){if(wa(r,e),Rt.d===Gn)return Rt.s<$t?hi((this.s*this.d)**Rt.n,this.n**Rt.n):hi((this.s*this.n)**Rt.n,this.d**Rt.n);if(this.s<$t)return null;let t=wm(this.n),n=wm(this.d),i=Gn,a=Gn;for(let s in t)if(s!=="1"){if(s==="0"){i=$t;break}if(t[s]*=Rt.n,t[s]%Rt.d===$t)t[s]/=Rt.d;else return null;i*=BigInt(s)**t[s]}for(let s in n)if(s!=="1"){if(n[s]*=Rt.n,n[s]%Rt.d===$t)n[s]/=Rt.d;else return null;a*=BigInt(s)**n[s]}return Rt.s<$t?hi(a,i):hi(i,a)},log:function(r,e){if(wa(r,e),this.s<=$t||Rt.s<=$t)return null;const t=Object.create(null),n=wm(Rt.n),i=wm(Rt.d),a=wm(this.n),s=wm(this.d);for(const u in i)n[u]=(n[u]||$t)-i[u];for(const u in s)a[u]=(a[u]||$t)-s[u];for(const u in n)u!=="1"&&(t[u]=!0);for(const u in a)u!=="1"&&(t[u]=!0);let o=null,c=null;for(const u in t){const h=n[u]||$t,d=a[u]||$t;if(h===$t){if(d!==$t)return null;continue}let m=d,v=h;const x=Gd(m,v);if(m/=x,v/=x,o===null&&c===null)o=m,c=v;else if(m*c!==o*v)return null}return o!==null&&c!==null?hi(o,c):null},equals:function(r,e){return wa(r,e),this.s*this.n*Rt.d===Rt.s*Rt.n*this.d},lt:function(r,e){return wa(r,e),this.s*this.n*Rt.d<Rt.s*Rt.n*this.d},lte:function(r,e){return wa(r,e),this.s*this.n*Rt.d<=Rt.s*Rt.n*this.d},gt:function(r,e){return wa(r,e),this.s*this.n*Rt.d>Rt.s*Rt.n*this.d},gte:function(r,e){return wa(r,e),this.s*this.n*Rt.d>=Rt.s*Rt.n*this.d},compare:function(r,e){wa(r,e);let t=this.s*this.n*Rt.d-Rt.s*Rt.n*this.d;return($t<t)-(t<$t)},ceil:function(r){return r=fo**BigInt(r||0),hi(eu(this.s*r*this.n/this.d)+(r*this.n%this.d>$t&&this.s>=$t?Gn:$t),r)},floor:function(r){return r=fo**BigInt(r||0),hi(eu(this.s*r*this.n/this.d)-(r*this.n%this.d>$t&&this.s<$t?Gn:$t),r)},round:function(r){return r=fo**BigInt(r||0),hi(eu(this.s*r*this.n/this.d)+this.s*((this.s>=$t?Gn:$t)+Ta*(r*this.n%this.d)>this.d?Gn:$t),r)},roundTo:function(r,e){wa(r,e);const t=this.n*Rt.d,n=this.d*Rt.n,i=t%n;let a=eu(t/n);return i+i>=n&&a++,hi(this.s*a*Rt.n,Rt.d)},divisible:function(r,e){return wa(r,e),Rt.n===$t?!1:this.n*Rt.d%(Rt.n*this.d)===$t},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(r=15){let e=this.n,t=this.d,n=o6(e,t),i=l6(e,t,n),a=this.s<$t?"-":"";if(a+=eu(e/t),e%=t,e*=fo,e&&(a+="."),n){for(let s=i;s--;)a+=eu(e/t),e%=t,e*=fo;a+="(";for(let s=n;s--;)a+=eu(e/t),e%=t,e*=fo;a+=")"}else for(let s=r;e&&s--;)a+=eu(e/t),e%=t,e*=fo;return a},toFraction:function(r=!1){let e=this.n,t=this.d,n=this.s<$t?"-":"";if(t===Gn)n+=e;else{const i=eu(e/t);r&&i>$t&&(n+=i,n+=" ",e%=t),n+=e,n+="/",n+=t}return n},toLatex:function(r=!1){let e=this.n,t=this.d,n=this.s<$t?"-":"";if(t===Gn)n+=e;else{const i=eu(e/t);r&&i>$t&&(n+=i,e%=t),n+="\\frac{",n+=e,n+="}{",n+=t,n+="}"}return n},toContinued:function(){let r=this.n,e=this.d;const t=[];for(;e;){t.push(eu(r/e));const n=r%e;r=e,e=n}return t},simplify:function(r=.001){const e=BigInt(Math.ceil(1/r)),t=this.abs(),n=t.toContinued();for(let i=1;i<n.length;i++){let a=hi(n[i-1],Gn);for(let o=i-2;o>=0;o--)a=a.inverse().add(n[o]);let s=a.sub(t);if(s.n*e<s.d)return a.mul(this.s)}return this}};var u6="Fraction",c6=[],f6=de(u6,c6,()=>(Object.defineProperty(vl,"name",{value:"Fraction"}),vl.prototype.constructor=vl,vl.prototype.type="Fraction",vl.prototype.isFraction=!0,vl.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},vl.fromJSON=function(r){return new vl(r)},vl),{isClass:!0}),h6="Range",d6=[],p6=de(h6,d6,()=>{function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=t!=null,s=n!=null;if(i){if(wn(e))e=e.toNumber();else if(typeof e!="number"&&!k0(e))throw new TypeError("Parameter start must be a number or bigint")}if(a){if(wn(t))t=t.toNumber();else if(typeof t!="number"&&!k0(t))throw new TypeError("Parameter end must be a number or bigint")}if(s){if(wn(n))n=n.toNumber();else if(typeof n!="number"&&!k0(n))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=i?parseFloat(e):0,this.end=a?parseFloat(t):0,this.step=s?parseFloat(n):1,s&&Ca(this.step,0))throw new Error("Step must not be zero")}return r.prototype.type="Range",r.prototype.isRange=!0,r.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),n=t.map(function(a){return parseFloat(a)}),i=n.some(function(a){return isNaN(a)});if(i)return null;switch(n.length){case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[2],n[1]);default:return null}},r.prototype.clone=function(){return new r(this.start,this.end,this.step)},r.prototype.size=function(){var e=0,t=this.start,n=this.step,i=this.end,a=i-t;return uh(n)===uh(a)?e=Math.ceil(a/n):a===0&&(e=0),isNaN(e)&&(e=0),[e]},r.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},r.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},r.prototype.forEach=function(e){var t=this.start,n=this.step,i=this.end,a=0;if(n>0)for(;t<i;)e(t,[a],this),t+=n,a++;else if(n<0)for(;t>i;)e(t,[a],this),t+=n,a++},r.prototype.map=function(e){var t=[];return this.forEach(function(n,i,a){t[i[0]]=e(n,i,a)}),t},r.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},r.prototype.valueOf=function(){return this.toArray()},r.prototype.format=function(e){var t=Zd(this.start,e);return this.step!==1&&(t+=":"+Zd(this.step,e)),t+=":"+Zd(this.end,e),t},r.prototype.toString=function(){return this.format()},r.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r},{isClass:!0}),m6="Matrix",v6=[],g6=de(m6,v6,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function dE(r,e,t){var n=r.constructor,i=new n(2),a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Xt(t))throw new Error("size must be an integer");if(r.greaterThan(i.pow(t-1).sub(1))||r.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(t))),a="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(a);case 8:return"".concat(r.toOctal()).concat(a);case 16:return"".concat(r.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function y6(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:n,wordSize:i}=BB(e);switch(t){case"fixed":return b6(r,n);case"exponential":return NN(r,n);case"engineering":return x6(r,n);case"bin":return dE(r,2,i);case"oct":return dE(r,8,i);case"hex":return dE(r,16,i);case"auto":{var a=DN(e==null?void 0:e.lowerExp,-3),s=DN(e==null?void 0:e.upperExp,5);if(r.isZero())return"0";var o,c=r.toSignificantDigits(n),u=c.e;return u>=a&&u<s?o=c.toFixed():o=NN(r,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var h=arguments[2],d=arguments[4];return h!=="."?h+d:d})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function x6(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,i=r.mul(Math.pow(10,-n)),a=i.toPrecision(e);if(a.includes("e")){var s=r.constructor;a=new s(a).toFixed()}return a+"e"+(t>=0?"+":"")+n.toString()}function NN(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function b6(r,e){return r.toFixed(e)}function DN(r,e){return Qt(r)?r:wn(r)?r.toNumber():e}function _6(r,e){var t=r.length-e.length,n=r.length;return r.substring(t,n)===e}function Fn(r,e){var t=S6(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function S6(r,e){if(typeof r=="number")return Zd(r,e);if(wn(r))return y6(r,e);if(M6(r))return!e||e.fraction!=="decimal"?"".concat(r.s*r.n,"/").concat(r.d):r.toString();if(Array.isArray(r))return WB(r,e);if(Ti(r))return nv(r);if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>nv(n)+": "+Fn(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function nv(r){for(var e=String(r),t="",n=0;n<e.length;){var i=e.charAt(n);t+=i in CN?CN[i]:i,n++}return'"'+t+'"'}var CN={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function yl(r){var e=String(r);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function WB(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,i=0;i<n;i++)i!==0&&(t+=", "),t+=WB(r[i],e);return t+="]",t}else return Fn(r,e)}function M6(r){return r&&typeof r=="object"&&typeof r.s=="bigint"&&typeof r.n=="bigint"&&typeof r.d=="bigint"||!1}function GA(r,e){if(!Ti(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Hr(r)+", index: 0)");if(!Ti(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Hr(e)+", index: 1)");return r===e?0:r>e?1:-1}function Un(r,e,t){if(!(this instanceof Un))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Un.prototype=new RangeError;Un.prototype.constructor=RangeError;Un.prototype.name="DimensionError";Un.prototype.isDimensionError=!0;function uu(r,e,t){if(!(this instanceof uu))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}uu.prototype=new RangeError;uu.prototype.constructor=RangeError;uu.prototype.name="IndexError";uu.prototype.isIndexError=!0;function _n(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function $B(r,e,t){var n,i=r.length;if(i!==e[t])throw new Un(i,e[t]);if(t<e.length-1){var a=t+1;for(n=0;n<i;n++){var s=r[n];if(!Array.isArray(s))throw new Un(e.length-1,e.length,"<");$B(r[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(r[n]))throw new Un(e.length+1,e.length,">")}function RN(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new Un(r.length,0)}else $B(r,e,0)}function t_(r,e){var t=r.isMatrix?r._size:_n(r),n=e._sourceSize;n.forEach((i,a)=>{if(i!==null&&i!==t[a])throw new Un(i,t[a])})}function Yr(r,e){if(r!==void 0){if(!Qt(r)||!Xt(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new uu(r,e)}}function vv(r){for(var e=0;e<r._dimensions.length;++e){var t=r._dimensions[e];if(t._data&&Ir(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(Ti(t)&&t.length===0)return!0}return!1}function gv(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!Qt(i)||!Xt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Fn(e)+")")}),(Qt(r)||wn(r))&&(r=[r]);var n=t!==void 0?t:0;return kA(r,e,0,n),r}function kA(r,e,t,n){var i,a,s=r.length,o=e[t],c=Math.min(s,o);if(r.length=o,t<e.length-1){var u=t+1;for(i=0;i<c;i++)a=r[i],Array.isArray(a)||(a=[a],r[i]=a),kA(a,e,u,n);for(i=c;i<o;i++)a=[],r[i]=a,kA(a,e,u,n)}else{for(i=0;i<c;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=c;i<o;i++)r[i]=n}}function L2(r,e){var t=mr(r,!0),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Un(0,n,"!=");e=I2(e,n);var i=ZB(e);if(n!==i)throw new Un(i,n,"!=");try{return E6(t,e)}catch(a){throw a instanceof Un?new Un(i,n,"!="):a}}function I2(r,e){var t=ZB(r),n=r.slice(),i=-1,a=r.indexOf(i),s=r.indexOf(i,a+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var o=a>=0,c=e%t===0;if(o)if(c)n[a]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function ZB(r){return r.reduce((e,t)=>e*t,1)}function E6(r,e){for(var t=r,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var s=t.length/a,o=0;o<s;o++)n.push(t.slice(o*a,(o+1)*a));t=n}return t}function n_(r,e){for(var t=_n(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=KB(r,n,0),t.length=n),r}function KB(r,e,t){var n,i;if(t<e){var a=t+1;for(n=0,i=r.length;n<i;n++)r[n]=KB(r[n],e,a)}else for(;Array.isArray(r);)r=r[0];return r}function QB(r,e,t,n){var i=n||_n(r);if(t)for(var a=0;a<t;a++)r=[r],i.unshift(1);for(r=JB(r,e,0);i.length<e;)i.push(1);return r}function JB(r,e,t){var n,i;if(Array.isArray(r)){var a=t+1;for(n=0,i=r.length;n<i;n++)r[n]=JB(r[n],e,a)}else for(var s=t;s<e;s++)r=[r];return r}function mr(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(r))return r;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var t=[];return e?i(r):n(r),t;function n(a){for(var s=0;s<a.length;s++){var o=a[s];Array.isArray(o)?n(o):t.push(o)}}function i(a){if(Array.isArray(a[0]))for(var s=0;s<a.length;s++)i(a[s]);else for(var o=0;o<a.length;o++)t.push(a[o])}}function hh(r,e){return Array.prototype.map.call(r,e)}function eU(r,e){Array.prototype.forEach.call(r,e)}function ON(r,e){if(_n(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,e)}function BN(r,e){if(_n(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,t=>e.test(t))}function UN(r,e){return Array.prototype.join.call(r,e)}function yv(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;var e=[],t=0;e[0]={value:r[0],identifier:0};for(var n=1;n<r.length;n++)r[n]===r[n-1]?t++:t=0,e.push({value:r[n],identifier:t});return e}function r_(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;for(var e=[],t=0;t<r.length;t++)e.push(r[t].value);return e}function MS(r,e){for(var t,n=0,i=0;i<r.length;i++){var a=r[i],s=Array.isArray(a);if(i===0&&s&&(n=a.length),s&&a.length!==n)return;var o=s?MS(a,e):e(a);if(t===void 0)t=o;else if(t!==o)return"mixed"}return t}function tU(r,e,t,n){if(n<t){if(r.length!==e.length)throw new Un(r.length,e.length);for(var i=[],a=0;a<r.length;a++)i[a]=tU(r[a],e[a],t,n+1);return i}else return r.concat(e)}function nU(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,n){return tU(t,n,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function i_(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var n=e.map(m=>m.length),i=Math.max(...n),a=new Array(i).fill(null),s=0;s<e.length;s++)for(var o=e[s],c=n[s],u=0;u<c;u++){var h=i-c+u;o[u]>a[h]&&(a[h]=o[u])}for(var d=0;d<e.length;d++)rU(e[d],a);return a}function rU(r,e){for(var t=e.length,n=r.length,i=0;i<n;i++){var a=t-n+i;if(r[i]<e[a]&&r[i]>1||r[i]>e[a])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(n," with size ").concat(r[i]," to size ").concat(e[a]))}}function jd(r,e){var t=_n(r);if(af(t,e))return r;rU(t,e);var n=i_(t,e),i=n.length,a=[...Array(i-t.length).fill(1),...t],s=w6(r);t.length<i&&(s=L2(s,a),t=_n(s));for(var o=0;o<i;o++)t[o]<n[o]&&(s=A6(s,n[o],o),t=_n(s));return s}function A6(r,e,t){return nU(...Array(e).fill(r),t)}function a_(r,e){if(!Array.isArray(r))throw new Error("Array expected");var t=_n(r);if(e.length!==t.length)throw new Un(e.length,t.length);for(var n=0;n<e.length;n++)Yr(e[n],t[n]);return e.reduce((i,a)=>i[a],r)}function XA(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r.length===0)return[];if(t)return a(r);var n=[];return i(r,0);function i(s,o){if(Array.isArray(s)){for(var c=s.length,u=Array(c),h=0;h<c;h++)n[o]=h,u[h]=i(s[h],o+1);return u}else return e(s,n.slice(0,o),r)}function a(s){if(Array.isArray(s)){for(var o=s.length,c=Array(o),u=0;u<o;u++)c[u]=a(s[u]);return c}else return e(s)}}function iU(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r.length===0)return;if(t){a(r);return}var n=[];i(r,0);function i(s,o){if(Array.isArray(s))for(var c=s.length,u=0;u<c;u++)n[o]=u,i(s[u],o+1);else e(s,n.slice(0,o),r)}function a(s){if(Array.isArray(s))for(var o=s.length,c=0;c<o;c++)a(s[c]);else e(s)}}function w6(r){return Ar([],r)}function ip(r,e,t,n){if(Kb.isTypedFunction(r)){var i;if(n)i=1;else{var a=(e.isMatrix?e.size():_n(e)).map(()=>0),s=e.isMatrix?e.get(a):a_(e,a);i=D6(r,s,a,e)}var o;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var c=T6(r,i);o=c!==void 0?c:r}else o=r;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var h=arguments.length,d=new Array(h),m=0;m<h;m++)d[m]=arguments[m];return zN(o,d.slice(0,i),t,r.name)}}:{isUnary:!1,fn:function(){for(var h=arguments.length,d=new Array(h),m=0;m<h;m++)d[m]=arguments[m];return zN(o,d,t,r.name)}}}return n===void 0?{isUnary:N6(r),fn:r}:{isUnary:n,fn:r}}function T6(r,e){var t=[];if(Object.entries(r.signatures).forEach(n=>{var[i,a]=n;i.split(",").length===e&&t.push(a)}),t.length===1)return t[0]}function N6(r){if(r.length!==1)return!1;var e=r.toString();if(/arguments/.test(e))return!1;var t=e.match(/\(.*?\)/);return!/\.\.\./.test(t)}function D6(r,e,t,n){for(var i=[e,t,n],a=3;a>0;a--){var s=i.slice(0,a);if(Kb.resolve(r,s)!==null)return a}}function zN(r,e,t,n){try{return r(...e)}catch(i){C6(i,e,t,n)}}function C6(r,e,t,n){var i;if(r instanceof TypeError&&((i=r.data)===null||i===void 0?void 0:i.category)==="wrongType"){var a=[];throw a.push("value: ".concat(Hr(e[0]))),e.length>=2&&a.push("index: ".concat(Hr(e[1]))),e.length>=3&&a.push("array: ".concat(Hr(e[2]))),new TypeError("Function ".concat(t," cannot apply callback arguments ")+"".concat(n,"(").concat(a.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(t," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(r.message))}var R6="DenseMatrix",O6=["Matrix","config"],B6=de(R6,O6,r=>{var{Matrix:e,config:t}=r;function n(d,m){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Ti(m))throw new Error("Invalid datatype: "+m);if(rn(d))d.type==="DenseMatrix"?(this._data=bn(d._data),this._size=bn(d._size),this._datatype=m||d._datatype):(this._data=d.toArray(),this._size=d.size(),this._datatype=m||d._datatype);else if(d&&Ir(d.data)&&Ir(d.size))this._data=d.data,this._size=d.size,RN(this._data,this._size),this._datatype=m||d.datatype;else if(Ir(d))this._data=h(d),this._size=_n(this._data),RN(this._data,this._size),this._datatype=m;else{if(d)throw new TypeError("Unsupported type of data ("+Hr(d)+")");this._data=[],this._size=[0],this._datatype=m}}n.prototype=new e,n.prototype.createDenseMatrix=function(d,m){return new n(d,m)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return MS(this._data,Hr)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(d,m){return new n(d,m)},n.prototype.subset=function(d,m,v){switch(arguments.length){case 1:return i(this,d);case 2:case 3:return s(this,d,m,v);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(d){return a_(this._data,d)},n.prototype.set=function(d,m,v){if(!Ir(d))throw new TypeError("Array expected");if(d.length<this._size.length)throw new Un(d.length,this._size.length,"<");var x,b,M,_=d.map(function(E){return E+1});u(this,_,v);var T=this._data;for(x=0,b=d.length-1;x<b;x++)M=d[x],Yr(M,T.length),T=T[M];return M=d[d.length-1],Yr(M,T.length),T[M]=m,this};function i(d,m){if(!vS(m))throw new TypeError("Invalid index");var v=t.legacySubset?m.size().every(D=>D===1):m.isScalar();if(v)return d.get(m.min());var x=m.size();if(x.length!==d._size.length)throw new Un(x.length,d._size.length);for(var b=m.min(),M=m.max(),_=0,T=d._size.length;_<T;_++)Yr(b[_],d._size[_]),Yr(M[_],d._size[_]);var E=new n,A=a(d._data,m);return E._size=A.size,E._datatype=d._datatype,E._data=A.data,t.legacySubset?E.reshape(m.size()):E}function a(d,m){var v=m.size().length-1,x=Array(v);return{data:b(d),size:x.filter(M=>M!==null)};function b(M){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=m.dimension(_);function E(A,D){return Qt(A)?D(A):A.map(D).valueOf()}return Qt(T)?x[_]=null:x[_]=T.size()[0],_<v?E(T,A=>(Yr(A,M.length),b(M[A],_+1))):E(T,A=>(Yr(A,M.length),M[A]))}}function s(d,m,v,x){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var b=m.size(),M=m.isScalar(),_;if(rn(v)?(_=v.size(),v=v.valueOf()):_=_n(v),M){if(_.length!==0)throw new TypeError("Scalar expected");d.set(m.min(),v,x)}else{if(!af(_,b)){if(_.length===0)v=jd([v],b);else try{v=jd(v,b)}catch{}_=_n(v)}if(b.length<d._size.length)throw new Un(b.length,d._size.length,"<");if(_.length<b.length){for(var T=0,E=0;b[T]===1&&_[T]===1;)T++;for(;b[T]===1;)E++,T++;v=QB(v,b.length,E,_)}if(!af(b,_))throw new Un(b,_,">");var A=m.max().map(function(D){return D+1});u(d,A,x),o(d._data,m,v)}return d}function o(d,m,v){var x=m.size().length-1;b(d,v);function b(M,_){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=m.dimension(T),A=(N,O)=>{Yr(N,M.length),b(M[N],_[O[0]],T+1)},D=(N,O)=>{Yr(N,M.length),M[N]=_[O[0]]};T<x?Qt(E)?A(E,[0]):E.forEach(A):Qt(E)?D(E,[0]):E.forEach(D)}}n.prototype.resize=function(d,m,v){if(!qo(d))throw new TypeError("Array or Matrix expected");var x=d.valueOf().map(M=>Array.isArray(M)&&M.length===1?M[0]:M),b=v?this.clone():this;return c(b,x,m)};function c(d,m,v){if(m.length===0){for(var x=d._data;Ir(x);)x=x[0];return x}return d._size=m.slice(0),d._data=gv(d._data,d._size,v),d}n.prototype.reshape=function(d,m){var v=m?this.clone():this;v._data=L2(v._data,d);var x=v._size.reduce((b,M)=>b*M);return v._size=I2(d,x),v};function u(d,m,v){for(var x=d._size.slice(0),b=!1;x.length<m.length;)x.push(0),b=!0;for(var M=0,_=m.length;M<_;M++)m[M]>x[M]&&(x[M]=m[M],b=!0);b&&c(d,x,v)}n.prototype.clone=function(){var d=new n({data:bn(this._data),size:bn(this._size),datatype:this._datatype});return d},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=this,x=v._size.length-1;if(x<0)return v.clone();var b=ip(d,v,"map",m),M=b.fn,_=v.create(void 0,v._datatype);if(_._size=v._size,m||b.isUnary)return _._data=O(v._data),_;if(x===0){for(var T=v.valueOf(),E=Array(T.length),A=0;A<T.length;A++)E[A]=M(T[A],[A],v);return _._data=E,_}var D=[];return _._data=N(v._data),_;function N(z){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=Array(z.length);if(C<x)for(var F=0;F<z.length;F++)D[C]=F,R[F]=N(z[F],C+1);else for(var H=0;H<z.length;H++)D[C]=H,R[H]=M(z[H],D.slice(),v);return R}function O(z){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=Array(z.length);if(C<x)for(var F=0;F<z.length;F++)R[F]=O(z[F],C+1);else for(var H=0;H<z.length;H++)R[H]=M(z[H]);return R}},n.prototype.forEach=function(d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=this,x=v._size.length-1;if(x<0)return;var b=ip(d,v,"map",m),M=b.fn;if(m||b.isUnary){A(v._data);return}if(x===0){for(var _=0;_<v._data.length;_++)M(v._data[_],[_],v);return}var T=[];E(v._data);function E(D){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(N<x)for(var O=0;O<D.length;O++)T[N]=O,E(D[O],N+1);else for(var z=0;z<D.length;z++)T[N]=z,M(D[z],T.slice(),v)}function A(D){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(N<x)for(var O=0;O<D.length;O++)A(D[O],N+1);else for(var z=0;z<D.length;z++)M(D[z])}},n.prototype[Symbol.iterator]=function*(){var d=this._size.length-1;if(!(d<0)){if(d===0){for(var m=0;m<this._data.length;m++)yield{value:this._data[m],index:[m]};return}for(var v=Array(d+1).fill(0),x=this._size.reduce((E,A)=>E*A,1),b=0;b<x;b++){for(var M=this._data,_=0;_<d;_++)M=M[v[_]];yield{value:M[v[d]],index:v.slice()};for(var T=d;T>=0&&(v[T]++,!(v[T]<this._size[T]));T--)v[T]=0}}},n.prototype.rows=function(){var d=[],m=this.size();if(m.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var v=this._data;for(var x of v)d.push(new n([x],this._datatype));return d},n.prototype.columns=function(){var d=this,m=[],v=this.size();if(v.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var x=this._data,b=function(T){var E=x.map(A=>[A[T]]);m.push(new n(E,d._datatype))},M=0;M<v[1];M++)b(M);return m},n.prototype.toArray=function(){return bn(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(d){return Fn(this._data,d)},n.prototype.toString=function(){return Fn(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(d){if(d){if(wn(d)&&(d=d.toNumber()),!Qt(d)||!Xt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;for(var m=d>0?d:0,v=d<0?-d:0,x=this._size[0],b=this._size[1],M=Math.min(x-v,b-m),_=[],T=0;T<M;T++)_[T]=this._data[T+v][T+m];return new n({data:_,size:[M],datatype:this._datatype})},n.diagonal=function(d,m,v,x){if(!Ir(d))throw new TypeError("Array expected, size parameter");if(d.length!==2)throw new Error("Only two dimensions matrix are supported");if(d=d.map(function(z){if(wn(z)&&(z=z.toNumber()),!Qt(z)||!Xt(z)||z<1)throw new Error("Size values must be positive integers");return z}),v){if(wn(v)&&(v=v.toNumber()),!Qt(v)||!Xt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var b=v>0?v:0,M=v<0?-v:0,_=d[0],T=d[1],E=Math.min(_-M,T-b),A;if(Ir(m)){if(m.length!==E)throw new Error("Invalid value array length");A=function(C){return m[C]}}else if(rn(m)){var D=m.size();if(D.length!==1||D[0]!==E)throw new Error("Invalid matrix length");A=function(C){return m.get([C])}}else A=function(){return m};x||(x=wn(A(0))?A(0).mul(0):0);var N=[];if(d.length>0){N=gv(N,d,x);for(var O=0;O<E;O++)N[O+M][O+b]=A(O)}return new n({data:N,size:[_,T]})},n.fromJSON=function(d){return new n(d)},n.prototype.swapRows=function(d,m){if(!Qt(d)||!Xt(d)||!Qt(m)||!Xt(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Yr(d,this._size[0]),Yr(m,this._size[0]),n._swapRows(d,m,this._data),this},n._swapRows=function(d,m,v){var x=v[d];v[d]=v[m],v[m]=x};function h(d){return rn(d)?h(d.valueOf()):Ir(d)?d.map(h):d}return n},{isClass:!0}),FN="clone",U6=["typed"],z6=de(FN,U6,r=>{var{typed:e}=r;return e(FN,{any:bn})});function aU(r){var e=r.length,t=r[0].length,n,i,a=[];for(i=0;i<t;i++){var s=[];for(n=0;n<e;n++)s.push(r[n][i]);a.push(s)}return a}function Fv(r){for(var e=0;e<r.length;e++)if(qo(r[e]))return!0;return!1}function gh(r,e){rn(r)?r.forEach(t=>e(t),!1,!0):iU(r,e,!0)}function Tn(r,e,t){if(!t)return rn(r)?r.map(i=>e(i),!1,!0):XA(r,e,!0);var n=i=>i===0?i:e(i);return rn(r)?r.map(i=>n(i),!1,!0):XA(r,n,!0)}function ES(r,e,t){var n=Array.isArray(r)?_n(r):r.size();if(e<0||e>=n.length)throw new uu(e,n.length);return rn(r)?r.create(s_(r.valueOf(),e,t),r.datatype()):s_(r,e,t)}function s_(r,e,t){var n,i,a,s;if(e<=0)if(Array.isArray(r[0])){for(s=aU(r),i=[],n=0;n<s.length;n++)i[n]=s_(s[n],e-1,t);return i}else{for(a=r[0],n=1;n<r.length;n++)a=t(a,r[n]);return a}else{for(i=[],n=0;n<r.length;n++)i[n]=s_(r[n],e-1,t);return i}}function LN(r,e,t,n,i,a,s,o,c,u,h){var d=r._values,m=r._index,v=r._ptr,x,b,M,_;if(n)for(b=v[e],M=v[e+1],x=b;x<M;x++)_=m[x],t[_]!==a?(t[_]=a,s.push(_),n[_]=d[x]):(n[_]=o(n[_],d[x]),i[_]=a);else for(b=v[e],M=v[e+1],x=b;x<M;x++)_=m[x],t[_]!==a?(t[_]=a,s.push(_)):i[_]=a}var IN="isInteger",F6=["typed"],L6=de(IN,F6,r=>{var{typed:e}=r;return e(IN,{number:Xt,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1n},"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),cu="number",Lv="number, number";function sU(r){return Math.abs(r)}sU.signature=cu;function oU(r,e){return r+e}oU.signature=Lv;function lU(r,e){return r-e}lU.signature=Lv;function uU(r,e){return r*e}uU.signature=Lv;function cU(r){return-r}cU.signature=cu;function fU(r){return r}fU.signature=cu;function P0(r){return PP(r)}P0.signature=cu;function hU(r){return r*r*r}hU.signature=cu;function dU(r){return Math.exp(r)}dU.signature=cu;function pU(r){return HP(r)}pU.signature=cu;function mU(r,e){if(!Xt(r)||!Xt(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}mU.signature=Lv;function PN(r,e){return e?Math.log(r)/Math.log(e):Math.log(r)}function o_(r){return LP(r)}o_.signature=cu;function jA(r){return FP(r)}jA.signature=cu;function HN(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}function YA(r){return uh(r)}YA.signature=cu;function vU(r){return r*r}vU.signature=cu;function gU(r,e){var t,n,i,a=0,s=1,o=1,c=0;if(!Xt(r)||!Xt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),i=r-n*e,t=a,a=s-n*a,s=t,t=o,o=c-n*o,c=t,r=e,e=i;var u;return r<0?u=[-r,-s,-c]:u=[r,r?s:0,c],u}gU.signature=Lv;function yU(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}yU.signature=Lv;function M0(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!Xt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(UB(r,e))}var I6="number",Iv="number, number";function xU(r,e){if(!Xt(r)||!Xt(e))throw new Error("Integers expected in function bitAnd");return r&e}xU.signature=Iv;function bU(r){if(!Xt(r))throw new Error("Integer expected in function bitNot");return~r}bU.signature=I6;function _U(r,e){if(!Xt(r)||!Xt(e))throw new Error("Integers expected in function bitOr");return r|e}_U.signature=Iv;function SU(r,e){if(!Xt(r)||!Xt(e))throw new Error("Integers expected in function bitXor");return r^e}SU.signature=Iv;function MU(r,e){if(!Xt(r)||!Xt(e))throw new Error("Integers expected in function leftShift");return r<<e}MU.signature=Iv;function EU(r,e){if(!Xt(r)||!Xt(e))throw new Error("Integers expected in function rightArithShift");return r>>e}EU.signature=Iv;function AU(r,e){if(!Xt(r)||!Xt(e))throw new Error("Integers expected in function rightLogShift");return r>>>e}AU.signature=Iv;function Qc(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return Qc(r,t)*Qc(t+1,e)}function wU(r,e){if(!Xt(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!Xt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");for(var t=r-e,n=1,i=e<t?t+1:e+1,a=2,s=e<t?e:t,o=i;o<=r;++o)for(n*=o;a<=s&&n%a===0;)n/=a,++a;return a<=s&&(n/=Qc(a,s)),n}wU.signature="number, number";var P6=Math.PI,H6=2*Math.PI,V6=Math.E,q6=1.618033988749895,G6="number",P2="number, number";function TU(r){return!r}TU.signature=G6;function WA(r,e){return!!(r||e)}WA.signature=P2;function $A(r,e){return!!r!=!!e}$A.signature=P2;function ZA(r,e){return!!(r&&e)}ZA.signature=P2;function l_(r){var e;if(Xt(r))return r<=0?isFinite(r)?1/0:NaN:r>171?1/0:Qc(1,r-1);if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*l_(1-r));if(r>=171.35)return 1/0;if(r>85){var t=r*r,n=t*r,i=n*r,a=i*r;return Math.sqrt(2*Math.PI/r)*Math.pow(r/Math.E,r)*(1+1/(12*r)+1/(288*t)-139/(51840*n)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*r))}--r,e=uv[0];for(var s=1;s<uv.length;++s)e+=uv[s]/(r+s);var o=r+NU+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,r+.5)*Math.exp(-o)*e}l_.signature="number";var NU=4.7421875,uv=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],DU=.9189385332046728,k6=5,X6=7,VN=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function u_(r){if(r<0)return NaN;if(r===0)return 1/0;if(!isFinite(r))return r;if(r<.5)return Math.log(Math.PI/Math.sin(Math.PI*r))-u_(1-r);r=r-1;for(var e=r+k6+.5,t=VN[0],n=X6-1;n>=1;n--)t+=VN[n]/(r+n);return DU+(r+.5)*Math.log(e)-e+Math.log(t)}u_.signature="number";var bs="number";function CU(r){return kP(r)}CU.signature=bs;function RU(r){return Math.atan(1/r)}RU.signature=bs;function OU(r){return isFinite(r)?(Math.log((r+1)/r)+Math.log(r/(r-1)))/2:0}OU.signature=bs;function BU(r){return Math.asin(1/r)}BU.signature=bs;function UU(r){var e=1/r;return Math.log(e+Math.sqrt(e*e+1))}UU.signature=bs;function zU(r){return Math.acos(1/r)}zU.signature=bs;function FU(r){var e=1/r,t=Math.sqrt(e*e-1);return Math.log(t+e)}FU.signature=bs;function LU(r){return XP(r)}LU.signature=bs;function IU(r){return jP(r)}IU.signature=bs;function PU(r){return 1/Math.tan(r)}PU.signature=bs;function HU(r){var e=Math.exp(2*r);return(e+1)/(e-1)}HU.signature=bs;function VU(r){return 1/Math.sin(r)}VU.signature=bs;function qU(r){return r===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(r)-Math.exp(-r)))*uh(r)}qU.signature=bs;function GU(r){return 1/Math.cos(r)}GU.signature=bs;function kU(r){return 2/(Math.exp(r)+Math.exp(-r))}kU.signature=bs;function XU(r){return WP(r)}XU.signature=bs;var H2="number";function jU(r){return r<0}jU.signature=H2;function YU(r){return r>0}YU.signature=H2;function WU(r){return Number.isNaN(r)}WU.signature=H2;function _l(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return r.isNaN()||e.isNaN()?!1:!r.isFinite()||!e.isFinite()?r.eq(e):r.eq(e)?!0:r.minus(e).abs().lte(r.constructor.max(r.constructor.max(r.abs(),e.abs()).mul(t),n))}var qN="isNegative",j6=["typed","config"],Y6=de(qN,j6,r=>{var{typed:e,config:t}=r;return e(qN,{number:n=>Ca(n,0,t.relTol,t.absTol)?!1:jU(n),BigNumber:n=>_l(n,new n.constructor(0),t.relTol,t.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>Tn(i,n))})}),GN="isNumeric",W6=["typed"],$6=de(GN,W6,r=>{var{typed:e}=r;return e(GN,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),kN="hasNumericValue",Z6=["typed","isNumeric"],K6=de(kN,Z6,r=>{var{typed:e,isNumeric:t}=r;return e(kN,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})}),XN="isPositive",Q6=["typed","config"],J6=de(XN,Q6,r=>{var{typed:e,config:t}=r;return e(XN,{number:n=>Ca(n,0,t.relTol,t.absTol)?!1:YU(n),BigNumber:n=>_l(n,new n.constructor(0),t.relTol,t.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>Tn(i,n))})}),jN="isZero",e7=["typed","equalScalar"],t7=de(jN,e7,r=>{var{typed:e,equalScalar:t}=r;return e(jN,{"number | BigNumber | Complex | Fraction":n=>t(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>Tn(i,n))})}),YN="isNaN",n7=["typed"],r7=de(YN,n7,r=>{var{typed:e}=r;return e(YN,{number:WU,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),WN="typeOf",i7=["typed"],a7=de(WN,i7,r=>{var{typed:e}=r;return e(WN,{any:Hr})});function s7(r,e,t,n){return Ca(r.re,e.re,t,n)&&Ca(r.im,e.im,t,n)}var Pv=de("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),i.valueType()])(n.value,i.value)})}}),c_="equalScalar",o7=["typed","config"],l7=de(c_,o7,r=>{var{typed:e,config:t}=r,n=Pv({typed:e});return e(c_,{"boolean, boolean":function(a,s){return a===s},"number, number":function(a,s){return Ca(a,s,t.relTol,t.absTol)},"BigNumber, BigNumber":function(a,s){return a.eq(s)||_l(a,s,t.relTol,t.absTol)},"bigint, bigint":function(a,s){return a===s},"Fraction, Fraction":function(a,s){return a.equals(s)},"Complex, Complex":function(a,s){return s7(a,s,t.relTol,t.absTol)}},n)});de(c_,["typed","config"],r=>{var{typed:e,config:t}=r;return e(c_,{"number, number":function(i,a){return Ca(i,a,t.relTol,t.absTol)}})});var u7="SparseMatrix",c7=["typed","equalScalar","Matrix"],f7=de(u7,c7,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function i(b,M){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(M&&!Ti(M))throw new Error("Invalid datatype: "+M);if(rn(b))a(this,b,M);else if(b&&Ir(b.index)&&Ir(b.ptr)&&Ir(b.size))this._values=b.values,this._index=b.index,this._ptr=b.ptr,this._size=b.size,this._datatype=M||b.datatype;else if(Ir(b))s(this,b,M);else{if(b)throw new TypeError("Unsupported type of data ("+Hr(b)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=M}}function a(b,M,_){M.type==="SparseMatrix"?(b._values=M._values?bn(M._values):void 0,b._index=bn(M._index),b._ptr=bn(M._ptr),b._size=bn(M._size),b._datatype=_||M._datatype):s(b,M.valueOf(),_||M._datatype)}function s(b,M,_){b._values=[],b._index=[],b._ptr=[],b._datatype=_;var T=M.length,E=0,A=t,D=0;if(Ti(_)&&(A=e.find(t,[_,_])||t,D=e.convert(0,_)),T>0){var N=0;do{b._ptr.push(b._index.length);for(var O=0;O<T;O++){var z=M[O];if(Ir(z)){if(N===0&&E<z.length&&(E=z.length),N<z.length){var C=z[N];A(C,D)||(b._values.push(C),b._index.push(O))}}else N===0&&E<1&&(E=1),A(z,D)||(b._values.push(z),b._index.push(O))}N++}while(N<E)}b._ptr.push(b._index.length),b._size=[T,E]}i.prototype=new n,i.prototype.createSparseMatrix=function(b,M){return new i(b,M)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return MS(this._values,Hr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(b,M){return new i(b,M)},i.prototype.density=function(){var b=this._size[0],M=this._size[1];return b!==0&&M!==0?this._index.length/(b*M):0},i.prototype.subset=function(b,M,_){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,b);case 2:case 3:return c(this,b,M,_);default:throw new SyntaxError("Wrong number of arguments")}};function o(b,M){if(!vS(M))throw new TypeError("Invalid index");var _=M.isScalar();if(_)return b.get(M.min());var T=M.size();if(T.length!==b._size.length)throw new Un(T.length,b._size.length);var E,A,D,N,O=M.min(),z=M.max();for(E=0,A=b._size.length;E<A;E++)Yr(O[E],b._size[E]),Yr(z[E],b._size[E]);var C=b._values,R=b._index,F=b._ptr,H=M.dimension(0),X=M.dimension(1),$=[],Y=[];function I(Q,k){Y[Q]=k[0],$[Q]=!0}Number.isInteger(H)?I(H,[0]):H.forEach(I);var Z=C?[]:void 0,W=[],te=[];function le(Q){for(te.push(W.length),D=F[Q],N=F[Q+1];D<N;D++)E=R[D],$[E]===!0&&(W.push(Y[E]),Z&&Z.push(C[D]))}return Number.isInteger(X)?le(X):X.forEach(le),te.push(W.length),new i({values:Z,index:W,ptr:te,size:T,datatype:b._datatype})}function c(b,M,_,T){if(!M||M.isIndex!==!0)throw new TypeError("Invalid index");var E=M.size(),A=M.isScalar(),D;if(rn(_)?(D=_.size(),_=_.toArray()):D=_n(_),A){if(D.length!==0)throw new TypeError("Scalar expected");b.set(M.min(),_,T)}else{if(E.length!==1&&E.length!==2)throw new Un(E.length,b._size.length,"<");if(D.length<E.length){for(var N=0,O=0;E[N]===1&&D[N]===1;)N++;for(;E[N]===1;)O++,N++;_=QB(_,E.length,O,D)}if(!af(E,D))throw new Un(E,D,">");if(E.length===1){var z=M.dimension(0);F(z,(H,X)=>{Yr(H),b.set([H,0],_[X[0]],T)})}else{var C=M.dimension(0),R=M.dimension(1);F(C,(H,X)=>{Yr(H),F(R,($,Y)=>{Yr($),b.set([H,$],_[X[0]][Y[0]],T)})})}}return b;function F(H,X){Qt(H)?X(H,[0]):H.forEach(X)}}i.prototype.get=function(b){if(!Ir(b))throw new TypeError("Array expected");if(b.length!==this._size.length)throw new Un(b.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var M=b[0],_=b[1];Yr(M,this._size[0]),Yr(_,this._size[1]);var T=u(M,this._ptr[_],this._ptr[_+1],this._index);return T<this._ptr[_+1]&&this._index[T]===M?this._values[T]:0},i.prototype.set=function(b,M,_){if(!Ir(b))throw new TypeError("Array expected");if(b.length!==this._size.length)throw new Un(b.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var T=b[0],E=b[1],A=this._size[0],D=this._size[1],N=t,O=0;Ti(this._datatype)&&(N=e.find(t,[this._datatype,this._datatype])||t,O=e.convert(0,this._datatype)),(T>A-1||E>D-1)&&(m(this,Math.max(T+1,A),Math.max(E+1,D),_),A=this._size[0],D=this._size[1]),Yr(T,A),Yr(E,D);var z=u(T,this._ptr[E],this._ptr[E+1],this._index);return z<this._ptr[E+1]&&this._index[z]===T?N(M,O)?h(z,E,this._values,this._index,this._ptr):this._values[z]=M:N(M,O)||d(z,T,E,M,this._values,this._index,this._ptr),this};function u(b,M,_,T){if(_-M===0)return _;for(var E=M;E<_;E++)if(T[E]===b)return E;return M}function h(b,M,_,T,E){_.splice(b,1),T.splice(b,1);for(var A=M+1;A<E.length;A++)E[A]--}function d(b,M,_,T,E,A,D){E.splice(b,0,T),A.splice(b,0,M);for(var N=_+1;N<D.length;N++)D[N]++}i.prototype.resize=function(b,M,_){if(!qo(b))throw new TypeError("Array or Matrix expected");var T=b.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(T.length!==2)throw new Error("Only two dimensions matrix are supported");T.forEach(function(A){if(!Qt(A)||!Xt(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Fn(T)+")")});var E=_?this.clone():this;return m(E,T[0],T[1],M)};function m(b,M,_,T){var E=T||0,A=t,D=0;Ti(b._datatype)&&(A=e.find(t,[b._datatype,b._datatype])||t,D=e.convert(0,b._datatype),E=e.convert(E,b._datatype));var N=!A(E,D),O=b._size[0],z=b._size[1],C,R,F;if(_>z){for(R=z;R<_;R++)if(b._ptr[R]=b._values.length,N)for(C=0;C<O;C++)b._values.push(E),b._index.push(C);b._ptr[_]=b._values.length}else _<z&&(b._ptr.splice(_+1,z-_),b._values.splice(b._ptr[_],b._values.length),b._index.splice(b._ptr[_],b._index.length));if(z=_,M>O){if(N){var H=0;for(R=0;R<z;R++){b._ptr[R]=b._ptr[R]+H,F=b._ptr[R+1]+H;var X=0;for(C=O;C<M;C++,X++)b._values.splice(F+X,0,E),b._index.splice(F+X,0,C),H++}b._ptr[z]=b._values.length}}else if(M<O){var $=0;for(R=0;R<z;R++){b._ptr[R]=b._ptr[R]-$;var Y=b._ptr[R],I=b._ptr[R+1]-$;for(F=Y;F<I;F++)C=b._index[F],C>M-1&&(b._values.splice(F,1),b._index.splice(F,1),$++)}b._ptr[R]=b._values.length}return b._size[0]=M,b._size[1]=_,b}i.prototype.reshape=function(b,M){if(!Ir(b))throw new TypeError("Array expected");if(b.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");b.forEach(function(te){if(!Qt(te)||!Xt(te)||te<=-2||te===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Fn(b)+")")});var _=this._size[0]*this._size[1];b=I2(b,_);var T=b[0]*b[1];if(_!==T)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var E=M?this.clone():this;if(this._size[0]===b[0]&&this._size[1]===b[1])return E;for(var A=[],D=0;D<E._ptr.length;D++)for(var N=0;N<E._ptr[D+1]-E._ptr[D];N++)A.push(D);for(var O=E._values.slice(),z=E._index.slice(),C=0;C<E._index.length;C++){var R=z[C],F=A[C],H=R*E._size[1]+F;A[C]=H%b[1],z[C]=Math.floor(H/b[1])}E._values.length=0,E._index.length=0,E._ptr.length=b[1]+1,E._size=b.slice();for(var X=0;X<E._ptr.length;X++)E._ptr[X]=0;for(var $=0;$<O.length;$++){var Y=z[$],I=A[$],Z=O[$],W=u(Y,E._ptr[I],E._ptr[I+1],E._index);d(W,Y,I,Z,E._values,E._index,E._ptr)}return E},i.prototype.clone=function(){var b=new i({values:this._values?bn(this._values):void 0,index:bn(this._index),ptr:bn(this._ptr),size:bn(this._size),datatype:this._datatype});return b},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(b,M){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var _=this,T=this._size[0],E=this._size[1],A=ip(b,_,"map"),D=function(O,z,C){return A.fn(O,[z,C],_)};return v(this,0,T-1,0,E-1,D,M)};function v(b,M,_,T,E,A,D){var N=[],O=[],z=[],C=t,R=0;Ti(b._datatype)&&(C=e.find(t,[b._datatype,b._datatype])||t,R=e.convert(0,b._datatype));for(var F=function(ae,J,De){var pe=A(ae,J,De);C(pe,R)||(N.push(pe),O.push(J))},H=T;H<=E;H++){z.push(N.length);var X=b._ptr[H],$=b._ptr[H+1];if(D)for(var Y=X;Y<$;Y++){var I=b._index[Y];I>=M&&I<=_&&F(b._values[Y],I-M,H-T)}else{for(var Z={},W=X;W<$;W++){var te=b._index[W];Z[te]=b._values[W]}for(var le=M;le<=_;le++){var Q=le in Z?Z[le]:0;F(Q,le-M,H-T)}}}return z.push(N.length),new i({values:N,index:O,ptr:z,size:[_-M+1,E-T+1]})}i.prototype.forEach=function(b,M){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var _=this,T=this._size[0],E=this._size[1],A=ip(b,_,"forEach"),D=0;D<E;D++){var N=this._ptr[D],O=this._ptr[D+1];if(M)for(var z=N;z<O;z++){var C=this._index[z];A.fn(this._values[z],[C,D],_)}else{for(var R={},F=N;F<O;F++){var H=this._index[F];R[H]=this._values[F]}for(var X=0;X<T;X++){var $=X in R?R[X]:0;A.fn($,[X,D],_)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var b=this._size[1],M=0;M<b;M++)for(var _=this._ptr[M],T=this._ptr[M+1],E=_;E<T;E++){var A=this._index[E];yield{value:this._values[E],index:[A,M]}}},i.prototype.toArray=function(){return x(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return x(this._values,this._index,this._ptr,this._size,!1)};function x(b,M,_,T,E){var A=T[0],D=T[1],N=[],O,z;for(O=0;O<A;O++)for(N[O]=[],z=0;z<D;z++)N[O][z]=0;for(z=0;z<D;z++)for(var C=_[z],R=_[z+1],F=C;F<R;F++)O=M[F],N[O][z]=b?E?bn(b[F]):b[F]:1;return N}return i.prototype.format=function(b){for(var M=this._size[0],_=this._size[1],T=this.density(),E="Sparse Matrix ["+Fn(M,b)+" x "+Fn(_,b)+"] density: "+Fn(T,b)+`
`,A=0;A<_;A++)for(var D=this._ptr[A],N=this._ptr[A+1],O=D;O<N;O++){var z=this._index[O];E+=`
    (`+Fn(z,b)+", "+Fn(A,b)+") ==> "+(this._values?Fn(this._values[O],b):"X")}return E},i.prototype.toString=function(){return Fn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(b){if(b){if(wn(b)&&(b=b.toNumber()),!Qt(b)||!Xt(b))throw new TypeError("The parameter k must be an integer number")}else b=0;var M=b>0?b:0,_=b<0?-b:0,T=this._size[0],E=this._size[1],A=Math.min(T-_,E-M),D=[],N=[],O=[];O[0]=0;for(var z=M;z<E&&D.length<A;z++)for(var C=this._ptr[z],R=this._ptr[z+1],F=C;F<R;F++){var H=this._index[F];if(H===z-M+_){D.push(this._values[F]),N[D.length-1]=H-_;break}}return O.push(D.length),new i({values:D,index:N,ptr:O,size:[A,1]})},i.fromJSON=function(b){return new i(b)},i.diagonal=function(b,M,_,T,E){if(!Ir(b))throw new TypeError("Array expected, size parameter");if(b.length!==2)throw new Error("Only two dimensions matrix are supported");if(b=b.map(function(te){if(wn(te)&&(te=te.toNumber()),!Qt(te)||!Xt(te)||te<1)throw new Error("Size values must be positive integers");return te}),_){if(wn(_)&&(_=_.toNumber()),!Qt(_)||!Xt(_))throw new TypeError("The parameter k must be an integer number")}else _=0;var A=t,D=0;Ti(E)&&(A=e.find(t,[E,E])||t,D=e.convert(0,E));var N=_>0?_:0,O=_<0?-_:0,z=b[0],C=b[1],R=Math.min(z-O,C-N),F;if(Ir(M)){if(M.length!==R)throw new Error("Invalid value array length");F=function(le){return M[le]}}else if(rn(M)){var H=M.size();if(H.length!==1||H[0]!==R)throw new Error("Invalid matrix length");F=function(le){return M.get([le])}}else F=function(){return M};for(var X=[],$=[],Y=[],I=0;I<C;I++){Y.push(X.length);var Z=I-N;if(Z>=0&&Z<R){var W=F(Z);A(W,D)||($.push(Z+O),X.push(W))}}return Y.push(X.length),new i({values:X,index:$,ptr:Y,size:[z,C]})},i.prototype.swapRows=function(b,M){if(!Qt(b)||!Xt(b)||!Qt(M)||!Xt(M))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Yr(b,this._size[0]),Yr(M,this._size[0]),i._swapRows(b,M,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(b,M,_,T,E){for(var A=T[b],D=T[b+1],N=A;N<D;N++)E(_[N],M[N])},i._swapRows=function(b,M,_,T,E,A){for(var D=0;D<_;D++){var N=A[D],O=A[D+1],z=u(b,N,O,E),C=u(M,N,O,E);if(z<O&&C<O&&E[z]===b&&E[C]===M){if(T){var R=T[z];T[z]=T[C],T[C]=R}continue}if(z<O&&E[z]===b&&(C>=O||E[C]!==M)){var F=T?T[z]:void 0;E.splice(C,0,M),T&&T.splice(C,0,F),E.splice(C<=z?z+1:z,1),T&&T.splice(C<=z?z+1:z,1);continue}if(C<O&&E[C]===M&&(z>=O||E[z]!==b)){var H=T?T[C]:void 0;E.splice(z,0,b),T&&T.splice(z,0,H),E.splice(z<=C?C+1:C,1),T&&T.splice(z<=C?C+1:C,1)}}},i},{isClass:!0}),h7="number",d7=["typed"];function p7(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:i}}else return null}function m7(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var i=parseInt(r.fractionalPart[n],r.radix);t+=i/Math.pow(r.radix,n+1)}var a=e+t;if(isNaN(a))throw new SyntaxError('String "'+r.input+'" is not a valid number');return a}var v7=de(h7,d7,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=p7(i);if(a)return m7(a);var s=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(s=Number(o[2]),i=o[1]);var c=Number(i);if(isNaN(c))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(c>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));c>=2**(s-1)&&(c=c-2**s)}return c},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(n=>i=>Tn(i,n))});return t.fromJSON=function(n){return parseFloat(n.value)},t}),g7="bigint",y7=["typed"],x7=de(g7,y7,r=>{var{typed:e}=r,t=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(n=>i=>Tn(i,n))});return t.fromJSON=function(n){return BigInt(n.value)},t}),$N="string",b7=["typed"],_7=de($N,b7,r=>{var{typed:e}=r;return e($N,{"":function(){return""},number:Zd,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t)),any:function(n){return String(n)}})}),ZN="boolean",S7=["typed"],M7=de(ZN,S7,r=>{var{typed:e}=r;return e(ZN,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var a=Number(n);if(n!==""&&!isNaN(a))return!!a;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),E7="bignumber",A7=["typed","BigNumber"],w7=de(E7,A7,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var s=a[2],o=t(a[1]),c=new t(2).pow(Number(s));if(o.gt(c.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new t(2).pow(Number(s)-1);return o.gte(u)?o.sub(c):o}return new t(i)},BigNumber:function(i){return i},bigint:function(i){return new t(i.toString())},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Fraction:function(i){return new t(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(n=>i=>Tn(i,n))})}),T7="complex",N7=["typed","Complex"],D7=de(T7,N7,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,a){return new t(i,a)},"BigNumber, BigNumber":function(i,a){return new t(i.toNumber(),a.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>Tn(i,n))})}),C7="fraction",R7=["typed","Fraction"],O7=de(C7,R7,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,a){return new t(i,a)},"bigint, bigint":function(i,a){return new t(i,a)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},bigint:function(i){return new t(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var a=i.clone();return a.value=n(i.value),a}),Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>Tn(i,n))})}),KN="matrix",B7=["typed","Matrix","DenseMatrix","SparseMatrix"],U7=de(KN,B7,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(KN,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,c){return a([],o,c)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,o,c){if(o==="dense"||o==="default"||o===void 0)return new n(s,c);if(o==="sparse")return new i(s,c);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),QN="matrixFromFunction",z7=["typed","matrix","isZero"],F7=de(QN,z7,r=>{var{typed:e,matrix:t,isZero:n}=r;return e(QN,{"Array | Matrix, function, string, string":function(s,o,c,u){return i(s,o,c,u)},"Array | Matrix, function, string":function(s,o,c){return i(s,o,c)},"Matrix, function":function(s,o){return i(s,o,"dense")},"Array, function":function(s,o){return i(s,o,"dense").toArray()},"Array | Matrix, string, function":function(s,o,c){return i(s,c,o)},"Array | Matrix, string, string, function":function(s,o,c,u){return i(s,u,o,c)}});function i(a,s,o,c){var u;return c!==void 0?u=t(o,c):u=t(o),u.resize(a),u.forEach(function(h,d){var m=s(d);n(m)||u.set(d,m)}),u}}),JN="matrixFromRows",L7=["typed","matrix","flatten","size"],I7=de(JN,L7,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(JN,{"...Array":function(c){return a(c)},"...Matrix":function(c){return t(a(c.map(u=>u.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var c=s(o[0]),u=[];for(var h of o){var d=s(h);if(d!==c)throw new TypeError("The vectors had different length: "+(c|0)+"  "+(d|0));u.push(n(h))}return u}function s(o){var c=i(o);if(c.length===1)return c[0];if(c.length===2){if(c[0]===1)return c[1];if(c[1]===1)return c[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),eD="matrixFromColumns",P7=["typed","matrix","flatten","size"],H7=de(eD,P7,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(eD,{"...Array":function(c){return a(c)},"...Matrix":function(c){return t(a(c.map(u=>u.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var c=s(o[0]),u=[],h=0;h<c;h++)u[h]=[];for(var d of o){var m=s(d);if(m!==c)throw new TypeError("The vectors had different length: "+(c|0)+"  "+(m|0));for(var v=n(d),x=0;x<c;x++)u[x].push(v[x])}return u}function s(o){var c=i(o);if(c.length===1)return c[0];if(c.length===2){if(c[0]===1)return c[1];if(c[1]===1)return c[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),tD="splitUnit",V7=["typed"],q7=de(tD,V7,r=>{var{typed:e}=r;return e(tD,{"Unit, Array":function(n,i){return n.splitUnit(i)}})}),nD="unaryMinus",G7=["typed"],k7=de(nD,G7,r=>{var{typed:e}=r;return e(nD,{number:cU,"Complex | BigNumber | Fraction":t=>t.neg(),bigint:t=>-t,Unit:e.referToSelf(t=>n=>{var i=n.clone();return i.value=e.find(t,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t,!0))})}),rD="unaryPlus",X7=["typed","config","numeric"],j7=de(rD,X7,r=>{var{typed:e,config:t,numeric:n}=r;return e(rD,{number:fU,Complex:function(a){return a},BigNumber:function(a){return a},bigint:function(a){return a},Fraction:function(a){return a},Unit:function(a){return a.clone()},"Array | Matrix":e.referToSelf(i=>a=>Tn(a,i,!0)),boolean:function(a){return n(a?1:0,t.number)},string:function(a){return n(a,_h(a,t))}})}),iD="abs",Y7=["typed"],W7=de(iD,Y7,r=>{var{typed:e}=r;return e(iD,{number:sU,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),bigint:t=>t<0n?-t:t,"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t,!0))})}),aD="mapSlices",$7=["typed","isInteger"],KA=de(aD,$7,r=>{var{typed:e,isInteger:t}=r;return e(aD,{"Array | Matrix, number | BigNumber, function":function(i,a,s){if(!t(a))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(i)?_n(i):i.size();if(a<0||a>=o.length)throw new uu(a,o.length);return rn(i)?i.create(f_(i.valueOf(),a,s),i.datatype()):f_(i,a,s)}})},{formerly:"apply"});function f_(r,e,t){var n,i,a;if(e<=0)if(Array.isArray(r[0])){for(a=Z7(r),i=[],n=0;n<a.length;n++)i[n]=f_(a[n],e-1,t);return i}else return t(r);else{for(i=[],n=0;n<r.length;n++)i[n]=f_(r[n],e-1,t);return i}}function Z7(r){var e=r.length,t=r[0].length,n,i,a=[];for(i=0;i<t;i++){var s=[];for(n=0;n<e;n++)s.push(r[n][i]);a.push(s)}return a}var sD="addScalar",K7=["typed"],Q7=de(sD,K7,r=>{var{typed:e}=r;return e(sD,{"number, number":oU,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(t,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),oD="subtractScalar",J7=["typed"],e9=de(oD,J7,r=>{var{typed:e}=r;return e(oD,{"number, number":lU,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(t,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),lD="cbrt",t9=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],n9=de(lD,t9,r=>{var{config:e,typed:t,isNegative:n,unaryMinus:i,matrix:a,Complex:s,BigNumber:o,Fraction:c}=r;return t(lD,{number:P0,Complex:u,"Complex, boolean":u,BigNumber:function(m){return m.cbrt()},Unit:h});function u(d,m){var v=d.arg()/3,x=d.abs(),b=new s(P0(x),0).mul(new s(0,v).exp());if(m){var M=[b,new s(P0(x),0).mul(new s(0,v+Math.PI*2/3).exp()),new s(P0(x),0).mul(new s(0,v-Math.PI*2/3).exp())];return e.matrix==="Array"?M:a(M)}else return b}function h(d){if(d.value&&Jc(d.value)){var m=d.clone();return m.value=1,m=m.pow(1/3),m.value=u(d.value),m}else{var v=n(d.value);v&&(d.value=i(d.value));var x;wn(d.value)?x=new o(1).div(3):Ny(d.value)?x=new c(1,3):x=1/3;var b=d.pow(x);return v&&(b.value=i(b.value)),b}}}),r9="matAlgo11xS0s",i9=["typed","equalScalar"],Ya=de(r9,i9,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s,o){var c=i._values,u=i._index,h=i._ptr,d=i._size,m=i._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=d[0],x=d[1],b,M=t,_=0,T=s;typeof m=="string"&&(b=m,M=e.find(t,[b,b]),_=e.convert(0,b),a=e.convert(a,b),T=e.find(s,[b,b]));for(var E=[],A=[],D=[],N=0;N<x;N++){D[N]=A.length;for(var O=h[N],z=h[N+1],C=O;C<z;C++){var R=u[C],F=o?T(a,c[C]):T(c[C],a);M(F,_)||(A.push(R),E.push(F))}}return D[x]=A.length,i.createSparseMatrix({values:E,index:A,ptr:D,size:[v,x],datatype:b})}}),a9="matAlgo12xSfs",s9=["typed","DenseMatrix"],fa=de(a9,s9,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,a,s,o){var c=i._values,u=i._index,h=i._ptr,d=i._size,m=i._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=d[0],x=d[1],b,M=s;typeof m=="string"&&(b=m,a=e.convert(a,b),M=e.find(s,[b,b]));for(var _=[],T=[],E=[],A=0;A<x;A++){for(var D=A+1,N=h[A],O=h[A+1],z=N;z<O;z++){var C=u[z];T[C]=c[z],E[C]=D}for(var R=0;R<v;R++)A===0&&(_[R]=[]),E[R]===D?_[R][A]=o?M(a,T[R]):M(T[R],a):_[R][A]=o?M(a,0):M(0,a)}return new t({data:_,size:[v,x],datatype:b})}}),o9="matAlgo14xDs",l9=["typed"],Ml=de(o9,l9,r=>{var{typed:e}=r;return function(i,a,s,o){var c=i._data,u=i._size,h=i._datatype,d,m=s;typeof h=="string"&&(d=h,a=e.convert(a,d),m=e.find(s,[d,d]));var v=u.length>0?t(m,0,u,u[0],c,a,o):[];return i.createDenseMatrix({data:v,size:bn(u),datatype:d})};function t(n,i,a,s,o,c,u){var h=[];if(i===a.length-1)for(var d=0;d<s;d++)h[d]=u?n(c,o[d]):n(o[d],c);else for(var m=0;m<s;m++)h[m]=t(n,i+1,a,a[i+1],o[m],c,u);return h}}),QA="ceil",u9=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],c9=new vh(10),f9=de(QA,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;function i(a){var s=Math.ceil(a),o=n(a);return s===o?s:Ca(a,o,t.relTol,t.absTol)&&!Ca(a,s,t.relTol,t.absTol)?o:s}return e(QA,{number:i,"number, number":function(s,o){if(!Xt(o))throw new RangeError("number of decimals in function ceil must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var c=10**o;return i(s*c)/c}})}),h9=de(QA,u9,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=r,c=Ya({typed:e,equalScalar:a}),u=fa({typed:e,DenseMatrix:o}),h=Ml({typed:e}),d=f9({typed:e,config:t,round:n});function m(v){var x=(_,T)=>_l(_,T,t.relTol,t.absTol),b=v.ceil(),M=n(v);return b.eq(M)?b:x(v,M)&&!x(v,b)?M:b}return e("ceil",{number:d.signatures.number,"number,number":d.signatures["number,number"],Complex:function(x){return x.ceil()},"Complex, number":function(x,b){return x.ceil(b)},"Complex, BigNumber":function(x,b){return x.ceil(b.toNumber())},BigNumber:m,"BigNumber, BigNumber":function(x,b){var M=c9.pow(b);return m(x.mul(M)).div(M)},bigint:v=>v,"bigint, number":(v,x)=>v,"bigint, BigNumber":(v,x)=>v,Fraction:function(x){return x.ceil()},"Fraction, number":function(x,b){return x.ceil(b)},"Fraction, BigNumber":function(x,b){return x.ceil(b.toNumber())},"Unit, number, Unit":e.referToSelf(v=>function(x,b,M){var _=x.toNumeric(M);return M.multiply(v(_,b))}),"Unit, BigNumber, Unit":e.referToSelf(v=>(x,b,M)=>v(x,b.toNumber(),M)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(v=>(x,b,M)=>Tn(x,_=>v(_,b,M),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(v=>(x,b)=>v(x,0,b)),"Array | Matrix":e.referToSelf(v=>x=>Tn(x,v,!0)),"Array, number | BigNumber":e.referToSelf(v=>(x,b)=>Tn(x,M=>v(M,b),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(v=>(x,b)=>c(x,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(x,b)=>h(x,b,v,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(v=>(x,b)=>h(i(b),x,v,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(v=>(x,b)=>a(x,0)?s(b.size(),b.storage()):b.storage()==="dense"?h(b,x,v,!0):u(b,x,v,!0))})}),uD="cube",d9=["typed"],p9=de(uD,d9,r=>{var{typed:e}=r;return e(uD,{number:hU,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),cD="exp",m9=["typed"],v9=de(cD,m9,r=>{var{typed:e}=r;return e(cD,{number:dU,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),fD="expm1",g9=["typed","Complex"],y9=de(fD,g9,r=>{var{typed:e,Complex:t}=r;return e(fD,{number:pU,Complex:function(i){var a=Math.exp(i.re);return new t(a*Math.cos(i.im)-1,a*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),JA="fix",x9=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],b9=de(JA,["typed","ceil","floor"],r=>{var{typed:e,ceil:t,floor:n}=r;return e(JA,{number:function(a){return a>0?n(a):t(a)},"number, number":function(a,s){return a>0?n(a,s):t(a,s)}})}),_9=de(JA,x9,r=>{var{typed:e,Complex:t,matrix:n,ceil:i,floor:a,equalScalar:s,zeros:o,DenseMatrix:c}=r,u=fa({typed:e,DenseMatrix:c}),h=Ml({typed:e}),d=b9({typed:e,ceil:i,floor:a});return e("fix",{number:d.signatures.number,"number, number | BigNumber":d.signatures["number,number"],Complex:function(v){return new t(v.re>0?Math.floor(v.re):Math.ceil(v.re),v.im>0?Math.floor(v.im):Math.ceil(v.im))},"Complex, number":function(v,x){return new t(v.re>0?a(v.re,x):i(v.re,x),v.im>0?a(v.im,x):i(v.im,x))},"Complex, BigNumber":function(v,x){var b=x.toNumber();return new t(v.re>0?a(v.re,b):i(v.re,b),v.im>0?a(v.im,b):i(v.im,b))},BigNumber:function(v){return v.isNegative()?i(v):a(v)},"BigNumber, number | BigNumber":function(v,x){return v.isNegative()?i(v,x):a(v,x)},bigint:m=>m,"bigint, number":(m,v)=>m,"bigint, BigNumber":(m,v)=>m,Fraction:function(v){return v.s<0n?v.ceil():v.floor()},"Fraction, number | BigNumber":function(v,x){return v.s<0n?i(v,x):a(v,x)},"Unit, number, Unit":e.referToSelf(m=>function(v,x,b){var M=v.toNumeric(b);return b.multiply(m(M,x))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(v,x,b)=>m(v,x.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(m=>(v,x,b)=>Tn(v,M=>m(M,x,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(m=>(v,x)=>m(v,0,x)),"Array | Matrix":e.referToSelf(m=>v=>Tn(v,m,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(m=>(v,x)=>Tn(v,b=>m(b,x),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(v,x)=>h(n(x),v,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(v,x)=>s(v,0)?o(x.size(),x.storage()):x.storage()==="dense"?h(x,v,m,!0):u(x,v,m,!0))})}),e2="floor",S9=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],M9=new vh(10),E9=de(e2,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;function i(a){var s=Math.floor(a),o=n(a);return s===o?s:Ca(a,o,t.relTol,t.absTol)&&!Ca(a,s,t.relTol,t.absTol)?o:s}return e(e2,{number:i,"number, number":function(s,o){if(!Xt(o))throw new RangeError("number of decimals in function floor must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var c=10**o;return i(s*c)/c}})}),$U=de(e2,S9,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=r,c=Ya({typed:e,equalScalar:a}),u=fa({typed:e,DenseMatrix:o}),h=Ml({typed:e}),d=E9({typed:e,config:t,round:n});function m(v){var x=(_,T)=>_l(_,T,t.relTol,t.absTol),b=v.floor(),M=n(v);return b.eq(M)?b:x(v,M)&&!x(v,b)?M:b}return e("floor",{number:d.signatures.number,"number,number":d.signatures["number,number"],Complex:function(x){return x.floor()},"Complex, number":function(x,b){return x.floor(b)},"Complex, BigNumber":function(x,b){return x.floor(b.toNumber())},BigNumber:m,"BigNumber, BigNumber":function(x,b){var M=M9.pow(b);return m(x.mul(M)).div(M)},bigint:v=>v,"bigint, number":(v,x)=>v,"bigint, BigNumber":(v,x)=>v,Fraction:function(x){return x.floor()},"Fraction, number":function(x,b){return x.floor(b)},"Fraction, BigNumber":function(x,b){return x.floor(b.toNumber())},"Unit, number, Unit":e.referToSelf(v=>function(x,b,M){var _=x.toNumeric(M);return M.multiply(v(_,b))}),"Unit, BigNumber, Unit":e.referToSelf(v=>(x,b,M)=>v(x,b.toNumber(),M)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(v=>(x,b,M)=>Tn(x,_=>v(_,b,M),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(v=>(x,b)=>v(x,0,b)),"Array | Matrix":e.referToSelf(v=>x=>Tn(x,v,!0)),"Array, number | BigNumber":e.referToSelf(v=>(x,b)=>Tn(x,M=>v(M,b),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(v=>(x,b)=>c(x,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(x,b)=>h(x,b,v,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(v=>(x,b)=>h(i(b),x,v,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(v=>(x,b)=>a(x,0)?s(b.size(),b.storage()):b.storage()==="dense"?h(b,x,v,!0):u(b,x,v,!0))})}),A9="matAlgo02xDS0",w9=["typed","equalScalar"],fu=de(A9,w9,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s,o){var c=i._data,u=i._size,h=i._datatype||i.getDataType(),d=a._values,m=a._index,v=a._ptr,x=a._size,b=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==x.length)throw new Un(u.length,x.length);if(u[0]!==x[0]||u[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+x+")");if(!d)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var M=u[0],_=u[1],T,E=t,A=0,D=s;typeof h=="string"&&h===b&&h!=="mixed"&&(T=h,E=e.find(t,[T,T]),A=e.convert(0,T),D=e.find(s,[T,T]));for(var N=[],O=[],z=[],C=0;C<_;C++){z[C]=O.length;for(var R=v[C],F=v[C+1],H=R;H<F;H++){var X=m[H],$=o?D(d[H],c[X][C]):D(c[X][C],d[H]);E($,A)||(O.push(X),N.push($))}}return z[_]=O.length,a.createSparseMatrix({values:N,index:O,ptr:z,size:[M,_],datatype:h===i._datatype&&b===a._datatype?T:void 0})}}),T9="matAlgo03xDSf",N9=["typed"],_s=de(T9,N9,r=>{var{typed:e}=r;return function(n,i,a,s){var o=n._data,c=n._size,u=n._datatype||n.getDataType(),h=i._values,d=i._index,m=i._ptr,v=i._size,x=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new Un(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var b=c[0],M=c[1],_,T=0,E=a;typeof u=="string"&&u===x&&u!=="mixed"&&(_=u,T=e.convert(0,_),E=e.find(a,[_,_]));for(var A=[],D=0;D<b;D++)A[D]=[];for(var N=[],O=[],z=0;z<M;z++){for(var C=z+1,R=m[z],F=m[z+1],H=R;H<F;H++){var X=d[H];N[X]=s?E(h[H],o[X][z]):E(o[X][z],h[H]),O[X]=C}for(var $=0;$<b;$++)O[$]===C?A[$][z]=N[$]:A[$][z]=s?E(T,o[$][z]):E(o[$][z],T)}return n.createDenseMatrix({data:A,size:[b,M],datatype:u===n._datatype&&x===i._datatype?_:void 0})}}),D9="matAlgo05xSfSf",C9=["typed","equalScalar"],AS=de(D9,C9,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,c=i._index,u=i._ptr,h=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType(),m=a._values,v=a._index,x=a._ptr,b=a._size,M=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(h.length!==b.length)throw new Un(h.length,b.length);if(h[0]!==b[0]||h[1]!==b[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+b+")");var _=h[0],T=h[1],E,A=t,D=0,N=s;typeof d=="string"&&d===M&&d!=="mixed"&&(E=d,A=e.find(t,[E,E]),D=e.convert(0,E),N=e.find(s,[E,E]));var O=o&&m?[]:void 0,z=[],C=[],R=O?[]:void 0,F=O?[]:void 0,H=[],X=[],$,Y,I,Z;for(Y=0;Y<T;Y++){C[Y]=z.length;var W=Y+1;for(I=u[Y],Z=u[Y+1];I<Z;I++)$=c[I],z.push($),H[$]=W,R&&(R[$]=o[I]);for(I=x[Y],Z=x[Y+1];I<Z;I++)$=v[I],H[$]!==W&&z.push($),X[$]=W,F&&(F[$]=m[I]);if(O)for(I=C[Y];I<z.length;){$=z[I];var te=H[$],le=X[$];if(te===W||le===W){var Q=te===W?R[$]:D,k=le===W?F[$]:D,ae=N(Q,k);A(ae,D)?z.splice(I,1):(O.push(ae),I++)}}}return C[T]=z.length,i.createSparseMatrix({values:O,index:z,ptr:C,size:[_,T],datatype:d===i._datatype&&M===a._datatype?E:void 0})}}),R9="matAlgo13xDD",O9=["typed"],ZU=de(R9,O9,r=>{var{typed:e}=r;return function(i,a,s){var o=i._data,c=i._size,u=i._datatype,h=a._data,d=a._size,m=a._datatype,v=[];if(c.length!==d.length)throw new Un(c.length,d.length);for(var x=0;x<c.length;x++){if(c[x]!==d[x])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+d+")");v[x]=c[x]}var b,M=s;typeof u=="string"&&u===m&&(b=u,M=e.find(s,[b,b]));var _=v.length>0?t(M,0,v,v[0],o,h):[];return i.createDenseMatrix({data:_,size:v,datatype:b})};function t(n,i,a,s,o,c){var u=[];if(i===a.length-1)for(var h=0;h<s;h++)u[h]=n(o[h],c[h]);else for(var d=0;d<s;d++)u[d]=t(n,i+1,a,a[i+1],o[d],c[d]);return u}});function Ea(r,e){if(af(r.size(),e.size()))return[r,e];var t=i_(r.size(),e.size());return[r,e].map(n=>B9(n,t))}function B9(r,e){return af(r.size(),e)?r:r.create(jd(r.valueOf(),e),r.datatype())}var U9="matrixAlgorithmSuite",z9=["typed","matrix"],$r=de(U9,z9,r=>{var{typed:e,matrix:t}=r,n=ZU({typed:e}),i=Ml({typed:e});return function(s){var o=s.elop,c=s.SD||s.DS,u;o?(u={"DenseMatrix, DenseMatrix":(v,x)=>n(...Ea(v,x),o),"Array, Array":(v,x)=>n(...Ea(t(v),t(x)),o).valueOf(),"Array, DenseMatrix":(v,x)=>n(...Ea(t(v),x),o),"DenseMatrix, Array":(v,x)=>n(...Ea(v,t(x)),o)},s.SS&&(u["SparseMatrix, SparseMatrix"]=(v,x)=>s.SS(...Ea(v,x),o,!1)),s.DS&&(u["DenseMatrix, SparseMatrix"]=(v,x)=>s.DS(...Ea(v,x),o,!1),u["Array, SparseMatrix"]=(v,x)=>s.DS(...Ea(t(v),x),o,!1)),c&&(u["SparseMatrix, DenseMatrix"]=(v,x)=>c(...Ea(x,v),o,!0),u["SparseMatrix, Array"]=(v,x)=>c(...Ea(t(x),v),o,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(x,b)=>n(...Ea(x,b),v)),"Array, Array":e.referToSelf(v=>(x,b)=>n(...Ea(t(x),t(b)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(x,b)=>n(...Ea(t(x),b),v)),"DenseMatrix, Array":e.referToSelf(v=>(x,b)=>n(...Ea(x,t(b)),v))},s.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(x,b)=>s.SS(...Ea(x,b),v,!1))),s.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(x,b)=>s.DS(...Ea(x,b),v,!1)),u["Array, SparseMatrix"]=e.referToSelf(v=>(x,b)=>s.DS(...Ea(t(x),b),v,!1))),c&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(x,b)=>c(...Ea(b,x),v,!0)),u["SparseMatrix, Array"]=e.referToSelf(v=>(x,b)=>c(...Ea(t(b),x),v,!0))));var h=s.scalar||"any",d=s.Ds||s.Ss;d&&(o?(u["DenseMatrix,"+h]=(v,x)=>i(v,x,o,!1),u[h+", DenseMatrix"]=(v,x)=>i(x,v,o,!0),u["Array,"+h]=(v,x)=>i(t(v),x,o,!1).valueOf(),u[h+", Array"]=(v,x)=>i(t(x),v,o,!0).valueOf()):(u["DenseMatrix,"+h]=e.referToSelf(v=>(x,b)=>i(x,b,v,!1)),u[h+", DenseMatrix"]=e.referToSelf(v=>(x,b)=>i(b,x,v,!0)),u["Array,"+h]=e.referToSelf(v=>(x,b)=>i(t(x),b,v,!1).valueOf()),u[h+", Array"]=e.referToSelf(v=>(x,b)=>i(t(b),x,v,!0).valueOf())));var m=s.sS!==void 0?s.sS:s.Ss;return o?(s.Ss&&(u["SparseMatrix,"+h]=(v,x)=>s.Ss(v,x,o,!1)),m&&(u[h+", SparseMatrix"]=(v,x)=>m(x,v,o,!0))):(s.Ss&&(u["SparseMatrix,"+h]=e.referToSelf(v=>(x,b)=>s.Ss(x,b,v,!1))),m&&(u[h+", SparseMatrix"]=e.referToSelf(v=>(x,b)=>m(b,x,v,!0)))),o&&o.signatures&&RB(u,o.signatures),u}}),hD="mod",F9=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],KU=de(hD,F9,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o,concat:c}=r,u=$U({typed:e,config:t,round:n,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}),h=fu({typed:e,equalScalar:a}),d=_s({typed:e}),m=AS({typed:e,equalScalar:a}),v=Ya({typed:e,equalScalar:a}),x=fa({typed:e,DenseMatrix:o}),b=$r({typed:e,matrix:i,concat:c});return e(hD,{"number, number":M,"BigNumber, BigNumber":function(T,E){return E.isZero()?T:T.sub(E.mul(u(T.div(E))))},"bigint, bigint":function(T,E){if(E===0n)return T;if(T<0){var A=T%E;return A===0n?A:A+E}return T%E},"Fraction, Fraction":function(T,E){return E.equals(0)?T:T.sub(E.mul(u(T.div(E))))}},b({SS:m,DS:d,SD:h,Ss:v,sS:x}));function M(_,T){return T===0?_:_-T*u(_/T)}}),L9="matAlgo01xDSid",I9=["typed"],Mh=de(L9,I9,r=>{var{typed:e}=r;return function(n,i,a,s){var o=n._data,c=n._size,u=n._datatype||n.getDataType(),h=i._values,d=i._index,m=i._ptr,v=i._size,x=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new Un(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var b=c[0],M=c[1],_=typeof u=="string"&&u!=="mixed"&&u===x?u:void 0,T=_?e.find(a,[_,_]):a,E,A,D=[];for(E=0;E<b;E++)D[E]=[];var N=[],O=[];for(A=0;A<M;A++){for(var z=A+1,C=m[A],R=m[A+1],F=C;F<R;F++)E=d[F],N[E]=s?T(h[F],o[E][A]):T(o[E][A],h[F]),O[E]=z;for(E=0;E<b;E++)O[E]===z?D[E][A]=N[E]:D[E][A]=o[E][A]}return n.createDenseMatrix({data:D,size:[b,M],datatype:u===n._datatype&&x===i._datatype?_:void 0})}}),P9="matAlgo04xSidSid",H9=["typed","equalScalar"],V2=de(P9,H9,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,c=i._index,u=i._ptr,h=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType(),m=a._values,v=a._index,x=a._ptr,b=a._size,M=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(h.length!==b.length)throw new Un(h.length,b.length);if(h[0]!==b[0]||h[1]!==b[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+b+")");var _=h[0],T=h[1],E,A=t,D=0,N=s;typeof d=="string"&&d===M&&d!=="mixed"&&(E=d,A=e.find(t,[E,E]),D=e.convert(0,E),N=e.find(s,[E,E]));var O=o&&m?[]:void 0,z=[],C=[],R=o&&m?[]:void 0,F=o&&m?[]:void 0,H=[],X=[],$,Y,I,Z,W;for(Y=0;Y<T;Y++){C[Y]=z.length;var te=Y+1;for(Z=u[Y],W=u[Y+1],I=Z;I<W;I++)$=c[I],z.push($),H[$]=te,R&&(R[$]=o[I]);for(Z=x[Y],W=x[Y+1],I=Z;I<W;I++)if($=v[I],H[$]===te){if(R){var le=N(R[$],m[I]);A(le,D)?H[$]=null:R[$]=le}}else z.push($),X[$]=te,F&&(F[$]=m[I]);if(R&&F)for(I=C[Y];I<z.length;)$=z[I],H[$]===te?(O[I]=R[$],I++):X[$]===te?(O[I]=F[$],I++):z.splice(I,1)}return C[T]=z.length,i.createSparseMatrix({values:O,index:z,ptr:C,size:[_,T],datatype:d===i._datatype&&M===a._datatype?E:void 0})}}),V9="matAlgo10xSids",q9=["typed","DenseMatrix"],cp=de(V9,q9,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,a,s,o){var c=i._values,u=i._index,h=i._ptr,d=i._size,m=i._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=d[0],x=d[1],b,M=s;typeof m=="string"&&(b=m,a=e.convert(a,b),M=e.find(s,[b,b]));for(var _=[],T=[],E=[],A=0;A<x;A++){for(var D=A+1,N=h[A],O=h[A+1],z=N;z<O;z++){var C=u[z];T[C]=c[z],E[C]=D}for(var R=0;R<v;R++)A===0&&(_[R]=[]),E[R]===D?_[R][A]=o?M(a,T[R]):M(T[R],a):_[R][A]=a}return new t({data:_,size:[v,x],datatype:b})}});function fp(r,e,t,n){if(!(this instanceof fp))throw new SyntaxError("Constructor must be called with the new operator");this.fn=r,this.count=e,this.min=t,this.max=n,this.message="Wrong number of arguments in function "+r+" ("+e+" provided, "+t+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}fp.prototype=new Error;fp.prototype.constructor=Error;fp.prototype.name="ArgumentsError";fp.prototype.isArgumentsError=!0;var dD="gcd",G9=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],pE="number | BigNumber | Fraction | Matrix | Array",k9="".concat(pE,", ").concat(pE,", ...").concat(pE);function pD(r){return!r.some(e=>Array.isArray(e))}var X9=de(dD,G9,r=>{var{typed:e,matrix:t,config:n,round:i,equalScalar:a,zeros:s,BigNumber:o,DenseMatrix:c,concat:u}=r,h=KU({typed:e,config:n,round:i,matrix:t,equalScalar:a,zeros:s,DenseMatrix:c,concat:u}),d=Mh({typed:e}),m=V2({typed:e,equalScalar:a}),v=cp({typed:e,DenseMatrix:c}),x=$r({typed:e,matrix:t,concat:u});return e(dD,{"number, number":b,"BigNumber, BigNumber":M,"Fraction, Fraction":(_,T)=>_.gcd(T)},x({SS:m,DS:d,Ss:v}),{[k9]:e.referToSelf(_=>(T,E,A)=>{for(var D=_(T,E),N=0;N<A.length;N++)D=_(D,A[N]);return D}),Array:e.referToSelf(_=>T=>{if(T.length===1&&Array.isArray(T[0])&&pD(T[0]))return _(...T[0]);if(pD(T))return _(...T);throw new fp("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(_=>T=>_(T.toArray()))});function b(_,T){if(!Xt(_)||!Xt(T))throw new Error("Parameters in function gcd must be integer numbers");for(var E;T!==0;)E=h(_,T),_=T,T=E;return _<0?-_:_}function M(_,T){if(!_.isInt()||!T.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var E=new o(0);!T.isZero();){var A=h(_,T);_=T,T=A}return _.lt(E)?_.neg():_}}),j9="matAlgo06xS0S0",Y9=["typed","equalScalar"],wS=de(j9,Y9,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,c=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=a._values,d=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==d.length)throw new Un(c.length,d.length);if(c[0]!==d[0]||c[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+d+")");var v=c[0],x=c[1],b,M=t,_=0,T=s;typeof u=="string"&&u===m&&u!=="mixed"&&(b=u,M=e.find(t,[b,b]),_=e.convert(0,b),T=e.find(s,[b,b]));for(var E=o&&h?[]:void 0,A=[],D=[],N=E?[]:void 0,O=[],z=[],C=0;C<x;C++){D[C]=A.length;var R=C+1;if(LN(i,C,O,N,z,R,A,T),LN(a,C,O,N,z,R,A,T),N)for(var F=D[C];F<A.length;){var H=A[F];if(z[H]===R){var X=N[H];M(X,_)?A.splice(F,1):(E.push(X),F++)}else A.splice(F,1)}else for(var $=D[C];$<A.length;){var Y=A[$];z[Y]!==R?A.splice($,1):$++}}return D[x]=A.length,i.createSparseMatrix({values:E,index:A,ptr:D,size:[v,x],datatype:u===i._datatype&&m===a._datatype?b:void 0})}}),mD="lcm",W9=["typed","matrix","equalScalar","concat"],$9=de(mD,W9,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,a=fu({typed:e,equalScalar:n}),s=wS({typed:e,equalScalar:n}),o=Ya({typed:e,equalScalar:n}),c=$r({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",h={};return h["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(m=>(v,x,b)=>{for(var M=m(v,x),_=0;_<b.length;_++)M=m(M,b[_]);return M}),e(mD,{"number, number":mU,"BigNumber, BigNumber":d,"Fraction, Fraction":(m,v)=>m.lcm(v)},c({SS:s,DS:a,Ss:o}),h);function d(m,v){if(!m.isInt()||!v.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(m.isZero())return m;if(v.isZero())return v;for(var x=m.times(v);!v.isZero();){var b=v;v=m.mod(b),m=b}return x.div(m).abs()}});function q2(r,e,t,n){return function(i){if(i>0||t.predictable){if(i<=0)return NaN;var a=i.toString(16),s=a.substring(0,15);return r*(a.length-s.length)+e(+("0x"+s))}return n(i.toNumber())}}var vD="log10",Z9=["typed","config","Complex"],K9=o_(16),Q9=de(vD,Z9,r=>{var{typed:e,config:t,Complex:n}=r;function i(s){return s.log().div(Math.LN10)}function a(s){return i(new n(s,0))}return e(vD,{number:function(o){return o>=0||t.predictable?o_(o):a(o)},bigint:q2(K9,o_,t,a),Complex:i,BigNumber:function(o){return!o.isNegative()||t.predictable?o.log():a(o.toNumber())},"Array | Matrix":e.referToSelf(s=>o=>Tn(o,s))})}),gD="log2",J9=["typed","config","Complex"],eH=de(gD,J9,r=>{var{typed:e,config:t,Complex:n}=r;function i(s){return a(new n(s,0))}return e(gD,{number:function(o){return o>=0||t.predictable?jA(o):i(o)},bigint:q2(4,jA,t,i),Complex:a,BigNumber:function(o){return!o.isNegative()||t.predictable?o.log(2):i(o.toNumber())},"Array | Matrix":e.referToSelf(s=>o=>Tn(o,s))});function a(s){var o=Math.sqrt(s.re*s.re+s.im*s.im);return new n(Math.log2?Math.log2(o):Math.log(o)/Math.LN2,Math.atan2(s.im,s.re)/Math.LN2)}}),tH="multiplyScalar",nH=["typed"],rH=de(tH,nH,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":uU,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,n)=>n.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,n)=>t.multiply(n)})}),yD="multiply",iH=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],aH=de(yD,iH,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,equalScalar:a,dot:s}=r,o=Ya({typed:e,equalScalar:a}),c=Ml({typed:e});function u(D,N){switch(D.length){case 1:switch(N.length){case 1:if(D[0]!==N[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(D[0]!==N[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+D[0]+") must match Matrix rows ("+N[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+N.length+" dimensions)")}break;case 2:switch(N.length){case 1:if(D[1]!==N[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+D[1]+") must match Vector length ("+N[0]+")");break;case 2:if(D[1]!==N[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+D[1]+") must match Matrix B rows ("+N[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+N.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+D.length+" dimensions)")}}function h(D,N,O){if(O===0)throw new Error("Cannot multiply two empty vectors");return s(D,N)}function d(D,N){if(N.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return m(D,N)}function m(D,N){var O=D._data,z=D._size,C=D._datatype||D.getDataType(),R=N._data,F=N._size,H=N._datatype||N.getDataType(),X=z[0],$=F[1],Y,I=n,Z=i;C&&H&&C===H&&typeof C=="string"&&C!=="mixed"&&(Y=C,I=e.find(n,[Y,Y]),Z=e.find(i,[Y,Y]));for(var W=[],te=0;te<$;te++){for(var le=Z(O[0],R[0][te]),Q=1;Q<X;Q++)le=I(le,Z(O[Q],R[Q][te]));W[te]=le}return D.createDenseMatrix({data:W,size:[$],datatype:C===D._datatype&&H===N._datatype?Y:void 0})}var v=e("_multiplyMatrixVector",{"DenseMatrix, any":b,"SparseMatrix, any":T}),x=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":M,"DenseMatrix, SparseMatrix":_,"SparseMatrix, DenseMatrix":E,"SparseMatrix, SparseMatrix":A});function b(D,N){var O=D._data,z=D._size,C=D._datatype||D.getDataType(),R=N._data,F=N._datatype||N.getDataType(),H=z[0],X=z[1],$,Y=n,I=i;C&&F&&C===F&&typeof C=="string"&&C!=="mixed"&&($=C,Y=e.find(n,[$,$]),I=e.find(i,[$,$]));for(var Z=[],W=0;W<H;W++){for(var te=O[W],le=I(te[0],R[0]),Q=1;Q<X;Q++)le=Y(le,I(te[Q],R[Q]));Z[W]=le}return D.createDenseMatrix({data:Z,size:[H],datatype:C===D._datatype&&F===N._datatype?$:void 0})}function M(D,N){var O=D._data,z=D._size,C=D._datatype||D.getDataType(),R=N._data,F=N._size,H=N._datatype||N.getDataType(),X=z[0],$=z[1],Y=F[1],I,Z=n,W=i;C&&H&&C===H&&typeof C=="string"&&C!=="mixed"&&C!=="mixed"&&(I=C,Z=e.find(n,[I,I]),W=e.find(i,[I,I]));for(var te=[],le=0;le<X;le++){var Q=O[le];te[le]=[];for(var k=0;k<Y;k++){for(var ae=W(Q[0],R[0][k]),J=1;J<$;J++)ae=Z(ae,W(Q[J],R[J][k]));te[le][k]=ae}}return D.createDenseMatrix({data:te,size:[X,Y],datatype:C===D._datatype&&H===N._datatype?I:void 0})}function _(D,N){var O=D._data,z=D._size,C=D._datatype||D.getDataType(),R=N._values,F=N._index,H=N._ptr,X=N._size,$=N._datatype||N._data===void 0?N._datatype:N.getDataType();if(!R)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var Y=z[0],I=X[1],Z,W=n,te=i,le=a,Q=0;C&&$&&C===$&&typeof C=="string"&&C!=="mixed"&&(Z=C,W=e.find(n,[Z,Z]),te=e.find(i,[Z,Z]),le=e.find(a,[Z,Z]),Q=e.convert(0,Z));for(var k=[],ae=[],J=[],De=N.createSparseMatrix({values:k,index:ae,ptr:J,size:[Y,I],datatype:C===D._datatype&&$===N._datatype?Z:void 0}),pe=0;pe<I;pe++){J[pe]=ae.length;var _e=H[pe],ne=H[pe+1];if(ne>_e)for(var ue=0,ge=0;ge<Y;ge++){for(var Ae=ge+1,Te=void 0,se=_e;se<ne;se++){var Me=F[se];ue!==Ae?(Te=te(O[ge][Me],R[se]),ue=Ae):Te=W(Te,te(O[ge][Me],R[se]))}ue===Ae&&!le(Te,Q)&&(ae.push(ge),k.push(Te))}}return J[I]=ae.length,De}function T(D,N){var O=D._values,z=D._index,C=D._ptr,R=D._datatype||D._data===void 0?D._datatype:D.getDataType();if(!O)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var F=N._data,H=N._datatype||N.getDataType(),X=D._size[0],$=N._size[0],Y=[],I=[],Z=[],W,te=n,le=i,Q=a,k=0;R&&H&&R===H&&typeof R=="string"&&R!=="mixed"&&(W=R,te=e.find(n,[W,W]),le=e.find(i,[W,W]),Q=e.find(a,[W,W]),k=e.convert(0,W));var ae=[],J=[];Z[0]=0;for(var De=0;De<$;De++){var pe=F[De];if(!Q(pe,k))for(var _e=C[De],ne=C[De+1],ue=_e;ue<ne;ue++){var ge=z[ue];J[ge]?ae[ge]=te(ae[ge],le(pe,O[ue])):(J[ge]=!0,I.push(ge),ae[ge]=le(pe,O[ue]))}}for(var Ae=I.length,Te=0;Te<Ae;Te++){var se=I[Te];Y[Te]=ae[se]}return Z[1]=I.length,D.createSparseMatrix({values:Y,index:I,ptr:Z,size:[X,1],datatype:R===D._datatype&&H===N._datatype?W:void 0})}function E(D,N){var O=D._values,z=D._index,C=D._ptr,R=D._datatype||D._data===void 0?D._datatype:D.getDataType();if(!O)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var F=N._data,H=N._datatype||N.getDataType(),X=D._size[0],$=N._size[0],Y=N._size[1],I,Z=n,W=i,te=a,le=0;R&&H&&R===H&&typeof R=="string"&&R!=="mixed"&&(I=R,Z=e.find(n,[I,I]),W=e.find(i,[I,I]),te=e.find(a,[I,I]),le=e.convert(0,I));for(var Q=[],k=[],ae=[],J=D.createSparseMatrix({values:Q,index:k,ptr:ae,size:[X,Y],datatype:R===D._datatype&&H===N._datatype?I:void 0}),De=[],pe=[],_e=0;_e<Y;_e++){ae[_e]=k.length;for(var ne=_e+1,ue=0;ue<$;ue++){var ge=F[ue][_e];if(!te(ge,le))for(var Ae=C[ue],Te=C[ue+1],se=Ae;se<Te;se++){var Me=z[se];pe[Me]!==ne?(pe[Me]=ne,k.push(Me),De[Me]=W(ge,O[se])):De[Me]=Z(De[Me],W(ge,O[se]))}}for(var Be=ae[_e],Le=k.length,Pe=Be;Pe<Le;Pe++){var Ye=k[Pe];Q[Pe]=De[Ye]}}return ae[Y]=k.length,J}function A(D,N){var O=D._values,z=D._index,C=D._ptr,R=D._datatype||D._data===void 0?D._datatype:D.getDataType(),F=N._values,H=N._index,X=N._ptr,$=N._datatype||N._data===void 0?N._datatype:N.getDataType(),Y=D._size[0],I=N._size[1],Z=O&&F,W,te=n,le=i;R&&$&&R===$&&typeof R=="string"&&R!=="mixed"&&(W=R,te=e.find(n,[W,W]),le=e.find(i,[W,W]));for(var Q=Z?[]:void 0,k=[],ae=[],J=D.createSparseMatrix({values:Q,index:k,ptr:ae,size:[Y,I],datatype:R===D._datatype&&$===N._datatype?W:void 0}),De=Z?[]:void 0,pe=[],_e,ne,ue,ge,Ae,Te,se,Me,Be=0;Be<I;Be++){ae[Be]=k.length;var Le=Be+1;for(Ae=X[Be],Te=X[Be+1],ge=Ae;ge<Te;ge++)if(Me=H[ge],Z)for(ne=C[Me],ue=C[Me+1],_e=ne;_e<ue;_e++)se=z[_e],pe[se]!==Le?(pe[se]=Le,k.push(se),De[se]=le(F[ge],O[_e])):De[se]=te(De[se],le(F[ge],O[_e]));else for(ne=C[Me],ue=C[Me+1],_e=ne;_e<ue;_e++)se=z[_e],pe[se]!==Le&&(pe[se]=Le,k.push(se));if(Z)for(var Pe=ae[Be],Ye=k.length,Ze=Pe;Ze<Ye;Ze++){var re=k[Ze];Q[Ze]=De[re]}}return ae[I]=k.length,J}return e(yD,i,{"Array, Array":e.referTo("Matrix, Matrix",D=>(N,O)=>{u(_n(N),_n(O));var z=D(t(N),t(O));return rn(z)?z.valueOf():z}),"Matrix, Matrix":function(N,O){var z=N.size(),C=O.size();return u(z,C),z.length===1?C.length===1?h(N,O,z[0]):d(N,O):C.length===1?v(N,O):x(N,O)},"Matrix, Array":e.referTo("Matrix,Matrix",D=>(N,O)=>D(N,t(O))),"Array, Matrix":e.referToSelf(D=>(N,O)=>D(t(N,O.storage()),O)),"SparseMatrix, any":function(N,O){return o(N,O,i,!1)},"DenseMatrix, any":function(N,O){return c(N,O,i,!1)},"any, SparseMatrix":function(N,O){return o(O,N,i,!0)},"any, DenseMatrix":function(N,O){return c(O,N,i,!0)},"Array, any":function(N,O){return c(t(N),O,i,!1).valueOf()},"any, Array":function(N,O){return c(t(O),N,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(D=>(N,O,z)=>{for(var C=D(N,O),R=0;R<z.length;R++)C=D(C,z[R]);return C})})}),xD="nthRoot",sH=["typed","matrix","equalScalar","BigNumber","concat"],oH=de(xD,sH,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,concat:a}=r,s=Mh({typed:e}),o=fu({typed:e,equalScalar:n}),c=wS({typed:e,equalScalar:n}),u=Ya({typed:e,equalScalar:n}),h=$r({typed:e,matrix:t,concat:a});function d(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(xD,{number:HN,"number, number":HN,BigNumber:v=>m(v,new i(2)),"BigNumber, BigNumber":m,Complex:d,"Complex, number":d,Array:e.referTo("DenseMatrix,number",v=>x=>v(t(x),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",v=>x=>v(x,2)),SparseMatrix:e.referTo("SparseMatrix,number",v=>x=>v(x,2)),"SparseMatrix, SparseMatrix":e.referToSelf(v=>(x,b)=>{if(b.density()===1)return c(x,b,v);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(v=>(x,b)=>{if(b.density()===1)return s(x,b,v,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",v=>(x,b)=>v(t(x),b)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(x,b)=>{if(b.density()===1)return u(b,x,v,!0);throw new Error("Root must be non-zero")})},h({scalar:"number | BigNumber",SD:o,Ss:u,sS:!1}));function m(v,x){var b=i.precision,M=i.clone({precision:b+2}),_=new i(0),T=new M(1),E=x.isNegative();if(E&&(x=x.neg()),x.isZero())throw new Error("Root must be non-zero");if(v.isNegative()&&!x.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(v.isZero())return E?new M(1/0):0;if(!v.isFinite())return E?_:v;var A=v.abs().pow(T.div(x));return A=v.isNeg()?A.neg():A,new i((E?T.div(A):A).toPrecision(b))}}),bD="sign",lH=["typed","BigNumber","Fraction","complex"],uH=de(bD,lH,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:i}=r;return e(bD,{number:YA,Complex:function(s){return s.im===0?n(YA(s.re)):s.sign()},BigNumber:function(s){return new t(s.cmp(0))},bigint:function(s){return s>0n?1n:s<0n?-1n:0n},Fraction:function(s){return s.n===0n?new i(0):new i(s.s)},"Array | Matrix":e.referToSelf(a=>s=>Tn(s,a,!0)),Unit:e.referToSelf(a=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,s.valueType())(s.value)})})}),cH="sqrt",fH=["config","typed","Complex"],hH=de(cH,fH,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:i,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():i(s.toNumber())},Unit:function(s){return s.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new n(a,0).sqrt()}}),_D="square",dH=["typed"],pH=de(_D,dH,r=>{var{typed:e}=r;return e(_D,{number:vU,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),SD="subtract",mH=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],vH=de(SD,mH,r=>{var{typed:e,matrix:t,equalScalar:n,subtractScalar:i,unaryMinus:a,DenseMatrix:s,concat:o}=r,c=Mh({typed:e}),u=_s({typed:e}),h=AS({typed:e,equalScalar:n}),d=cp({typed:e,DenseMatrix:s}),m=fa({typed:e,DenseMatrix:s}),v=$r({typed:e,matrix:t,concat:o});return e(SD,{"any, any":i},v({elop:i,SS:h,DS:c,SD:u,Ss:m,sS:d}))}),MD="xgcd",gH=["typed","config","matrix","BigNumber"],yH=de(MD,gH,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(MD,{"number, number":function(o,c){var u=gU(o,c);return t.matrix==="Array"?u:n(u)},"BigNumber, BigNumber":a});function a(s,o){var c,u,h,d=new i(0),m=new i(1),v=d,x=m,b=m,M=d;if(!s.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)u=s.div(o).floor(),h=s.mod(o),c=v,v=x.minus(u.times(v)),x=c,c=b,b=M.minus(u.times(b)),M=c,s=o,o=h;var _;return s.lt(d)?_=[s.neg(),x.neg(),M.neg()]:_=[s,s.isZero()?0:x,M],t.matrix==="Array"?_:n(_)}}),ED="invmod",xH=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],bH=de(ED,xH,r=>{var{typed:e,config:t,BigNumber:n,xgcd:i,equal:a,smaller:s,mod:o,add:c,isInteger:u}=r;return e(ED,{"number, number":h,"BigNumber, BigNumber":h});function h(d,m){if(!u(d)||!u(m))throw new Error("Parameters in function invmod must be integer numbers");if(d=o(d,m),a(m,0))throw new Error("Divisor must be non zero");var v=i(d,m);v=v.valueOf();var[x,b]=v;return a(x,n(1))?(b=o(b,m),s(b,n(0))&&(b=c(b,m)),b):NaN}}),_H="matAlgo09xS0Sf",SH=["typed","equalScalar"],QU=de(_H,SH,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,c=i._index,u=i._ptr,h=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType(),m=a._values,v=a._index,x=a._ptr,b=a._size,M=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(h.length!==b.length)throw new Un(h.length,b.length);if(h[0]!==b[0]||h[1]!==b[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+b+")");var _=h[0],T=h[1],E,A=t,D=0,N=s;typeof d=="string"&&d===M&&d!=="mixed"&&(E=d,A=e.find(t,[E,E]),D=e.convert(0,E),N=e.find(s,[E,E]));var O=o&&m?[]:void 0,z=[],C=[],R=O?[]:void 0,F=[],H,X,$,Y,I;for(X=0;X<T;X++){C[X]=z.length;var Z=X+1;if(R)for(Y=x[X],I=x[X+1],$=Y;$<I;$++)H=v[$],F[H]=Z,R[H]=m[$];for(Y=u[X],I=u[X+1],$=Y;$<I;$++)if(H=c[$],R){var W=F[H]===Z?R[H]:D,te=N(o[$],W);A(te,D)||(z.push(H),O.push(te))}else z.push(H)}return C[T]=z.length,i.createSparseMatrix({values:O,index:z,ptr:C,size:[_,T],datatype:d===i._datatype&&M===a._datatype?E:void 0})}}),AD="dotMultiply",MH=["typed","matrix","equalScalar","multiplyScalar","concat"],EH=de(AD,MH,r=>{var{typed:e,matrix:t,equalScalar:n,multiplyScalar:i,concat:a}=r,s=fu({typed:e,equalScalar:n}),o=QU({typed:e,equalScalar:n}),c=Ya({typed:e,equalScalar:n}),u=$r({typed:e,matrix:t,concat:a});return e(AD,u({elop:i,SS:o,DS:s,Ss:c}))});function AH(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero()||e.eq(-1)||r.eq(e))return r;if(e.isZero()||r.eq(-1))return e;if(!r.isFinite()||!e.isFinite()){if(!r.isFinite()&&!e.isFinite())return r.isNegative()===e.isNegative()?r:new t(0);if(!r.isFinite())return e.isNegative()?r:r.isNegative()?new t(0):e;if(!e.isFinite())return r.isNegative()?e:e.isNegative()?new t(0):r}return G2(r,e,function(n,i){return n&i})}function ay(r){if(r.isFinite()&&!r.isInteger())throw new Error("Integer expected in function bitNot");var e=r.constructor,t=e.precision;e.config({precision:1e9});var n=r.plus(new e(1));return n.s=-n.s||null,e.config({precision:t}),n}function wH(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);var n=new t(-1);return r.isZero()||e.eq(n)||r.eq(e)?e:e.isZero()||r.eq(n)?r:!r.isFinite()||!e.isFinite()?!r.isFinite()&&!r.isNegative()&&e.isNegative()||r.isNegative()&&!e.isNegative()&&!e.isFinite()?n:r.isNegative()&&e.isNegative()?r.isFinite()?r:e:r.isFinite()?e:r:G2(r,e,function(i,a){return i|a})}function G2(r,e,t){var n=r.constructor,i,a,s=+(r.s<0),o=+(e.s<0);if(s){i=vx(ay(r));for(var c=0;c<i.length;++c)i[c]^=1}else i=vx(r);if(o){a=vx(ay(e));for(var u=0;u<a.length;++u)a[u]^=1}else a=vx(e);var h,d,m;i.length<=a.length?(h=i,d=a,m=s):(h=a,d=i,m=o);var v=h.length,x=d.length,b=t(s,o)^1,M=new n(b^1),_=new n(1),T=new n(2),E=n.precision;for(n.config({precision:1e9});v>0;)t(h[--v],d[--x])===b&&(M=M.plus(_)),_=_.times(T);for(;x>0;)t(m,d[--x])===b&&(M=M.plus(_)),_=_.times(T);return n.config({precision:E}),b===0&&(M.s=-M.s),M}function vx(r){for(var e=r.d,t=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",a=7-i.length;a--;)i="0"+i;t+=i}for(var s=t.length;t.charAt(s)==="0";)s--;var o=r.e,c=t.slice(0,s+1||1),u=c.length;if(o>0)if(++o>u)for(o-=u;o--;)c+="0";else o<u&&(c=c.slice(0,o)+"."+c.slice(o));for(var h=[0],d=0;d<c.length;){for(var m=h.length;m--;)h[m]*=10;h[0]+=parseInt(c.charAt(d++));for(var v=0;v<h.length;++v)h[v]>1&&((h[v+1]===null||h[v+1]===void 0)&&(h[v+1]=0),h[v+1]+=h[v]>>1,h[v]&=1)}return h.reverse()}function TH(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero())return e;if(e.isZero())return r;if(r.eq(e))return new t(0);var n=new t(-1);return r.eq(n)?ay(e):e.eq(n)?ay(r):!r.isFinite()||!e.isFinite()?!r.isFinite()&&!e.isFinite()?n:new t(r.isNegative()===e.isNegative()?1/0:-1/0):G2(r,e,function(i,a){return i^a})}function NH(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:!r.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?r.times(Math.pow(2,e.toNumber())+""):r.times(new t(2).pow(e))}function DH(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:e.isFinite()?e.lt(55)?r.div(Math.pow(2,e.toNumber())+"").floor():r.div(new t(2).pow(e)).floor():r.isNegative()?new t(-1):r.isFinite()?new t(0):new t(NaN)}var wD="bitAnd",CH=["typed","matrix","equalScalar","concat"],JU=de(wD,CH,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,a=fu({typed:e,equalScalar:n}),s=wS({typed:e,equalScalar:n}),o=Ya({typed:e,equalScalar:n}),c=$r({typed:e,matrix:t,concat:i});return e(wD,{"number, number":xU,"BigNumber, BigNumber":AH,"bigint, bigint":(u,h)=>u&h},c({SS:s,DS:a,Ss:o}))}),TD="bitNot",RH=["typed"],OH=de(TD,RH,r=>{var{typed:e}=r;return e(TD,{number:bU,BigNumber:ay,bigint:t=>~t,"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),ND="bitOr",BH=["typed","matrix","equalScalar","DenseMatrix","concat"],ez=de(ND,BH,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=Mh({typed:e}),o=V2({typed:e,equalScalar:n}),c=cp({typed:e,DenseMatrix:i}),u=$r({typed:e,matrix:t,concat:a});return e(ND,{"number, number":_U,"BigNumber, BigNumber":wH,"bigint, bigint":(h,d)=>h|d},u({SS:o,DS:s,Ss:c}))}),UH="matAlgo07xSSf",zH=["typed","SparseMatrix"],sc=de(UH,zH,r=>{var{typed:e,SparseMatrix:t}=r;return function(a,s,o){var c=a._size,u=a._datatype||a._data===void 0?a._datatype:a.getDataType(),h=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==h.length)throw new Un(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");var m=c[0],v=c[1],x,b=0,M=o;typeof u=="string"&&u===d&&u!=="mixed"&&(x=u,b=e.convert(0,x),M=e.find(o,[x,x]));for(var _=[],T=[],E=new Array(v+1).fill(0),A=[],D=[],N=[],O=[],z=0;z<v;z++){var C=z+1,R=0;n(a,z,N,A,C),n(s,z,O,D,C);for(var F=0;F<m;F++){var H=N[F]===C?A[F]:b,X=O[F]===C?D[F]:b,$=M(H,X);$!==0&&$!==!1&&(T.push(F),_.push($),R++)}E[z+1]=E[z]+R}return new t({values:_,index:T,ptr:E,size:[m,v],datatype:u===a._datatype&&d===s._datatype?x:void 0})};function n(i,a,s,o,c){for(var u=i._values,h=i._index,d=i._ptr,m=d[a],v=d[a+1];m<v;m++){var x=h[m];s[x]=c,o[x]=u[m]}}}),DD="bitXor",FH=["typed","matrix","DenseMatrix","concat","SparseMatrix"],LH=de(DD,FH,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i,SparseMatrix:a}=r,s=_s({typed:e}),o=sc({typed:e,SparseMatrix:a}),c=fa({typed:e,DenseMatrix:n}),u=$r({typed:e,matrix:t,concat:i});return e(DD,{"number, number":SU,"BigNumber, BigNumber":TH,"bigint, bigint":(h,d)=>h^d},u({SS:o,DS:s,Ss:c}))}),CD="arg",IH=["typed"],PH=de(CD,IH,r=>{var{typed:e}=r;return e(CD,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),RD="conj",HH=["typed"],VH=de(RD,HH,r=>{var{typed:e}=r;return e(RD,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),Unit:e.referToSelf(t=>n=>new n.constructor(t(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),OD="im",qH=["typed"],GH=de(OD,qH,r=>{var{typed:e}=r;return e(OD,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),BD="re",kH=["typed"],XH=de(BD,kH,r=>{var{typed:e}=r;return e(BD,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),UD="not",jH=["typed"],YH=de(UD,jH,r=>{var{typed:e}=r;return e(UD,{"null | undefined":()=>!0,number:TU,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:t=>!t,Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),zD="nullish",WH=["typed","matrix","size","flatten","deepEqual"],tz=de(zD,WH,r=>{var{typed:e,matrix:t,size:n,flatten:i,deepEqual:a}=r,s=_s({typed:e}),o=Ml({typed:e}),c=ZU({typed:e});return e(zD,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(u,h)=>u,"null, any":(u,h)=>h,"undefined, any":(u,h)=>h,"SparseMatrix, Array | Matrix":(u,h)=>{var d=n(u),m=n(h);if(a(d,m))return u;throw new Un(d,m)},"DenseMatrix, DenseMatrix":e.referToSelf(u=>(h,d)=>c(h,d,u)),"DenseMatrix, SparseMatrix":e.referToSelf(u=>(h,d)=>s(h,d,u,!1)),"DenseMatrix, Array":e.referToSelf(u=>(h,d)=>c(h,t(d),u)),"DenseMatrix, any":e.referToSelf(u=>(h,d)=>o(h,d,u,!1)),"Array, Array":e.referToSelf(u=>(h,d)=>c(t(h),t(d),u).valueOf()),"Array, DenseMatrix":e.referToSelf(u=>(h,d)=>c(t(h),d,u)),"Array, SparseMatrix":e.referToSelf(u=>(h,d)=>s(t(h),d,u,!1)),"Array, any":e.referToSelf(u=>(h,d)=>o(t(h),d,u,!1).valueOf())})}),FD="or",$H=["typed","matrix","equalScalar","DenseMatrix","concat"],nz=de(FD,$H,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=_s({typed:e}),o=AS({typed:e,equalScalar:n}),c=fa({typed:e,DenseMatrix:i}),u=$r({typed:e,matrix:t,concat:a});return e(FD,{"number, number":WA,"Complex, Complex":function(d,m){return d.re!==0||d.im!==0||m.re!==0||m.im!==0},"BigNumber, BigNumber":function(d,m){return!d.isZero()&&!d.isNaN()||!m.isZero()&&!m.isNaN()},"bigint, bigint":WA,"Unit, Unit":e.referToSelf(h=>(d,m)=>h(d.value||0,m.value||0))},u({SS:o,DS:s,Ss:c}))}),LD="xor",ZH=["typed","matrix","DenseMatrix","concat","SparseMatrix"],KH=de(LD,ZH,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i,SparseMatrix:a}=r,s=_s({typed:e}),o=sc({typed:e,SparseMatrix:a}),c=fa({typed:e,DenseMatrix:n}),u=$r({typed:e,matrix:t,concat:i});return e(LD,{"number, number":$A,"Complex, Complex":function(d,m){return(d.re!==0||d.im!==0)!=(m.re!==0||m.im!==0)},"bigint, bigint":$A,"BigNumber, BigNumber":function(d,m){return(!d.isZero()&&!d.isNaN())!=(!m.isZero()&&!m.isNaN())},"Unit, Unit":e.referToSelf(h=>(d,m)=>h(d.value||0,m.value||0))},u({SS:o,DS:s,Ss:c}))}),ID="concat",QH=["typed","matrix","isInteger"],rz=de(ID,QH,r=>{var{typed:e,matrix:t,isInteger:n}=r;return e(ID,{"...Array | Matrix | number | BigNumber":function(a){var s,o=a.length,c=-1,u,h=!1,d=[];for(s=0;s<o;s++){var m=a[s];if(rn(m)&&(h=!0),Qt(m)||wn(m)){if(s!==o-1)throw new Error("Dimension must be specified as last argument");if(u=c,c=m.valueOf(),!n(c))throw new TypeError("Integer number expected for dimension");if(c<0||s>0&&c>u)throw new uu(c,u+1)}else{var v=bn(m).valueOf(),x=_n(v);if(d[s]=v,u=c,c=x.length-1,s>0&&c!==u)throw new Un(u+1,c+1)}}if(d.length===0)throw new SyntaxError("At least one matrix expected");for(var b=d.shift();d.length;)b=nU(b,d.shift(),c);return h?t(b):b},"...string":function(a){return a.join("")}})}),PD="column",JH=["typed","Index","matrix","range"],iz=de(PD,JH,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(PD,{"Matrix, number":a,"Array, number":function(o,c){return a(n(bn(o)),c).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Yr(o,s.size()[1]);var c=i(0,s.size()[0]),u=new t(c,[o]),h=s.subset(u);return rn(h)?h:n([[h]])}}),HD="count",eV=["typed","size","prod"],tV=de(HD,eV,r=>{var{typed:e,size:t,prod:n}=r;return e(HD,{string:function(a){return a.length},"Matrix | Array":function(a){return n(t(a))}})}),VD="cross",nV=["typed","matrix","subtract","multiply"],rV=de(VD,nV,r=>{var{typed:e,matrix:t,subtract:n,multiply:i}=r;return e(VD,{"Matrix, Matrix":function(o,c){return t(a(o.toArray(),c.toArray()))},"Matrix, Array":function(o,c){return t(a(o.toArray(),c))},"Array, Matrix":function(o,c){return t(a(o,c.toArray()))},"Array, Array":a});function a(s,o){var c=Math.max(_n(s).length,_n(o).length);s=n_(s),o=n_(o);var u=_n(s),h=_n(o);if(u.length!==1||h.length!==1||u[0]!==3||h[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+h.join(", ")+"])");var d=[n(i(s[1],o[2]),i(s[2],o[1])),n(i(s[2],o[0]),i(s[0],o[2])),n(i(s[0],o[1]),i(s[1],o[0]))];return c>1?[d]:d}}),qD="diag",iV=["typed","matrix","DenseMatrix","SparseMatrix"],aV=de(qD,iV,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(qD,{Array:function(u){return a(u,0,_n(u),null)},"Array, number":function(u,h){return a(u,h,_n(u),null)},"Array, BigNumber":function(u,h){return a(u,h.toNumber(),_n(u),null)},"Array, string":function(u,h){return a(u,0,_n(u),h)},"Array, number, string":function(u,h,d){return a(u,h,_n(u),d)},"Array, BigNumber, string":function(u,h,d){return a(u,h.toNumber(),_n(u),d)},Matrix:function(u){return a(u,0,u.size(),u.storage())},"Matrix, number":function(u,h){return a(u,h,u.size(),u.storage())},"Matrix, BigNumber":function(u,h){return a(u,h.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,h){return a(u,0,u.size(),h)},"Matrix, number, string":function(u,h,d){return a(u,h,u.size(),d)},"Matrix, BigNumber, string":function(u,h,d){return a(u,h.toNumber(),u.size(),d)}});function a(c,u,h,d){if(!Xt(u))throw new TypeError("Second parameter in function diag must be an integer");var m=u>0?u:0,v=u<0?-u:0;switch(h.length){case 1:return s(c,u,d,h[0],v,m);case 2:return o(c,u,d,h,v,m)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(c,u,h,d,m,v){var x=[d+m,d+v];if(h&&h!=="sparse"&&h!=="dense")throw new TypeError("Unknown matrix type ".concat(h,'"'));var b=h==="sparse"?i.diagonal(x,c,u):n.diagonal(x,c,u);return h!==null?b:b.valueOf()}function o(c,u,h,d,m,v){if(rn(c)){var x=c.diagonal(u);return h!==null?h!==x.storage()?t(x,h):x:x.valueOf()}for(var b=Math.min(d[0]-m,d[1]-v),M=[],_=0;_<b;_++)M[_]=c[_+m][_+v];return h!==null?t(M):M}}),sV="filter",oV=["typed"],az=de(sV,oV,r=>{var{typed:e}=r;return e("filter",{"Array, function":GD,"Matrix, function":function(n,i){return n.create(GD(n.valueOf(),i),n.datatype())},"Array, RegExp":BN,"Matrix, RegExp":function(n,i){return n.create(BN(n.valueOf(),i),n.datatype())}})});function GD(r,e){var t=ip(e,r,"filter");return t.isUnary?ON(r,t.fn):ON(r,function(n,i,a){return t.fn(n,[i],a)})}var kD="flatten",lV=["typed"],uV=de(kD,lV,r=>{var{typed:e}=r;return e(kD,{Array:function(n){return mr(n)},DenseMatrix:function(n){return n.create(mr(n.valueOf(),!0),n.datatype())},SparseMatrix:function(n){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),t2="forEach",cV=["typed"],sz=de(t2,cV,r=>{var{typed:e}=r;return e(t2,{"Array, function":fV,"Matrix, function":function(n,i){n.forEach(i)}})});function fV(r,e){var t=ip(e,r,t2);iU(r,t.fn,t.isUnary)}var XD="getMatrixDataType",hV=["typed"],dV=de(XD,hV,r=>{var{typed:e}=r;return e(XD,{Array:function(n){return MS(n,Hr)},Matrix:function(n){return n.getDataType()}})}),jD="identity",pV=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],mV=de(jD,pV,r=>{var{typed:e,config:t,matrix:n,BigNumber:i,DenseMatrix:a,SparseMatrix:s}=r;return e(jD,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(h){return n(h)},"number | BigNumber":function(h){return c(h,h,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(h,d){return c(h,h,d)},"number | BigNumber, number | BigNumber":function(h,d){return c(h,d,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(h,d,m){return c(h,d,m)},Array:function(h){return o(h)},"Array, string":function(h,d){return o(h,d)},Matrix:function(h){return o(h.valueOf(),h.storage())},"Matrix, string":function(h,d){return o(h.valueOf(),d)}});function o(u,h){switch(u.length){case 0:return h?n(h):[];case 1:return c(u[0],u[0],h);case 2:return c(u[0],u[1],h);default:throw new Error("Vector containing two values expected")}}function c(u,h,d){var m=wn(u)||wn(h)?i:null;if(wn(u)&&(u=u.toNumber()),wn(h)&&(h=h.toNumber()),!Xt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!Xt(h)||h<1)throw new Error("Parameters in function identity must be positive integers");var v=m?new i(1):1,x=m?new m(0):0,b=[u,h];if(d){if(d==="sparse")return s.diagonal(b,v,0,x);if(d==="dense")return a.diagonal(b,v,0,x);throw new TypeError('Unknown matrix type "'.concat(d,'"'))}for(var M=gv([],b,x),_=u<h?u:h,T=0;T<_;T++)M[T][T]=v;return M}}),YD="kron",vV=["typed","matrix","multiplyScalar"],gV=de(YD,vV,r=>{var{typed:e,matrix:t,multiplyScalar:n}=r;return e(YD,{"Matrix, Matrix":function(o,c){return t(a(o.toArray(),c.toArray()))},"Matrix, Array":function(o,c){return t(a(o.toArray(),c))},"Array, Matrix":function(o,c){return t(a(o,c.toArray()))},"Array, Array":a});function i(s,o){return s.flatMap(c=>o.map(u=>n(c,u)))}function a(s,o){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(c<0){var u=_n(s).length,h=_n(o).length;for(c=Math.max(u,h);u++<c;)s=[s];for(;h++<c;)o=[o]}return c===1?i(s,o):s.flatMap(d=>o.map(m=>a(d,m,c-1)))}}),mE="map",yV=["typed"],oz=de(mE,yV,r=>{var{typed:e}=r;return e(mE,{"Array, function":o,"Matrix, function":function(u,h){return u.map(h)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(c,u,h)=>t([c,u,...h.slice(0,h.length-1)],h[h.length-1])});function t(c,u){if(typeof u!="function")throw new Error("Last argument must be a callback function");var h=c[0].isMatrix,d=c.map(D=>D.isMatrix?D.size():_n(D)),m=i_(...d),v=c.length,x=h?(D,N)=>D.get(N):a_,b=c.map((D,N)=>{var O=d[N].map(()=>0);return D.isMatrix?D.get(O):a_(D,O)}),M=e.isTypedFunction(u)?s(u,b,m.map(()=>0),c):a(u,v);if(M<2){var _=i(M,u,null);return n(c,_)}var T=h?c.map(D=>D.isMatrix?D.create(jd(D.toArray(),m),D.datatype()):c[0].create(jd(D.valueOf(),m))):c.map(D=>D.isMatrix?jd(D.toArray(),m):jd(D,m)),E=i(M,u,T),A=(D,N)=>E([D,...T.slice(1).map(O=>x(O,N))],N);return h?T[0].map(A):o(T[0],A)}function n(c,u){var h=c[0],d=c.map(D=>D.isMatrix?D.valueOf():D),m=c.map(D=>D.isMatrix?D.size():_n(D)),v=i_(...m),x=m.map(D=>v.length-D.length),b=v.length-1,M=u.length>1,_=M?[]:null,T=A(d,0);if(h.isMatrix){var E=h.create();return E._data=T,E._size=v,E}else return T;function A(D){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=v[N],z=Array(O);if(N<b)for(var C=function($){_&&(_[N]=$),z[$]=A(D.map((Y,I)=>x[I]>N?Y:Y.length===1?Y[0]:Y[$]),N+1)},R=0;R<O;R++)C(R);else for(var F=function($){_&&(_[N]=$),z[$]=u(D.map(Y=>Y.length===1?Y[0]:Y[$]),_?_.slice():void 0)},H=0;H<O;H++)F(H);return z}}function i(c,u,h){switch(c){case 0:return d=>u(...d);case 1:return(d,m)=>u(...d,m);case 2:return(d,m)=>u(...d,m,...h)}}function a(c,u){var h=c.toString();if(/arguments/.test(h))return 2;var d=h.match(/\(.*?\)/);return/\.\.\./.test(d)||c.length>u+1?2:c.length===u+1?1:0}function s(c,u,h,d){return e.resolve(c,[...u,h,...d])!==null?2:e.resolve(c,[...u,h])!==null?1:(e.resolve(c,u)!==null,0)}function o(c,u){var h=ip(u,c,mE);return XA(c,h.fn,h.isUnary)}}),WD="diff",xV=["typed","matrix","subtract","number"],lz=de(WD,xV,r=>{var{typed:e,matrix:t,subtract:n,number:i}=r;return e(WD,{"Array | Matrix":function(h){return rn(h)?t(s(h.toArray())):s(h)},"Array | Matrix, number":function(h,d){if(!Xt(d))throw new RangeError("Dimension must be a whole number");return rn(h)?t(a(h.toArray(),d)):a(h,d)},"Array, BigNumber":e.referTo("Array,number",u=>(h,d)=>u(h,i(d))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(h,d)=>u(h,i(d)))});function a(u,h){if(rn(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(h>0){var d=[];return u.forEach(m=>{d.push(a(m,h-1))}),d}else{if(h===0)return s(u);throw RangeError("Cannot have negative dimension")}}function s(u){for(var h=[],d=u.length,m=1;m<d;m++)h.push(o(u[m-1],u[m]));return h}function o(u,h){rn(u)&&(u=u.toArray()),rn(h)&&(h=h.toArray());var d=Array.isArray(u),m=Array.isArray(h);if(d&&m)return c(u,h);if(!d&&!m)return n(h,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function c(u,h){if(u.length!==h.length)throw RangeError("Not all sub-arrays have the same length");for(var d=[],m=u.length,v=0;v<m;v++)d.push(o(u[v],h[v]));return d}}),bV="ones",_V=["typed","config","matrix","BigNumber"],SV=de(bV,_V,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e("ones",{"":function(){return t.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(u){var h=u[u.length-1];if(typeof h=="string"){var d=u.pop();return a(u,d)}else return t.matrix==="Array"?a(u):a(u,"default")},Array:a,Matrix:function(u){var h=u.storage();return a(u.valueOf(),h)},"Array | Matrix, string":function(u,h){return a(u.valueOf(),h)}});function a(c,u){var h=s(c),d=h?new i(1):1;if(o(c),u){var m=n(u);return c.length>0?m.resize(c,d):m}else{var v=[];return c.length>0?gv(v,c,d):v}}function s(c){var u=!1;return c.forEach(function(h,d,m){wn(h)&&(u=!0,m[d]=h.toNumber())}),u}function o(c){c.forEach(function(u){if(typeof u!="number"||!Xt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function k2(){throw new Error('No "bignumber" implementation available')}function uz(){throw new Error('No "fraction" implementation available')}function MV(){throw new Error('No "matrix" implementation available')}var $D="range",EV=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],cz=de($D,EV,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:c,add:u,isZero:h,isPositive:d}=r;return e($D,{string:v,"string, boolean":v,number:function(_){throw new TypeError("Too few arguments to function range(): ".concat(_))},boolean:function(_){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(_,", number|bigint|BigNumber|Fraction"))},"number, number":function(_,T){return m(x(_,T,1,!1))},"number, number, number":function(_,T,E){return m(x(_,T,E,!1))},"number, number, boolean":function(_,T,E){return m(x(_,T,1,E))},"number, number, number, boolean":function(_,T,E,A){return m(x(_,T,E,A))},"bigint, bigint|number":function(_,T){return m(x(_,T,1n,!1))},"number, bigint":function(_,T){return m(x(BigInt(_),T,1n,!1))},"bigint, bigint|number, bigint|number":function(_,T,E){return m(x(_,T,BigInt(E),!1))},"number, bigint, bigint|number":function(_,T,E){return m(x(BigInt(_),T,BigInt(E),!1))},"bigint, bigint|number, boolean":function(_,T,E){return m(x(_,T,1n,E))},"number, bigint, boolean":function(_,T,E){return m(x(BigInt(_),T,1n,E))},"bigint, bigint|number, bigint|number, boolean":function(_,T,E,A){return m(x(_,T,BigInt(E),A))},"number, bigint, bigint|number, boolean":function(_,T,E,A){return m(x(BigInt(_),T,BigInt(E),A))},"BigNumber, BigNumber":function(_,T){var E=_.constructor;return m(x(_,T,new E(1),!1))},"BigNumber, BigNumber, BigNumber":function(_,T,E){return m(x(_,T,E,!1))},"BigNumber, BigNumber, boolean":function(_,T,E){var A=_.constructor;return m(x(_,T,new A(1),E))},"BigNumber, BigNumber, BigNumber, boolean":function(_,T,E,A){return m(x(_,T,E,A))},"Fraction, Fraction":function(_,T){return m(x(_,T,1,!1))},"Fraction, Fraction, Fraction":function(_,T,E){return m(x(_,T,E,!1))},"Fraction, Fraction, boolean":function(_,T,E){return m(x(_,T,1,E))},"Fraction, Fraction, Fraction, boolean":function(_,T,E,A){return m(x(_,T,E,A))},"Unit, Unit, Unit":function(_,T,E){return m(x(_,T,E,!1))},"Unit, Unit, Unit, boolean":function(_,T,E,A){return m(x(_,T,E,A))}});function m(M){return t.matrix==="Matrix"?n?n(M):MV():M}function v(M,_){var T=b(M);if(!T)throw new SyntaxError('String "'+M+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&k2(),m(x(i(T.start),i(T.end),i(T.step)))):m(x(T.start,T.end,T.step,_))}function x(M,_,T,E){var A=[];if(h(T))throw new Error("Step must be non-zero");for(var D=d(T)?E?s:a:E?c:o,N=M;D(N,_);)A.push(N),N=u(N,T);return A}function b(M){var _=M.split(":"),T=_.map(function(A){return Number(A)}),E=T.some(function(A){return isNaN(A)});if(E)return null;switch(T.length){case 2:return{start:T[0],end:T[1],step:1};case 3:return{start:T[0],end:T[2],step:T[1]};default:return null}}}),ZD="reshape",AV=["typed","isInteger","matrix"],wV=de(ZD,AV,r=>{var{typed:e,isInteger:t}=r;return e(ZD,{"Matrix, Array":function(i,a){return i.reshape(a,!0)},"Array, Array":function(i,a){return a.forEach(function(s){if(!t(s))throw new TypeError("Invalid size for dimension: "+s)}),L2(i,a)}})}),TV="resize",NV=["config","matrix"],DV=de(TV,NV,r=>{var{config:e,matrix:t}=r;return function(a,s,o){if(arguments.length!==2&&arguments.length!==3)throw new fp("resize",arguments.length,2,3);if(rn(s)&&(s=s.valueOf()),wn(s[0])&&(s=s.map(function(h){return wn(h)?h.toNumber():h})),rn(a))return a.resize(s,o,!0);if(typeof a=="string")return n(a,s,o);var c=Array.isArray(a)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(a);)a=a[0];return bn(a)}else{Array.isArray(a)||(a=[a]),a=bn(a);var u=gv(a,s,o);return c?t(u):u}};function n(i,a,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(a.length!==1)throw new Un(a.length,1);var o=a[0];if(typeof o!="number"||!Xt(o))throw new TypeError("Invalid size, must contain positive integers (size: "+Fn(a)+")");if(i.length>o)return i.substring(0,o);if(i.length<o){for(var c=i,u=0,h=o-i.length;u<h;u++)c+=s;return c}else return i}}),KD="rotate",CV=["typed","multiply","rotationMatrix"],RV=de(KD,CV,r=>{var{typed:e,multiply:t,rotationMatrix:n}=r;return e(KD,{"Array , number | BigNumber | Complex | Unit":function(s,o){i(s,2);var c=t(n(o),s);return c.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,o){return i(s,2),t(n(o),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,c){i(s,3);var u=t(n(o,c),s);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,c){return i(s,3),t(n(o,c),s)}});function i(a,s){var o=Array.isArray(a)?_n(a):a.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),QD="rotationMatrix",OV=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],BV=de(QD,OV,r=>{var{typed:e,config:t,multiplyScalar:n,addScalar:i,unaryMinus:a,norm:s,BigNumber:o,matrix:c,DenseMatrix:u,SparseMatrix:h,cos:d,sin:m}=r;return e(QD,{"":function(){return t.matrix==="Matrix"?c([]):[]},string:function(E){return c(E)},"number | BigNumber | Complex | Unit":function(E){return v(E,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(E,A){return v(E,A)},"number | BigNumber | Complex | Unit, Array":function(E,A){var D=c(A);return x(D),_(E,D,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(E,A){x(A);var D=A.storage()||(t.matrix==="Matrix"?"dense":void 0);return _(E,A,D)},"number | BigNumber | Complex | Unit, Array, string":function(E,A,D){var N=c(A);return x(N),_(E,N,D)},"number | BigNumber | Complex | Unit, Matrix, string":function(E,A,D){return x(A),_(E,A,D)}});function v(T,E){var A=wn(T),D=A?new o(-1):-1,N=d(T),O=m(T),z=[[N,n(D,O)],[O,N]];return M(z,E)}function x(T){var E=T.size();if(E.length<1||E[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function b(T){return T.reduce((E,A)=>n(E,A))}function M(T,E){if(E){if(E==="sparse")return new h(T);if(E==="dense")return new u(T);throw new TypeError('Unknown matrix type "'.concat(E,'"'))}return T}function _(T,E,A){var D=s(E);if(D===0)throw new RangeError("Rotation around zero vector");var N=wn(T)?o:null,O=N?new N(1):1,z=N?new N(-1):-1,C=N?new N(E.get([0])/D):E.get([0])/D,R=N?new N(E.get([1])/D):E.get([1])/D,F=N?new N(E.get([2])/D):E.get([2])/D,H=d(T),X=i(O,a(H)),$=m(T),Y=i(H,b([C,C,X])),I=i(b([C,R,X]),b([z,F,$])),Z=i(b([C,F,X]),b([R,$])),W=i(b([C,R,X]),b([F,$])),te=i(H,b([R,R,X])),le=i(b([R,F,X]),b([z,C,$])),Q=i(b([C,F,X]),b([z,R,$])),k=i(b([R,F,X]),b([C,$])),ae=i(H,b([F,F,X])),J=[[Y,I,Z],[W,te,le],[Q,k,ae]];return M(J,A)}}),JD="row",UV=["typed","Index","matrix","range"],fz=de(JD,UV,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(JD,{"Matrix, number":a,"Array, number":function(o,c){return a(n(bn(o)),c).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Yr(o,s.size()[0]);var c=i(0,s.size()[1]),u=new t([o],c),h=s.subset(u);return rn(h)?h:n([[h]])}}),eC="size",zV=["typed"],FV=de(eC,zV,r=>{var{typed:e}=r;return e(eC,{Matrix:t=>t.size(),Array:_n,string:t=>[t.length],"number | Complex | BigNumber | Unit | boolean | null":t=>[]})}),tC="squeeze",LV=["typed"],IV=de(tC,LV,r=>{var{typed:e}=r;return e(tC,{Array:function(n){return n_(bn(n))},Matrix:function(n){var i=n_(n.toArray());return Array.isArray(i)?n.create(i,n.datatype()):i},any:function(n){return bn(n)}})}),nC="subset",PV=["typed","matrix","zeros","add"],hz=de(nC,PV,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r;return e(nC,{"Matrix, Index":function(o,c){return vv(c)?t():(t_(o,c),o.subset(c))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(o,c){var u=s(t(o),c);return c.isScalar()?u:u.valueOf()}}),"Object, Index":VV,"string, Index":HV,"Matrix, Index, any, any":function(o,c,u,h){return vv(c)?o:(t_(o,c),o.clone().subset(c,a(u,c),h))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,c,u,h){var d=s(t(o),c,u,h);return d.isMatrix?d.valueOf():d}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,c,u){return s(t(o),c,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,c,u){return s(o,c,u,void 0)}}),"string, Index, string":rC,"string, Index, string, string":rC,"Object, Index, any":qV});function a(s,o){if(typeof s=="string")throw new Error("can't boradcast a string");if(o.isScalar())return s;var c=o.size();if(c.every(u=>u>0))try{return i(s,n(c))}catch{return s}else return s}});function HV(r,e){if(!vS(e))throw new TypeError("Index expected");if(vv(e))return"";if(t_(Array.from(r),e),e.size().length!==1)throw new Un(e.size().length,1);var t=r.length;Yr(e.min()[0],t),Yr(e.max()[0],t);var n=e.dimension(0),i="";function a(s){i+=r.charAt(s)}return Number.isInteger(n)?a(n):n.forEach(a),i}function rC(r,e,t,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(vv(e))return r;if(t_(Array.from(r),e),e.size().length!==1)throw new Un(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),a=Number.isInteger(i)?1:i.size()[0];if(a!==t.length)throw new Un(i.size()[0],t.length);var s=r.length;Yr(e.min()[0]),Yr(e.max()[0]);for(var o=[],c=0;c<s;c++)o[c]=r.charAt(c);function u(m,v){o[m]=t.charAt(v[0])}if(Number.isInteger(i)?u(i,[0]):i.forEach(u),o.length>s)for(var h=s-1,d=o.length;h<d;h++)o[h]||(o[h]=n);return o.join("")}function VV(r,e){if(!vv(e)){if(e.size().length!==1)throw new Un(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return Ys(r,t)}}function qV(r,e,t){if(vv(e))return r;if(e.size().length!==1)throw new Un(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=bn(r);return pv(i,n,t),i}var iC="transpose",GV=["typed","matrix"],kV=de(iC,GV,r=>{var{typed:e,matrix:t}=r;return e(iC,{Array:s=>n(t(s)).valueOf(),Matrix:n,any:bn});function n(s){var o=s.size(),c;switch(o.length){case 1:c=s.clone();break;case 2:{var u=o[0],h=o[1];if(h===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Fn(o)+")");switch(s.storage()){case"dense":c=i(s,u,h);break;case"sparse":c=a(s,u,h);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Fn(o)+")")}return c}function i(s,o,c){for(var u=s._data,h=[],d,m=0;m<c;m++){d=h[m]=[];for(var v=0;v<o;v++)d[v]=bn(u[v][m])}return s.createDenseMatrix({data:h,size:[c,o],datatype:s._datatype})}function a(s,o,c){for(var u=s._values,h=s._index,d=s._ptr,m=u?[]:void 0,v=[],x=[],b=[],M=0;M<o;M++)b[M]=0;var _,T,E;for(_=0,T=h.length;_<T;_++)b[h[_]]++;for(var A=0,D=0;D<o;D++)x.push(A),A+=b[D],b[D]=x[D];for(x.push(A),E=0;E<c;E++)for(var N=d[E],O=d[E+1],z=N;z<O;z++){var C=b[h[z]]++;v[C]=E,u&&(m[C]=bn(u[z]))}return s.createSparseMatrix({values:m,index:v,ptr:x,size:[c,o],datatype:s._datatype})}}),aC="ctranspose",XV=["typed","transpose","conj"],jV=de(aC,XV,r=>{var{typed:e,transpose:t,conj:n}=r;return e(aC,{any:function(a){return n(t(a))}})}),sC="zeros",YV=["typed","config","matrix","BigNumber"],WV=de(sC,YV,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(sC,{"":function(){return t.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(u){var h=u[u.length-1];if(typeof h=="string"){var d=u.pop();return a(u,d)}else return t.matrix==="Array"?a(u):a(u,"default")},Array:a,Matrix:function(u){var h=u.storage();return a(u.valueOf(),h)},"Array | Matrix, string":function(u,h){return a(u.valueOf(),h)}});function a(c,u){var h=s(c),d=h?new i(0):0;if(o(c),u){var m=n(u);return c.length>0?m.resize(c,d):m}else{var v=[];return c.length>0?gv(v,c,d):v}}function s(c){var u=!1;return c.forEach(function(h,d,m){wn(h)&&(u=!0,m[d]=h.toNumber())}),u}function o(c){c.forEach(function(u){if(typeof u!="number"||!Xt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),oC="fft",$V=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],ZV=de(oC,$V,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,divideScalar:a,exp:s,tau:o,i:c,dotDivide:u,conj:h,pow:d,ceil:m,log2:v}=r;return e(oC,{Array:x,Matrix:function(E){return E.create(x(E.valueOf()),E.datatype())}});function x(T){var E=_n(T);return E.length===1?_(T,E[0]):b(T.map(A=>x(A,E.slice(1))),0)}function b(T,E){var A=_n(T);if(E!==0)return new Array(A[0]).fill(0).map((N,O)=>b(T[O],E-1));if(A.length===1)return _(T);function D(N){var O=_n(N);return new Array(O[1]).fill(0).map((z,C)=>new Array(O[0]).fill(0).map((R,F)=>N[F][C]))}return D(b(D(T),1))}function M(T){for(var E=T.length,A=s(a(i(-1,i(c,o)),E)),D=[],N=1-E;N<E;N++)D.push(d(A,a(d(N,2),2)));for(var O=d(2,m(v(E+E-1))),z=[...new Array(E).fill(0).map((I,Z)=>i(T[Z],D[E-1+Z])),...new Array(O-E).fill(0)],C=[...new Array(E+E-1).fill(0).map((I,Z)=>a(1,D[Z])),...new Array(O-(E+E-1)).fill(0)],R=_(z),F=_(C),H=new Array(O).fill(0).map((I,Z)=>i(R[Z],F[Z])),X=u(h(x(h(H))),O),$=[],Y=E-1;Y<E+E-1;Y++)$.push(i(X[Y],D[Y]));return $}function _(T){var E=T.length;if(E===1)return[T[0]];if(E%2===0){for(var A=[..._(T.filter((z,C)=>C%2===0)),..._(T.filter((z,C)=>C%2===1))],D=0;D<E/2;D++){var N=A[D],O=i(A[D+E/2],s(i(i(o,c),a(-D,E))));A[D]=n(N,O),A[D+E/2]=n(N,i(-1,O))}return A}else return M(T)}}),lC="ifft",KV=["typed","fft","dotDivide","conj"],QV=de(lC,KV,r=>{var{typed:e,fft:t,dotDivide:n,conj:i}=r;return e(lC,{"Array | Matrix":function(s){var o=rn(s)?s.size():_n(s);return n(i(t(i(s))),o.reduce((c,u)=>c*u,1))}})});function sy(r){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sy(r)}function JV(r,e){if(sy(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(sy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function eq(r){var e=JV(r,"string");return sy(e)=="symbol"?e:e+""}function $i(r,e,t){return(e=eq(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function uC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function tq(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uC(Object(t),!0).forEach(function(n){$i(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):uC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var nq="solveODE",rq=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],iq=de(nq,rq,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,max:s,map:o,abs:c,isPositive:u,isNegative:h,larger:d,smaller:m,matrix:v,bignumber:x,unaryMinus:b}=r;function M(z){return function(C,R,F,H){var X=!(R.length===2&&(R.every(N)||R.every(Lo)));if(X)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var $=R[0],Y=R[1],I=d(Y,$),Z=H.firstStep;if(Z!==void 0&&!u(Z))throw new Error('"firstStep" must be positive');var W=H.maxStep;if(W!==void 0&&!u(W))throw new Error('"maxStep" must be positive');var te=H.minStep;if(te&&h(te))throw new Error('"minStep" must be positive or zero');var le=[$,Y,Z,te,W].filter(q=>q!==void 0);if(!(le.every(N)||le.every(Lo)))throw new Error('Inconsistent type of "t" dependant variables');for(var Q=1,k=H.tol?H.tol:1e-4,ae=H.minDelta?H.minDelta:.2,J=H.maxDelta?H.maxDelta:5,De=H.maxIter?H.maxIter:1e4,pe=[$,Y,...F,W,te].some(wn),[_e,ne,ue,ge]=pe?[x(z.a),x(z.c),x(z.b),x(z.bp)]:[z.a,z.c,z.b,z.bp],Ae=Z?I?Z:b(Z):a(n(Y,$),Q),Te=[$],se=[F],Me=n(ue,ge),Be=0,Le=0,Pe=A(I),Ye=D(I);Pe(Te[Be],Y);){var Ze=[];Ae=Ye(Te[Be],Y,Ae),Ze.push(C(Te[Be],se[Be]));for(var re=1;re<ne.length;++re)Ze.push(C(t(Te[Be],i(ne[re],Ae)),t(se[Be],i(Ae,_e[re],Ze))));var be=s(c(o(i(Me,Ze),q=>Lo(q)?q.value:q)));be<k&&k/be>1/4&&(Te.push(t(Te[Be],Ae)),se.push(t(se[Be],i(Ae,ue,Ze))),Be++);var Ce=.84*(k/be)**(1/5);if(m(Ce,ae)?Ce=ae:d(Ce,J)&&(Ce=J),Ce=pe?x(Ce):Ce,Ae=i(Ae,Ce),W&&d(c(Ae),W)?Ae=I?W:b(W):te&&m(c(Ae),te)&&(Ae=I?te:b(te)),Le++,Le>De)throw new Error("Maximum number of iterations reached, try changing options")}return{t:Te,y:se}}}function _(z,C,R,F){var H=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],X=[null,1/2,3/4,1],$=[2/9,1/3,4/9,0],Y=[7/24,1/4,1/3,1/8],I={a:H,c:X,b:$,bp:Y};return M(I)(z,C,R,F)}function T(z,C,R,F){var H=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],X=[null,1/5,3/10,4/5,8/9,1,1],$=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],Y=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],I={a:H,c:X,b:$,bp:Y};return M(I)(z,C,R,F)}function E(z,C,R,F){var H=F.method?F.method:"RK45",X={RK23:_,RK45:T};if(H.toUpperCase()in X){var $=tq({},F);return delete $.method,X[H.toUpperCase()](z,C,R,$)}else{var Y=Object.keys(X).map(Z=>'"'.concat(Z,'"')),I="".concat(Y.slice(0,-1).join(", ")," and ").concat(Y.slice(-1));throw new Error('Unavailable method "'.concat(H,'". Available methods are ').concat(I))}}function A(z){return z?m:d}function D(z){var C=z?d:m;return function(R,F,H){var X=t(R,H);return C(X,F)?n(F,R):H}}function N(z){return wn(z)||Qt(z)}function O(z,C,R,F){var H=E(z,C.toArray(),R.toArray(),F);return{t:v(H.t),y:v(H.y)}}return e("solveODE",{"function, Array, Array, Object":E,"function, Matrix, Matrix, Object":O,"function, Array, Array":(z,C,R)=>E(z,C,R,{}),"function, Matrix, Matrix":(z,C,R)=>O(z,C,R,{}),"function, Array, number | BigNumber | Unit":(z,C,R)=>{var F=E(z,C,[R],{});return{t:F.t,y:F.y.map(H=>H[0])}},"function, Matrix, number | BigNumber | Unit":(z,C,R)=>{var F=E(z,C.toArray(),[R],{});return{t:v(F.t),y:v(F.y.map(H=>H[0]))}},"function, Array, number | BigNumber | Unit, Object":(z,C,R,F)=>{var H=E(z,C,[R],F);return{t:H.t,y:H.y.map(X=>X[0])}},"function, Matrix, number | BigNumber | Unit, Object":(z,C,R,F)=>{var H=E(z,C.toArray(),[R],F);return{t:v(H.t),y:v(H.y.map(X=>X[0]))}}})}),aq="erf",sq=["typed"],oq=de(aq,sq,r=>{var{typed:e}=r;return e("name",{number:function(s){var o=Math.abs(s);return o>=cq?uh(s):o<=lq?uh(s)*t(o):o<=4?uh(s)*(1-n(o)):uh(s)*(1-i(o))},"Array | Matrix":e.referToSelf(a=>s=>Tn(s,a))});function t(a){var s=a*a,o=Lc[0][4]*s,c=s,u;for(u=0;u<3;u+=1)o=(o+Lc[0][u])*s,c=(c+Tm[0][u])*s;return a*(o+Lc[0][3])/(c+Tm[0][3])}function n(a){var s=Lc[1][8]*a,o=a,c;for(c=0;c<7;c+=1)s=(s+Lc[1][c])*a,o=(o+Tm[1][c])*a;var u=(s+Lc[1][7])/(o+Tm[1][7]),h=parseInt(a*16)/16,d=(a-h)*(a+h);return Math.exp(-h*h)*Math.exp(-d)*u}function i(a){var s=1/(a*a),o=Lc[2][5]*s,c=s,u;for(u=0;u<4;u+=1)o=(o+Lc[2][u])*s,c=(c+Tm[2][u])*s;var h=s*(o+Lc[2][4])/(c+Tm[2][4]);h=(uq-h)/a,s=parseInt(a*16)/16;var d=(a-s)*(a+s);return Math.exp(-s*s)*Math.exp(-d)*h}}),lq=.46875,uq=.5641895835477563,Lc=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Tm=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],cq=Math.pow(2,53),cC="zeta",fq=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],hq=de(cC,fq,r=>{var{typed:e,config:t,multiply:n,pow:i,divide:a,factorial:s,equal:o,smallerEq:c,isNegative:u,gamma:h,sin:d,subtract:m,add:v,Complex:x,BigNumber:b,pi:M}=r;return e(cC,{number:N=>_(N,O=>O,()=>20),BigNumber:N=>_(N,O=>new b(O),()=>Math.abs(Math.log10(t.relTol))),Complex:T});function _(N,O,z){return o(N,0)?O(-.5):o(N,1)?O(NaN):isFinite(N)?E(N,O,z,C=>C):u(N)?O(NaN):O(1)}function T(N){return N.re===0&&N.im===0?new x(-.5):N.re===1?new x(NaN,NaN):N.re===1/0&&N.im===0?new x(1):N.im===1/0||N.re===-1/0?new x(NaN,NaN):E(N,O=>O,O=>Math.round(1.3*15+.9*Math.abs(O.im)),O=>O.re)}function E(N,O,z,C){var R=z(N);if(C(N)>-(R-1)/2)return D(N,O(R),O);var F=n(i(2,N),i(O(M),m(N,1)));return F=n(F,d(n(a(O(M),2),N))),F=n(F,h(m(1,N))),n(F,E(m(1,N),O,z,C))}function A(N,O){for(var z=N,C=N;c(C,O);C=v(C,1)){var R=a(n(s(v(O,m(C,1))),i(4,C)),n(s(m(O,C)),s(n(2,C))));z=v(z,R)}return n(O,z)}function D(N,O,z){for(var C=a(1,n(A(z(0),O),m(1,i(2,m(1,N))))),R=z(0),F=z(1);c(F,O);F=v(F,1))R=v(R,a(n((-1)**(F-1),A(F,O)),i(F,N)));return n(C,R)}}),fC="mode",dq=["typed","isNaN","isNumeric"],pq=de(fC,dq,r=>{var{typed:e,isNaN:t,isNumeric:n}=r;return e(fC,{"Array | Matrix":i,"...":function(s){return i(s)}});function i(a){a=mr(a.valueOf());var s=a.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},c=[],u=0,h=0;h<a.length;h++){var d=a[h];if(n(d)&&t(d))throw new Error("Cannot calculate mode of an array containing NaN values");d in o||(o[d]=0),o[d]++,o[d]===u?c.push(d):o[d]>u&&(u=o[d],c=[d])}return c}});function Zs(r,e,t){var n;return String(r).includes("Unexpected type")?(n=arguments.length>2?" (type: "+Hr(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).includes("complex numbers")?(n=arguments.length>2?" (type: "+Hr(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var hC="prod",mq=["typed","config","multiplyScalar","numeric"],vq=de(hC,mq,r=>{var{typed:e,config:t,multiplyScalar:n,numeric:i}=r;return e(hC,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(o,c){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return a(o)}});function a(s){var o;if(gh(s,function(c){try{o=o===void 0?c:n(o,c)}catch(u){throw Zs(u,"prod",c)}}),typeof o=="string"&&(o=i(o,_h(o,t))),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),dC="format",gq=["typed"],yq=de(dC,gq,r=>{var{typed:e}=r;return e(dC,{any:Fn,"any, Object | function | number | BigNumber":Fn})}),pC="bin",xq=["typed","format"],bq=de(pC,xq,r=>{var{typed:e,format:t}=r;return e(pC,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,a){return t(i,{notation:"bin",wordSize:a})}})}),mC="oct",_q=["typed","format"],Sq=de(mC,_q,r=>{var{typed:e,format:t}=r;return e(mC,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,a){return t(i,{notation:"oct",wordSize:a})}})}),vC="hex",Mq=["typed","format"],Eq=de(vC,Mq,r=>{var{typed:e,format:t}=r;return e(vC,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,a){return t(i,{notation:"hex",wordSize:a})}})}),dz=/\$([\w.]+)/g,gC="print",Aq=["typed"],pz=de(gC,Aq,r=>{var{typed:e}=r;return e(gC,{"string, Object | Array":yC,"string, Object | Array, number | Object":yC})});function yC(r,e,t){return r.replace(dz,function(n,i){var a=i.split("."),s=e[a.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());a.length&&s!==void 0;){var o=a.shift();s=o?s[o]:s+"."}return s!==void 0?Ti(s)?s:Fn(s,t):n})}var xC="to",wq=["typed","matrix","concat"],Tq=de(xC,wq,r=>{var{typed:e,matrix:t,concat:n}=r,i=$r({typed:e,matrix:t,concat:n});return e(xC,{"Unit, Unit | string":(a,s)=>a.to(s)},i({Ds:!0}))}),bC="toBest",Nq=["typed"],Dq=de(bC,Nq,r=>{var{typed:e}=r;return e(bC,{Unit:t=>t.toBest(),"Unit, string":(t,n)=>t.toBest(n.split(",")),"Unit, string, Object":(t,n,i)=>t.toBest(n.split(","),i),"Unit, Array":(t,n)=>t.toBest(n),"Unit, Array, Object":(t,n,i)=>t.toBest(n,i)})}),_C="isPrime",Cq=["typed"],Rq=de(_C,Cq,r=>{var{typed:e}=r;return e(_C,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var i=5n;i*i<=n;i+=6n)if(n%i===0n||n%(i+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),a=5;a*a<=i;a+=6)if(i%a===0||i%(a+2)===0)return!1;return!0}function s(T,E,A){for(var D=1;!E.eq(0);)E.mod(2).eq(0)?(E=E.div(2),T=T.mul(T).mod(A)):(E=E.sub(1),D=T.mul(D).mod(A));return D}var o=n.constructor.clone({precision:n.toFixed(0).length*2});n=new o(n);for(var c=0,u=n.sub(1);u.mod(2).eq(0);)u=u.div(2),c+=1;var h=null;if(n.lt("3317044064679887385961981"))h=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(T=>T<n);else{var d=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));h=[];for(var m=2;m<=d;m+=1)h.push(d)}for(var v=0;v<h.length;v+=1){var x=h[v],b=s(n.sub(n).add(x),u,n);if(!b.eq(1)){for(var M=0,_=b;!_.eq(n.sub(1));M+=1,_=_.mul(_).mod(n))if(M===c-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>n=>Tn(n,t))})}),Oq="numeric",Bq=["number","?bignumber","?fraction"],Uq=de(Oq,Bq,r=>{var{number:e,bignumber:t,fraction:n}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:s=>e(s),BigNumber:t?s=>t(s):k2,bigint:s=>BigInt(s),Fraction:n?s=>n(s):uz};return function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var h=Hr(o);if(!(h in i))throw new TypeError("Cannot convert "+o+' of type "'+h+'"; valid input types are '+Object.keys(i).join(", "));if(!(c in a))throw new TypeError("Cannot convert "+o+' to type "'+c+'"; valid output types are '+Object.keys(a).join(", "));return c===h?o:a[c](o)}}),SC="divideScalar",zq=["typed","numeric"],Fq=de(SC,zq,r=>{var{typed:e,numeric:t}=r;return e(SC,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"bigint, bigint":function(i,a){return i/a},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),MC="pow",Lq=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Iq=de(MC,Lq,r=>{var{typed:e,config:t,identity:n,multiply:i,matrix:a,inv:s,number:o,fraction:c,Complex:u}=r;return e(MC,{"number, number":h,"Complex, Complex":function(x,b){return x.pow(b)},"BigNumber, BigNumber":function(x,b){return b.isInteger()||x>=0||t.predictable?x.pow(b):new u(x.toNumber(),0).pow(b.toNumber(),0)},"bigint, bigint":(v,x)=>v**x,"Fraction, Fraction":function(x,b){var M=x.pow(b);if(M!=null)return M;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return h(x.valueOf(),b.valueOf())},"Array, number":d,"Array, BigNumber":function(x,b){return d(x,b.toNumber())},"Matrix, number":m,"Matrix, BigNumber":function(x,b){return m(x,b.toNumber())},"Unit, number | BigNumber":function(x,b){return x.pow(b)}});function h(v,x){if(t.predictable&&!Xt(x)&&v<0)try{var b=c(x),M=o(b);if((x===M||Math.abs((x-M)/x)<1e-14)&&b.d%2n===1n)return(b.n%2n===0n?1:-1)*Math.pow(-v,x)}catch{}return t.predictable&&(v<-1&&x===1/0||v>-1&&v<0&&x===-1/0)?NaN:Xt(x)||v>=0||t.predictable?yU(v,x):v*v<1&&x===1/0||v*v>1&&x===-1/0?0:new u(v,0).pow(x,0)}function d(v,x){if(!Xt(x))throw new TypeError("For A^b, b must be an integer (value is "+x+")");var b=_n(v);if(b.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+b.length+" dimensions)");if(b[0]!==b[1])throw new Error("For A^b, A must be square (size is "+b[0]+"x"+b[1]+")");if(x<0)try{return d(s(v),-x)}catch(T){throw T.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+x+")"):T}for(var M=n(b[0]).valueOf(),_=v;x>=1;)(x&1)===1&&(M=i(_,M)),x>>=1,_=i(_,_);return M}function m(v,x){return a(d(v.valueOf(),x))}}),Nm="Number of decimals in function round must be an integer",EC="round",Pq=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],Hq=de(EC,Pq,r=>{var{typed:e,config:t,matrix:n,equalScalar:i,zeros:a,BigNumber:s,DenseMatrix:o}=r,c=Ya({typed:e,equalScalar:i}),u=fa({typed:e,DenseMatrix:o}),h=Ml({typed:e});function d(m){return Math.abs(Cy(m).exponent)}return e(EC,{number:function(v){var x=M0(v,d(t.relTol)),b=Ca(v,x,t.relTol,t.absTol)?x:v;return M0(b)},"number, number":function(v,x){var b=d(t.relTol);if(x>=b)return M0(v,x);var M=M0(v,b),_=Ca(v,M,t.relTol,t.absTol)?M:v;return M0(_,x)},"number, BigNumber":function(v,x){if(!x.isInteger())throw new TypeError(Nm);return new s(v).toDecimalPlaces(x.toNumber())},Complex:function(v){return v.round()},"Complex, number":function(v,x){if(x%1)throw new TypeError(Nm);return v.round(x)},"Complex, BigNumber":function(v,x){if(!x.isInteger())throw new TypeError(Nm);var b=x.toNumber();return v.round(b)},BigNumber:function(v){var x=new s(v).toDecimalPlaces(d(t.relTol)),b=_l(v,x,t.relTol,t.absTol)?x:v;return b.toDecimalPlaces(0)},"BigNumber, BigNumber":function(v,x){if(!x.isInteger())throw new TypeError(Nm);var b=d(t.relTol);if(x>=b)return v.toDecimalPlaces(x.toNumber());var M=v.toDecimalPlaces(b),_=_l(v,M,t.relTol,t.absTol)?M:v;return _.toDecimalPlaces(x.toNumber())},bigint:m=>m,"bigint, number":(m,v)=>m,"bigint, BigNumber":(m,v)=>m,Fraction:function(v){return v.round()},"Fraction, number":function(v,x){if(x%1)throw new TypeError(Nm);return v.round(x)},"Fraction, BigNumber":function(v,x){if(!x.isInteger())throw new TypeError(Nm);return v.round(x.toNumber())},"Unit, number, Unit":e.referToSelf(m=>function(v,x,b){var M=v.toNumeric(b);return b.multiply(m(M,x))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(v,x,b)=>m(v,x.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(m=>(v,x,b)=>Tn(v,M=>m(M,x,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(m=>(v,x)=>m(v,0,x)),"Array | Matrix":e.referToSelf(m=>v=>Tn(v,m,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(v,x)=>c(v,x,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(v,x)=>h(v,x,m,!1)),"Array, number | BigNumber":e.referToSelf(m=>(v,x)=>h(n(v),x,m,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(m=>(v,x)=>i(v,0)?a(x.size(),x.storage()):u(x,v,m,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(m=>(v,x)=>i(v,0)?a(x.size(),x.storage()):h(x,v,m,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(m=>(v,x)=>h(n(x),v,m,!0).valueOf())})}),AC="log",Vq=["config","typed","typeOf","divideScalar","Complex"],qq=Math.log(16),Gq=de(AC,Vq,r=>{var{typed:e,typeOf:t,config:n,divideScalar:i,Complex:a}=r;function s(c){return c.log()}function o(c){return s(new a(c,0))}return e(AC,{number:function(u){return u>=0||n.predictable?PN(u):o(u)},bigint:q2(qq,PN,n,o),Complex:s,BigNumber:function(u){return!u.isNegative()||n.predictable?u.ln():o(u.toNumber())},"any, any":e.referToSelf(c=>(u,h)=>{if(t(u)==="Fraction"&&t(h)==="Fraction"){var d=u.log(h);if(d!==null)return d}return i(c(u),c(h))})})}),wC="log1p",kq=["typed","config","divideScalar","log","Complex"],Xq=de(wC,kq,r=>{var{typed:e,config:t,divideScalar:n,log:i,Complex:a}=r;return e(wC,{number:function(c){return c>=-1||t.predictable?IP(c):s(new a(c,0))},Complex:s,BigNumber:function(c){var u=c.plus(1);return!u.isNegative()||t.predictable?u.ln():s(new a(c.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>c=>Tn(c,o)),"any, any":e.referToSelf(o=>(c,u)=>n(o(c),i(u)))});function s(o){var c=o.re+1;return new a(Math.log(Math.sqrt(c*c+o.im*o.im)),Math.atan2(o.im,c))}}),TC="nthRoots",jq=["config","typed","divideScalar","Complex"],Yq=de(TC,jq,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r,a=[function(c){return new i(c,0)},function(c){return new i(0,c)},function(c){return new i(-c,0)},function(c){return new i(0,-c)}];function s(o,c){if(c<0)throw new Error("Root must be greater than zero");if(c===0)throw new Error("Root must be non-zero");if(c%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new i(0,0)];var u=typeof o=="number",h;(u||o.re===0||o.im===0)&&(u?h=2*+(o<0):o.im===0?h=2*+(o.re<0):h=2*+(o.im<0)+1);for(var d=o.arg(),m=o.abs(),v=[],x=Math.pow(m,1/c),b=0;b<c;b++){var M=(h+4*b)/c;if(M===Math.round(M)){v.push(a[M%4](x));continue}v.push(new i({r:x,phi:(d+2*Math.PI*b)/c}))}return v}return e(TC,{Complex:function(c){return s(c,2)},"Complex, number":s})}),NC="dotPow",Wq=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],$q=de(NC,Wq,r=>{var{typed:e,equalScalar:t,matrix:n,pow:i,DenseMatrix:a,concat:s,SparseMatrix:o}=r,c=_s({typed:e}),u=sc({typed:e,SparseMatrix:o}),h=Ya({typed:e,equalScalar:t}),d=fa({typed:e,DenseMatrix:a}),m=$r({typed:e,matrix:n,concat:s}),v={};for(var x in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,x)&&!x.includes("Matrix")&&!x.includes("Array")&&(v[x]=i.signatures[x]);var b=e(v);return e(NC,m({elop:b,SS:u,DS:c,Ss:h,sS:d}))}),DC="dotDivide",Zq=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],Kq=de(DC,Zq,r=>{var{typed:e,matrix:t,equalScalar:n,divideScalar:i,DenseMatrix:a,concat:s,SparseMatrix:o}=r,c=fu({typed:e,equalScalar:n}),u=_s({typed:e}),h=sc({typed:e,SparseMatrix:o}),d=Ya({typed:e,equalScalar:n}),m=fa({typed:e,DenseMatrix:a}),v=$r({typed:e,matrix:t,concat:s});return e(DC,v({elop:i,SS:h,DS:u,SD:c,Ss:d,sS:m}))});function Ry(r){var{DenseMatrix:e}=r;return function(n,i,a){var s=n.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Fn(s)+")");var o=s[0],c=s[1];if(o!==c)throw new RangeError("Matrix must be square (size: "+Fn(s)+")");var u=[];if(rn(i)){var h=i.size(),d=i._data;if(h.length===1){if(h[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var m=0;m<o;m++)u[m]=[d[m]];return new e({data:u,size:[o,1],datatype:i._datatype})}if(h.length===2){if(h[0]!==o||h[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Zb(i)){if(a){u=[];for(var v=0;v<o;v++)u[v]=[d[v][0]];return new e({data:u,size:[o,1],datatype:i._datatype})}return i}if(Xd(i)){for(var x=0;x<o;x++)u[x]=[0];for(var b=i._values,M=i._index,_=i._ptr,T=_[1],E=_[0];E<T;E++){var A=M[E];u[A][0]=b[E]}return new e({data:u,size:[o,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Ir(i)){var D=_n(i);if(D.length===1){if(D[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var N=0;N<o;N++)u[N]=[i[N]];return new e({data:u,size:[o,1]})}if(D.length===2){if(D[0]!==o||D[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var O=0;O<o;O++)u[O]=[i[O][0]];return new e({data:u,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var CC="lsolve",Qq=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Jq=de(CC,Qq,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=r,c=Ry({DenseMatrix:o});return e(CC,{"SparseMatrix, Array | Matrix":function(m,v){return h(m,v)},"DenseMatrix, Array | Matrix":function(m,v){return u(m,v)},"Array, Array | Matrix":function(m,v){var x=t(m),b=u(x,v);return b.valueOf()}});function u(d,m){m=c(d,m,!0);for(var v=m._data,x=d._size[0],b=d._size[1],M=[],_=d._data,T=0;T<b;T++){var E=v[T][0]||0,A=void 0;if(s(E,0))A=0;else{var D=_[T][T];if(s(D,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(E,D);for(var N=T+1;N<x;N++)v[N]=[a(v[N][0]||0,i(A,_[N][T]))]}M[T]=[A]}return new o({data:M,size:[x,1]})}function h(d,m){m=c(d,m,!0);for(var v=m._data,x=d._size[0],b=d._size[1],M=d._values,_=d._index,T=d._ptr,E=[],A=0;A<b;A++){var D=v[A][0]||0;if(s(D,0))E[A]=[0];else{for(var N=0,O=[],z=[],C=T[A],R=T[A+1],F=C;F<R;F++){var H=_[F];H===A?N=M[F]:H>A&&(O.push(M[F]),z.push(H))}if(s(N,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var X=n(D,N),$=0,Y=z.length;$<Y;$++){var I=z[$];v[I]=[a(v[I][0]||0,i(X,O[$]))]}E[A]=[X]}}return new o({data:E,size:[x,1]})}}),RC="usolve",eG=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],tG=de(RC,eG,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=r,c=Ry({DenseMatrix:o});return e(RC,{"SparseMatrix, Array | Matrix":function(m,v){return h(m,v)},"DenseMatrix, Array | Matrix":function(m,v){return u(m,v)},"Array, Array | Matrix":function(m,v){var x=t(m),b=u(x,v);return b.valueOf()}});function u(d,m){m=c(d,m,!0);for(var v=m._data,x=d._size[0],b=d._size[1],M=[],_=d._data,T=b-1;T>=0;T--){var E=v[T][0]||0,A=void 0;if(s(E,0))A=0;else{var D=_[T][T];if(s(D,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(E,D);for(var N=T-1;N>=0;N--)v[N]=[a(v[N][0]||0,i(A,_[N][T]))]}M[T]=[A]}return new o({data:M,size:[x,1]})}function h(d,m){m=c(d,m,!0);for(var v=m._data,x=d._size[0],b=d._size[1],M=d._values,_=d._index,T=d._ptr,E=[],A=b-1;A>=0;A--){var D=v[A][0]||0;if(s(D,0))E[A]=[0];else{for(var N=0,O=[],z=[],C=T[A],R=T[A+1],F=R-1;F>=C;F--){var H=_[F];H===A?N=M[F]:H<A&&(O.push(M[F]),z.push(H))}if(s(N,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var X=n(D,N),$=0,Y=z.length;$<Y;$++){var I=z[$];v[I]=[a(v[I][0],i(X,O[$]))]}E[A]=[X]}}return new o({data:E,size:[x,1]})}}),OC="lsolveAll",nG=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],rG=de(OC,nG,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=r,c=Ry({DenseMatrix:o});return e(OC,{"SparseMatrix, Array | Matrix":function(m,v){return h(m,v)},"DenseMatrix, Array | Matrix":function(m,v){return u(m,v)},"Array, Array | Matrix":function(m,v){var x=t(m),b=u(x,v);return b.map(M=>M.valueOf())}});function u(d,m){for(var v=[c(d,m,!0)._data.map(z=>z[0])],x=d._data,b=d._size[0],M=d._size[1],_=0;_<M;_++)for(var T=v.length,E=0;E<T;E++){var A=v[E];if(s(x[_][_],0))if(s(A[_],0)){if(E===0){var N=[...A];N[_]=1;for(var O=_+1;O<M;O++)N[O]=a(N[O],x[O][_]);v.push(N)}}else{if(E===0)return[];v.splice(E,1),E-=1,T-=1}else{A[_]=n(A[_],x[_][_]);for(var D=_+1;D<M;D++)A[D]=a(A[D],i(A[_],x[D][_]))}}return v.map(z=>new o({data:z.map(C=>[C]),size:[b,1]}))}function h(d,m){for(var v=[c(d,m,!0)._data.map(Q=>Q[0])],x=d._size[0],b=d._size[1],M=d._values,_=d._index,T=d._ptr,E=0;E<b;E++)for(var A=v.length,D=0;D<A;D++){for(var N=v[D],O=[],z=[],C=T[E],R=T[E+1],F=0,H=C;H<R;H++){var X=_[H];X===E?F=M[H]:X>E&&(O.push(M[H]),z.push(X))}if(s(F,0))if(s(N[E],0)){if(D===0){var Z=[...N];Z[E]=1;for(var W=0,te=z.length;W<te;W++){var le=z[W];Z[le]=a(Z[le],O[W])}v.push(Z)}}else{if(D===0)return[];v.splice(D,1),D-=1,A-=1}else{N[E]=n(N[E],F);for(var $=0,Y=z.length;$<Y;$++){var I=z[$];N[I]=a(N[I],i(N[E],O[$]))}}}return v.map(Q=>new o({data:Q.map(k=>[k]),size:[x,1]}))}}),BC="usolveAll",iG=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],aG=de(BC,iG,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=r,c=Ry({DenseMatrix:o});return e(BC,{"SparseMatrix, Array | Matrix":function(m,v){return h(m,v)},"DenseMatrix, Array | Matrix":function(m,v){return u(m,v)},"Array, Array | Matrix":function(m,v){var x=t(m),b=u(x,v);return b.map(M=>M.valueOf())}});function u(d,m){for(var v=[c(d,m,!0)._data.map(z=>z[0])],x=d._data,b=d._size[0],M=d._size[1],_=M-1;_>=0;_--)for(var T=v.length,E=0;E<T;E++){var A=v[E];if(s(x[_][_],0))if(s(A[_],0)){if(E===0){var N=[...A];N[_]=1;for(var O=_-1;O>=0;O--)N[O]=a(N[O],x[O][_]);v.push(N)}}else{if(E===0)return[];v.splice(E,1),E-=1,T-=1}else{A[_]=n(A[_],x[_][_]);for(var D=_-1;D>=0;D--)A[D]=a(A[D],i(A[_],x[D][_]))}}return v.map(z=>new o({data:z.map(C=>[C]),size:[b,1]}))}function h(d,m){for(var v=[c(d,m,!0)._data.map(Q=>Q[0])],x=d._size[0],b=d._size[1],M=d._values,_=d._index,T=d._ptr,E=b-1;E>=0;E--)for(var A=v.length,D=0;D<A;D++){for(var N=v[D],O=[],z=[],C=T[E],R=T[E+1],F=0,H=R-1;H>=C;H--){var X=_[H];X===E?F=M[H]:X<E&&(O.push(M[H]),z.push(X))}if(s(F,0))if(s(N[E],0)){if(D===0){var Z=[...N];Z[E]=1;for(var W=0,te=z.length;W<te;W++){var le=z[W];Z[le]=a(Z[le],O[W])}v.push(Z)}}else{if(D===0)return[];v.splice(D,1),D-=1,A-=1}else{N[E]=n(N[E],F);for(var $=0,Y=z.length;$<Y;$++){var I=z[$];N[I]=a(N[I],i(N[E],O[$]))}}}return v.map(Q=>new o({data:Q.map(k=>[k]),size:[x,1]}))}}),sG="matAlgo08xS0Sid",oG=["typed","equalScalar"],X2=de(sG,oG,r=>{var{typed:e,equalScalar:t}=r;return function(i,a,s){var o=i._values,c=i._index,u=i._ptr,h=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType(),m=a._values,v=a._index,x=a._ptr,b=a._size,M=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(h.length!==b.length)throw new Un(h.length,b.length);if(h[0]!==b[0]||h[1]!==b[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+b+")");if(!o||!m)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var _=h[0],T=h[1],E,A=t,D=0,N=s;typeof d=="string"&&d===M&&d!=="mixed"&&(E=d,A=e.find(t,[E,E]),D=e.convert(0,E),N=e.find(s,[E,E]));for(var O=[],z=[],C=[],R=[],F=[],H,X,$,Y,I=0;I<T;I++){C[I]=z.length;var Z=I+1;for(X=u[I],$=u[I+1],H=X;H<$;H++)Y=c[H],F[Y]=Z,R[Y]=o[H],z.push(Y);for(X=x[I],$=x[I+1],H=X;H<$;H++)Y=v[H],F[Y]===Z&&(R[Y]=N(R[Y],m[H]));for(H=C[I];H<z.length;){Y=z[H];var W=R[Y];A(W,D)?z.splice(H,1):(O.push(W),H++)}}return C[T]=z.length,i.createSparseMatrix({values:O,index:z,ptr:C,size:[_,T],datatype:d===i._datatype&&M===a._datatype?E:void 0})}}),j2=de("useMatrixForArrayScalar",["typed","matrix"],r=>{var{typed:e,matrix:t}=r;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,a)=>n(t(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,a)=>n(t(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,a)=>n(i,t(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,a)=>n(i,t(a)).valueOf())}}),UC="leftShift",lG=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],uG=de(UC,lG,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=r,o=Mh({typed:e}),c=fu({typed:e,equalScalar:n}),u=X2({typed:e,equalScalar:n}),h=cp({typed:e,DenseMatrix:a}),d=Ya({typed:e,equalScalar:n}),m=Ml({typed:e}),v=$r({typed:e,matrix:t,concat:s}),x=j2({typed:e,matrix:t});return e(UC,{"number, number":MU,"BigNumber, BigNumber":NH,"bigint, bigint":(b,M)=>b<<M,"SparseMatrix, number | BigNumber":e.referToSelf(b=>(M,_)=>n(_,0)?M.clone():d(M,_,b,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(b=>(M,_)=>n(_,0)?M.clone():m(M,_,b,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(b=>(M,_)=>n(M,0)?i(_.size(),_.storage()):h(_,M,b,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(b=>(M,_)=>n(M,0)?i(_.size(),_.storage()):m(_,M,b,!0))},x,v({SS:u,DS:o,SD:c}))}),zC="rightArithShift",cG=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],fG=de(zC,cG,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=r,o=Mh({typed:e}),c=fu({typed:e,equalScalar:n}),u=X2({typed:e,equalScalar:n}),h=cp({typed:e,DenseMatrix:a}),d=Ya({typed:e,equalScalar:n}),m=Ml({typed:e}),v=$r({typed:e,matrix:t,concat:s}),x=j2({typed:e,matrix:t});return e(zC,{"number, number":EU,"BigNumber, BigNumber":DH,"bigint, bigint":(b,M)=>b>>M,"SparseMatrix, number | BigNumber":e.referToSelf(b=>(M,_)=>n(_,0)?M.clone():d(M,_,b,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(b=>(M,_)=>n(_,0)?M.clone():m(M,_,b,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(b=>(M,_)=>n(M,0)?i(_.size(),_.storage()):h(_,M,b,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(b=>(M,_)=>n(M,0)?i(_.size(),_.storage()):m(_,M,b,!0))},x,v({SS:u,DS:o,SD:c}))}),FC="rightLogShift",hG=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],dG=de(FC,hG,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:a,concat:s}=r,o=Mh({typed:e}),c=fu({typed:e,equalScalar:n}),u=X2({typed:e,equalScalar:n}),h=cp({typed:e,DenseMatrix:a}),d=Ya({typed:e,equalScalar:n}),m=Ml({typed:e}),v=$r({typed:e,matrix:t,concat:s}),x=j2({typed:e,matrix:t});return e(FC,{"number, number":AU,"SparseMatrix, number | BigNumber":e.referToSelf(b=>(M,_)=>n(_,0)?M.clone():d(M,_,b,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(b=>(M,_)=>n(_,0)?M.clone():m(M,_,b,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(b=>(M,_)=>n(M,0)?i(_.size(),_.storage()):h(_,M,b,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(b=>(M,_)=>n(M,0)?i(_.size(),_.storage()):m(_,M,b,!0))},x,v({SS:u,DS:o,SD:c}))}),LC="and",pG=["typed","matrix","equalScalar","zeros","not","concat"],mz=de(LC,pG,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s}=r,o=fu({typed:e,equalScalar:n}),c=wS({typed:e,equalScalar:n}),u=Ya({typed:e,equalScalar:n}),h=Ml({typed:e}),d=$r({typed:e,matrix:t,concat:s});return e(LC,{"number, number":ZA,"Complex, Complex":function(v,x){return(v.re!==0||v.im!==0)&&(x.re!==0||x.im!==0)},"BigNumber, BigNumber":function(v,x){return!v.isZero()&&!x.isZero()&&!v.isNaN()&&!x.isNaN()},"bigint, bigint":ZA,"Unit, Unit":e.referToSelf(m=>(v,x)=>m(v.value||0,x.value||0)),"SparseMatrix, any":e.referToSelf(m=>(v,x)=>a(x)?i(v.size(),v.storage()):u(v,x,m,!1)),"DenseMatrix, any":e.referToSelf(m=>(v,x)=>a(x)?i(v.size(),v.storage()):h(v,x,m,!1)),"any, SparseMatrix":e.referToSelf(m=>(v,x)=>a(v)?i(v.size(),v.storage()):u(x,v,m,!0)),"any, DenseMatrix":e.referToSelf(m=>(v,x)=>a(v)?i(v.size(),v.storage()):h(x,v,m,!0)),"Array, any":e.referToSelf(m=>(v,x)=>m(t(v),x).valueOf()),"any, Array":e.referToSelf(m=>(v,x)=>m(v,t(x)).valueOf())},d({SS:c,DS:o}))}),h_="compare",mG=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],vG=de(h_,mG,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,BigNumber:a,Fraction:s,DenseMatrix:o,concat:c}=r,u=_s({typed:e}),h=AS({typed:e,equalScalar:n}),d=fa({typed:e,DenseMatrix:o}),m=$r({typed:e,matrix:i,concat:c}),v=Pv({typed:e});return e(h_,gG({typed:e,config:t}),{"boolean, boolean":function(b,M){return b===M?0:b>M?1:-1},"BigNumber, BigNumber":function(b,M){return _l(b,M,t.relTol,t.absTol)?new a(0):new a(b.cmp(M))},"bigint, bigint":function(b,M){return b===M?0n:b>M?1n:-1n},"Fraction, Fraction":function(b,M){return new s(b.compare(M))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},v,m({SS:h,DS:u,Ss:d}))}),gG=de(h_,["typed","config"],r=>{var{typed:e,config:t}=r;return e(h_,{"number, number":function(i,a){return Ca(i,a,t.relTol,t.absTol)?0:i>a?1:-1}})}),vE,IC;function yG(){return IC||(IC=1,vE=function r(e,t){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,c=function(E){return r.insensitive&&(""+E).toLowerCase()||""+E},u=c(e).replace(i,"")||"",h=c(t).replace(i,"")||"",d=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=h.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),v=parseInt(u.match(s),16)||d.length!==1&&u.match(a)&&Date.parse(u),x=parseInt(h.match(s),16)||v&&h.match(a)&&Date.parse(h)||null,b,M;if(x){if(v<x)return-1;if(v>x)return 1}for(var _=0,T=Math.max(d.length,m.length);_<T;_++){if(b=!(d[_]||"").match(o)&&parseFloat(d[_])||d[_]||0,M=!(m[_]||"").match(o)&&parseFloat(m[_])||m[_]||0,isNaN(b)!==isNaN(M))return isNaN(b)?1:-1;if(typeof b!=typeof M&&(b+="",M+=""),b<M)return-1;if(b>M)return 1}return 0}),vE}var xG=yG();const Dm=up(xG);var PC="compareNatural",bG=["typed","compare"],_G=de(PC,bG,r=>{var{typed:e,compare:t}=r,n=t.signatures["boolean,boolean"];return e(PC,{"any, any":i});function i(c,u){var h=Hr(c),d=Hr(u),m;if((h==="number"||h==="BigNumber"||h==="Fraction")&&(d==="number"||d==="BigNumber"||d==="Fraction"))return m=t(c,u),m.toString()!=="0"?m>0?1:-1:Dm(h,d);var v=["Array","DenseMatrix","SparseMatrix"];if(v.includes(h)||v.includes(d))return m=a(i,c,u),m!==0?m:Dm(h,d);if(h!==d)return Dm(h,d);if(h==="Complex")return SG(c,u);if(h==="Unit")return c.equalBase(u)?i(c.value,u.value):s(i,c.formatUnits(),u.formatUnits());if(h==="boolean")return n(c,u);if(h==="string")return Dm(c,u);if(h==="Object")return o(i,c,u);if(h==="null"||h==="undefined")return 0;throw new TypeError('Unsupported type of value "'+h+'"')}function a(c,u,h){return Xd(u)&&Xd(h)?s(c,u.toJSON().values,h.toJSON().values):Xd(u)?a(c,u.toArray(),h):Xd(h)?a(c,u,h.toArray()):Zb(u)?a(c,u.toJSON().data,h):Zb(h)?a(c,u,h.toJSON().data):Array.isArray(u)?Array.isArray(h)?s(c,u,h):a(c,u,[h]):a(c,[u],h)}function s(c,u,h){for(var d=0,m=Math.min(u.length,h.length);d<m;d++){var v=c(u[d],h[d]);if(v!==0)return v}return u.length>h.length?1:u.length<h.length?-1:0}function o(c,u,h){var d=Object.keys(u),m=Object.keys(h);d.sort(Dm),m.sort(Dm);var v=s(c,d,m);if(v!==0)return v;for(var x=0;x<d.length;x++){var b=c(u[d[x]],h[m[x]]);if(b!==0)return b}return 0}});function SG(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0}var HC="compareText",MG=["typed","matrix","concat"];GA.signature="any, any";var EG=de(HC,MG,r=>{var{typed:e,matrix:t,concat:n}=r,i=$r({typed:e,matrix:t,concat:n});return e(HC,GA,i({elop:GA,Ds:!0}))}),d_="equal",AG=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],wG=de(d_,AG,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a,SparseMatrix:s}=r,o=_s({typed:e}),c=sc({typed:e,SparseMatrix:s}),u=fa({typed:e,DenseMatrix:i}),h=$r({typed:e,matrix:t,concat:a});return e(d_,TG({typed:e,equalScalar:n}),h({elop:n,SS:c,DS:o,Ss:u}))}),TG=de(d_,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(d_,{"any, any":function(i,a){return i===null?a===null:a===null?i===null:i===void 0?a===void 0:a===void 0?i===void 0:t(i,a)}})}),VC="equalText",NG=["typed","compareText","isZero"],DG=de(VC,NG,r=>{var{typed:e,compareText:t,isZero:n}=r;return e(VC,{"any, any":function(a,s){return n(t(a,s))}})}),p_="smaller",CG=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],RG=de(p_,CG,r=>{var{typed:e,config:t,bignumber:n,matrix:i,DenseMatrix:a,concat:s,SparseMatrix:o}=r,c=_s({typed:e}),u=sc({typed:e,SparseMatrix:o}),h=fa({typed:e,DenseMatrix:a}),d=$r({typed:e,matrix:i,concat:s}),m=Pv({typed:e});function v(x,b){return x.lt(b)&&!_l(x,b,t.relTol,t.absTol)}return e(p_,OG({typed:e,config:t}),{"boolean, boolean":(x,b)=>x<b,"BigNumber, BigNumber":v,"bigint, bigint":(x,b)=>x<b,"Fraction, Fraction":(x,b)=>x.compare(b)===-1,"Fraction, BigNumber":function(b,M){return v(n(b),M)},"BigNumber, Fraction":function(b,M){return v(b,n(M))},"Complex, Complex":function(b,M){throw new TypeError("No ordering relation is defined for complex numbers")}},m,d({SS:u,DS:c,Ss:h}))}),OG=de(p_,["typed","config"],r=>{var{typed:e,config:t}=r;return e(p_,{"number, number":function(i,a){return i<a&&!Ca(i,a,t.relTol,t.absTol)}})}),m_="smallerEq",BG=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],UG=de(m_,BG,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a,SparseMatrix:s}=r,o=_s({typed:e}),c=sc({typed:e,SparseMatrix:s}),u=fa({typed:e,DenseMatrix:i}),h=$r({typed:e,matrix:n,concat:a}),d=Pv({typed:e});return e(m_,zG({typed:e,config:t}),{"boolean, boolean":(m,v)=>m<=v,"BigNumber, BigNumber":function(v,x){return v.lte(x)||_l(v,x,t.relTol,t.absTol)},"bigint, bigint":(m,v)=>m<=v,"Fraction, Fraction":(m,v)=>m.compare(v)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:c,DS:o,Ss:u}))}),zG=de(m_,["typed","config"],r=>{var{typed:e,config:t}=r;return e(m_,{"number, number":function(i,a){return i<=a||Ca(i,a,t.relTol,t.absTol)}})}),v_="larger",FG=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],LG=de(v_,FG,r=>{var{typed:e,config:t,bignumber:n,matrix:i,DenseMatrix:a,concat:s,SparseMatrix:o}=r,c=_s({typed:e}),u=sc({typed:e,SparseMatrix:o}),h=fa({typed:e,DenseMatrix:a}),d=$r({typed:e,matrix:i,concat:s}),m=Pv({typed:e});function v(x,b){return x.gt(b)&&!_l(x,b,t.relTol,t.absTol)}return e(v_,IG({typed:e,config:t}),{"boolean, boolean":(x,b)=>x>b,"BigNumber, BigNumber":v,"bigint, bigint":(x,b)=>x>b,"Fraction, Fraction":(x,b)=>x.compare(b)===1,"Fraction, BigNumber":function(b,M){return v(n(b),M)},"BigNumber, Fraction":function(b,M){return v(b,n(M))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},m,d({SS:u,DS:c,Ss:h}))}),IG=de(v_,["typed","config"],r=>{var{typed:e,config:t}=r;return e(v_,{"number, number":function(i,a){return i>a&&!Ca(i,a,t.relTol,t.absTol)}})}),g_="largerEq",PG=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],HG=de(g_,PG,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:a,SparseMatrix:s}=r,o=_s({typed:e}),c=sc({typed:e,SparseMatrix:s}),u=fa({typed:e,DenseMatrix:i}),h=$r({typed:e,matrix:n,concat:a}),d=Pv({typed:e});return e(g_,VG({typed:e,config:t}),{"boolean, boolean":(m,v)=>m>=v,"BigNumber, BigNumber":function(v,x){return v.gte(x)||_l(v,x,t.relTol,t.absTol)},"bigint, bigint":function(v,x){return v>=x},"Fraction, Fraction":(m,v)=>m.compare(v)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:c,DS:o,Ss:u}))}),VG=de(g_,["typed","config"],r=>{var{typed:e,config:t}=r;return e(g_,{"number, number":function(i,a){return i>=a||Ca(i,a,t.relTol,t.absTol)}})}),qC="deepEqual",qG=["typed","equal"],GG=de(qC,qG,r=>{var{typed:e,equal:t}=r;return e(qC,{"any, any":function(a,s){return n(a.valueOf(),s.valueOf())}});function n(i,a){if(Array.isArray(i))if(Array.isArray(a)){var s=i.length;if(s!==a.length)return!1;for(var o=0;o<s;o++)if(!n(i[o],a[o]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:t(i,a)}}),y_="unequal",kG=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],XG=de(y_,kG,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,DenseMatrix:a,concat:s,SparseMatrix:o}=r,c=_s({typed:e}),u=sc({typed:e,SparseMatrix:o}),h=fa({typed:e,DenseMatrix:a}),d=$r({typed:e,matrix:i,concat:s});return e(y_,jG({typed:e,equalScalar:n}),d({elop:m,SS:u,DS:c,Ss:h}));function m(v,x){return!n(v,x)}}),jG=de(y_,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(y_,{"any, any":function(i,a){return i===null?a!==null:a===null?i!==null:i===void 0?a!==void 0:a===void 0?i!==void 0:!t(i,a)}})}),GC="partitionSelect",YG=["typed","isNumeric","isNaN","compare"],WG=de(GC,YG,r=>{var{typed:e,isNumeric:t,isNaN:n,compare:i}=r,a=i,s=(u,h)=>-i(u,h);return e(GC,{"Array | Matrix, number":function(h,d){return o(h,d,a)},"Array | Matrix, number, string":function(h,d,m){if(m==="asc")return o(h,d,a);if(m==="desc")return o(h,d,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(u,h,d){if(!Xt(h)||h<0)throw new Error("k must be a non-negative integer");if(rn(u)){var m=u.size();if(m.length>1)throw new Error("Only one dimensional matrices supported");return c(u.valueOf(),h,d)}if(Array.isArray(u))return c(u,h,d)}function c(u,h,d){if(h>=u.length)throw new Error("k out of bounds");for(var m=0;m<u.length;m++)if(t(u[m])&&n(u[m]))return u[m];for(var v=0,x=u.length-1;v<x;){for(var b=v,M=x,_=u[Math.floor(Math.random()*(x-v+1))+v];b<M;)if(d(u[b],_)>=0){var T=u[M];u[M]=u[b],u[b]=T,--M}else++b;d(u[b],_)>0&&--b,h<=b?x=b:v=b+1}return u[h]}}),kC="sort",$G=["typed","matrix","compare","compareNatural"],ZG=de(kC,$G,r=>{var{typed:e,matrix:t,compare:n,compareNatural:i}=r,a=n,s=(h,d)=>-n(h,d);return e(kC,{Array:function(d){return c(d),d.sort(a)},Matrix:function(d){return u(d),t(d.toArray().sort(a),d.storage())},"Array, function":function(d,m){return c(d),d.sort(m)},"Matrix, function":function(d,m){return u(d),t(d.toArray().sort(m),d.storage())},"Array, string":function(d,m){return c(d),d.sort(o(m))},"Matrix, string":function(d,m){return u(d),t(d.toArray().sort(o(m)),d.storage())}});function o(h){if(h==="asc")return a;if(h==="desc")return s;if(h==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function c(h){if(_n(h).length!==1)throw new Error("One dimensional array expected")}function u(h){if(h.size().length!==1)throw new Error("One dimensional matrix expected")}}),XC="max",KG=["typed","config","numeric","larger","isNaN"],vz=de(XC,KG,r=>{var{typed:e,config:t,numeric:n,larger:i,isNaN:a}=r;return e(XC,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,h){return ES(u,h.valueOf(),s)},"...":function(u){if(Fv(u))throw new TypeError("Scalar values expected in function max");return o(u)}});function s(c,u){try{return i(c,u)?c:u}catch(h){throw Zs(h,"max",u)}}function o(c){var u;if(gh(c,function(h){try{(a(h)||u===void 0||i(h,u))&&(u=h)}catch(d){throw Zs(d,"max",h)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=n(u,_h(u,t))),u}}),jC="min",QG=["typed","config","numeric","smaller","isNaN"],gz=de(jC,QG,r=>{var{typed:e,config:t,numeric:n,smaller:i,isNaN:a}=r;return e(jC,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,h){return ES(u,h.valueOf(),s)},"...":function(u){if(Fv(u))throw new TypeError("Scalar values expected in function min");return o(u)}});function s(c,u){try{return i(c,u)?c:u}catch(h){throw Zs(h,"min",u)}}function o(c){var u;if(gh(c,function(h){try{(a(h)||u===void 0||i(h,u))&&(u=h)}catch(d){throw Zs(d,"min",h)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=n(u,_h(u,t))),u}}),JG="ImmutableDenseMatrix",ek=["smaller","DenseMatrix"],tk=de(JG,ek,r=>{var{smaller:e,DenseMatrix:t}=r;function n(i,a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Ti(a))throw new Error("Invalid datatype: "+a);if(rn(i)||Ir(i)){var s=new t(i,a);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(i&&Ir(i.data)&&Ir(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Hr(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var a=t.prototype.subset.call(this,i);return rn(a)?new n({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:bn(this._data),size:bn(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),nk="Index",rk=["ImmutableDenseMatrix","getMatrixDataType"],ik=de(nk,rk,r=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var a=0,s=arguments.length;a<s;a++){var o=a<0||arguments.length<=a?void 0:arguments[a],c=Ir(o),u=rn(o),h=typeof o,d=null;if(U2(o))this._dimensions.push(o),this._isScalar=!1;else if(c||u){var m=void 0;this._isScalar=!1,t(o)==="boolean"?(c&&(m=i(YC(o).valueOf())),u&&(m=i(YC(o._data).valueOf())),d=o.valueOf().length):m=i(o.valueOf()),this._dimensions.push(m)}else if(h==="number")this._dimensions.push(o);else if(h==="bigint")this._dimensions.push(Number(o));else if(h==="string")this._dimensions.push(o);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(d)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(a){for(var s=0,o=a.length;s<o;s++)if(!Qt(a[s])||!Xt(a[s]))throw new TypeError("Index parameters must be positive integer numbers");var c=new e;return c._data=a,c._size=[a.length],c}return n.prototype.clone=function(){var a=new n;return a._dimensions=bn(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},n.create=function(a){var s=new n;return n.apply(s,a),s},n.prototype.size=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var c=this._dimensions[s];a[s]=Ti(c)||Qt(c)?1:c.size()[0]}return a},n.prototype.max=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var c=this._dimensions[s];a[s]=Ti(c)||Qt(c)?c:c.max()}return a},n.prototype.min=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var c=this._dimensions[s];a[s]=Ti(c)||Qt(c)?c:c.min()}return a},n.prototype.forEach=function(a){for(var s=0,o=this._dimensions.length;s<o;s++)a(this._dimensions[s],s,this)},n.prototype.dimension=function(a){var s;return Qt(a)&&(s=this._dimensions[a])!==null&&s!==void 0?s:null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&Ti(this._dimensions[0])},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var c=this._dimensions[s];a.push(Ti(c)||Qt(c)?c:c.toArray())}return a},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var c=this._dimensions[s];Ti(c)?a.push(JSON.stringify(c)):a.push(c.toString())}return"["+a.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(a){return n.create(a.dimensions)},n},{isClass:!0});function YC(r){var e=[];return r.forEach((t,n)=>{t&&e.push(n)}),e}var ak="FibonacciHeap",sk=["smaller","larger"],ok=de(ak,sk,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(h,d){var m={key:h,value:d,degree:0};if(this._minimum){var v=this._minimum;m.left=v,m.right=v.right,v.right=m,m.right.left=m,e(h,v.key)&&(this._minimum=m)}else m.left=m,m.right=m,this._minimum=m;return this._size++,m},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var h=this._minimum;if(h===null)return h;for(var d=this._minimum,m=h.degree,v=h.child;m>0;){var x=v.right;v.left.right=v.right,v.right.left=v.left,v.left=d,v.right=d.right,d.right=v,v.right.left=v,v.parent=null,v=x,m--}return h.left.right=h.right,h.right.left=h.left,h===h.right?d=null:(d=h.right,d=u(d,this._size)),this._size--,this._minimum=d,h},i.prototype.remove=function(h){this._minimum=a(this._minimum,h,-1),this.extractMinimum()};function a(h,d,m){d.key=m;var v=d.parent;return v&&e(d.key,v.key)&&(s(h,d,v),o(h,v)),e(d.key,h.key)&&(h=d),h}function s(h,d,m){d.left.right=d.right,d.right.left=d.left,m.degree--,m.child===d&&(m.child=d.right),m.degree===0&&(m.child=null),d.left=h,d.right=h.right,h.right=d,d.right.left=d,d.parent=null,d.mark=!1}function o(h,d){var m=d.parent;m&&(d.mark?(s(h,d,m),o(m)):d.mark=!0)}var c=function(d,m){d.left.right=d.right,d.right.left=d.left,d.parent=m,m.child?(d.left=m.child,d.right=m.child.right,m.child.right=d,d.right.left=d):(m.child=d,d.right=d,d.left=d),m.degree++,d.mark=!1};function u(h,d){var m=Math.floor(Math.log(d)*n)+1,v=new Array(m),x=0,b=h;if(b)for(x++,b=b.right;b!==h;)x++,b=b.right;for(var M;x>0;){for(var _=b.degree,T=b.right;M=v[_],!!M;){if(t(b.key,M.key)){var E=M;M=b,b=E}c(M,b),v[_]=null,_++}v[_]=b,b=T,x--}h=null;for(var A=0;A<m;A++)M=v[A],M&&(h?(M.left.right=M.right,M.right.left=M.left,M.left=h,M.right=h.right,h.right=M,M.right.left=M,e(M.key,h.key)&&(h=M)):h=M);return h}return i},{isClass:!0}),lk="Spa",uk=["addScalar","equalScalar","FibonacciHeap"],ck=de(lk,uk,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,s){if(this._values[a])this._values[a].value=s;else{var o=this._heap.insert(a,s);this._values[a]=o}},i.prototype.get=function(a){var s=this._values[a];return s?s.value:0},i.prototype.accumulate=function(a,s){var o=this._values[a];o?o.value=e(o.value,s):(o=this._heap.insert(a,s),this._values[a]=o)},i.prototype.forEach=function(a,s,o){var c=this._heap,u=this._values,h=[],d=c.extractMinimum();for(d&&h.push(d);d&&d.key<=s;)d.key>=a&&(t(d.value,0)||o(d.key,d.value,this)),d=c.extractMinimum(),d&&h.push(d);for(var m=0;m<h.length;m++){var v=h[m];d=c.insert(v.key,v.value),u[d.key]=d}},i.prototype.swap=function(a,s){var o=this._values[a],c=this._values[s];if(!o&&c)o=this._heap.insert(a,c.value),this._heap.remove(c),this._values[a]=o,this._values[s]=void 0;else if(o&&!c)c=this._heap.insert(s,o.value),this._heap.remove(o),this._values[s]=c,this._values[a]=void 0;else if(o&&c){var u=o.value;o.value=c.value,c.value=u}},i},{isClass:!0});function fk(r){var e=0,t=1,n=Object.create(null),i=Object.create(null),a=0,s=function(c){var u=i[c];if(u&&(delete n[u],delete i[c],--e,t===u)){if(!e){a=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++t););}};return r=Math.abs(r),{hit:function(c){var u=i[c],h=++a;if(n[h]=c,i[c]=h,!u)return++e,e<=r?void 0:(c=n[t],s(c),c);if(delete n[u],t===u)for(;!Object.prototype.hasOwnProperty.call(n,++t););},delete:s,clear:function(){e=a=0,t=1,n=Object.create(null),i=Object.create(null)}}}function Oy(r){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:fk(t||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=e(i);if(n.cache.values.has(s))return n.cache.lru.hit(s),n.cache.values.get(s);var o=r.apply(r,i);return n.cache.values.set(s,o),n.cache.values.delete(n.cache.lru.hit(s)),o}}var hk=Oy(function(r){return new r(1).exp()},{hasher:TS}),dk=Oy(function(r){return new r(1).plus(new r(5).sqrt()).div(2)},{hasher:TS}),Y2=Oy(function(r){return r.acos(-1)},{hasher:TS}),pk=Oy(function(r){return Y2(r).times(2)},{hasher:TS});function TS(r){return r[0].precision}function WC(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function gE(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WC(Object(t),!0).forEach(function(n){$i(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):WC(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var mk="Unit",vk=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","toBest","number","Complex","BigNumber","Fraction"],gk=de(mk,vk,r=>{var{on:e,config:t,addScalar:n,subtractScalar:i,multiplyScalar:a,divideScalar:s,pow:o,abs:c,fix:u,round:h,equal:d,isNumeric:m,format:v,toBest:x,number:b,Complex:M,BigNumber:_,Fraction:T}=r,E=b;function A(re,be){if(!(this instanceof A))throw new Error("Constructor must be called with the new operator");if(!(re==null||m(re)||Jc(re)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,be===void 0)this.units=[],this.dimensions=ae.map(q=>0);else if(typeof be=="string"){var Ce=A.parse(be);this.units=Ce.units,this.dimensions=Ce.dimensions}else if(Lo(be)&&be.value===null)this.fixPrefix=be.fixPrefix,this.skipAutomaticSimplification=be.skipAutomaticSimplification,this.dimensions=be.dimensions.slice(0),this.units=be.units.map(q=>Ar({},q));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(re)}Object.defineProperty(A,"name",{value:"Unit"}),A.prototype.constructor=A,A.prototype.type="Unit",A.prototype.isUnit=!0;var D,N,O;function z(){for(;O===" "||O==="	";)F()}function C(re){return re>="0"&&re<="9"||re==="."}function R(re){return re>="0"&&re<="9"}function F(){N++,O=D.charAt(N)}function H(re){N=re,O=D.charAt(N)}function X(){var re="",be=N;if(O==="+"?F():O==="-"&&(re+=O,F()),!C(O))return H(be),null;if(O==="."){if(re+=O,F(),!R(O))return H(be),null}else{for(;R(O);)re+=O,F();O==="."&&(re+=O,F())}for(;R(O);)re+=O,F();if(O==="E"||O==="e"){var Ce="",q=N;if(Ce+=O,F(),(O==="+"||O==="-")&&(Ce+=O,F()),!R(O))return H(q),re;for(re=re+Ce;R(O);)re+=O,F()}return re}function $(){for(var re="";R(O)||A.isValidAlpha(O);)re+=O,F();var be=re.charAt(0);return A.isValidAlpha(be)?re:null}function Y(re){return O===re?(F(),re):null}A.parse=function(re,be){if(be=be||{},D=re,N=-1,O="",typeof D!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var Ce=new A;Ce.units=[];var q=1,V=!1;F(),z();var ie=X(),fe=null;if(ie){if(t.number==="BigNumber")fe=new _(ie);else if(t.number==="Fraction")try{fe=new T(ie)}catch{fe=parseFloat(ie)}else fe=parseFloat(ie);z(),Y("*")?(q=1,V=!0):Y("/")&&(q=-1,V=!0)}for(var Se=[],ve=1;;){for(z();O==="(";)Se.push(q),ve*=q,q=1,F(),z();var qe=void 0;if(O){var Fe=O;if(qe=$(),qe===null)throw new SyntaxError('Unexpected "'+Fe+'" in "'+D+'" at index '+N.toString())}else break;var We=I(qe);if(We===null)throw new SyntaxError('Unit "'+qe+'" not found.');var Ge=q*ve;if(z(),Y("^")){z();var rt=X();if(rt===null)throw new SyntaxError('In "'+re+'", "^" must be followed by a floating-point number');Ge*=rt}Ce.units.push({unit:We.unit,prefix:We.prefix,power:Ge});for(var ot=0;ot<ae.length;ot++)Ce.dimensions[ot]+=(We.unit.dimensions[ot]||0)*Ge;for(z();O===")";){if(Se.length===0)throw new SyntaxError('Unmatched ")" in "'+D+'" at index '+N.toString());ve/=Se.pop(),F(),z()}if(V=!1,Y("*")?(q=1,V=!0):Y("/")?(q=-1,V=!0):q=1,We.unit.base){var St=We.unit.base.key;Ae.auto[St]={unit:We.unit,prefix:We.prefix}}}if(z(),O)throw new SyntaxError('Could not parse: "'+re+'"');if(V)throw new SyntaxError('Trailing characters: "'+re+'"');if(Se.length!==0)throw new SyntaxError('Unmatched "(" in "'+D+'"');if(Ce.units.length===0&&!be.allowNoUnits)throw new SyntaxError('"'+re+'" contains no units');return Ce.value=fe!==void 0?Ce._normalize(fe):null,Ce},A.prototype.clone=function(){var re=new A;re.fixPrefix=this.fixPrefix,re.skipAutomaticSimplification=this.skipAutomaticSimplification,re.value=bn(this.value),re.dimensions=this.dimensions.slice(0),re.units=[];for(var be=0;be<this.units.length;be++){re.units[be]={};for(var Ce in this.units[be])Pt(this.units[be],Ce)&&(re.units[be][Ce]=this.units[be][Ce])}return re},A.prototype.valueType=function(){return Hr(this.value)},A.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},A.prototype._normalize=function(re){if(re==null||this.units.length===0)return re;for(var be=re,Ce=A._getNumberConverter(Hr(re)),q=0;q<this.units.length;q++){var V=Ce(this.units[q].unit.value),ie=Ce(this.units[q].prefix.value),fe=Ce(this.units[q].power);be=a(be,o(a(V,ie),fe))}return be},A.prototype._denormalize=function(re,be){if(re==null||this.units.length===0)return re;for(var Ce=re,q=A._getNumberConverter(Hr(re)),V=0;V<this.units.length;V++){var ie=q(this.units[V].unit.value),fe=q(this.units[V].prefix.value),Se=q(this.units[V].power);Ce=s(Ce,o(a(ie,fe),Se))}return Ce};var I=Oy(re=>{if(Pt(ne,re)){var be=ne[re],Ce=be.prefixes[""];return{unit:be,prefix:Ce}}for(var q in ne)if(Pt(ne,q)&&_6(re,q)){var V=ne[q],ie=re.length-q.length,fe=re.substring(0,ie),Se=Pt(V.prefixes,fe)?V.prefixes[fe]:void 0;if(Se!==void 0)return{unit:V,prefix:Se}}return null},{hasher:re=>re[0],limit:100});A.isValuelessUnit=function(re){return I(re)!==null},A.prototype.hasBase=function(re){if(typeof re=="string"&&(re=J[re]),!re)return!1;for(var be=0;be<ae.length;be++)if(Math.abs((this.dimensions[be]||0)-(re.dimensions[be]||0))>1e-12)return!1;return!0},A.prototype.equalBase=function(re){for(var be=0;be<ae.length;be++)if(Math.abs((this.dimensions[be]||0)-(re.dimensions[be]||0))>1e-12)return!1;return!0},A.prototype.equals=function(re){return this.equalBase(re)&&d(this.value,re.value)},A.prototype.multiply=function(re){for(var be=this.clone(),Ce=Lo(re)?re:new A(re),q=0;q<ae.length;q++)be.dimensions[q]=(this.dimensions[q]||0)+(Ce.dimensions[q]||0);for(var V=0;V<Ce.units.length;V++){var ie=gE({},Ce.units[V]);be.units.push(ie)}if(this.value!==null||Ce.value!==null){var fe=this.value===null?this._normalize(W(Ce.value)):this.value,Se=Ce.value===null?Ce._normalize(W(this.value)):Ce.value;be.value=a(fe,Se)}else be.value=null;return Lo(re)&&(be.skipAutomaticSimplification=!1),Z(be)},A.prototype.divideInto=function(re){return new A(re).divide(this)},A.prototype.divide=function(re){for(var be=this.clone(),Ce=Lo(re)?re:new A(re),q=0;q<ae.length;q++)be.dimensions[q]=(this.dimensions[q]||0)-(Ce.dimensions[q]||0);for(var V=0;V<Ce.units.length;V++){var ie=gE(gE({},Ce.units[V]),{},{power:-Ce.units[V].power});be.units.push(ie)}if(this.value!==null||Ce.value!==null){var fe=this.value===null?this._normalize(W(Ce.value)):this.value,Se=Ce.value===null?Ce._normalize(W(this.value)):Ce.value;be.value=s(fe,Se)}else be.value=null;return Lo(re)&&(be.skipAutomaticSimplification=!1),Z(be)},A.prototype.pow=function(re){for(var be=this.clone(),Ce=0;Ce<ae.length;Ce++)be.dimensions[Ce]=(this.dimensions[Ce]||0)*re;for(var q=0;q<be.units.length;q++)be.units[q].power*=re;return be.value!==null?be.value=o(be.value,re):be.value=null,be.skipAutomaticSimplification=!1,Z(be)};function Z(re){return re.equalBase(J.NONE)&&re.value!==null&&!t.predictable?re.value:re}function W(re){var be=A._getNumberConverter(Hr(re));return be(1)}A.prototype.abs=function(){var re=this.clone();if(re.value!==null)if(re._isDerived()||re.units.length===0||re.units[0].unit.offset===0)re.value=c(re.value);else{var be=re._numberConverter(),Ce=be(re.units[0].unit.value),q=be(re.units[0].unit.offset),V=a(Ce,q);re.value=i(c(n(re.value,V)),V)}for(var ie in re.units)(re.units[ie].unit.name==="VA"||re.units[ie].unit.name==="VAR")&&(re.units[ie].unit=ne.W);return re},A.prototype.to=function(re){var be=this.value===null?this._normalize(1):this.value,Ce;if(typeof re=="string")Ce=A.parse(re);else if(Lo(re))Ce=re.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(Ce))throw new Error("Units do not match ('".concat(Ce.toString(),"' != '").concat(this.toString(),"')"));if(Ce.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||Ce.units.length===0||this.units[0].unit.offset===Ce.units[0].unit.offset)Ce.value=bn(be);else{var q=A._getNumberConverter(Hr(be)),V=this.units[0].unit.value,ie=this.units[0].unit.offset,fe=a(V,ie),Se=Ce.units[0].unit.value,ve=Ce.units[0].unit.offset,qe=a(Se,ve);Ce.value=n(be,q(i(fe,qe)))}return Ce.fixPrefix=!0,Ce.skipAutomaticSimplification=!0,Ce},A.prototype.toNumber=function(re){return E(this.toNumeric(re))},A.prototype.toNumeric=function(re){var be;return re?be=this.to(re):be=this.clone(),be._isDerived()||be.units.length===0?be._denormalize(be.value):be._denormalize(be.value,be.units[0].prefix.value)},A.prototype.toString=function(){return this.format()},A.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},A.fromJSON=function(re){var be,Ce=new A(re.value,(be=re.unit)!==null&&be!==void 0?be:void 0);return Ce.fixPrefix=re.fixPrefix||!1,Ce},A.prototype.valueOf=A.prototype.toString,A.prototype.simplify=function(){var re=this.clone(),be=[],Ce;for(var q in Te)if(Pt(Te,q)&&re.hasBase(J[q])){Ce=q;break}if(Ce==="NONE")re.units=[];else{var V;if(Ce&&Pt(Te,Ce)&&(V=Te[Ce]),V)re.units=[{unit:V.unit,prefix:V.prefix,power:1}];else{for(var ie=!1,fe=0;fe<ae.length;fe++){var Se=ae[fe];Math.abs(re.dimensions[fe]||0)>1e-12&&(Pt(Te,Se)?be.push({unit:Te[Se].unit,prefix:Te[Se].prefix,power:re.dimensions[fe]||0}):ie=!0)}be.length<re.units.length&&!ie&&(re.units=be)}}return re},A.prototype.toSI=function(){for(var re=this.clone(),be=[],Ce=0;Ce<ae.length;Ce++){var q=ae[Ce];if(Math.abs(re.dimensions[Ce]||0)>1e-12)if(Pt(Ae.si,q))be.push({unit:Ae.si[q].unit,prefix:Ae.si[q].prefix,power:re.dimensions[Ce]||0});else throw new Error("Cannot express custom unit "+q+" in SI units")}return re.units=be,re.fixPrefix=!0,re.skipAutomaticSimplification=!0,this.value!==null?(re.value=null,this.to(re)):re},A.prototype.formatUnits=function(){for(var re="",be="",Ce=0,q=0,V=0;V<this.units.length;V++)this.units[V].power>0?(Ce++,re+=" "+this.units[V].prefix.name+this.units[V].unit.name,Math.abs(this.units[V].power-1)>1e-15&&(re+="^"+this.units[V].power)):this.units[V].power<0&&q++;if(q>0)for(var ie=0;ie<this.units.length;ie++)this.units[ie].power<0&&(Ce>0?(be+=" "+this.units[ie].prefix.name+this.units[ie].unit.name,Math.abs(this.units[ie].power+1)>1e-15&&(be+="^"+-this.units[ie].power)):(be+=" "+this.units[ie].prefix.name+this.units[ie].unit.name,be+="^"+this.units[ie].power));re=re.substr(1),be=be.substr(1),Ce>1&&q>0&&(re="("+re+")"),q>1&&Ce>0&&(be="("+be+")");var fe=re;return Ce>0&&q>0&&(fe+=" / "),fe+=be,fe},A.prototype.toBest=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(re&&!Array.isArray(re))throw new Error("Invalid unit type. Expected string or Unit.");var Ce=this.units[0].unit.prefixes;if(re&&re.length>0){var q=re.map(fe=>{var Se=null;if(typeof fe=="string"){if(Se=A.parse(fe),!Se)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!Lo(fe))throw new Error("Invalid unit type. Expected compatible string or Unit.");Se===null&&(Se=fe.clone());try{return this.to(Se.formatUnits()),Se}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),V=q.map(fe=>fe.units[0].prefix);this.units[0].unit.prefixes=V.reduce((fe,Se)=>(fe[Se.name]=Se,fe),{}),this.units[0].prefix=V[0]}var ie=te(this,be).simp;return this.units[0].unit.prefixes=Ce,ie.fixPrefix=!0,ie},A.prototype.format=function(re){var{simp:be,valueStr:Ce,unitStr:q}=te(this,re),V=Ce;return be.value&&Jc(be.value)&&(V="("+V+")"),q.length>0&&V.length>0&&(V+=" "),V+=q,V};function te(re){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ce=re.skipAutomaticSimplification||re.value===null?re.clone():re.simplify();le(Ce),Q(Ce,be.offset);var q=Ce._denormalize(Ce.value),V=Ce.value!==null?v(q,be||{}):"",ie=Ce.formatUnits();return{simp:Ce,valueStr:V,unitStr:ie}}function le(re){var be=!1;typeof re.value<"u"&&re.value!==null&&Jc(re.value)&&(be=Math.abs(re.value.re)<1e-14);for(var Ce in re.units)Pt(re.units,Ce)&&re.units[Ce].unit&&(re.units[Ce].unit.name==="VA"&&be?re.units[Ce].unit=ne.VAR:re.units[Ce].unit.name==="VAR"&&!be&&(re.units[Ce].unit=ne.VA))}function Q(re,be){re.units.length===1&&!re.fixPrefix&&Math.abs(re.units[0].power-Math.round(re.units[0].power))<1e-14&&(re.units[0].prefix=re._bestPrefix(be))}A.prototype._bestPrefix=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var be=this.value!==null?c(this.value):0,Ce=c(this.units[0].unit.value),q=this.units[0].prefix;if(be===0)return q;var V=this.units[0].power,ie=Math.log(be/Math.pow(q.value*Ce,V))/Math.LN10-re;if(ie>-2.200001&&ie<1.800001)return q;ie=Math.abs(ie);var fe=this.units[0].unit.prefixes;for(var Se in fe)if(Pt(fe,Se)){var ve=fe[Se];if(ve.scientific){var qe=Math.abs(Math.log(be/Math.pow(ve.value*Ce,V))/Math.LN10-re);(qe<ie||qe===ie&&ve.name.length<q.name.length)&&(q=ve,ie=qe)}}return q},A.prototype.splitUnit=function(re){for(var be=this.clone(),Ce=[],q=0;q<re.length&&(be=be.to(re[q]),q!==re.length-1);q++){var V=be.toNumeric(),ie=h(V),fe=void 0,Se=d(ie,V);Se?fe=ie:fe=u(be.toNumeric());var ve=new A(fe,re[q].toString());Ce.push(ve),be=i(be,ve)}for(var qe=0,Fe=0;Fe<Ce.length;Fe++)qe=n(qe,Ce[Fe].value);return d(qe,this.value)&&(be.value=0),Ce.push(be),Ce};var k={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};k.SHORTLONG=Ar({},k.SHORT,k.LONG),k.BINARY_SHORT=Ar({},k.BINARY_SHORT_SI,k.BINARY_SHORT_IEC),k.BINARY_LONG=Ar({},k.BINARY_LONG_SI,k.BINARY_LONG_IEC);var ae=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],J={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var De in J)Pt(J,De)&&(J[De].key=De);var pe={},_e={name:"",base:pe,value:1,offset:0,dimensions:ae.map(re=>0)},ne={meter:{name:"meter",base:J.LENGTH,prefixes:k.LONG,value:1,offset:0},inch:{name:"inch",base:J.LENGTH,prefixes:k.NONE,value:.0254,offset:0},foot:{name:"foot",base:J.LENGTH,prefixes:k.NONE,value:.3048,offset:0},yard:{name:"yard",base:J.LENGTH,prefixes:k.NONE,value:.9144,offset:0},mile:{name:"mile",base:J.LENGTH,prefixes:k.NONE,value:1609.344,offset:0},link:{name:"link",base:J.LENGTH,prefixes:k.NONE,value:.201168,offset:0},rod:{name:"rod",base:J.LENGTH,prefixes:k.NONE,value:5.0292,offset:0},chain:{name:"chain",base:J.LENGTH,prefixes:k.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:J.LENGTH,prefixes:k.NONE,value:1e-10,offset:0},m:{name:"m",base:J.LENGTH,prefixes:k.SHORT,value:1,offset:0},in:{name:"in",base:J.LENGTH,prefixes:k.NONE,value:.0254,offset:0},ft:{name:"ft",base:J.LENGTH,prefixes:k.NONE,value:.3048,offset:0},yd:{name:"yd",base:J.LENGTH,prefixes:k.NONE,value:.9144,offset:0},mi:{name:"mi",base:J.LENGTH,prefixes:k.NONE,value:1609.344,offset:0},li:{name:"li",base:J.LENGTH,prefixes:k.NONE,value:.201168,offset:0},rd:{name:"rd",base:J.LENGTH,prefixes:k.NONE,value:5.02921,offset:0},ch:{name:"ch",base:J.LENGTH,prefixes:k.NONE,value:20.1168,offset:0},mil:{name:"mil",base:J.LENGTH,prefixes:k.NONE,value:254e-7,offset:0},m2:{name:"m2",base:J.SURFACE,prefixes:k.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:J.SURFACE,prefixes:k.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:J.SURFACE,prefixes:k.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:J.SURFACE,prefixes:k.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:J.SURFACE,prefixes:k.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:J.SURFACE,prefixes:k.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:J.SURFACE,prefixes:k.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:J.SURFACE,prefixes:k.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:J.SURFACE,prefixes:k.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:J.SURFACE,prefixes:k.NONE,value:1e4,offset:0},m3:{name:"m3",base:J.VOLUME,prefixes:k.CUBIC,value:1,offset:0},L:{name:"L",base:J.VOLUME,prefixes:k.SHORT,value:.001,offset:0},l:{name:"l",base:J.VOLUME,prefixes:k.SHORT,value:.001,offset:0},litre:{name:"litre",base:J.VOLUME,prefixes:k.LONG,value:.001,offset:0},cuin:{name:"cuin",base:J.VOLUME,prefixes:k.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:J.VOLUME,prefixes:k.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:J.VOLUME,prefixes:k.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:J.VOLUME,prefixes:k.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:J.VOLUME,prefixes:k.NONE,value:15e-6,offset:0},drop:{name:"drop",base:J.VOLUME,prefixes:k.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:J.VOLUME,prefixes:k.NONE,value:5e-8,offset:0},minim:{name:"minim",base:J.VOLUME,prefixes:k.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:J.VOLUME,prefixes:k.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:J.VOLUME,prefixes:k.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:J.VOLUME,prefixes:k.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:J.VOLUME,prefixes:k.NONE,value:1e-6,offset:0},cup:{name:"cup",base:J.VOLUME,prefixes:k.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:J.VOLUME,prefixes:k.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:J.VOLUME,prefixes:k.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:J.VOLUME,prefixes:k.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:J.VOLUME,prefixes:k.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:J.VOLUME,prefixes:k.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:J.VOLUME,prefixes:k.NONE,value:.238480942392,offset:0},g:{name:"g",base:J.MASS,prefixes:k.SHORT,value:.001,offset:0},gram:{name:"gram",base:J.MASS,prefixes:k.LONG,value:.001,offset:0},ton:{name:"ton",base:J.MASS,prefixes:k.SHORT,value:907.18474,offset:0},t:{name:"t",base:J.MASS,prefixes:k.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:J.MASS,prefixes:k.LONG,value:1e3,offset:0},grain:{name:"grain",base:J.MASS,prefixes:k.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:J.MASS,prefixes:k.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:J.MASS,prefixes:k.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:J.MASS,prefixes:k.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:J.MASS,prefixes:k.NONE,value:45.359237,offset:0},stick:{name:"stick",base:J.MASS,prefixes:k.NONE,value:.115,offset:0},stone:{name:"stone",base:J.MASS,prefixes:k.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:J.MASS,prefixes:k.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:J.MASS,prefixes:k.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:J.MASS,prefixes:k.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:J.MASS,prefixes:k.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:J.MASS,prefixes:k.NONE,value:45.359237,offset:0},s:{name:"s",base:J.TIME,prefixes:k.SHORT,value:1,offset:0},min:{name:"min",base:J.TIME,prefixes:k.NONE,value:60,offset:0},h:{name:"h",base:J.TIME,prefixes:k.NONE,value:3600,offset:0},second:{name:"second",base:J.TIME,prefixes:k.LONG,value:1,offset:0},sec:{name:"sec",base:J.TIME,prefixes:k.LONG,value:1,offset:0},minute:{name:"minute",base:J.TIME,prefixes:k.NONE,value:60,offset:0},hour:{name:"hour",base:J.TIME,prefixes:k.NONE,value:3600,offset:0},day:{name:"day",base:J.TIME,prefixes:k.NONE,value:86400,offset:0},week:{name:"week",base:J.TIME,prefixes:k.NONE,value:7*86400,offset:0},month:{name:"month",base:J.TIME,prefixes:k.NONE,value:2629800,offset:0},year:{name:"year",base:J.TIME,prefixes:k.NONE,value:31557600,offset:0},decade:{name:"decade",base:J.TIME,prefixes:k.NONE,value:315576e3,offset:0},century:{name:"century",base:J.TIME,prefixes:k.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:J.TIME,prefixes:k.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:J.FREQUENCY,prefixes:k.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:J.FREQUENCY,prefixes:k.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:J.ANGLE,prefixes:k.SHORT,value:1,offset:0},radian:{name:"radian",base:J.ANGLE,prefixes:k.LONG,value:1,offset:0},deg:{name:"deg",base:J.ANGLE,prefixes:k.SHORT,value:null,offset:0},degree:{name:"degree",base:J.ANGLE,prefixes:k.LONG,value:null,offset:0},grad:{name:"grad",base:J.ANGLE,prefixes:k.SHORT,value:null,offset:0},gradian:{name:"gradian",base:J.ANGLE,prefixes:k.LONG,value:null,offset:0},cycle:{name:"cycle",base:J.ANGLE,prefixes:k.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:J.ANGLE,prefixes:k.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:J.ANGLE,prefixes:k.NONE,value:null,offset:0},A:{name:"A",base:J.CURRENT,prefixes:k.SHORT,value:1,offset:0},ampere:{name:"ampere",base:J.CURRENT,prefixes:k.LONG,value:1,offset:0},K:{name:"K",base:J.TEMPERATURE,prefixes:k.SHORT,value:1,offset:0},degC:{name:"degC",base:J.TEMPERATURE,prefixes:k.SHORT,value:1,offset:273.15},degF:{name:"degF",base:J.TEMPERATURE,prefixes:k.SHORT,value:new T(5,9),offset:459.67},degR:{name:"degR",base:J.TEMPERATURE,prefixes:k.SHORT,value:new T(5,9),offset:0},kelvin:{name:"kelvin",base:J.TEMPERATURE,prefixes:k.LONG,value:1,offset:0},celsius:{name:"celsius",base:J.TEMPERATURE,prefixes:k.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:J.TEMPERATURE,prefixes:k.LONG,value:new T(5,9),offset:459.67},rankine:{name:"rankine",base:J.TEMPERATURE,prefixes:k.LONG,value:new T(5,9),offset:0},mol:{name:"mol",base:J.AMOUNT_OF_SUBSTANCE,prefixes:k.SHORT,value:1,offset:0},mole:{name:"mole",base:J.AMOUNT_OF_SUBSTANCE,prefixes:k.LONG,value:1,offset:0},cd:{name:"cd",base:J.LUMINOUS_INTENSITY,prefixes:k.SHORT,value:1,offset:0},candela:{name:"candela",base:J.LUMINOUS_INTENSITY,prefixes:k.LONG,value:1,offset:0},N:{name:"N",base:J.FORCE,prefixes:k.SHORT,value:1,offset:0},newton:{name:"newton",base:J.FORCE,prefixes:k.LONG,value:1,offset:0},dyn:{name:"dyn",base:J.FORCE,prefixes:k.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:J.FORCE,prefixes:k.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:J.FORCE,prefixes:k.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:J.FORCE,prefixes:k.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:J.FORCE,prefixes:k.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:J.FORCE,prefixes:k.NONE,value:9.80665,offset:0},J:{name:"J",base:J.ENERGY,prefixes:k.SHORT,value:1,offset:0},joule:{name:"joule",base:J.ENERGY,prefixes:k.LONG,value:1,offset:0},erg:{name:"erg",base:J.ENERGY,prefixes:k.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:J.ENERGY,prefixes:k.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:J.ENERGY,prefixes:k.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:J.ENERGY,prefixes:k.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:J.ENERGY,prefixes:k.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:J.POWER,prefixes:k.SHORT,value:1,offset:0},watt:{name:"watt",base:J.POWER,prefixes:k.LONG,value:1,offset:0},hp:{name:"hp",base:J.POWER,prefixes:k.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:J.POWER,prefixes:k.SHORT,value:M.I,offset:0},VA:{name:"VA",base:J.POWER,prefixes:k.SHORT,value:1,offset:0},Pa:{name:"Pa",base:J.PRESSURE,prefixes:k.SHORT,value:1,offset:0},psi:{name:"psi",base:J.PRESSURE,prefixes:k.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:J.PRESSURE,prefixes:k.NONE,value:101325,offset:0},bar:{name:"bar",base:J.PRESSURE,prefixes:k.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:J.PRESSURE,prefixes:k.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:J.PRESSURE,prefixes:k.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:J.PRESSURE,prefixes:k.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:J.PRESSURE,prefixes:k.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:J.ELECTRIC_CHARGE,prefixes:k.LONG,value:1,offset:0},C:{name:"C",base:J.ELECTRIC_CHARGE,prefixes:k.SHORT,value:1,offset:0},farad:{name:"farad",base:J.ELECTRIC_CAPACITANCE,prefixes:k.LONG,value:1,offset:0},F:{name:"F",base:J.ELECTRIC_CAPACITANCE,prefixes:k.SHORT,value:1,offset:0},volt:{name:"volt",base:J.ELECTRIC_POTENTIAL,prefixes:k.LONG,value:1,offset:0},V:{name:"V",base:J.ELECTRIC_POTENTIAL,prefixes:k.SHORT,value:1,offset:0},ohm:{name:"ohm",base:J.ELECTRIC_RESISTANCE,prefixes:k.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:J.ELECTRIC_INDUCTANCE,prefixes:k.LONG,value:1,offset:0},H:{name:"H",base:J.ELECTRIC_INDUCTANCE,prefixes:k.SHORT,value:1,offset:0},siemens:{name:"siemens",base:J.ELECTRIC_CONDUCTANCE,prefixes:k.LONG,value:1,offset:0},S:{name:"S",base:J.ELECTRIC_CONDUCTANCE,prefixes:k.SHORT,value:1,offset:0},weber:{name:"weber",base:J.MAGNETIC_FLUX,prefixes:k.LONG,value:1,offset:0},Wb:{name:"Wb",base:J.MAGNETIC_FLUX,prefixes:k.SHORT,value:1,offset:0},tesla:{name:"tesla",base:J.MAGNETIC_FLUX_DENSITY,prefixes:k.LONG,value:1,offset:0},T:{name:"T",base:J.MAGNETIC_FLUX_DENSITY,prefixes:k.SHORT,value:1,offset:0},b:{name:"b",base:J.BIT,prefixes:k.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:J.BIT,prefixes:k.BINARY_LONG,value:1,offset:0},B:{name:"B",base:J.BIT,prefixes:k.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:J.BIT,prefixes:k.BINARY_LONG,value:8,offset:0}},ue={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ge(re){if(re.number==="BigNumber"){var be=Y2(_);ne.rad.value=new _(1),ne.deg.value=be.div(180),ne.grad.value=be.div(200),ne.cycle.value=be.times(2),ne.arcsec.value=be.div(648e3),ne.arcmin.value=be.div(10800)}else ne.rad.value=1,ne.deg.value=Math.PI/180,ne.grad.value=Math.PI/200,ne.cycle.value=Math.PI*2,ne.arcsec.value=Math.PI/648e3,ne.arcmin.value=Math.PI/10800;ne.radian.value=ne.rad.value,ne.degree.value=ne.deg.value,ne.gradian.value=ne.grad.value}ge(t),e&&e("config",function(re,be){re.number!==be.number&&ge(re)});var Ae={si:{NONE:{unit:_e,prefix:k.NONE[""]},LENGTH:{unit:ne.m,prefix:k.SHORT[""]},MASS:{unit:ne.g,prefix:k.SHORT.k},TIME:{unit:ne.s,prefix:k.SHORT[""]},CURRENT:{unit:ne.A,prefix:k.SHORT[""]},TEMPERATURE:{unit:ne.K,prefix:k.SHORT[""]},LUMINOUS_INTENSITY:{unit:ne.cd,prefix:k.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:ne.mol,prefix:k.SHORT[""]},ANGLE:{unit:ne.rad,prefix:k.SHORT[""]},BIT:{unit:ne.bits,prefix:k.SHORT[""]},FORCE:{unit:ne.N,prefix:k.SHORT[""]},ENERGY:{unit:ne.J,prefix:k.SHORT[""]},POWER:{unit:ne.W,prefix:k.SHORT[""]},PRESSURE:{unit:ne.Pa,prefix:k.SHORT[""]},ELECTRIC_CHARGE:{unit:ne.C,prefix:k.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:ne.F,prefix:k.SHORT[""]},ELECTRIC_POTENTIAL:{unit:ne.V,prefix:k.SHORT[""]},ELECTRIC_RESISTANCE:{unit:ne.ohm,prefix:k.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:ne.H,prefix:k.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:ne.S,prefix:k.SHORT[""]},MAGNETIC_FLUX:{unit:ne.Wb,prefix:k.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:ne.T,prefix:k.SHORT[""]},FREQUENCY:{unit:ne.Hz,prefix:k.SHORT[""]}}};Ae.cgs=JSON.parse(JSON.stringify(Ae.si)),Ae.cgs.LENGTH={unit:ne.m,prefix:k.SHORT.c},Ae.cgs.MASS={unit:ne.g,prefix:k.SHORT[""]},Ae.cgs.FORCE={unit:ne.dyn,prefix:k.SHORT[""]},Ae.cgs.ENERGY={unit:ne.erg,prefix:k.NONE[""]},Ae.us=JSON.parse(JSON.stringify(Ae.si)),Ae.us.LENGTH={unit:ne.ft,prefix:k.NONE[""]},Ae.us.MASS={unit:ne.lbm,prefix:k.NONE[""]},Ae.us.TEMPERATURE={unit:ne.degF,prefix:k.NONE[""]},Ae.us.FORCE={unit:ne.lbf,prefix:k.NONE[""]},Ae.us.ENERGY={unit:ne.BTU,prefix:k.BTU[""]},Ae.us.POWER={unit:ne.hp,prefix:k.NONE[""]},Ae.us.PRESSURE={unit:ne.psi,prefix:k.NONE[""]},Ae.auto=JSON.parse(JSON.stringify(Ae.si));var Te=Ae.auto;A.setUnitSystem=function(re){if(Pt(Ae,re))Te=Ae[re];else throw new Error("Unit system "+re+" does not exist. Choices are: "+Object.keys(Ae).join(", "))},A.getUnitSystem=function(){for(var re in Ae)if(Pt(Ae,re)&&Ae[re]===Te)return re},A.typeConverters={BigNumber:function(be){return be!=null&&be.isFraction?new _(String(be.n)).div(String(be.d)).times(String(be.s)):new _(be+"")},Fraction:function(be){return new T(be)},Complex:function(be){return be},number:function(be){return be!=null&&be.isFraction?b(be):be}},A.prototype._numberConverter=function(){var re=A.typeConverters[this.valueType()];if(re)return re;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},A._getNumberConverter=function(re){if(!A.typeConverters[re])throw new TypeError('Unsupported type "'+re+'"');return A.typeConverters[re]};for(var se in ne)if(Pt(ne,se)){var Me=ne[se];Me.dimensions=Me.base.dimensions}for(var Be in ue)if(Pt(ue,Be)){var Le=ne[ue[Be]],Pe={};for(var Ye in Le)Pt(Le,Ye)&&(Pe[Ye]=Le[Ye]);Pe.name=Be,ne[Be]=Pe}A.isValidAlpha=function(be){return/^[a-zA-Z]$/.test(be)};function Ze(re){for(var be=0;be<re.length;be++){if(O=re.charAt(be),be===0&&!A.isValidAlpha(O))throw new Error('Invalid unit name (must begin with alpha character): "'+re+'"');if(be>0&&!(A.isValidAlpha(O)||R(O)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+re+'"')}}return A.createUnit=function(re,be){if(typeof re!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(be&&be.override){for(var Ce in re)if(Pt(re,Ce)&&A.deleteUnit(Ce),re[Ce].aliases)for(var q=0;q<re[Ce].aliases.length;q++)A.deleteUnit(re[Ce].aliases[q])}var V;for(var ie in re)Pt(re,ie)&&(V=A.createUnitSingle(ie,re[ie]));return V},A.createUnitSingle=function(re,be){if((typeof be>"u"||be===null)&&(be={}),typeof re!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Pt(ne,re))throw new Error('Cannot create unit "'+re+'": a unit with that name already exists');Ze(re);var Ce=null,q=[],V=0,ie,fe,Se;if(be&&be.type==="Unit")Ce=be.clone();else if(typeof be=="string")be!==""&&(ie=be);else if(typeof be=="object")ie=be.definition,fe=be.prefixes,V=be.offset,Se=be.baseName,be.aliases&&(q=be.aliases.valueOf());else throw new TypeError('Cannot create unit "'+re+'" from "'+be.toString()+'": expecting "string" or "Unit" or "Object"');if(q){for(var ve=0;ve<q.length;ve++)if(Pt(ne,q[ve]))throw new Error('Cannot create alias "'+q[ve]+'": a unit with that name already exists')}if(ie&&typeof ie=="string"&&!Ce)try{Ce=A.parse(ie,{allowNoUnits:!0})}catch(ft){throw ft.message='Could not create unit "'+re+'" from "'+ie+'": '+ft.message,ft}else ie&&ie.type==="Unit"&&(Ce=ie.clone());q=q||[],V=V||0,fe&&fe.toUpperCase?fe=k[fe.toUpperCase()]||k.NONE:fe=k.NONE;var qe={};if(Ce){qe={name:re,value:Ce.value,dimensions:Ce.dimensions.slice(0),prefixes:fe,offset:V};var rt=!1;for(var ot in J)if(Pt(J,ot)){for(var St=!0,ye=0;ye<ae.length;ye++)if(Math.abs((qe.dimensions[ye]||0)-(J[ot].dimensions[ye]||0))>1e-12){St=!1;break}if(St){rt=!0,qe.base=J[ot];break}}if(!rt){Se=Se||re+"_STUFF";var Ve={dimensions:Ce.dimensions.slice(0)};Ve.key=Se,J[Se]=Ve,Te[Se]={unit:qe,prefix:k.NONE[""]},qe.base=J[Se]}}else{if(Se=Se||re+"_STUFF",ae.indexOf(Se)>=0)throw new Error('Cannot create new base unit "'+re+'": a base unit with that name already exists (and cannot be overridden)');ae.push(Se);for(var Fe in J)Pt(J,Fe)&&(J[Fe].dimensions[ae.length-1]=0);for(var We={dimensions:[]},Ge=0;Ge<ae.length;Ge++)We.dimensions[Ge]=0;We.dimensions[ae.length-1]=1,We.key=Se,J[Se]=We,qe={name:re,value:1,dimensions:J[Se].dimensions.slice(0),prefixes:fe,offset:V,base:J[Se]},Te[Se]={unit:qe,prefix:k.NONE[""]}}A.UNITS[re]=qe;for(var G=0;G<q.length;G++){var ee=q[G],Ee={};for(var ze in qe)Pt(qe,ze)&&(Ee[ze]=qe[ze]);Ee.name=ee,A.UNITS[ee]=Ee}return delete I.cache,new A(null,re)},A.deleteUnit=function(re){delete A.UNITS[re],delete I.cache},A.PREFIXES=k,A.BASE_DIMENSIONS=ae,A.BASE_UNITS=J,A.UNIT_SYSTEMS=Ae,A.UNITS=ne,A},{isClass:!0}),$C="unit",yk=["typed","Unit"],xk=de($C,yk,r=>{var{typed:e,Unit:t}=r;return e($C,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,a){return new t(i,a)},"number | BigNumber | Fraction":function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>Tn(i,n))})}),ZC="sparse",bk=["typed","SparseMatrix"],_k=de(ZC,bk,r=>{var{typed:e,SparseMatrix:t}=r;return e(ZC,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,a){return new t(i,a)}})}),KC="createUnit",Sk=["typed","Unit"],Mk=de(KC,Sk,r=>{var{typed:e,Unit:t}=r;return e(KC,{"Object, Object":function(i,a){return t.createUnit(i,a)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,a,s){var o={};return o[i]=a,t.createUnit(o,s)},"string, Unit | string | Object":function(i,a){var s={};return s[i]=a,t.createUnit(s,{})},string:function(i){var a={};return a[i]={},t.createUnit(a,{})}})}),QC="acos",Ek=["typed","config","Complex"],Ak=de(QC,Ek,r=>{var{typed:e,config:t,Complex:n}=r;return e(QC,{number:function(a){return a>=-1&&a<=1||t.predictable?Math.acos(a):new n(a,0).acos()},Complex:function(a){return a.acos()},BigNumber:function(a){return a.acos()}})}),JC="acosh",wk=["typed","config","Complex"],Tk=de(JC,wk,r=>{var{typed:e,config:t,Complex:n}=r;return e(JC,{number:function(a){return a>=1||t.predictable?CU(a):a<=-1?new n(Math.log(Math.sqrt(a*a-1)-a),Math.PI):new n(a,0).acosh()},Complex:function(a){return a.acosh()},BigNumber:function(a){return a.acosh()}})}),e3="acot",Nk=["typed","BigNumber"],Dk=de(e3,Nk,r=>{var{typed:e,BigNumber:t}=r;return e(e3,{number:RU,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()}})}),t3="acoth",Ck=["typed","config","Complex","BigNumber"],Rk=de(t3,Ck,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(t3,{number:function(s){return s>=1||s<=-1||t.predictable?OU(s):new n(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new i(1).div(s).atanh()}})}),n3="acsc",Ok=["typed","config","Complex","BigNumber"],Bk=de(n3,Ok,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(n3,{number:function(s){return s<=-1||s>=1||t.predictable?BU(s):new n(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new i(1).div(s).asin()}})}),r3="acsch",Uk=["typed","BigNumber"],zk=de(r3,Uk,r=>{var{typed:e,BigNumber:t}=r;return e(r3,{number:UU,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()}})}),i3="asec",Fk=["typed","config","Complex","BigNumber"],Lk=de(i3,Fk,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(i3,{number:function(s){return s<=-1||s>=1||t.predictable?zU(s):new n(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new i(1).div(s).acos()}})}),a3="asech",Ik=["typed","config","Complex","BigNumber"],Pk=de(a3,Ik,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(a3,{number:function(s){if(s<=1&&s>=-1||t.predictable){var o=1/s;if(o>0||t.predictable)return FU(s);var c=Math.sqrt(o*o-1);return new n(Math.log(c-o),Math.PI)}return new n(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new i(1).div(s).acosh()}})}),s3="asin",Hk=["typed","config","Complex"],Vk=de(s3,Hk,r=>{var{typed:e,config:t,Complex:n}=r;return e(s3,{number:function(a){return a>=-1&&a<=1||t.predictable?Math.asin(a):new n(a,0).asin()},Complex:function(a){return a.asin()},BigNumber:function(a){return a.asin()}})}),qk="asinh",Gk=["typed"],kk=de(qk,Gk,r=>{var{typed:e}=r;return e("asinh",{number:LU,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),Xk="atan",jk=["typed"],Yk=de(Xk,jk,r=>{var{typed:e}=r;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),o3="atan2",Wk=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],$k=de(o3,Wk,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,DenseMatrix:a,concat:s}=r,o=fu({typed:e,equalScalar:n}),c=_s({typed:e}),u=QU({typed:e,equalScalar:n}),h=Ya({typed:e,equalScalar:n}),d=fa({typed:e,DenseMatrix:a}),m=$r({typed:e,matrix:t,concat:s});return e(o3,{"number, number":Math.atan2,"BigNumber, BigNumber":(v,x)=>i.atan2(v,x)},m({scalar:"number | BigNumber",SS:u,DS:c,SD:o,Ss:h,sS:d}))}),l3="atanh",Zk=["typed","config","Complex"],Kk=de(l3,Zk,r=>{var{typed:e,config:t,Complex:n}=r;return e(l3,{number:function(a){return a<=1&&a>=-1||t.predictable?IU(a):new n(a,0).atanh()},Complex:function(a){return a.atanh()},BigNumber:function(a){return a.atanh()}})}),Hv=de("trigUnit",["typed"],r=>{var{typed:e}=r;return{Unit:e.referToSelf(t=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,n.valueType())(n.value)})}}),u3="cos",Qk=["typed"],Jk=de(u3,Qk,r=>{var{typed:e}=r,t=Hv({typed:e});return e(u3,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},t)}),c3="cosh",eX=["typed"],tX=de(c3,eX,r=>{var{typed:e}=r;return e(c3,{number:YP,"Complex | BigNumber":t=>t.cosh()})}),f3="cot",nX=["typed","BigNumber"],rX=de(f3,nX,r=>{var{typed:e,BigNumber:t}=r,n=Hv({typed:e});return e(f3,{number:PU,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},n)}),h3="coth",iX=["typed","BigNumber"],aX=de(h3,iX,r=>{var{typed:e,BigNumber:t}=r;return e(h3,{number:HU,Complex:n=>n.coth(),BigNumber:n=>new t(1).div(n.tanh())})}),d3="csc",sX=["typed","BigNumber"],oX=de(d3,sX,r=>{var{typed:e,BigNumber:t}=r,n=Hv({typed:e});return e(d3,{number:VU,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},n)}),p3="csch",lX=["typed","BigNumber"],uX=de(p3,lX,r=>{var{typed:e,BigNumber:t}=r;return e(p3,{number:qU,Complex:n=>n.csch(),BigNumber:n=>new t(1).div(n.sinh())})}),m3="sec",cX=["typed","BigNumber"],fX=de(m3,cX,r=>{var{typed:e,BigNumber:t}=r,n=Hv({typed:e});return e(m3,{number:GU,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},n)}),v3="sech",hX=["typed","BigNumber"],dX=de(v3,hX,r=>{var{typed:e,BigNumber:t}=r;return e(v3,{number:kU,Complex:n=>n.sech(),BigNumber:n=>new t(1).div(n.cosh())})}),g3="sin",pX=["typed"],mX=de(g3,pX,r=>{var{typed:e}=r,t=Hv({typed:e});return e(g3,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},t)}),y3="sinh",vX=["typed"],gX=de(y3,vX,r=>{var{typed:e}=r;return e(y3,{number:XU,"Complex | BigNumber":t=>t.sinh()})}),x3="tan",yX=["typed"],xX=de(x3,yX,r=>{var{typed:e}=r,t=Hv({typed:e});return e(x3,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},t)}),bX="tanh",_X=["typed"],SX=de(bX,_X,r=>{var{typed:e}=r;return e("tanh",{number:$P,"Complex | BigNumber":t=>t.tanh()})}),b3="setCartesian",MX=["typed","size","subset","compareNatural","Index","DenseMatrix"],EX=de(b3,MX,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(b3,{"Array | Matrix, Array | Matrix":function(c,u){var h=[];if(n(t(c),new a(0))!==0&&n(t(u),new a(0))!==0){var d=mr(Array.isArray(c)?c:c.toArray()).sort(i),m=mr(Array.isArray(u)?u:u.toArray()).sort(i);h=[];for(var v=0;v<d.length;v++)for(var x=0;x<m.length;x++)h.push([d[v],m[x]])}return Array.isArray(c)&&Array.isArray(u)?h:new s(h)}})}),_3="setDifference",AX=["typed","size","subset","compareNatural","Index","DenseMatrix"],wX=de(_3,AX,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(_3,{"Array | Matrix, Array | Matrix":function(c,u){var h;if(n(t(c),new a(0))===0)h=[];else{if(n(t(u),new a(0))===0)return mr(c.toArray());var d=yv(mr(Array.isArray(c)?c:c.toArray()).sort(i)),m=yv(mr(Array.isArray(u)?u:u.toArray()).sort(i));h=[];for(var v,x=0;x<d.length;x++){v=!1;for(var b=0;b<m.length;b++)if(i(d[x].value,m[b].value)===0&&d[x].identifier===m[b].identifier){v=!0;break}v||h.push(d[x])}}return Array.isArray(c)&&Array.isArray(u)?r_(h):new s(r_(h))}})}),S3="setDistinct",TX=["typed","size","subset","compareNatural","Index","DenseMatrix"],NX=de(S3,TX,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(S3,{"Array | Matrix":function(c){var u;if(n(t(c),new a(0))===0)u=[];else{var h=mr(Array.isArray(c)?c:c.toArray()).sort(i);u=[],u.push(h[0]);for(var d=1;d<h.length;d++)i(h[d],h[d-1])!==0&&u.push(h[d])}return Array.isArray(c)?u:new s(u)}})}),M3="setIntersect",DX=["typed","size","subset","compareNatural","Index","DenseMatrix"],CX=de(M3,DX,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a,DenseMatrix:s}=r;return e(M3,{"Array | Matrix, Array | Matrix":function(c,u){var h;if(n(t(c),new a(0))===0||n(t(u),new a(0))===0)h=[];else{var d=yv(mr(Array.isArray(c)?c:c.toArray()).sort(i)),m=yv(mr(Array.isArray(u)?u:u.toArray()).sort(i));h=[];for(var v=0;v<d.length;v++)for(var x=0;x<m.length;x++)if(i(d[v].value,m[x].value)===0&&d[v].identifier===m[x].identifier){h.push(d[v]);break}}return Array.isArray(c)&&Array.isArray(u)?r_(h):new s(r_(h))}})}),E3="setIsSubset",RX=["typed","size","subset","compareNatural","Index"],OX=de(E3,RX,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(E3,{"Array | Matrix, Array | Matrix":function(o,c){if(n(t(o),new a(0))===0)return!0;if(n(t(c),new a(0))===0)return!1;for(var u=yv(mr(Array.isArray(o)?o:o.toArray()).sort(i)),h=yv(mr(Array.isArray(c)?c:c.toArray()).sort(i)),d,m=0;m<u.length;m++){d=!1;for(var v=0;v<h.length;v++)if(i(u[m].value,h[v].value)===0&&u[m].identifier===h[v].identifier){d=!0;break}if(d===!1)return!1}return!0}})}),A3="setMultiplicity",BX=["typed","size","subset","compareNatural","Index"],UX=de(A3,BX,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(A3,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,c){if(n(t(c),new a(0))===0)return 0;for(var u=mr(Array.isArray(c)?c:c.toArray()),h=0,d=0;d<u.length;d++)i(u[d],o)===0&&h++;return h}})}),w3="setPowerset",zX=["typed","size","subset","compareNatural","Index"],FX=de(w3,zX,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:a}=r;return e(w3,{"Array | Matrix":function(u){if(n(t(u),new a(0))===0)return[];for(var h=mr(Array.isArray(u)?u:u.toArray()).sort(i),d=[],m=0;m.toString(2).length<=h.length;)d.push(s(h,m.toString(2).split("").reverse())),m++;return o(d)}});function s(c,u){for(var h=[],d=0;d<u.length;d++)u[d]==="1"&&h.push(c[d]);return h}function o(c){for(var u=[],h=c.length-1;h>0;h--)for(var d=0;d<h;d++)c[d].length>c[d+1].length&&(u=c[d],c[d]=c[d+1],c[d+1]=u);return c}}),T3="setSize",LX=["typed","compareNatural"],IX=de(T3,LX,r=>{var{typed:e,compareNatural:t}=r;return e(T3,{"Array | Matrix":function(i){return Array.isArray(i)?mr(i).length:mr(i.toArray()).length},"Array | Matrix, boolean":function(i,a){if(a===!1||i.length===0)return Array.isArray(i)?mr(i).length:mr(i.toArray()).length;for(var s=mr(Array.isArray(i)?i:i.toArray()).sort(t),o=1,c=1;c<s.length;c++)t(s[c],s[c-1])!==0&&o++;return o}})}),N3="setSymDifference",PX=["typed","size","concat","subset","setDifference","Index"],HX=de(N3,PX,r=>{var{typed:e,size:t,concat:n,subset:i,setDifference:a,Index:s}=r;return e(N3,{"Array | Matrix, Array | Matrix":function(c,u){if(i(t(c),new s(0))===0)return mr(u);if(i(t(u),new s(0))===0)return mr(c);var h=mr(c),d=mr(u);return n(a(h,d),a(d,h))}})}),D3="setUnion",VX=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],qX=de(D3,VX,r=>{var{typed:e,size:t,concat:n,subset:i,setIntersect:a,setSymDifference:s,Index:o}=r;return e(D3,{"Array | Matrix, Array | Matrix":function(u,h){if(i(t(u),new o(0))===0)return mr(h);if(i(t(h),new o(0))===0)return mr(u);var d=mr(u),m=mr(h);return n(s(d,m),a(d,m))}})}),C3="add",GX=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],kX=de(C3,GX,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:s,concat:o}=r,c=Mh({typed:e}),u=V2({typed:e,equalScalar:i}),h=cp({typed:e,DenseMatrix:a}),d=$r({typed:e,matrix:t,concat:o});return e(C3,{"any, any":n,"any, any, ...any":e.referToSelf(m=>(v,x,b)=>{for(var M=m(v,x),_=0;_<b.length;_++)M=m(M,b[_]);return M})},d({elop:n,DS:c,SS:u,Ss:h}))}),R3="hypot",XX=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],jX=de(R3,XX,r=>{var{typed:e,abs:t,addScalar:n,divideScalar:i,multiplyScalar:a,sqrt:s,smaller:o,isPositive:c}=r;return e(R3,{"... number | BigNumber":u,Array:u,Matrix:h=>u(mr(h.toArray(),!0))});function u(h){for(var d=0,m=0,v=0;v<h.length;v++){if(Jc(h[v]))throw new TypeError("Unexpected type of argument to hypot");var x=t(h[v]);o(m,x)?(d=a(d,a(i(m,x),i(m,x))),d=n(d,1),m=x):d=n(d,c(x)?a(i(x,m),i(x,m)):x)}return a(m,s(d))}}),O3="norm",YX=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],WX=de(O3,YX,r=>{var{typed:e,abs:t,add:n,pow:i,conj:a,sqrt:s,multiply:o,equalScalar:c,larger:u,smaller:h,matrix:d,ctranspose:m,eigs:v}=r;return e(O3,{number:Math.abs,Complex:function(z){return z.abs()},BigNumber:function(z){return z.abs()},boolean:function(z){return Math.abs(z)},Array:function(z){return N(d(z),2)},Matrix:function(z){return N(z,2)},"Array, number | BigNumber | string":function(z,C){return N(d(z),C)},"Matrix, number | BigNumber | string":function(z,C){return N(z,C)}});function x(O){var z=0;return O.forEach(function(C){var R=t(C);u(R,z)&&(z=R)},!0),z}function b(O){var z;return O.forEach(function(C){var R=t(C);(!z||h(R,z))&&(z=R)},!0),z||0}function M(O,z){if(z===Number.POSITIVE_INFINITY||z==="inf")return x(O);if(z===Number.NEGATIVE_INFINITY||z==="-inf")return b(O);if(z==="fro")return N(O,2);if(typeof z=="number"&&!isNaN(z)){if(!c(z,0)){var C=0;return O.forEach(function(R){C=n(i(t(R),z),C)},!0),i(C,1/z)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function _(O){var z=0;return O.forEach(function(C,R){z=n(z,o(C,a(C)))}),t(s(z))}function T(O){var z=[],C=0;return O.forEach(function(R,F){var H=F[1],X=n(z[H]||0,t(R));u(X,C)&&(C=X),z[H]=X},!0),C}function E(O){var z=O.size();if(z[0]!==z[1])throw new RangeError("Invalid matrix dimensions");var C=m(O),R=o(C,O),F=v(R).values.toArray(),H=F[F.length-1];return t(s(H))}function A(O){var z=[],C=0;return O.forEach(function(R,F){var H=F[0],X=n(z[H]||0,t(R));u(X,C)&&(C=X),z[H]=X},!0),C}function D(O,z){if(z===1)return T(O);if(z===Number.POSITIVE_INFINITY||z==="inf")return A(O);if(z==="fro")return _(O);if(z===2)return E(O);throw new Error("Unsupported parameter value "+z)}function N(O,z){var C=O.size();if(C.length===1)return M(O,z);if(C.length===2){if(C[0]&&C[1])return D(O,z);throw new RangeError("Invalid matrix dimensions")}}}),B3="dot",$X=["typed","addScalar","multiplyScalar","conj","size"],ZX=de(B3,$X,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:i,size:a}=r;return e(B3,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":c});function s(u,h){var d=a(u),m=a(h),v,x;if(d.length===1)v=d[0];else if(d.length===2&&d[1]===1)v=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(m.length===1)x=m[0];else if(m.length===2&&m[1]===1)x=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(v!==x)throw new RangeError("Vectors must have equal length ("+v+" != "+x+")");if(v===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return v}function o(u,h){var d=s(u,h),m=rn(u)?u._data:u,v=rn(u)?u._datatype||u.getDataType():void 0,x=rn(h)?h._data:h,b=rn(h)?h._datatype||h.getDataType():void 0,M=a(u).length===2,_=a(h).length===2,T=t,E=n;if(v&&b&&v===b&&typeof v=="string"&&v!=="mixed"){var A=v;T=e.find(t,[A,A]),E=e.find(n,[A,A])}if(!M&&!_){for(var D=E(i(m[0]),x[0]),N=1;N<d;N++)D=T(D,E(i(m[N]),x[N]));return D}if(!M&&_){for(var O=E(i(m[0]),x[0][0]),z=1;z<d;z++)O=T(O,E(i(m[z]),x[z][0]));return O}if(M&&!_){for(var C=E(i(m[0][0]),x[0]),R=1;R<d;R++)C=T(C,E(i(m[R][0]),x[R]));return C}if(M&&_){for(var F=E(i(m[0][0]),x[0][0]),H=1;H<d;H++)F=T(F,E(i(m[H][0]),x[H][0]));return F}}function c(u,h){s(u,h);for(var d=u._index,m=u._values,v=h._index,x=h._values,b=0,M=t,_=n,T=0,E=0;T<d.length&&E<v.length;){var A=d[T],D=v[E];if(A<D){T++;continue}if(A>D){E++;continue}A===D&&(b=M(b,_(m[T],x[E])),T++,E++)}return b}}),KX="trace",QX=["typed","matrix","add"],JX=de(KX,QX,r=>{var{typed:e,matrix:t,add:n}=r;return e("trace",{Array:function(o){return i(t(o))},SparseMatrix:a,DenseMatrix:i,any:bn});function i(s){var o=s._size,c=s._data;switch(o.length){case 1:if(o[0]===1)return bn(c[0]);throw new RangeError("Matrix must be square (size: "+Fn(o)+")");case 2:{var u=o[0],h=o[1];if(u===h){for(var d=0,m=0;m<u;m++)d=n(d,c[m][m]);return d}else throw new RangeError("Matrix must be square (size: "+Fn(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Fn(o)+")")}}function a(s){var o=s._values,c=s._index,u=s._ptr,h=s._size,d=h[0],m=h[1];if(d===m){var v=0;if(o.length>0)for(var x=0;x<m;x++)for(var b=u[x],M=u[x+1],_=b;_<M;_++){var T=c[_];if(T===x){v=n(v,o[_]);break}if(T>x)break}return v}throw new RangeError("Matrix must be square (size: "+Fn(h)+")")}}),U3="index",ej=["typed","Index"],tj=de(U3,ej,r=>{var{typed:e,Index:t}=r;return e(U3,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var a=i.map(function(o){return wn(o)?o.toNumber():Ir(o)||rn(o)?o.map(function(c){return wn(c)?c.toNumber():c}):o}),s=new t;return t.apply(s,a),s}})}),yz=new Set(["end"]),nj="Node",rj=["mathWithTransform"],ij=de(nj,rj,r=>{var{mathWithTransform:e}=r;function t(i){for(var a of[...yz])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),s={},o=null;function c(u){var h=ov(u);return t(h),a(h,s,o)}return{evaluate:c}}_compile(a,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!Ur(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function s(o,c){o.forEach(function(u,h,d){c(u,h,d),s(u,c)})}s(this,a)}transform(a){function s(o,c,u){var h=a(o,c,u);return h!==o?h:o.map(s)}return s(this,null,null)}filter(a){var s=[];return this.traverse(function(o,c,u){a(o,c,u)&&s.push(o)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&af(this,a):!1}toString(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toString(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toHTML(a)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function Ks(r){return r&&r.isIndexError?new uu(r.index+1,r.min+1,r.max!==void 0?r.max+1:void 0):r}function xz(r){var{subset:e}=r;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Ys(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw Ks(a)}}}var gx="AccessorNode",aj=["subset","Node"],sj=de(gx,aj,r=>{var{subset:e,Node:t}=r,n=xz({subset:e});function i(s){return!(rp(s)||gl(s)||Qn(s)||ph(s)||yS(s)||rf(s)||Na(s))}class a extends t{constructor(o,c){if(super(),!Ur(o))throw new TypeError('Node expected for parameter "object"');if(!zv(c))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=c}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return gx}get isAccessorNode(){return!0}_compile(o,c){var u=this.object._compile(o,c),h=this.index._compile(o,c);if(this.index.isObjectProperty()){var d=this.index.getObjectProperty();return function(v,x,b){return Ys(u(v,x,b),d)}}else return function(v,x,b){var M=u(v,x,b),_=h(v,x,M);return n(M,_)}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new a(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(o){var c=this.object.toString(o);return i(this.object)&&(c="("+c+")"),c+this.index.toString(o)}_toHTML(o){var c=this.object.toHTML(o);return i(this.object)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c+this.index.toHTML(o)}_toTex(o){var c=this.object.toTex(o);return i(this.object)&&(c="\\left(' + object + '\\right)"),c+this.index.toTex(o)}toJSON(){return{mathjs:gx,object:this.object,index:this.index}}static fromJSON(o){return new a(o.object,o.index)}}return $i(a,"name",gx),a},{isClass:!0,isNode:!0}),yx="ArrayNode",oj=["Node"],lj=de(yx,oj,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(Ur))throw new TypeError("Array containing Nodes expected")}get type(){return yx}get isArrayNode(){return!0}_compile(i,a){var s=hh(this.items,function(u){return u._compile(i,a)}),o=i.config.matrix!=="Array";if(o){var c=i.matrix;return function(h,d,m){return c(hh(s,function(v){return v(h,d,m)}))}}else return function(h,d,m){return hh(s,function(v){return v(h,d,m)})}}forEach(i){for(var a=0;a<this.items.length;a++){var s=this.items[a];i(s,"items["+a+"]",this)}}map(i){for(var a=[],s=0;s<this.items.length;s++)a[s]=this._ifNode(i(this.items[s],"items["+s+"]",this));return new t(a)}clone(){return new t(this.items.slice(0))}_toString(i){var a=this.items.map(function(s){return s.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:yx,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var a=this.items.map(function(s){return s.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(s,o){var c=s.some(gl)&&!s.every(gl),u=o||c,h=u?"&":"\\\\",d=s.map(function(m){return m.items?a(m.items,!o):m.toTex(i)}).join(h);return c||!u||u&&!o?"\\begin{bmatrix}"+d+"\\end{bmatrix}":d}return a(this.items,!1)}}return $i(t,"name",yx),t},{isClass:!0,isNode:!0});function uj(r){var{subset:e,matrix:t}=r;return function(i,a,s){try{if(Array.isArray(i)){var o=t(i).subset(a,s).valueOf();return o.forEach((c,u)=>{i[u]=c}),i}else{if(i&&typeof i.subset=="function")return i.subset(a,s);if(typeof i=="string")return e(i,a,s);if(typeof i=="object"){if(!a.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return pv(i,a.getObjectProperty(),s),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(c){throw Ks(c)}}}var au=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function xx(r,e){if(!e||e!=="auto")return r;for(var t=r;rf(t);)t=t.content;return t}function Pr(r,e,t,n){var i=r;e!=="keep"&&(i=r.getContent());for(var a=i.getIdentifier(),s=null,o=0;o<au.length;o++)if(a in au[o]){s=o;break}if(a==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var c=xx(i.args[0],e);!(Qn(c)&&n&&n.getIdentifier()==="OperatorNode:divide"&&IA(xx(n.args[0],e)))&&!(c.getIdentifier()==="OperatorNode:divide"&&IA(xx(c.args[0],e))&&Qn(xx(c.args[1])))&&(s+=1)}return s}function E0(r,e){var t=r;e!=="keep"&&(t=r.getContent());var n=t.getIdentifier(),i=Pr(t,e);if(i===null)return null;var a=au[i][n];if(Pt(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+a.associativity+"'.")}return null}function yE(r,e,t){var n=t!=="keep"?r.getContent():r,i=t!=="keep"?r.getContent():e,a=n.getIdentifier(),s=i.getIdentifier(),o=Pr(n,t);if(o===null)return null;var c=au[o][a];if(Pt(c,"associativeWith")&&c.associativeWith instanceof Array){for(var u=0;u<c.associativeWith.length;u++)if(c.associativeWith[u]===s)return!0;return!1}return null}function cj(r){var e="OperatorNode:"+r;for(var t of au)if(e in t)return t[e].op;return null}var bx="AssignmentNode",fj=["subset","?matrix","Node"],hj=de(bx,fj,r=>{var{subset:e,matrix:t,Node:n}=r,i=xz({subset:e}),a=uj({subset:e,matrix:t});function s(c,u,h){u||(u="keep");var d=Pr(c,u,h),m=Pr(c.value,u,h);return u==="all"||m!==null&&m<=d}class o extends n{constructor(u,h,d){if(super(),this.object=u,this.index=d?h:null,this.value=d||h,!Na(u)&&!rp(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Na(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!zv(this.index))throw new TypeError('IndexNode expected as "index"');if(!Ur(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return bx}get isAssignmentNode(){return!0}_compile(u,h){var d=this.object._compile(u,h),m=this.index?this.index._compile(u,h):null,v=this.value._compile(u,h),x=this.object.name;if(this.index)if(this.index.isObjectProperty()){var b=this.index.getObjectProperty();return function(A,D,N){var O=d(A,D,N),z=v(A,D,N);return pv(O,b,z),z}}else{if(Na(this.object))return function(A,D,N){var O=d(A,D,N),z=v(A,D,N),C=m(A,D,O);return A.set(x,a(O,C,z)),z};var M=this.object.object._compile(u,h);if(this.object.index.isObjectProperty()){var _=this.object.index.getObjectProperty();return function(A,D,N){var O=M(A,D,N),z=Ys(O,_),C=m(A,D,z),R=v(A,D,N);return pv(O,_,a(z,C,R)),R}}else{var T=this.object.index._compile(u,h);return function(A,D,N){var O=M(A,D,N),z=T(A,D,O),C=i(O,z),R=m(A,D,C),F=v(A,D,N);return a(O,z,a(C,R,F)),F}}}else{if(!Na(this.object))throw new TypeError("SymbolNode expected as object");return function(A,D,N){var O=v(A,D,N);return A.set(x,O),O}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var h=this._ifNode(u(this.object,"object",this)),d=this.index?this._ifNode(u(this.index,"index",this)):null,m=this._ifNode(u(this.value,"value",this));return new o(h,d,m)}clone(){return new o(this.object,this.index,this.value)}_toString(u){var h=this.object.toString(u),d=this.index?this.index.toString(u):"",m=this.value.toString(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(m="("+m+")"),h+d+" = "+m}toJSON(){return{mathjs:bx,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new o(u.object,u.index,u.value)}_toHTML(u){var h=this.object.toHTML(u),d=this.index?this.index.toHTML(u):"",m=this.value.toHTML(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(m='<span class="math-paranthesis math-round-parenthesis">(</span>'+m+'<span class="math-paranthesis math-round-parenthesis">)</span>'),h+d+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+m}_toTex(u){var h=this.object.toTex(u),d=this.index?this.index.toTex(u):"",m=this.value.toTex(u);return s(this,u&&u.parenthesis,u&&u.implicit)&&(m="\\left(".concat(m,"\\right)")),h+d+"="+m}}return $i(o,"name",bx),o},{isClass:!0,isNode:!0}),_x="BlockNode",dj=["ResultSet","Node"],pj=de(_x,dj,r=>{var{ResultSet:e,Node:t}=r;class n extends t{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(s){var o=s&&s.node,c=s&&s.visible!==void 0?s.visible:!0;if(!Ur(o))throw new TypeError('Property "node" must be a Node');if(typeof c!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:c}})}get type(){return _x}get isBlockNode(){return!0}_compile(a,s){var o=hh(this.blocks,function(c){return{evaluate:c.node._compile(a,s),visible:c.visible}});return function(u,h,d){var m=[];return eU(o,function(x){var b=x.evaluate(u,h,d);x.visible&&m.push(b)}),new e(m)}}forEach(a){for(var s=0;s<this.blocks.length;s++)a(this.blocks[s].node,"blocks["+s+"].node",this)}map(a){for(var s=[],o=0;o<this.blocks.length;o++){var c=this.blocks[o],u=this._ifNode(a(c.node,"blocks["+o+"].node",this));s[o]={node:u,visible:c.visible}}return new n(s)}clone(){var a=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new n(a)}_toString(a){return this.blocks.map(function(s){return s.node.toString(a)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:_x,blocks:this.blocks}}static fromJSON(a){return new n(a.blocks)}_toHTML(a){return this.blocks.map(function(s){return s.node.toHTML(a)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(s){return s.node.toTex(a)+(s.visible?"":";")}).join(`\\;\\;
`)}}return $i(n,"name",_x),n},{isClass:!0,isNode:!0}),Sx="ConditionalNode",mj=["Node"],vj=de(Sx,mj,r=>{var{Node:e}=r;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(wn(i))return!i.isZero();if(Jc(i))return!!(i.re||i.im);if(Lo(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Hr(i)+'"')}class n extends e{constructor(a,s,o){if(super(),!Ur(a))throw new TypeError("Parameter condition must be a Node");if(!Ur(s))throw new TypeError("Parameter trueExpr must be a Node");if(!Ur(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=s,this.falseExpr=o}get type(){return Sx}get isConditionalNode(){return!0}_compile(a,s){var o=this.condition._compile(a,s),c=this.trueExpr._compile(a,s),u=this.falseExpr._compile(a,s);return function(d,m,v){return t(o(d,m,v))?c(d,m,v):u(d,m,v)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new n(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=Pr(this,s,a&&a.implicit),c=this.condition.toString(a),u=Pr(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(c="("+c+")");var h=this.trueExpr.toString(a),d=Pr(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||d!==null&&d<=o)&&(h="("+h+")");var m=this.falseExpr.toString(a),v=Pr(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||v!==null&&v<=o)&&(m="("+m+")"),c+" ? "+h+" : "+m}toJSON(){return{mathjs:Sx,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new n(a.condition,a.trueExpr,a.falseExpr)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=Pr(this,s,a&&a.implicit),c=this.condition.toHTML(a),u=Pr(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var h=this.trueExpr.toHTML(a),d=Pr(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||d!==null&&d<=o)&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>');var m=this.falseExpr.toHTML(a),v=Pr(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||v!==null&&v<=o)&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c+'<span class="math-operator math-conditional-operator">?</span>'+h+'<span class="math-operator math-conditional-operator">:</span>'+m}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return $i(n,"name",Sx),n},{isClass:!0,isNode:!0}),xE,z3;function gj(){if(z3)return xE;z3=1;var r=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},e={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},t={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},n=function(a,s){return r({},a,s)};return xE=function(i){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.preserveFormatting,o=s===void 0?!1:s,c=a.escapeMapFn,u=c===void 0?n:c,h=String(i),d="",m=u(r({},e),o?r({},t):{}),v=Object.keys(m),x=function(){var M=!1;v.forEach(function(_,T){M||h.length>=_.length&&h.slice(0,_.length)===_&&(d+=m[v[T]],h=h.slice(_.length,h.length),M=!0)}),M||(d+=h.slice(0,1),h=h.slice(1,h.length))};h;)x();return d},xE}var yj=gj();const xj=up(yj);var n2={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},dr={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},F3={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(dr.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(dr.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(dr.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(dr.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(dr.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(dr.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(dr.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(dr.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(dr.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(dr.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(dr.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(dr.bitAnd,"${args[1]}\\right)")},bitNot:{1:dr.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(dr.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(dr.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(dr.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(dr.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(dr.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(dr.and,"${args[1]}\\right)")},not:{1:dr.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(dr.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(dr.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(dr.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(dr.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(dr.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(dr.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(dr.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(dr.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(dr.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(dr.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(dr.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(dr.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(dr.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(n2.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},bj="\\mathrm{${name}}\\left(${args}\\right)",L3={deg:"^\\circ"};function r2(r){return xj(r,{preserveFormatting:!0})}function bz(r,e){return e=typeof e>"u"?!1:e,e?Pt(L3,r)?L3[r]:"\\mathrm{"+r2(r)+"}":Pt(n2,r)?n2[r]:r2(r)}var Mx="ConstantNode",_j=["Node"],Sj=de(Mx,_j,r=>{var{Node:e}=r;class t extends e{constructor(i){super(),this.value=i}get type(){return Mx}get isConstantNode(){return!0}_compile(i,a){var s=this.value;return function(){return s}}forEach(i){}map(i){return this.clone()}clone(){return new t(this.value)}_toString(i){return Fn(this.value,i)}_toHTML(i){var a=this._toString(i);switch(Hr(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:Mx,value:this.value}}static fromJSON(i){return new t(i.value)}_toTex(i){var a=this._toString(i),s=Hr(this.value);switch(s){case"string":return"\\mathtt{"+r2(a)+"}";case"number":case"BigNumber":{var o=s==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!o)return this.value.valueOf()<0?"-\\infty":"\\infty";var c=a.toLowerCase().indexOf("e");return c!==-1?a.substring(0,c)+"\\cdot10^{"+a.substring(c+1)+"}":a}case"bigint":return a.toString();case"Fraction":return this.value.toLatex();default:return a}}}return $i(t,"name",Mx),t},{isClass:!0,isNode:!0}),Ex="FunctionAssignmentNode",Mj=["typed","Node"],Ej=de(Ex,Mj,r=>{var{typed:e,Node:t}=r;function n(a,s,o){var c=Pr(a,s,o),u=Pr(a.expr,s,o);return s==="all"||u!==null&&u<=c}class i extends t{constructor(s,o,c){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Ur(c))throw new TypeError('Node expected for parameter "expr"');if(yz.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var u=new Set;for(var h of o){var d=typeof h=="string"?h:h.name;if(u.has(d))throw new Error('Duplicate parameter name "'.concat(d,'"'));u.add(d)}this.name=s,this.params=o.map(function(m){return m&&m.name||m}),this.types=o.map(function(m){return m&&m.type||"any"}),this.expr=c}get type(){return Ex}get isFunctionAssignmentNode(){return!0}_compile(s,o){var c=Object.create(o);eU(this.params,function(b){c[b]=!0});var u=this.expr,h=u._compile(s,c),d=this.name,m=this.params,v=UN(this.types,","),x=d+"("+UN(this.params,", ")+")";return function(M,_,T){var E={};E[v]=function(){for(var D=Object.create(_),N=0;N<m.length;N++)D[m[N]]=arguments[N];return h(M,D,T)};var A=e(d,E);return A.syntax=x,A.expr=u.toString(),M.set(d,A),A}}forEach(s){s(this.expr,"expr",this)}map(s){var o=this._ifNode(s(this.expr,"expr",this));return new i(this.name,this.params.slice(0),o)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",c=this.expr.toString(s);return n(this,o,s&&s.implicit)&&(c="("+c+")"),this.name+"("+this.params.join(", ")+") = "+c}toJSON(){var s=this.types;return{mathjs:Ex,name:this.name,params:this.params.map(function(o,c){return{name:o,type:s[c]}}),expr:this.expr}}static fromJSON(s){return new i(s.name,s.params,s.expr)}_toHTML(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",c=[],u=0;u<this.params.length;u++)c.push('<span class="math-symbol math-parameter">'+yl(this.params[u])+"</span>");var h=this.expr.toHTML(s);return n(this,o,s&&s.implicit)&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+yl(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+h}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",c=this.expr.toTex(s);return n(this,o,s&&s.implicit)&&(c="\\left(".concat(c,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(bz).join(",")+"\\right)="+c}}return $i(i,"name",Ex),i},{isClass:!0,isNode:!0}),Ax="IndexNode",Aj=["Node","size"],wj=de(Ax,Aj,r=>{var{Node:e,size:t}=r;class n extends e{constructor(a,s){if(super(),this.dimensions=a,this.dotNotation=s||!1,!Array.isArray(a)||!a.every(Ur))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return Ax}get isIndexNode(){return!0}_compile(a,s){var o=hh(this.dimensions,function(u,h){var d=u.filter(x=>x.isSymbolNode&&x.name==="end").length>0;if(d){var m=Object.create(s);m.end=!0;var v=u._compile(a,m);return function(b,M,_){if(!rn(_)&&!Ir(_)&&!Ti(_))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Hr(_));var T=t(_),E=Object.create(M);return E.end=T[h],v(b,E,_)}}else return u._compile(a,s)}),c=Ys(a,"index");return function(h,d,m){var v=hh(o,function(x){return x(h,d,m)});return c(...v)}}forEach(a){for(var s=0;s<this.dimensions.length;s++)a(this.dimensions[s],"dimensions["+s+"]",this)}map(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this._ifNode(a(this.dimensions[o],"dimensions["+o+"]",this));return new n(s,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&Qn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:Ax,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new n(a.dimensions,a.dotNotation)}_toHTML(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+yl(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var s=this.dimensions.map(function(o){return o.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return $i(n,"name",Ax),n},{isClass:!0,isNode:!0}),wx="ObjectNode",Tj=["Node"],Nj=de(wx,Tj,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return Ur(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return wx}get isObjectNode(){return!0}_compile(i,a){var s={};for(var o in this.properties)if(Pt(this.properties,o)){var c=nv(o),u=JSON.parse(c),h=Ys(this.properties,o);s[u]=h._compile(i,a)}return function(m,v,x){var b={};for(var M in s)Pt(s,M)&&(b[M]=s[M](m,v,x));return b}}forEach(i){for(var a in this.properties)Pt(this.properties,a)&&i(this.properties[a],"properties["+nv(a)+"]",this)}map(i){var a={};for(var s in this.properties)Pt(this.properties,s)&&(a[s]=this._ifNode(i(this.properties[s],"properties["+nv(s)+"]",this)));return new t(a)}clone(){var i={};for(var a in this.properties)Pt(this.properties,a)&&(i[a]=this.properties[a]);return new t(i)}_toString(i){var a=[];for(var s in this.properties)Pt(this.properties,s)&&a.push(nv(s)+": "+this.properties[s].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:wx,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var a=[];for(var s in this.properties)Pt(this.properties,s)&&a.push('<span class="math-symbol math-property">'+yl(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var s in this.properties)Pt(this.properties,s)&&a.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(i)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return o}}return $i(t,"name",wx),t},{isClass:!0,isNode:!0});function H0(r,e){return new AB(r,new mS(e),new Set(Object.keys(e)))}var Tx="OperatorNode",Dj=["Node"],Cj=de(Tx,Dj,r=>{var{Node:e}=r;function t(a,s){var o=a;if(s==="auto")for(;rf(o);)o=o.content;return Qn(o)?!0:Pi(o)?t(o.args[0],s):!1}function n(a,s,o,c,u){var h=Pr(a,s,o),d=E0(a,s);if(s==="all"||c.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return c.map(function(R){switch(R.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var m;switch(c.length){case 0:m=[];break;case 1:{var v=Pr(c[0],s,o,a);if(u&&v!==null){var x,b;if(s==="keep"?(x=c[0].getIdentifier(),b=a.getIdentifier()):(x=c[0].getContent().getIdentifier(),b=a.getContent().getIdentifier()),au[h][b].latexLeftParens===!1){m=[!1];break}if(au[v][x].latexParens===!1){m=[!1];break}}if(v===null){m=[!1];break}if(v<=h){m=[!0];break}m=[!1]}break;case 2:{var M,_=Pr(c[0],s,o,a),T=yE(a,c[0],s);_===null?M=!1:_===h&&d==="right"&&!T||_<h?M=!0:M=!1;var E,A=Pr(c[1],s,o,a),D=yE(a,c[1],s);if(A===null?E=!1:A===h&&d==="left"&&!D||A<h?E=!0:E=!1,u){var N,O,z;s==="keep"?(N=a.getIdentifier(),O=a.args[0].getIdentifier(),z=a.args[1].getIdentifier()):(N=a.getContent().getIdentifier(),O=a.args[0].getContent().getIdentifier(),z=a.args[1].getContent().getIdentifier()),_!==null&&(au[h][N].latexLeftParens===!1&&(M=!1),au[_][O].latexParens===!1&&(M=!1)),A!==null&&(au[h][N].latexRightParens===!1&&(E=!1),au[A][z].latexParens===!1&&(E=!1))}m=[M,E]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(m=c.map(function(R){var F=Pr(R,s,o,a),H=yE(a,R,s),X=E0(R,s);return F===null?!1:h===F&&d===X&&!H?!0:F<h}));break}if(c.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&s!=="all"&&o==="hide")for(var C=1;C<m.length;++C)t(c[C],s)&&!m[C-1]&&(s!=="keep"||!rf(c[C-1]))&&(m[C]=!0);return m}class i extends e{constructor(s,o,c,u,h){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(c)||!c.every(Ur))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=h===!0,this.op=s,this.fn=o,this.args=c||[]}get type(){return Tx}get isOperatorNode(){return!0}_compile(s,o){if(typeof this.fn!="string"||!B2(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var c=Ys(s,this.fn),u=hh(this.args,function(x){return x._compile(s,o)});if(typeof c=="function"&&c.rawArgs===!0){var h=this.args;return function(b,M,_){return c(h,s,H0(b,M))}}else if(u.length===1){var d=u[0];return function(b,M,_){return c(d(b,M,_))}}else if(u.length===2){var m=u[0],v=u[1];return function(b,M,_){return c(m(b,M,_),v(b,M,_))}}else return function(b,M,_){return c.apply(null,hh(u,function(T){return T(b,M,_)}))}}forEach(s){for(var o=0;o<this.args.length;o++)s(this.args[o],"args["+o+"]",this)}map(s){for(var o=[],c=0;c<this.args.length;c++)o[c]=this._ifNode(s(this.args[c],"args["+c+"]",this));return new i(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",c=s&&s.implicit?s.implicit:"hide",u=this.args,h=n(this,o,c,u,!1);if(u.length===1){var d=E0(this,o),m=u[0].toString(s);h[0]&&(m="("+m+")");var v=/[a-zA-Z]+/.test(this.op);return d==="right"?this.op+(v?" ":"")+m:d==="left"?m+(v?" ":"")+this.op:m+this.op}else if(u.length===2){var x=u[0].toString(s),b=u[1].toString(s);return h[0]&&(x="("+x+")"),h[1]&&(b="("+b+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&c==="hide"?x+" "+b:x+" "+this.op+" "+b}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var M=u.map(function(_,T){return _=_.toString(s),h[T]&&(_="("+_+")"),_});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&c==="hide"?M.join(" "):M.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:Tx,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new i(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",c=s&&s.implicit?s.implicit:"hide",u=this.args,h=n(this,o,c,u,!1);if(u.length===1){var d=E0(this,o),m=u[0].toHTML(s);return h[0]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),d==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+yl(this.op)+"</span>"+m:m+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+yl(this.op)+"</span>"}else if(u.length===2){var v=u[0].toHTML(s),x=u[1].toHTML(s);return h[0]&&(v='<span class="math-parenthesis math-round-parenthesis">(</span>'+v+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h[1]&&(x='<span class="math-parenthesis math-round-parenthesis">(</span>'+x+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&c==="hide"?v+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+x:v+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+yl(this.op)+"</span>"+x}else{var b=u.map(function(M,_){return M=M.toHTML(s),h[_]&&(M='<span class="math-parenthesis math-round-parenthesis">(</span>'+M+'<span class="math-parenthesis math-round-parenthesis">)</span>'),M});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&c==="hide"?b.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):b.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+yl(this.op)+"</span>"):'<span class="math-function">'+yl(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+b.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",c=s&&s.implicit?s.implicit:"hide",u=this.args,h=n(this,o,c,u,!0),d=dr[this.fn];if(d=typeof d>"u"?this.op:d,u.length===1){var m=E0(this,o),v=u[0].toTex(s);return h[0]&&(v="\\left(".concat(v,"\\right)")),m==="right"?d+v:v+d}else if(u.length===2){var x=u[0],b=x.toTex(s);h[0]&&(b="\\left(".concat(b,"\\right)"));var M=u[1],_=M.toTex(s);h[1]&&(_="\\left(".concat(_,"\\right)"));var T;switch(o==="keep"?T=x.getIdentifier():T=x.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return d+"{"+b+"}{"+_+"}";case"OperatorNode:pow":switch(b="{"+b+"}",_="{"+_+"}",T){case"ConditionalNode":case"OperatorNode:divide":b="\\left(".concat(b,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&c==="hide")return b+"~"+_}return b+d+_}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var E=u.map(function(A,D){return A=A.toTex(s),h[D]&&(A="\\left(".concat(A,"\\right)")),A});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&c==="hide"?E.join("~"):E.join(d)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(A){return A.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return $i(i,"name",Tx),i},{isClass:!0,isNode:!0}),Nx="ParenthesisNode",Rj=["Node"],Oj=de(Nx,Rj,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),!Ur(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return Nx}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new t(a)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:Nx,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return $i(t,"name",Nx),t},{isClass:!0,isNode:!0}),Dx="RangeNode",Bj=["Node"],Uj=de(Dx,Bj,r=>{var{Node:e}=r;function t(i,a,s){var o=Pr(i,a,s),c={},u=Pr(i.start,a,s);if(c.start=u!==null&&u<=o||a==="all",i.step){var h=Pr(i.step,a,s);c.step=h!==null&&h<=o||a==="all"}var d=Pr(i.end,a,s);return c.end=d!==null&&d<=o||a==="all",c}class n extends e{constructor(a,s,o){if(super(),!Ur(a))throw new TypeError("Node expected");if(!Ur(s))throw new TypeError("Node expected");if(o&&!Ur(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=s,this.step=o||null}get type(){return Dx}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(s){return Na(s)&&s.name==="end"});return a.length>0}_compile(a,s){var o=a.range,c=this.start._compile(a,s),u=this.end._compile(a,s);if(this.step){var h=this.step._compile(a,s);return function(m,v,x){return o(c(m,v,x),u(m,v,x),h(m,v,x))}}else return function(m,v,x){return o(c(m,v,x),u(m,v,x))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new n(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=t(this,s,a&&a.implicit),c,u=this.start.toString(a);if(o.start&&(u="("+u+")"),c=u,this.step){var h=this.step.toString(a);o.step&&(h="("+h+")"),c+=":"+h}var d=this.end.toString(a);return o.end&&(d="("+d+")"),c+=":"+d,c}toJSON(){return{mathjs:Dx,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new n(a.start,a.end,a.step)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=t(this,s,a&&a.implicit),c,u=this.start.toHTML(a);if(o.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c=u,this.step){var h=this.step.toHTML(a);o.step&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c+='<span class="math-operator math-range-operator">:</span>'+h}var d=this.end.toHTML(a);return o.end&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c+='<span class="math-operator math-range-operator">:</span>'+d,c}_toTex(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=t(this,s,a&&a.implicit),c=this.start.toTex(a);if(o.start&&(c="\\left(".concat(c,"\\right)")),this.step){var u=this.step.toTex(a);o.step&&(u="\\left(".concat(u,"\\right)")),c+=":"+u}var h=this.end.toTex(a);return o.end&&(h="\\left(".concat(h,"\\right)")),c+=":"+h,c}}return $i(n,"name",Dx),n},{isClass:!0,isNode:!0}),Cx="RelationalNode",zj=["Node"],Fj=de(Cx,zj,r=>{var{Node:e}=r,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(a,s){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(a.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=s}get type(){return Cx}get isRelationalNode(){return!0}_compile(a,s){var o=this,c=this.params.map(u=>u._compile(a,s));return function(h,d,m){for(var v,x=c[0](h,d,m),b=0;b<o.conditionals.length;b++){v=x,x=c[b+1](h,d,m);var M=Ys(a,o.conditionals[b]);if(!M(v,x))return!1}return!0}}forEach(a){this.params.forEach((s,o)=>a(s,"params["+o+"]",this),this)}map(a){return new n(this.conditionals.slice(),this.params.map((s,o)=>this._ifNode(a(s,"params["+o+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=Pr(this,s,a&&a.implicit),c=this.params.map(function(d,m){var v=Pr(d,s,a&&a.implicit);return s==="all"||v!==null&&v<=o?"("+d.toString(a)+")":d.toString(a)}),u=c[0],h=0;h<this.conditionals.length;h++)u+=" "+t[this.conditionals[h]],u+=" "+c[h+1];return u}toJSON(){return{mathjs:Cx,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new n(a.conditionals,a.params)}_toHTML(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=Pr(this,s,a&&a.implicit),c=this.params.map(function(d,m){var v=Pr(d,s,a&&a.implicit);return s==="all"||v!==null&&v<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+d.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':d.toHTML(a)}),u=c[0],h=0;h<this.conditionals.length;h++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+yl(t[this.conditionals[h]])+"</span>"+c[h+1];return u}_toTex(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=Pr(this,s,a&&a.implicit),c=this.params.map(function(d,m){var v=Pr(d,s,a&&a.implicit);return s==="all"||v!==null&&v<=o?"\\left("+d.toTex(a)+"\right)":d.toTex(a)}),u=c[0],h=0;h<this.conditionals.length;h++)u+=dr[this.conditionals[h]]+c[h+1];return u}}return $i(n,"name",Cx),n},{isClass:!0,isNode:!0}),Lj="SymbolNode",Ij=["math","?Unit","Node"],Pj=de(Lj,Ij,r=>{var{math:e,Unit:t,Node:n}=r;function i(s){return t?t.isValuelessUnit(s):!1}class a extends n{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,c){var u=this.name;if(c[u]===!0)return function(d,m,v){return Ys(m,u)};if(u in o)return function(d,m,v){return d.has(u)?d.get(u):Ys(o,u)};var h=i(u);return function(d,m,v){return d.has(u)?d.get(u):h?new t(null,u):a.onUndefinedSymbol(u)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new a(this.name)}_toString(o){return this.name}_toHTML(o){var c=yl(this.name);return c==="true"||c==="false"?'<span class="math-symbol math-boolean">'+c+"</span>":c==="i"?'<span class="math-symbol math-imaginary-symbol">'+c+"</span>":c==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+c+"</span>":c==="NaN"?'<span class="math-symbol math-nan-symbol">'+c+"</span>":c==="null"?'<span class="math-symbol math-null-symbol">'+c+"</span>":c==="undefined"?'<span class="math-symbol math-undefined-symbol">'+c+"</span>":'<span class="math-symbol">'+c+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new a(o.name)}_toTex(o){var c=!1;typeof e[this.name]>"u"&&i(this.name)&&(c=!0);var u=bz(this.name,c);return u[0]==="\\"?u:" "+u}}return a},{isClass:!0,isNode:!0}),Rx="FunctionNode",Hj=["math","Node","SymbolNode"],Vj=de(Rx,Hj,r=>{var e,{math:t,Node:n,SymbolNode:i}=r,a=c=>Fn(c,{truncate:78});function s(c,u,h){for(var d="",m=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,v=0,x;(x=m.exec(c))!==null;)if(d+=c.substring(v,x.index),v=x.index,x[0]==="$$")d+="$",v++;else{v+=x[0].length;var b=u[x[1]];if(!b)throw new ReferenceError("Template: Property "+x[1]+" does not exist.");if(x[2]===void 0)switch(typeof b){case"string":d+=b;break;case"object":if(Ur(b))d+=b.toTex(h);else if(Array.isArray(b))d+=b.map(function(M,_){if(Ur(M))return M.toTex(h);throw new TypeError("Template: "+x[1]+"["+_+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+x[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+x[1]+" has to be a Node, String or array of Nodes")}else if(Ur(b[x[2]]&&b[x[2]]))d+=b[x[2]].toTex(h);else throw new TypeError("Template: "+x[1]+"["+x[2]+"] is not a Node.")}return d+=c.slice(v),d}class o extends n{constructor(u,h){if(super(),typeof u=="string"&&(u=new i(u)),!Ur(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(h)||!h.every(Ur))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=u,this.args=h||[]}get name(){return this.fn.name||""}get type(){return Rx}get isFunctionNode(){return!0}_compile(u,h){var d=this.args.map(z=>z._compile(u,h));if(Na(this.fn)){var m=this.fn.name;if(h[m]){var _=this.args;return function(C,R,F){var H=Ys(R,m);if(typeof H!="function")throw new TypeError("Argument '".concat(m,"' was not a function; received: ").concat(a(H)));if(H.rawArgs)return H(_,u,H0(C,R));var X=d.map($=>$(C,R,F));return H.apply(H,X)}}else{var v=m in u?Ys(u,m):void 0,x=typeof v=="function"&&v.rawArgs===!0,b=z=>{var C;if(z.has(m))C=z.get(m);else if(m in u)C=Ys(u,m);else return o.onUndefinedFunction(m);if(typeof C=="function")return C;throw new TypeError("'".concat(m,`' is not a function; its value is:
  `).concat(a(C)))};if(x){var M=this.args;return function(C,R,F){var H=b(C);if(H.rawArgs===!0)return H(M,u,H0(C,R));var X=d.map($=>$(C,R,F));return H(...X)}}else switch(d.length){case 0:return function(C,R,F){var H=b(C);return H()};case 1:return function(C,R,F){var H=b(C),X=d[0];return H(X(C,R,F))};case 2:return function(C,R,F){var H=b(C),X=d[0],$=d[1];return H(X(C,R,F),$(C,R,F))};default:return function(C,R,F){var H=b(C),X=d.map($=>$(C,R,F));return H(...X)}}}}else if(rp(this.fn)&&zv(this.fn.index)&&this.fn.index.isObjectProperty()){var T=this.fn.object._compile(u,h),E=this.fn.index.getObjectProperty(),A=this.args;return function(C,R,F){var H=T(C,R,F),X=hP(H,E);if(X!=null&&X.rawArgs)return X(A,u,H0(C,R));var $=d.map(Y=>Y(C,R,F));return X.apply(H,$)}}else{var D=this.fn.toString(),N=this.fn._compile(u,h),O=this.args;return function(C,R,F){var H=N(C,R,F);if(typeof H!="function")throw new TypeError("Expression '".concat(D,"' did not evaluate to a function; value is:")+`
  `.concat(a(H)));if(H.rawArgs)return H(O,u,H0(C,R));var X=d.map($=>$(C,R,F));return H.apply(H,X)}}}forEach(u){u(this.fn,"fn",this);for(var h=0;h<this.args.length;h++)u(this.args[h],"args["+h+"]",this)}map(u){for(var h=this._ifNode(u(this.fn,"fn",this)),d=[],m=0;m<this.args.length;m++)d[m]=this._ifNode(u(this.args[m],"args["+m+"]",this));return new o(h,d)}clone(){return new o(this.fn,this.args.slice(0))}toString(u){var h,d=this.fn.toString(u);return u&&typeof u.handler=="object"&&Pt(u.handler,d)&&(h=u.handler[d](this,u)),typeof h<"u"?h:super.toString(u)}_toString(u){var h=this.args.map(function(m){return m.toString(u)}),d=Dy(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return d+"("+h.join(", ")+")"}toJSON(){return{mathjs:Rx,fn:this.fn,args:this.args}}_toHTML(u){var h=this.args.map(function(d){return d.toHTML(u)});return'<span class="math-function">'+yl(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+h.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var h;return u&&typeof u.handler=="object"&&Pt(u.handler,this.name)&&(h=u.handler[this.name](this,u)),typeof h<"u"?h:super.toTex(u)}_toTex(u){var h=this.args.map(function(v){return v.toTex(u)}),d;F3[this.name]&&(d=F3[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(d=t[this.name].toTex);var m;switch(typeof d){case"function":m=d(this,u);break;case"string":m=s(d,this,u);break;case"object":switch(typeof d[h.length]){case"function":m=d[h.length](this,u);break;case"string":m=s(d[h.length],this,u);break}}return typeof m<"u"?m:s(bj,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=o,$i(o,"name",Rx),$i(o,"onUndefinedFunction",function(c){throw new Error("Undefined function "+c)}),$i(o,"fromJSON",function(c){return new e(c.fn,c.args)}),o},{isClass:!0,isNode:!0}),I3="parse",qj=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],Gj=de(I3,qj,r=>{var{typed:e,numeric:t,config:n,AccessorNode:i,ArrayNode:a,AssignmentNode:s,BlockNode:o,ConditionalNode:c,ConstantNode:u,FunctionAssignmentNode:h,FunctionNode:d,IndexNode:m,ObjectNode:v,OperatorNode:x,ParenthesisNode:b,RangeNode:M,RelationalNode:_,SymbolNode:T}=r,E=e(I3,{string:function(ee){return Q(ee,{})},"Array | Matrix":function(ee){return A(ee,{})},"string, Object":function(ee,Ee){var ze=Ee.nodes!==void 0?Ee.nodes:{};return Q(ee,ze)},"Array | Matrix, Object":A});function A(G){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ee=ee.nodes!==void 0?ee.nodes:{};return Tn(G,function(ze){if(typeof ze!="string")throw new TypeError("String expected");return Q(ze,Ee)})}var D={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},N={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},O={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},z={true:!0,false:!1,null:null,undefined:void 0},C=["NaN","Infinity"],R={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function F(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:D.NULL,nestingLevel:0,conditionalLevel:null}}function H(G,ee){return G.expression.substr(G.index,ee)}function X(G){return H(G,1)}function $(G){G.index++}function Y(G){return G.expression.charAt(G.index-1)}function I(G){return G.expression.charAt(G.index+1)}function Z(G){for(G.tokenType=D.NULL,G.token="",G.comment="";;){if(X(G)==="#")for(;X(G)!==`
`&&X(G)!=="";)G.comment+=X(G),$(G);if(E.isWhitespace(X(G),G.nestingLevel))$(G);else break}if(X(G)===""){G.tokenType=D.DELIMITER;return}if(X(G)===`
`&&!G.nestingLevel){G.tokenType=D.DELIMITER,G.token=X(G),$(G);return}var ee=X(G),Ee=H(G,2),ze=H(G,3);if(ze.length===3&&N[ze]){G.tokenType=D.DELIMITER,G.token=ze,$(G),$(G),$(G);return}if(Ee.length===2&&N[Ee]){G.tokenType=D.DELIMITER,G.token=Ee,$(G),$(G);return}if(N[ee]){G.tokenType=D.DELIMITER,G.token=ee,$(G);return}if(E.isDigitDot(ee)){G.tokenType=D.NUMBER;var ft=H(G,2);if(ft==="0b"||ft==="0o"||ft==="0x"){for(G.token+=X(G),$(G),G.token+=X(G),$(G);E.isAlpha(X(G),Y(G),I(G))||E.isDigit(X(G));)G.token+=X(G),$(G);if(X(G)===".")for(G.token+=".",$(G);E.isAlpha(X(G),Y(G),I(G))||E.isDigit(X(G));)G.token+=X(G),$(G);else if(X(G)==="i")for(G.token+="i",$(G);E.isDigit(X(G));)G.token+=X(G),$(G);return}if(X(G)==="."){if(G.token+=X(G),$(G),!E.isDigit(X(G))){G.tokenType=D.DELIMITER;return}}else{for(;E.isDigit(X(G));)G.token+=X(G),$(G);E.isDecimalMark(X(G),I(G))&&(G.token+=X(G),$(G))}for(;E.isDigit(X(G));)G.token+=X(G),$(G);if(X(G)==="E"||X(G)==="e"){if(E.isDigit(I(G))||I(G)==="-"||I(G)==="+"){if(G.token+=X(G),$(G),(X(G)==="+"||X(G)==="-")&&(G.token+=X(G),$(G)),!E.isDigit(X(G)))throw ye(G,'Digit expected, got "'+X(G)+'"');for(;E.isDigit(X(G));)G.token+=X(G),$(G);if(E.isDecimalMark(X(G),I(G)))throw ye(G,'Digit expected, got "'+X(G)+'"')}else if(E.isDecimalMark(I(G),G.expression.charAt(G.index+2)))throw $(G),ye(G,'Digit expected, got "'+X(G)+'"')}return}if(E.isAlpha(X(G),Y(G),I(G))){for(;E.isAlpha(X(G),Y(G),I(G))||E.isDigit(X(G));)G.token+=X(G),$(G);Pt(O,G.token)?G.tokenType=D.DELIMITER:G.tokenType=D.SYMBOL;return}for(G.tokenType=D.UNKNOWN;X(G)!=="";)G.token+=X(G),$(G);throw ye(G,'Syntax error in part "'+G.token+'"')}function W(G){do Z(G);while(G.token===`
`)}function te(G){G.nestingLevel++}function le(G){G.nestingLevel--}E.isAlpha=function(ee,Ee,ze){return E.isValidLatinOrGreek(ee)||E.isValidMathSymbol(ee,ze)||E.isValidMathSymbol(Ee,ee)},E.isValidLatinOrGreek=function(ee){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(ee)},E.isValidMathSymbol=function(ee,Ee){return/^[\uD835]$/.test(ee)&&/^[\uDC00-\uDFFF]$/.test(Ee)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(Ee)},E.isWhitespace=function(ee,Ee){return ee===" "||ee==="	"||ee===""||ee===`
`&&Ee>0},E.isDecimalMark=function(ee,Ee){return ee==="."&&Ee!=="/"&&Ee!=="*"&&Ee!=="^"},E.isDigitDot=function(ee){return ee>="0"&&ee<="9"||ee==="."},E.isDigit=function(ee){return ee>="0"&&ee<="9"};function Q(G,ee){var Ee=F();Ar(Ee,{expression:G,extraNodes:ee}),Z(Ee);var ze=k(Ee);if(Ee.token!=="")throw Ee.tokenType===D.DELIMITER?Ve(Ee,"Unexpected operator "+Ee.token):ye(Ee,'Unexpected part "'+Ee.token+'"');return ze}function k(G){var ee,Ee=[],ze;for(G.token!==""&&G.token!==`
`&&G.token!==";"&&(ee=ae(G),G.comment&&(ee.comment=G.comment));G.token===`
`||G.token===";";)Ee.length===0&&ee&&(ze=G.token!==";",Ee.push({node:ee,visible:ze})),Z(G),G.token!==`
`&&G.token!==";"&&G.token!==""&&(ee=ae(G),G.comment&&(ee.comment=G.comment),ze=G.token!==";",Ee.push({node:ee,visible:ze}));return Ee.length>0?new o(Ee):(ee||(ee=new u(void 0),G.comment&&(ee.comment=G.comment)),ee)}function ae(G){var ee,Ee,ze,ft,it=J(G);if(G.token==="="){if(Na(it))return ee=it.name,W(G),ze=ae(G),new s(new T(ee),ze);if(rp(it))return W(G),ze=ae(G),new s(it.object,it.index,ze);if(ph(it)&&Na(it.fn)&&(ft=!0,Ee=[],ee=it.name,it.args.forEach(function(ct,Nt){Na(ct)?Ee[Nt]=ct.name:ft=!1}),ft))return W(G),ze=ae(G),new h(ee,Ee,ze);throw ye(G,"Invalid left hand side of assignment operator =")}return it}function J(G){for(var ee=De(G);G.token==="?";){var Ee=G.conditionalLevel;G.conditionalLevel=G.nestingLevel,W(G);var ze=ee,ft=ae(G);if(G.token!==":")throw ye(G,"False part of conditional expression expected");G.conditionalLevel=null,W(G);var it=ae(G);ee=new c(ze,ft,it),G.conditionalLevel=Ee}return ee}function De(G){for(var ee=pe(G);G.token==="or";)W(G),ee=new x("or","or",[ee,pe(G)]);return ee}function pe(G){for(var ee=_e(G);G.token==="xor";)W(G),ee=new x("xor","xor",[ee,_e(G)]);return ee}function _e(G){for(var ee=ne(G);G.token==="and";)W(G),ee=new x("and","and",[ee,ne(G)]);return ee}function ne(G){for(var ee=ue(G);G.token==="|";)W(G),ee=new x("|","bitOr",[ee,ue(G)]);return ee}function ue(G){for(var ee=ge(G);G.token==="^|";)W(G),ee=new x("^|","bitXor",[ee,ge(G)]);return ee}function ge(G){for(var ee=Ae(G);G.token==="&";)W(G),ee=new x("&","bitAnd",[ee,Ae(G)]);return ee}function Ae(G){for(var ee=[Te(G)],Ee=[],ze={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Pt(ze,G.token);){var ft={name:G.token,fn:ze[G.token]};Ee.push(ft),W(G),ee.push(Te(G))}return ee.length===1?ee[0]:ee.length===2?new x(Ee[0].name,Ee[0].fn,ee):new _(Ee.map(it=>it.fn),ee)}function Te(G){var ee,Ee,ze,ft;ee=se(G);for(var it={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Pt(it,G.token);)Ee=G.token,ze=it[Ee],W(G),ft=[ee,se(G)],ee=new x(Ee,ze,ft);return ee}function se(G){var ee,Ee,ze,ft;ee=Me(G);for(var it={to:"to",in:"to"};Pt(it,G.token);)Ee=G.token,ze=it[Ee],W(G),Ee==="in"&&"])},;".includes(G.token)?ee=new x("*","multiply",[ee,new T("in")],!0):(ft=[ee,Me(G)],ee=new x(Ee,ze,ft));return ee}function Me(G){var ee,Ee=[];if(G.token===":"?ee=new u(1):ee=Be(G),G.token===":"&&G.conditionalLevel!==G.nestingLevel){for(Ee.push(ee);G.token===":"&&Ee.length<3;)W(G),G.token===")"||G.token==="]"||G.token===","||G.token===""?Ee.push(new T("end")):Ee.push(Be(G));Ee.length===3?ee=new M(Ee[0],Ee[2],Ee[1]):ee=new M(Ee[0],Ee[1])}return ee}function Be(G){var ee,Ee,ze,ft;ee=Le(G);for(var it={"+":"add","-":"subtract"};Pt(it,G.token);){Ee=G.token,ze=it[Ee],W(G);var ct=Le(G);ct.isPercentage?ft=[ee,new x("*","multiply",[ee,ct])]:ft=[ee,ct],ee=new x(Ee,ze,ft)}return ee}function Le(G){var ee,Ee,ze,ft;ee=Pe(G),Ee=ee;for(var it={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Pt(it,G.token);)ze=G.token,ft=it[ze],W(G),Ee=Pe(G),ee=new x(ze,ft,[ee,Ee]);return ee}function Pe(G){var ee,Ee;for(ee=Ye(G),Ee=ee;G.tokenType===D.SYMBOL||G.token==="in"&&Qn(ee)||G.token==="in"&&Pi(ee)&&ee.fn==="unaryMinus"&&Qn(ee.args[0])||G.tokenType===D.NUMBER&&!Qn(Ee)&&(!Pi(Ee)||Ee.op==="!")||G.token==="(";)Ee=Ye(G),ee=new x("*","multiply",[ee,Ee],!0);return ee}function Ye(G){for(var ee=Ze(G),Ee=ee,ze=[];G.token==="/"&&IA(Ee);)if(ze.push(Ar({},G)),W(G),G.tokenType===D.NUMBER)if(ze.push(Ar({},G)),W(G),G.tokenType===D.SYMBOL||G.token==="("||G.token==="in")Ar(G,ze.pop()),ze.pop(),Ee=Ze(G),ee=new x("/","divide",[ee,Ee]);else{ze.pop(),Ar(G,ze.pop());break}else{Ar(G,ze.pop());break}return ee}function Ze(G){var ee=re(G);if(G.token==="%"){var Ee=Ar({},G);W(G);try{re(G),Ar(G,Ee)}catch{ee=new x("/","divide",[ee,new u(100)],!1,!0)}}return ee}function re(G){var ee,Ee,ze,ft={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Pt(ft,G.token)?(ze=ft[G.token],ee=G.token,W(G),Ee=[re(G)],new x(ee,ze,Ee)):be(G)}function be(G){var ee,Ee,ze,ft;return ee=Ce(G),(G.token==="^"||G.token===".^")&&(Ee=G.token,ze=Ee==="^"?"pow":"dotPow",W(G),ft=[ee,re(G)],ee=new x(Ee,ze,ft)),ee}function Ce(G){for(var ee=q(G);G.token==="??";)W(G),ee=new x("??","nullish",[ee,q(G)]);return ee}function q(G){var ee,Ee,ze,ft;ee=V(G);for(var it={"!":"factorial","'":"ctranspose"};Pt(it,G.token);)Ee=G.token,ze=it[Ee],Z(G),ft=[ee],ee=new x(Ee,ze,ft),ee=fe(G,ee);return ee}function V(G){var ee=[];if(G.tokenType===D.SYMBOL&&Pt(G.extraNodes,G.token)){var Ee=G.extraNodes[G.token];if(Z(G),G.token==="("){if(ee=[],te(G),Z(G),G.token!==")")for(ee.push(ae(G));G.token===",";)Z(G),ee.push(ae(G));if(G.token!==")")throw ye(G,"Parenthesis ) expected");le(G),Z(G)}return new Ee(ee)}return ie(G)}function ie(G){var ee,Ee;return G.tokenType===D.SYMBOL||G.tokenType===D.DELIMITER&&G.token in O?(Ee=G.token,Z(G),Pt(z,Ee)?ee=new u(z[Ee]):C.includes(Ee)?ee=new u(t(Ee,"number")):ee=new T(Ee),ee=fe(G,ee),ee):Se(G)}function fe(G,ee,Ee){for(var ze;G.token==="("||G.token==="["||G.token===".";)if(ze=[],G.token==="(")if(Na(ee)||rp(ee)){if(te(G),Z(G),G.token!==")")for(ze.push(ae(G));G.token===",";)Z(G),ze.push(ae(G));if(G.token!==")")throw ye(G,"Parenthesis ) expected");le(G),Z(G),ee=new d(ee,ze)}else return ee;else if(G.token==="["){if(te(G),Z(G),G.token!=="]")for(ze.push(ae(G));G.token===",";)Z(G),ze.push(ae(G));if(G.token!=="]")throw ye(G,"Parenthesis ] expected");le(G),Z(G),ee=new i(ee,new m(ze))}else{Z(G);var ft=G.tokenType===D.SYMBOL||G.tokenType===D.DELIMITER&&G.token in O;if(!ft)throw ye(G,"Property name expected after dot");ze.push(new u(G.token)),Z(G);var it=!0;ee=new i(ee,new m(ze,it))}return ee}function Se(G){var ee,Ee;return G.token==='"'||G.token==="'"?(Ee=ve(G,G.token),ee=new u(Ee),ee=fe(G,ee),ee):qe(G)}function ve(G,ee){for(var Ee="";X(G)!==""&&X(G)!==ee;)if(X(G)==="\\"){$(G);var ze=X(G),ft=R[ze];if(ft!==void 0)Ee+=ft,G.index+=1;else if(ze==="u"){var it=G.expression.slice(G.index+1,G.index+5);if(/^[0-9A-Fa-f]{4}$/.test(it))Ee+=String.fromCharCode(parseInt(it,16)),G.index+=5;else throw ye(G,"Invalid unicode character \\u".concat(it))}else throw ye(G,"Bad escape character \\".concat(ze))}else Ee+=X(G),$(G);if(Z(G),G.token!==ee)throw ye(G,"End of string ".concat(ee," expected"));return Z(G),Ee}function qe(G){var ee,Ee,ze,ft;if(G.token==="["){if(te(G),Z(G),G.token!=="]"){var it=Fe(G);if(G.token===";"){for(ze=1,Ee=[it];G.token===";";)Z(G),G.token!=="]"&&(Ee[ze]=Fe(G),ze++);if(G.token!=="]")throw ye(G,"End of matrix ] expected");le(G),Z(G),ft=Ee[0].items.length;for(var ct=1;ct<ze;ct++)if(Ee[ct].items.length!==ft)throw Ve(G,"Column dimensions mismatch ("+Ee[ct].items.length+" !== "+ft+")");ee=new a(Ee)}else{if(G.token!=="]")throw ye(G,"End of matrix ] expected");le(G),Z(G),ee=it}}else le(G),Z(G),ee=new a([]);return fe(G,ee)}return We(G)}function Fe(G){for(var ee=[ae(G)],Ee=1;G.token===",";)Z(G),G.token!=="]"&&G.token!==";"&&(ee[Ee]=ae(G),Ee++);return new a(ee)}function We(G){if(G.token==="{"){te(G);var ee,Ee={};do if(Z(G),G.token!=="}"){if(G.token==='"'||G.token==="'")ee=ve(G,G.token);else if(G.tokenType===D.SYMBOL||G.tokenType===D.DELIMITER&&G.token in O)ee=G.token,Z(G);else throw ye(G,"Symbol or string expected as object key");if(G.token!==":")throw ye(G,"Colon : expected after object key");Z(G),Ee[ee]=ae(G)}while(G.token===",");if(G.token!=="}")throw ye(G,"Comma , or bracket } expected after object value");le(G),Z(G);var ze=new v(Ee);return ze=fe(G,ze),ze}return Ge(G)}function Ge(G){var ee;if(G.tokenType===D.NUMBER){ee=G.token,Z(G);var Ee=_h(ee,n),ze=t(ee,Ee);return new u(ze)}return rt(G)}function rt(G){var ee;if(G.token==="("){if(te(G),Z(G),ee=ae(G),G.token!==")")throw ye(G,"Parenthesis ) expected");return le(G),Z(G),ee=new b(ee),ee=fe(G,ee),ee}return ot(G)}function ot(G){throw G.token===""?ye(G,"Unexpected end of expression"):ye(G,"Value expected")}function St(G){return G.index-G.token.length+1}function ye(G,ee){var Ee=St(G),ze=new SyntaxError(ee+" (char "+Ee+")");return ze.char=Ee,ze}function Ve(G,ee){var Ee=St(G),ze=new SyntaxError(ee+" (char "+Ee+")");return ze.char=Ee,ze}return e.addConversion({from:"string",to:"Node",convert:E}),E}),P3="compile",kj=["typed","parse"],Xj=de(P3,kj,r=>{var{typed:e,parse:t}=r;return e(P3,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return Tn(i,function(a){return t(a).compile()})}})}),H3="evaluate",jj=["typed","parse"],Yj=de(H3,jj,r=>{var{typed:e,parse:t}=r;return e(H3,{string:function(i){var a=ry();return t(i).compile().evaluate(a)},"string, Map | Object":function(i,a){return t(i).compile().evaluate(a)},"Array | Matrix":function(i){var a=ry();return Tn(i,function(s){return t(s).compile().evaluate(a)})},"Array | Matrix, Map | Object":function(i,a){return Tn(i,function(s){return t(s).compile().evaluate(a)})}})}),Wj="Parser",$j=["evaluate","parse"],Zj=de(Wj,$j,r=>{var{evaluate:e,parse:t}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:ry(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(a){return e(a,this.scope)},n.prototype.get=function(a){if(this.scope.has(a))return this.scope.get(a)},n.prototype.getAll=function(){return vP(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function i(a){if(a.length===0)return!1;for(var s=0;s<a.length;s++){var o=a.charAt(s-1),c=a.charAt(s),u=a.charAt(s+1),h=t.isAlpha(c,o,u)||s>0&&t.isDigit(c);if(!h)return!1}return!0}return n.prototype.set=function(a,s){if(!i(a))throw new Error("Invalid variable name: '".concat(a,"'. Variable names must follow the specified rules."));return this.scope.set(a,s),s},n.prototype.remove=function(a){this.scope.delete(a)},n.prototype.clear=function(){this.scope.clear()},n.prototype.toJSON=function(){var a={mathjs:"Parser",variables:{},functions:{}};for(var[s,o]of this.scope)if(NB(o)){if(!Kj(o))throw new Error("Cannot serialize external function ".concat(s));a.functions[s]="".concat(o.syntax," = ").concat(o.expr)}else a.variables[s]=o;return a},n.fromJSON=function(a){var s=new n;return Object.entries(a.variables).forEach(o=>{var[c,u]=o;return s.set(c,u)}),Object.entries(a.functions).forEach(o=>{var[c,u]=o;return s.evaluate(u)}),s},n},{isClass:!0});function Kj(r){return typeof r=="function"&&typeof r.syntax=="string"&&typeof r.expr=="string"}var V3="parser",Qj=["typed","Parser"],Jj=de(V3,Qj,r=>{var{typed:e,Parser:t}=r;return e(V3,{"":function(){return new t}})}),q3="lup",eY=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],tY=de(q3,eY,r=>{var{typed:e,matrix:t,abs:n,addScalar:i,divideScalar:a,multiplyScalar:s,subtractScalar:o,larger:c,equalScalar:u,unaryMinus:h,DenseMatrix:d,SparseMatrix:m,Spa:v}=r;return e(q3,{DenseMatrix:function(_){return x(_)},SparseMatrix:function(_){return b(_)},Array:function(_){var T=t(_),E=x(T);return{L:E.L.valueOf(),U:E.U.valueOf(),p:E.p}}});function x(M){var _=M._size[0],T=M._size[1],E=Math.min(_,T),A=bn(M._data),D=[],N=[_,E],O=[],z=[E,T],C,R,F,H=[];for(C=0;C<_;C++)H[C]=C;for(R=0;R<T;R++){if(R>0)for(C=0;C<_;C++){var X=Math.min(C,R),$=0;for(F=0;F<X;F++)$=i($,s(A[C][F],A[F][R]));A[C][R]=o(A[C][R],$)}var Y=R,I=0,Z=0;for(C=R;C<_;C++){var W=A[C][R],te=n(W);c(te,I)&&(Y=C,I=te,Z=W)}if(R!==Y&&(H[R]=[H[Y],H[Y]=H[R]][0],d._swapRows(R,Y,A)),R<_)for(C=R+1;C<_;C++){var le=A[C][R];u(le,0)||(A[C][R]=a(A[C][R],Z))}}for(R=0;R<T;R++)for(C=0;C<_;C++){if(R===0&&(C<T&&(O[C]=[]),D[C]=[]),C<R){C<T&&(O[C][R]=A[C][R]),R<_&&(D[C][R]=0);continue}if(C===R){C<T&&(O[C][R]=A[C][R]),R<_&&(D[C][R]=1);continue}C<T&&(O[C][R]=0),R<_&&(D[C][R]=A[C][R])}var Q=new d({data:D,size:N}),k=new d({data:O,size:z}),ae=[];for(C=0,E=H.length;C<E;C++)ae[H[C]]=C;return{L:Q,U:k,p:ae,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function b(M){var _=M._size[0],T=M._size[1],E=Math.min(_,T),A=M._values,D=M._index,N=M._ptr,O=[],z=[],C=[],R=[_,E],F=[],H=[],X=[],$=[E,T],Y,I,Z,W=[],te=[];for(Y=0;Y<_;Y++)W[Y]=Y,te[Y]=Y;var le=function(ae,J){var De=te[ae],pe=te[J];W[De]=J,W[pe]=ae,te[ae]=pe,te[J]=De},Q=function(){var ae=new v;I<_&&(C.push(O.length),O.push(1),z.push(I)),X.push(F.length);var J=N[I],De=N[I+1];for(Z=J;Z<De;Z++)Y=D[Z],ae.set(W[Y],A[Z]);I>0&&ae.forEach(0,I-1,function(ue,ge){m._forEachRow(ue,O,z,C,function(Ae,Te){Ae>ue&&ae.accumulate(Ae,h(s(Te,ge)))})});var pe=I,_e=ae.get(I),ne=n(_e);ae.forEach(I+1,_-1,function(ue,ge){var Ae=n(ge);c(Ae,ne)&&(pe=ue,ne=Ae,_e=ge)}),I!==pe&&(m._swapRows(I,pe,R[1],O,z,C),m._swapRows(I,pe,$[1],F,H,X),ae.swap(I,pe),le(I,pe)),ae.forEach(0,_-1,function(ue,ge){ue<=I?(F.push(ge),H.push(ue)):(ge=a(ge,_e),u(ge,0)||(O.push(ge),z.push(ue)))})};for(I=0;I<T;I++)Q();return X.push(F.length),C.push(O.length),{L:new m({values:O,index:z,ptr:C,size:R}),U:new m({values:F,index:H,ptr:X,size:$}),p:W,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),G3="qr",nY=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],rY=de(G3,nY,r=>{var{typed:e,matrix:t,zeros:n,identity:i,isZero:a,equal:s,sign:o,sqrt:c,conj:u,unaryMinus:h,addScalar:d,divideScalar:m,multiplyScalar:v,subtractScalar:x,complex:b}=r;return Ar(e(G3,{DenseMatrix:function(A){return _(A)},SparseMatrix:function(A){return T()},Array:function(A){var D=t(A),N=_(D);return{Q:N.Q.valueOf(),R:N.R.valueOf()}}}),{_denseQRimpl:M});function M(E){var A=E._size[0],D=E._size[1],N=i([A],"dense"),O=N._data,z=E.clone(),C=z._data,R,F,H,X=n([A],"");for(H=0;H<Math.min(D,A);++H){var $=C[H][H],Y=h(s($,0)?1:o($)),I=u(Y),Z=0;for(R=H;R<A;R++)Z=d(Z,v(C[R][H],u(C[R][H])));var W=v(Y,c(Z));if(!a(W)){var te=x($,W);for(X[H]=1,R=H+1;R<A;R++)X[R]=m(C[R][H],te);var le=h(u(m(te,W))),Q=void 0;for(F=H;F<D;F++){for(Q=0,R=H;R<A;R++)Q=d(Q,v(u(X[R]),C[R][F]));for(Q=v(Q,le),R=H;R<A;R++)C[R][F]=v(x(C[R][F],v(X[R],Q)),I)}for(R=0;R<A;R++){for(Q=0,F=H;F<A;F++)Q=d(Q,v(O[R][F],X[F]));for(Q=v(Q,le),F=H;F<A;++F)O[R][F]=m(x(O[R][F],v(Q,u(X[F]))),I)}}}return{Q:N,R:z,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function _(E){var A=M(E),D=A.R._data;if(E._data.length>0)for(var N=D[0][0].type==="Complex"?b(0):0,O=0;O<D.length;++O)for(var z=0;z<O&&z<(D[0]||[]).length;++z)D[O][z]=N;return A}function T(E){throw new Error("qr not implemented for sparse matrices yet")}});function iY(r,e,t,n){r._values;for(var i=r._index,a=r._ptr,s=r._size,o=r._datatype,c=s[0],u=s[1],h=null,d=[],m=[],v=0,x=0;x<u;x++){m[x]=v;for(var b=t?t[x]:x,M=a[b],_=a[b+1],T=M;T<_;T++){var E=i[T];d[v]=E,v++}}return m[u]=v,r.createSparseMatrix({values:h,index:d,ptr:m,size:[c,u],datatype:o})}function _z(r,e,t,n,i,a,s){var o=0;for(t[s]=r;o>=0;){var c=t[s+o],u=t[n+c];u===-1?(o--,a[e++]=c):(t[n+c]=t[i+u],++o,t[s+o]=u)}return e}function aY(r,e){if(!r)return null;var t=0,n,i=[],a=[],s=0,o=e,c=2*e;for(n=0;n<e;n++)a[s+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(a[o+n]=a[s+r[n]],a[s+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=_z(n,t,a,s,o,i,c));return i}function sY(r,e){if(!r)return null;var t=r._index,n=r._ptr,i=r._size,a=i[0],s=i[1],o=[],c=[],u=0,h=s,d,m;for(d=0;d<a;d++)c[h+d]=-1;for(var v=0;v<s;v++){o[v]=-1,c[u+v]=-1;for(var x=n[v],b=n[v+1],M=x;M<b;M++){var _=t[M];for(d=c[h+_];d!==-1&&d<v;d=m)m=c[u+d],c[u+d]=v,m===-1&&(o[d]=v);c[h+_]=v}}return o}function oY(r,e,t){for(var n=r._values,i=r._index,a=r._ptr,s=r._size,o=s[1],c=0,u=0;u<o;u++){var h=a[u];for(a[u]=c;h<a[u+1];h++)e(i[h],u,n?n[h]:1,t)&&(i[c]=i[h],n&&(n[c]=n[h]),c++)}return a[o]=c,i.splice(c,i.length-c),n&&n.splice(c,n.length-c),c}function sh(r){return-r-2}var lY="csAmd",uY=["add","multiply","transpose"],cY=de(lY,uY,r=>{var{add:e,multiply:t,transpose:n}=r;return function(h,d){if(!d||h<=0||h>3)return null;var m=d._size,v=m[0],x=m[1],b=0,M=Math.max(16,10*Math.sqrt(x));M=Math.min(x-2,M);var _=i(h,d,v,x,M);oY(_,c,null);for(var T=_._index,E=_._ptr,A=E[x],D=[],N=[],O=0,z=x+1,C=2*(x+1),R=3*(x+1),F=4*(x+1),H=5*(x+1),X=6*(x+1),$=7*(x+1),Y=D,I=a(x,E,N,O,R,Y,C,$,z,X,F,H),Z=s(x,E,N,H,F,X,M,z,R,Y,C),W=0,te,le,Q,k,ae,J,De,pe,_e,ne,ue,ge,Ae,Te,se,Me;Z<x;){for(Q=-1;W<x&&(Q=N[R+W])===-1;W++);N[C+Q]!==-1&&(Y[N[C+Q]]=-1),N[R+W]=N[C+Q];var Be=N[F+Q],Le=N[z+Q];Z+=Le;var Pe=0;N[z+Q]=-Le;var Ye=E[Q],Ze=Be===0?Ye:A,re=Ze;for(k=1;k<=Be+1;k++){for(k>Be?(J=Q,De=Ye,pe=N[O+Q]-Be):(J=T[Ye++],De=E[J],pe=N[O+J]),ae=1;ae<=pe;ae++)te=T[De++],!((_e=N[z+te])<=0)&&(Pe+=_e,N[z+te]=-_e,T[re++]=te,N[C+te]!==-1&&(Y[N[C+te]]=Y[te]),Y[te]!==-1?N[C+Y[te]]=N[C+te]:N[R+N[H+te]]=N[C+te]);J!==Q&&(E[J]=sh(Q),N[X+J]=0)}for(Be!==0&&(A=re),N[H+Q]=Pe,E[Q]=Ze,N[O+Q]=re-Ze,N[F+Q]=-2,I=o(I,b,N,X,x),ne=Ze;ne<re;ne++)if(te=T[ne],!((ue=N[F+te])<=0)){_e=-N[z+te];var be=I-_e;for(Ye=E[te],ge=E[te]+ue-1;Ye<=ge;Ye++)J=T[Ye],N[X+J]>=I?N[X+J]-=_e:N[X+J]!==0&&(N[X+J]=N[H+J]+be)}for(ne=Ze;ne<re;ne++){for(te=T[ne],ge=E[te],Ae=ge+N[F+te]-1,Te=ge,se=0,Me=0,Ye=ge;Ye<=Ae;Ye++)if(J=T[Ye],N[X+J]!==0){var Ce=N[X+J]-I;Ce>0?(Me+=Ce,T[Te++]=J,se+=J):(E[J]=sh(Q),N[X+J]=0)}N[F+te]=Te-ge+1;var q=Te,V=ge+N[O+te];for(Ye=Ae+1;Ye<V;Ye++){le=T[Ye];var ie=N[z+le];ie<=0||(Me+=ie,T[Te++]=le,se+=le)}Me===0?(E[te]=sh(Q),_e=-N[z+te],Pe-=_e,Le+=_e,Z+=_e,N[z+te]=0,N[F+te]=-1):(N[H+te]=Math.min(N[H+te],Me),T[Te]=T[q],T[q]=T[ge],T[ge]=Q,N[O+te]=Te-ge+1,se=(se<0?-se:se)%x,N[C+te]=N[$+se],N[$+se]=te,Y[te]=se)}for(N[H+Q]=Pe,b=Math.max(b,Pe),I=o(I+b,b,N,X,x),ne=Ze;ne<re;ne++)if(te=T[ne],!(N[z+te]>=0))for(se=Y[te],te=N[$+se],N[$+se]=-1;te!==-1&&N[C+te]!==-1;te=N[C+te],I++){for(pe=N[O+te],ue=N[F+te],Ye=E[te]+1;Ye<=E[te]+pe-1;Ye++)N[X+T[Ye]]=I;var fe=te;for(le=N[C+te];le!==-1;){var Se=N[O+le]===pe&&N[F+le]===ue;for(Ye=E[le]+1;Se&&Ye<=E[le]+pe-1;Ye++)N[X+T[Ye]]!==I&&(Se=0);Se?(E[le]=sh(te),N[z+te]+=N[z+le],N[z+le]=0,N[F+le]=-1,le=N[C+le],N[C+fe]=le):(fe=le,le=N[C+le])}}for(Ye=Ze,ne=Ze;ne<re;ne++)te=T[ne],!((_e=-N[z+te])<=0)&&(N[z+te]=_e,Me=N[H+te]+Pe-_e,Me=Math.min(Me,x-Z-_e),N[R+Me]!==-1&&(Y[N[R+Me]]=te),N[C+te]=N[R+Me],Y[te]=-1,N[R+Me]=te,W=Math.min(W,Me),N[H+te]=Me,T[Ye++]=te);N[z+Q]=Le,(N[O+Q]=Ye-Ze)===0&&(E[Q]=-1,N[X+Q]=0),Be!==0&&(A=Ye)}for(te=0;te<x;te++)E[te]=sh(E[te]);for(le=0;le<=x;le++)N[R+le]=-1;for(le=x;le>=0;le--)N[z+le]>0||(N[C+le]=N[R+E[le]],N[R+E[le]]=le);for(J=x;J>=0;J--)N[z+J]<=0||E[J]!==-1&&(N[C+J]=N[R+E[J]],N[R+E[J]]=J);for(Q=0,te=0;te<=x;te++)E[te]===-1&&(Q=_z(te,Q,N,R,C,D,X));return D.splice(D.length-1,1),D};function i(u,h,d,m,v){var x=n(h);if(u===1&&m===d)return e(h,x);if(u===2){for(var b=x._index,M=x._ptr,_=0,T=0;T<d;T++){var E=M[T];if(M[T]=_,!(M[T+1]-E>v))for(var A=M[T+1];E<A;E++)b[_++]=b[E]}return M[d]=_,h=n(x),t(x,h)}return t(x,h)}function a(u,h,d,m,v,x,b,M,_,T,E,A){for(var D=0;D<u;D++)d[m+D]=h[D+1]-h[D];d[m+u]=0;for(var N=0;N<=u;N++)d[v+N]=-1,x[N]=-1,d[b+N]=-1,d[M+N]=-1,d[_+N]=1,d[T+N]=1,d[E+N]=0,d[A+N]=d[m+N];var O=o(0,0,d,T,u);return d[E+u]=-2,h[u]=-1,d[T+u]=0,O}function s(u,h,d,m,v,x,b,M,_,T,E){for(var A=0,D=0;D<u;D++){var N=d[m+D];if(N===0)d[v+D]=-2,A++,h[D]=-1,d[x+D]=0;else if(N>b)d[M+D]=0,d[v+D]=-1,A++,h[D]=sh(u),d[M+u]++;else{var O=d[_+N];O!==-1&&(T[O]=D),d[E+D]=d[_+N],d[_+N]=D}}return A}function o(u,h,d,m,v){if(u<2||u+h<0){for(var x=0;x<v;x++)d[m+x]!==0&&(d[m+x]=1);u=2}return u}function c(u,h){return u!==h}});function fY(r,e,t,n,i,a,s){var o,c,u=0,h;if(r<=e||t[n+e]<=t[i+r])return-1;t[i+r]=t[n+e];var d=t[a+r];if(t[a+r]=e,d===-1)u=1,h=r;else{for(u=2,h=d;h!==t[s+h];h=t[s+h]);for(o=d;o!==h;o=c)c=t[s+o],t[s+o]=h}return{jleaf:u,q:h}}var hY="csCounts",dY=["transpose"],pY=de(hY,dY,r=>{var{transpose:e}=r;return function(t,n,i,a){if(!t||!n||!i)return null;var s=t._size,o=s[0],c=s[1],u,h,d,m,v,x,b,M=4*c+(a?c+o+1:0),_=[],T=0,E=c,A=2*c,D=3*c,N=4*c,O=5*c+1;for(d=0;d<M;d++)_[d]=-1;var z=[],C=e(t),R=C._index,F=C._ptr;for(d=0;d<c;d++)for(h=i[d],z[h]=_[D+h]===-1?1:0;h!==-1&&_[D+h]===-1;h=n[h])_[D+h]=d;if(a){for(d=0;d<c;d++)_[i[d]]=d;for(u=0;u<o;u++){for(d=c,x=F[u],b=F[u+1],v=x;v<b;v++)d=Math.min(d,_[R[v]]);_[O+u]=_[N+d],_[N+d]=u}}for(u=0;u<c;u++)_[T+u]=u;for(d=0;d<c;d++){for(h=i[d],n[h]!==-1&&z[n[h]]--,m=a?_[N+d]:h;m!==-1;m=a?_[O+m]:-1)for(v=F[m];v<F[m+1];v++){u=R[v];var H=fY(u,h,_,D,E,A,T);H.jleaf>=1&&z[h]++,H.jleaf===2&&z[H.q]--}n[h]!==-1&&(_[T+h]=n[h])}for(h=0;h<c;h++)n[h]!==-1&&(z[n[h]]+=z[h]);return z}}),mY="csSqr",vY=["add","multiply","transpose"],gY=de(mY,vY,r=>{var{add:e,multiply:t,transpose:n}=r,i=cY({add:e,multiply:t,transpose:n}),a=pY({transpose:n});return function(c,u,h){var d=u._ptr,m=u._size,v=m[1],x,b={};if(b.q=i(c,u),c&&!b.q)return null;if(h){var M=c?iY(u,null,b.q):u;b.parent=sY(M);var _=aY(b.parent,v);if(b.cp=a(M,b.parent,_,1),M&&b.parent&&b.cp&&s(M,b))for(b.unz=0,x=0;x<v;x++)b.unz+=b.cp[x]}else b.unz=4*d[v]+v,b.lnz=b.unz;return b};function s(o,c){var u=o._ptr,h=o._index,d=o._size,m=d[0],v=d[1];c.pinv=[],c.leftmost=[];var x=c.parent,b=c.pinv,M=c.leftmost,_=[],T=0,E=m,A=m+v,D=m+2*v,N,O,z,C,R;for(O=0;O<v;O++)_[E+O]=-1,_[A+O]=-1,_[D+O]=0;for(N=0;N<m;N++)M[N]=-1;for(O=v-1;O>=0;O--)for(C=u[O],R=u[O+1],z=C;z<R;z++)M[h[z]]=O;for(N=m-1;N>=0;N--)b[N]=-1,O=M[N],O!==-1&&(_[D+O]++===0&&(_[A+O]=N),_[T+N]=_[E+O],_[E+O]=N);for(c.lnz=0,c.m2=m,O=0;O<v;O++)if(N=_[E+O],c.lnz++,N<0&&(N=c.m2++),b[N]=O,!(--D[O]<=0)){c.lnz+=_[D+O];var F=x[O];F!==-1&&(_[D+F]===0&&(_[A+F]=_[A+O]),_[T+_[A+O]]=_[E+F],_[E+F]=_[T+N],_[D+F]+=_[D+O])}for(N=0;N<m;N++)b[N]<0&&(b[N]=O++);return!0}});function i2(r,e){return r[e]<0}function Sz(r,e){r[e]=sh(r[e])}function k3(r){return r<0?sh(r):r}function yY(r,e,t,n,i){var a=e._index,s=e._ptr,o=e._size,c=o[1],u,h,d,m=0;for(n[0]=r;m>=0;){r=n[m];var v=i?i[r]:r;i2(s,r)||(Sz(s,r),n[c+m]=v<0?0:k3(s[v]));var x=1;for(h=n[c+m],d=v<0?0:k3(s[v+1]);h<d;h++)if(u=a[h],!i2(s,u)){n[c+m]=h,n[++m]=u,x=0;break}x&&(m--,n[--t]=r)}return t}function xY(r,e,t,n,i){var a=r._ptr,s=r._size,o=e._index,c=e._ptr,u=s[1],h,d,m,v=u;for(d=c[t],m=c[t+1],h=d;h<m;h++){var x=o[h];i2(a,x)||(v=yY(x,r,v,n,i))}for(h=v;h<u;h++)Sz(a,n[h]);return v}var bY="csSpsolve",_Y=["divideScalar","multiply","subtract"],SY=de(bY,_Y,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(a,s,o,c,u,h,d){var m=a._values,v=a._index,x=a._ptr,b=a._size,M=b[1],_=s._values,T=s._index,E=s._ptr,A,D,N,O,z=xY(a,s,o,c,h);for(A=z;A<M;A++)u[c[A]]=0;for(D=E[o],N=E[o+1],A=D;A<N;A++)u[T[A]]=_[A];for(var C=z;C<M;C++){var R=c[C],F=h?h[R]:R;if(!(F<0))for(D=x[F],N=x[F+1],u[R]=e(u[R],m[d?D:N-1]),A=d?D+1:D,O=d?N:N-1;A<O;A++){var H=v[A];u[H]=n(u[H],t(m[A],u[R]))}}return z}}),MY="csLu",EY=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],AY=de(MY,EY,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:i,larger:a,largerEq:s,SparseMatrix:o}=r,c=SY({divideScalar:t,multiply:n,subtract:i});return function(h,d,m){if(!h)return null;var v=h._size,x=v[1],b,M=100,_=100;d&&(b=d.q,M=d.lnz||M,_=d.unz||_);var T=[],E=[],A=[],D=new o({values:T,index:E,ptr:A,size:[x,x]}),N=[],O=[],z=[],C=new o({values:N,index:O,ptr:z,size:[x,x]}),R=[],F,H,X=[],$=[];for(F=0;F<x;F++)X[F]=0,R[F]=-1,A[F+1]=0;M=0,_=0;for(var Y=0;Y<x;Y++){A[Y]=M,z[Y]=_;var I=b?b[Y]:Y,Z=c(D,h,I,$,X,R,1),W=-1,te=-1;for(H=Z;H<x;H++)if(F=$[H],R[F]<0){var le=e(X[F]);a(le,te)&&(te=le,W=F)}else O[_]=R[F],N[_++]=X[F];if(W===-1||te<=0)return null;R[I]<0&&s(e(X[I]),n(te,m))&&(W=I);var Q=X[W];for(O[_]=Y,N[_++]=Q,R[W]=Y,E[M]=W,T[M++]=1,H=Z;H<x;H++)F=$[H],R[F]<0&&(E[M]=F,T[M++]=t(X[F],Q)),X[F]=0}for(A[x]=M,z[x]=_,H=0;H<M;H++)E[H]=R[E[H]];return T.splice(M,T.length-M),E.splice(M,E.length-M),N.splice(_,N.length-_),O.splice(_,O.length-_),{L:D,U:C,pinv:R}}}),X3="slu",wY=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],TY=de(X3,wY,r=>{var{typed:e,abs:t,add:n,multiply:i,transpose:a,divideScalar:s,subtract:o,larger:c,largerEq:u,SparseMatrix:h}=r,d=gY({add:n,multiply:i,transpose:a}),m=AY({abs:t,divideScalar:s,multiply:i,subtract:o,larger:c,largerEq:u,SparseMatrix:h});return e(X3,{"SparseMatrix, number, number":function(x,b,M){if(!Xt(b)||b<0||b>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(M<0||M>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var _=d(b,x,!1),T=m(x,_,M);return{L:T.L,U:T.U,p:T.pinv,q:_.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function j3(r,e){var t,n=e.length,i=[];if(r)for(t=0;t<n;t++)i[r[t]]=e[t];else for(t=0;t<n;t++)i[t]=e[t];return i}var Y3="lusolve",NY=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],DY=de(Y3,NY,r=>{var{typed:e,matrix:t,lup:n,slu:i,usolve:a,lsolve:s,DenseMatrix:o}=r,c=Ry({DenseMatrix:o});return e(Y3,{"Array, Array | Matrix":function(m,v){m=t(m);var x=n(m),b=h(x.L,x.U,x.p,null,v);return b.valueOf()},"DenseMatrix, Array | Matrix":function(m,v){var x=n(m);return h(x.L,x.U,x.p,null,v)},"SparseMatrix, Array | Matrix":function(m,v){var x=n(m);return h(x.L,x.U,x.p,null,v)},"SparseMatrix, Array | Matrix, number, number":function(m,v,x,b){var M=i(m,x,b);return h(M.L,M.U,M.p,M.q,v)},"Object, Array | Matrix":function(m,v){return h(m.L,m.U,m.p,m.q,v)}});function u(d){if(rn(d))return d;if(Ir(d))return t(d);throw new TypeError("Invalid Matrix LU decomposition")}function h(d,m,v,x,b){d=u(d),m=u(m),v&&(b=c(d,b,!0),b._data=j3(v,b._data));var M=s(d,b),_=a(m,M);return x&&(_._data=j3(x,_._data)),_}}),W3="polynomialRoot",CY=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],RY=de(W3,CY,r=>{var{typed:e,isZero:t,equalScalar:n,add:i,subtract:a,multiply:s,divide:o,sqrt:c,unaryMinus:u,cbrt:h,typeOf:d,im:m,re:v}=r;return e(W3,{"number|Complex, ...number|Complex":(x,b)=>{for(var M=[x,...b];M.length>0&&t(M[M.length-1]);)M.pop();if(M.length<2)throw new RangeError("Polynomial [".concat(x,", ").concat(b,"] must have a non-zero non-constant coefficient"));switch(M.length){case 2:return[u(o(M[0],M[1]))];case 3:{var[_,T,E]=M,A=s(2,E),D=s(T,T),N=s(4,E,_);if(n(D,N))return[o(u(T),A)];var O=c(a(D,N));return[o(a(O,T),A),o(a(u(O),T),A)]}case 4:{var[z,C,R,F]=M,H=u(s(3,F)),X=s(R,R),$=s(3,F,C),Y=i(s(2,R,R,R),s(27,F,F,z)),I=s(9,F,R,C);if(n(X,$)&&n(Y,I))return[o(R,H)];var Z=a(X,$),W=a(Y,I),te=i(s(18,F,R,C,z),s(R,R,C,C)),le=i(s(4,R,R,R,z),s(4,F,C,C,C),s(27,F,F,z,z));if(n(te,le))return[o(a(s(4,F,R,C),i(s(9,F,F,z),s(R,R,R))),s(F,Z)),o(a(s(9,F,z),s(R,C)),s(2,Z))];var Q;n(X,$)?Q=W:Q=o(i(W,c(a(s(W,W),s(4,Z,Z,Z)))),2);var k=!0,ae=h(Q,k).toArray().map(J=>o(i(R,J,o(Z,J)),H));return ae.map(J=>d(J)==="Complex"&&n(v(J),v(J)+m(J))?v(J):J)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(M))}}})}),OY="Help",BY=["evaluate"],UY=de(OY,BY,r=>{var{evaluate:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var a=!1,s=e("config()"),o={config:d=>(a=!0,e("config(newConfig)",{newConfig:d}))},c=0;c<n.examples.length;c++){var u=n.examples[c];i+="    "+u+`
`;var h=void 0;try{h=e(u,o)}catch(d){h=d}h!==void 0&&!TB(h)&&(i+="        "+Fn(h,{precision:14})+`
`)}i+=`
`,a&&e("config(originalConfig)",{originalConfig:s})}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var n=bn(this.doc);return n.mathjs="Help",n},t.fromJSON=function(n){var i={};return Object.keys(n).filter(a=>a!=="mathjs").forEach(a=>{i[a]=n[a]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),zY="Chain",FY=["?on","math","typed"],LY=de(zY,FY,r=>{var{on:e,math:t,typed:n}=r;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");CB(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return Fn(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function a(u,h){typeof h=="function"&&(i.prototype[u]=o(h))}function s(u,h){DP(i.prototype,u,function(){var m=h();if(typeof m=="function")return o(m)})}function o(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var h=[this.value],d=0;d<arguments.length;d++)h[d+1]=arguments[d];if(n.isTypedFunction(u)){var m=n.resolve(u,h);if(m.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(m.implementation.apply(u,h))}return new i(u.apply(u,h))}}i.createProxy=function(u,h){if(typeof u=="string")a(u,h);else{var d=function(x){Pt(u,x)&&c[x]===void 0&&s(x,()=>u[x])};for(var m in u)d(m)}};var c={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,h,d){d||s(u,h)}),i},{isClass:!0}),$3={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},IY={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},PY={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},HY={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},VY={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},qY={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},GY={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},kY={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},XY={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},jY={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},YY={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},Z3={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},WY={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},$Y={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},ZY={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},KY={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},QY={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},JY={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},eW={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},tW={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},nW={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},rW={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},iW={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},aW={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},sW={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},oW={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},lW={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},uW={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},cW={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},fW={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},hW={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},dW={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},pW={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},mW={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},vW={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},gW={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},yW={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},xW={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},bW={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},_W={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},SW={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},MW={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},EW={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},AW={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},wW={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},TW={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},NW={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},DW={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},CW={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},RW={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},OW={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},BW={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},UW={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},zW={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},FW={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},LW={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},IW={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},PW={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},HW={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},VW={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},qW={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},GW={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},kW={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},XW={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},jW={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},YW={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},WW={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},$W={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},ZW={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},KW={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},QW={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},JW={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},e$={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},t$={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},n$={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},r$={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},i$={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},a$={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},s$={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},o$={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},l$={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},u$={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},c$={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},f$={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},h$={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},d$={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},p$={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},m$={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},v$={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},g$={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},y$={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},x$={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},b$={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},_$={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},S$={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},M$={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},E$={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},A$={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},w$={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},T$={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},N$={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},D$={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},C$={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},R$={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},O$={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},B$={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},U$={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},z$={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},F$={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},L$={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},I$={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},P$={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},H$={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},V$={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},q$={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},G$={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},k$={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},X$={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},j$={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},Y$={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},W$={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},$$={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},Z$={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},K$={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Q$={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},J$={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},eZ={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},tZ={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},nZ={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},rZ={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},iZ={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},aZ={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},sZ={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},oZ={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},lZ={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},uZ={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},cZ={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},fZ={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},hZ={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},dZ={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},pZ={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},mZ={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},vZ={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},gZ={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},yZ={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},xZ={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},bZ={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},_Z={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},SZ={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},MZ={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},EZ={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},AZ={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},wZ={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},TZ={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},NZ={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},DZ={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},CZ={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},RZ={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},OZ={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},BZ={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},UZ={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},zZ={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},FZ={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},LZ={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},IZ={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},PZ={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},HZ={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},VZ={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},qZ={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},GZ={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},kZ={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},XZ={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},jZ={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},YZ={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},WZ={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},$Z={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},ZZ={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},KZ={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},QZ={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},JZ={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},eK={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},tK={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},nK={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},rK={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},iK={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},aK={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},sK={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},oK={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},lK={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},uK={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},cK={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},fK={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},hK={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},dK={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},pK={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},mK={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},vK={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},gK={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},yK={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},xK={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},bK={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},_K={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},SK={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},MK={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},EK={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},AK={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},wK={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},TK={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},NK={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},DK={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},CK={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},RK={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},OK={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},BK={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},UK={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},zK={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},FK={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},LK={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},IK={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},PK={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},HK={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},VK={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},qK={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},GK={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},kK={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},XK={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},jK={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},YK={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},WK={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},$K={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},ZK={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},KK={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},QK={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},JK={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},eQ={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},tQ={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},nQ={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},rQ={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},iQ={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},aQ={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},sQ={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},oQ={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},lQ={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},uQ={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},cQ={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},fQ={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},hQ={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},dQ={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},pQ={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},mQ={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},vQ={bignumber:JY,bigint:eW,boolean:tW,complex:nW,createUnit:rW,fraction:iW,index:aW,matrix:sW,number:oW,sparse:lW,splitUnit:uW,string:cW,unit:fW,e:$3,E:$3,false:IY,i:PY,Infinity:HY,LN2:qY,LN10:VY,LOG2E:kY,LOG10E:GY,NaN:XY,null:jY,pi:Z3,PI:Z3,phi:YY,SQRT1_2:WY,SQRT2:$Y,tau:ZY,true:KY,version:QY,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:mW,lsolve:gW,lsolveAll:yW,lup:xW,lusolve:bW,leafCount:vW,polynomialRoot:_W,resolve:EW,simplify:AW,simplifyConstant:wW,simplifyCore:TW,symbolicEqual:DW,rationalize:MW,slu:NW,usolve:CW,usolveAll:RW,qr:SW,abs:OW,add:BW,cbrt:UW,ceil:zW,cube:FW,divide:LW,dotDivide:IW,dotMultiply:PW,dotPow:HW,exp:VW,expm:qW,expm1:GW,fix:kW,floor:XW,gcd:jW,hypot:YW,lcm:$W,log:ZW,log2:JW,log1p:QW,log10:KW,mod:e$,multiply:t$,norm:n$,nthRoot:r$,nthRoots:i$,pow:a$,round:s$,sign:o$,sqrt:l$,sqrtm:u$,square:d$,subtract:p$,unaryMinus:m$,unaryPlus:v$,xgcd:g$,invmod:WW,bitAnd:y$,bitNot:x$,bitOr:b$,bitXor:_$,leftShift:S$,rightArithShift:M$,rightLogShift:E$,bellNumbers:A$,catalan:w$,composition:T$,stirlingS2:N$,config:hW,import:dW,typed:pW,arg:D$,conj:C$,re:O$,im:R$,evaluate:B$,help:L$,parse:z$,parser:U$,compile:F$,distance:I$,intersect:P$,and:H$,not:V$,nullish:q$,or:G$,xor:k$,mapSlices:X$,concat:Y$,count:W$,cross:$$,column:j$,ctranspose:Z$,det:K$,diag:Q$,diff:J$,dot:eZ,getMatrixDataType:aZ,identity:sZ,filter:nZ,flatten:rZ,forEach:iZ,inv:oZ,pinv:lZ,eigs:tZ,kron:uZ,matrixFromFunction:hZ,matrixFromRows:dZ,matrixFromColumns:fZ,map:cZ,ones:pZ,partitionSelect:mZ,range:vZ,resize:yZ,reshape:gZ,rotate:xZ,rotationMatrix:bZ,row:_Z,size:SZ,sort:MZ,squeeze:EZ,subset:AZ,trace:wZ,transpose:TZ,zeros:NZ,fft:DZ,ifft:CZ,sylvester:c$,schur:f$,lyap:h$,solveODE:mQ,combinations:RZ,combinationsWithRep:OZ,factorial:BZ,gamma:UZ,kldivergence:FZ,lgamma:zZ,multinomial:LZ,permutations:IZ,pickRandom:PZ,random:HZ,randomInt:VZ,compare:qZ,compareNatural:GZ,compareText:kZ,deepEqual:XZ,equal:jZ,equalText:YZ,larger:WZ,largerEq:$Z,smaller:ZZ,smallerEq:KZ,unequal:QZ,setCartesian:JZ,setDifference:eK,setDistinct:tK,setIntersect:nK,setIsSubset:rK,setMultiplicity:iK,setPowerset:aK,setSize:sK,setSymDifference:oK,setUnion:lK,zpk2tf:uK,freqz:cK,erf:fK,zeta:hK,cumsum:SK,mad:dK,max:pK,mean:mK,median:vK,min:gK,mode:yK,prod:xK,quantileSeq:bK,std:_K,sum:MK,variance:EK,corr:AK,acos:wK,acosh:TK,acot:NK,acoth:DK,acsc:CK,acsch:RK,asec:OK,asech:BK,asin:UK,asinh:zK,atan:FK,atanh:IK,atan2:LK,cos:PK,cosh:HK,cot:VK,coth:qK,csc:GK,csch:kK,sec:XK,sech:jK,sin:YK,sinh:WK,tan:$K,tanh:ZK,to:KK,toBest:QK,clone:eQ,format:tQ,bin:JK,oct:hQ,hex:rQ,isNaN:aQ,isInteger:iQ,isNegative:sQ,isNumeric:oQ,hasNumericValue:nQ,isPositive:lQ,isPrime:uQ,isZero:cQ,print:dQ,typeOf:pQ,numeric:fQ},K3="help",gQ=["typed","mathWithTransform","Help"],yQ=de(K3,gQ,r=>{var{typed:e,mathWithTransform:t,Help:n}=r;return e(K3,{any:function(a){var s,o=a;if(typeof a!="string"){for(s in t)if(Pt(t,s)&&a===t[s]){o=s;break}}var c=Ys(vQ,o);if(!c){var u=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+u+'"')}return new n(c)}})}),Q3="chain",xQ=["typed","Chain"],bQ=de(Q3,xQ,r=>{var{typed:e,Chain:t}=r;return e(Q3,{"":function(){return new t},any:function(i){return new t(i)}})}),J3="det",_Q=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],SQ=de(J3,_Q,r=>{var{typed:e,matrix:t,subtractScalar:n,multiply:i,divideScalar:a,isZero:s,unaryMinus:o}=r;return e(J3,{any:function(h){return bn(h)},"Array | Matrix":function(h){var d;switch(rn(h)?d=h.size():Array.isArray(h)?(h=t(h),d=h.size()):d=[],d.length){case 0:return bn(h);case 1:if(d[0]===1)return bn(h.valueOf()[0]);if(d[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Fn(d)+")");case 2:{var m=d[0],v=d[1];if(m===v)return c(h.clone().valueOf(),m);if(v===0)return 1;throw new RangeError("Matrix must be square (size: "+Fn(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Fn(d)+")")}}});function c(u,h,d){if(h===1)return bn(u[0][0]);if(h===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var m=!1,v=new Array(h).fill(0).map((O,z)=>z),x=0;x<h;x++){var b=v[x];if(s(u[b][x])){var M=void 0;for(M=x+1;M<h;M++)if(!s(u[v[M]][x])){b=v[M],v[M]=v[x],v[x]=b,m=!m;break}if(M===h)return u[b][x]}for(var _=u[b][x],T=x===0?1:u[v[x-1]][x-1],E=x+1;E<h;E++)for(var A=v[E],D=x+1;D<h;D++)u[A][D]=a(n(i(u[A][D],_),i(u[A][x],u[b][D])),T)}var N=u[v[h-1]][h-1];return m?o(N):N}}),eR="inv",MQ=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],EQ=de(eR,MQ,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:i,multiply:a,unaryMinus:s,det:o,identity:c,abs:u}=r;return e(eR,{"Array | Matrix":function(m){var v=rn(m)?m.size():_n(m);switch(v.length){case 1:if(v[0]===1)return rn(m)?t([n(1,m.valueOf()[0])]):[n(1,m[0])];throw new RangeError("Matrix must be square (size: "+Fn(v)+")");case 2:{var x=v[0],b=v[1];if(x===b)return rn(m)?t(h(m.valueOf(),x,b),m.storage()):h(m,x,b);throw new RangeError("Matrix must be square (size: "+Fn(v)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Fn(v)+")")}},any:function(m){return n(1,m)}});function h(d,m,v){var x,b,M,_,T;if(m===1){if(_=d[0][0],_===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,_)]]}else if(m===2){var E=o(d);if(E===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(d[1][1],E),n(s(d[0][1]),E)],[n(s(d[1][0]),E),n(d[0][0],E)]]}else{var A=d.concat();for(x=0;x<m;x++)A[x]=A[x].concat();for(var D=c(m).valueOf(),N=0;N<v;N++){var O=u(A[N][N]),z=N;for(x=N+1;x<m;)u(A[x][N])>O&&(O=u(A[x][N]),z=x),x++;if(O===0)throw Error("Cannot calculate inverse, determinant is zero");x=z,x!==N&&(T=A[N],A[N]=A[x],A[x]=T,T=D[N],D[N]=D[x],D[x]=T);var C=A[N],R=D[N];for(x=0;x<m;x++){var F=A[x],H=D[x];if(x!==N){if(F[N]!==0){for(M=n(s(F[N]),C[N]),b=N;b<v;b++)F[b]=i(F[b],a(M,C[b]));for(b=0;b<v;b++)H[b]=i(H[b],a(M,R[b]))}}else{for(M=C[N],b=N;b<v;b++)F[b]=n(F[b],M);for(b=0;b<v;b++)H[b]=n(H[b],M)}}}return D}}}),tR="pinv",AQ=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],wQ=de(tR,AQ,r=>{var{typed:e,matrix:t,inv:n,deepEqual:i,equal:a,dotDivide:s,dot:o,ctranspose:c,divideScalar:u,multiply:h,add:d,Complex:m}=r;return e(tR,{"Array | Matrix":function(E){var A=rn(E)?E.size():_n(E);switch(A.length){case 1:return _(E)?c(E):A[0]===1?n(E):s(c(E),o(E,E));case 2:{if(_(E))return c(E);var D=A[0],N=A[1];if(D===N)try{return n(E)}catch(O){if(!(O instanceof Error&&O.message.match(/Cannot calculate inverse, determinant is zero/)))throw O}return rn(E)?t(v(E.valueOf(),D,N),E.storage()):v(E,D,N)}default:throw new RangeError("Matrix must be two dimensional (size: "+Fn(A)+")")}},any:function(E){return a(E,0)?bn(E):u(1,E)}});function v(T,E,A){var{C:D,F:N}=b(T,E,A),O=h(n(h(c(D),D)),c(D)),z=h(c(N),n(h(N,c(N))));return h(z,O)}function x(T,E,A){for(var D=bn(T),N=0,O=0;O<E;O++){if(A<=N)return D;for(var z=O;M(D[z][N]);)if(z++,E===z&&(z=O,N++,A===N))return D;[D[z],D[O]]=[D[O],D[z]];for(var C=D[O][N],R=0;R<A;R++)D[O][R]=s(D[O][R],C);for(var F=0;F<E;F++)if(F!==O){C=D[F][N];for(var H=0;H<A;H++)D[F][H]=d(D[F][H],h(-1,h(C,D[O][H])))}N++}return D}function b(T,E,A){var D=x(T,E,A),N=T.map((z,C)=>z.filter((R,F)=>F<E&&!M(o(D[F],D[F])))),O=D.filter((z,C)=>!M(o(D[C],D[C])));return{C:N,F:O}}function M(T){return a(d(T,m(1,1)),d(0,m(1,1)))}function _(T){return i(d(T,m(1,1)),d(h(T,0),m(1,1)))}});function TQ(r){var{addScalar:e,subtract:t,flatten:n,multiply:i,multiplyScalar:a,divideScalar:s,sqrt:o,abs:c,bignumber:u,diag:h,size:d,reshape:m,inv:v,qr:x,usolve:b,usolveAll:M,equal:_,complex:T,larger:E,smaller:A,matrixFromColumns:D,dot:N}=r;function O(k,ae,J,De){var pe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,_e=z(k,ae,J,De,pe);C(k,ae,J,De,pe,_e);var{values:ne,C:ue}=R(k,ae,J,De,pe);if(pe){var ge=F(k,ae,ue,_e,ne,J,De);return{values:ne,eigenvectors:ge}}return{values:ne}}function z(k,ae,J,De,pe){var _e=De==="BigNumber",ne=De==="Complex",ue=_e?u(0):0,ge=_e?u(1):ne?T(1):1,Ae=_e?u(1):1,Te=_e?u(10):2,se=a(Te,Te),Me;pe&&(Me=Array(ae).fill(ge));for(var Be=!1;!Be;){Be=!0;for(var Le=0;Le<ae;Le++){for(var Pe=ue,Ye=ue,Ze=0;Ze<ae;Ze++)Le!==Ze&&(Pe=e(Pe,c(k[Ze][Le])),Ye=e(Ye,c(k[Le][Ze])));if(!_(Pe,0)&&!_(Ye,0)){for(var re=Ae,be=Pe,Ce=s(Ye,Te),q=a(Ye,Te);A(be,Ce);)be=a(be,se),re=a(re,Te);for(;E(be,q);)be=s(be,se),re=s(re,Te);var V=A(s(e(be,Ye),re),a(e(Pe,Ye),.95));if(V){Be=!1;for(var ie=s(1,re),fe=0;fe<ae;fe++)Le!==fe&&(k[Le][fe]=a(k[Le][fe],ie),k[fe][Le]=a(k[fe][Le],re));pe&&(Me[Le]=a(Me[Le],ie))}}}}return pe?h(Me):null}function C(k,ae,J,De,pe,_e){var ne=De==="BigNumber",ue=De==="Complex",ge=ne?u(0):ue?T(0):0;ne&&(J=u(J));for(var Ae=0;Ae<ae-2;Ae++){for(var Te=0,se=ge,Me=Ae+1;Me<ae;Me++){var Be=k[Me][Ae];A(c(se),c(Be))&&(se=Be,Te=Me)}if(!A(c(se),J)){if(Te!==Ae+1){var Le=k[Te];k[Te]=k[Ae+1],k[Ae+1]=Le;for(var Pe=0;Pe<ae;Pe++){var Ye=k[Pe][Te];k[Pe][Te]=k[Pe][Ae+1],k[Pe][Ae+1]=Ye}if(pe){var Ze=_e[Te];_e[Te]=_e[Ae+1],_e[Ae+1]=Ze}}for(var re=Ae+2;re<ae;re++){var be=s(k[re][Ae],se);if(be!==0){for(var Ce=0;Ce<ae;Ce++)k[re][Ce]=t(k[re][Ce],a(be,k[Ae+1][Ce]));for(var q=0;q<ae;q++)k[q][Ae+1]=e(k[q][Ae+1],a(be,k[q][re]));if(pe)for(var V=0;V<ae;V++)_e[re][V]=t(_e[re][V],a(be,_e[Ae+1][V]))}}}}return _e}function R(k,ae,J,De,pe){var _e=De==="BigNumber",ne=De==="Complex",ue=_e?u(1):ne?T(1):1;_e&&(J=u(J));for(var ge=bn(k),Ae=[],Te=ae,se=[],Me=pe?h(Array(ae).fill(ue)):void 0,Be=pe?h(Array(Te).fill(ue)):void 0,Le=0;Le<=100;){Le+=1;for(var Pe=ge[Te-1][Te-1],Ye=0;Ye<Te;Ye++)ge[Ye][Ye]=t(ge[Ye][Ye],Pe);var{Q:Ze,R:re}=x(ge);ge=i(re,Ze);for(var be=0;be<Te;be++)ge[be][be]=e(ge[be][be],Pe);if(pe&&(Be=i(Be,Ze)),Te===1||A(c(ge[Te-1][Te-2]),J)){Le=0,Ae.push(ge[Te-1][Te-1]),pe&&(se.unshift([[1]]),$(Be,ae),Me=i(Me,Be),Te>1&&(Be=h(Array(Te-1).fill(ue)))),Te-=1,ge.pop();for(var Ce=0;Ce<Te;Ce++)ge[Ce].pop()}else if(Te===2||A(c(ge[Te-2][Te-3]),J)){Le=0;var q=H(ge[Te-2][Te-2],ge[Te-2][Te-1],ge[Te-1][Te-2],ge[Te-1][Te-1]);Ae.push(...q),pe&&(se.unshift(X(ge[Te-2][Te-2],ge[Te-2][Te-1],ge[Te-1][Te-2],ge[Te-1][Te-1],q[0],q[1],J,De)),$(Be,ae),Me=i(Me,Be),Te>2&&(Be=h(Array(Te-2).fill(ue)))),Te-=2,ge.pop(),ge.pop();for(var V=0;V<Te;V++)ge[V].pop(),ge[V].pop()}if(Te===0)break}if(Ae.sort((Se,ve)=>+t(c(Se),c(ve))),Le>100){var ie=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+Ae.join(", "));throw ie.values=Ae,ie.vectors=[],ie}var fe=pe?i(Me,Y(se,ae)):void 0;return{values:Ae,C:fe}}function F(k,ae,J,De,pe,_e,ne){var ue=v(J),ge=i(ue,k,J),Ae=ne==="BigNumber",Te=ne==="Complex",se=Ae?u(0):Te?T(0):0,Me=Ae?u(1):Te?T(1):1,Be=[],Le=[];for(var Pe of pe){var Ye=I(Be,Pe,_);Ye===-1?(Be.push(Pe),Le.push(1)):Le[Ye]+=1}for(var Ze=[],re=Be.length,be=Array(ae).fill(se),Ce=h(Array(ae).fill(Me)),q=function(){var fe=Be[V],Se=t(ge,i(fe,Ce)),ve=M(Se,be);for(ve.shift();ve.length<Le[V];){var qe=Z(Se,ae,ve,_e,ne);if(qe===null)break;ve.push(qe)}var Fe=i(v(De),J);ve=ve.map(We=>i(Fe,We)),Ze.push(...ve.map(We=>({value:fe,vector:n(We)})))},V=0;V<re;V++)q();return Ze}function H(k,ae,J,De){var pe=e(k,De),_e=t(a(k,De),a(ae,J)),ne=a(pe,.5),ue=a(o(t(a(pe,pe),a(4,_e))),.5);return[e(ne,ue),t(ne,ue)]}function X(k,ae,J,De,pe,_e,ne,ue){var ge=ue==="BigNumber",Ae=ue==="Complex",Te=ge?u(0):Ae?T(0):0,se=ge?u(1):Ae?T(1):1;if(A(c(J),ne))return[[se,Te],[Te,se]];if(E(c(t(pe,_e)),ne))return[[t(pe,De),t(_e,De)],[J,J]];var Me=t(k,pe),Be=t(De,pe);return A(c(ae),ne)&&A(c(Be),ne)?[[Me,se],[J,Te]]:[[ae,Te],[Be,se]]}function $(k,ae){for(var J=0;J<k.length;J++)k[J].push(...Array(ae-k[J].length).fill(0));for(var De=k.length;De<ae;De++)k.push(Array(ae).fill(0)),k[De][De]=1;return k}function Y(k,ae){for(var J=[],De=0;De<ae;De++)J[De]=Array(ae).fill(0);var pe=0;for(var _e of k){for(var ne=_e.length,ue=0;ue<ne;ue++)for(var ge=0;ge<ne;ge++)J[pe+ue][pe+ge]=_e[ue][ge];pe+=ne}return J}function I(k,ae,J){for(var De=0;De<k.length;De++)if(J(k[De],ae))return De;return-1}function Z(k,ae,J,De,pe){for(var _e=pe==="BigNumber"?u(1e3):1e3,ne,ue=0;ue<5;++ue){ne=W(ae,J,pe);try{ne=b(k,ne)}catch{continue}if(E(le(ne),_e))break}if(ue>=5)return null;for(ue=0;;){var ge=b(k,ne);if(A(le(te(ne,[ge])),De))break;if(++ue>=10)return null;ne=Q(ge)}return ne}function W(k,ae,J){var De=J==="BigNumber",pe=J==="Complex",_e=Array(k).fill(0).map(ne=>2*Math.random()-1);return De&&(_e=_e.map(ne=>u(ne))),pe&&(_e=_e.map(ne=>T(ne))),_e=te(_e,ae),Q(_e,J)}function te(k,ae){var J=d(k);for(var De of ae)De=m(De,J),k=t(k,i(s(N(De,k),N(De,De)),De));return k}function le(k){return c(o(N(k,k)))}function Q(k,ae){var J=ae==="BigNumber",De=ae==="Complex",pe=J?u(1):De?T(1):1;return i(s(pe,le(k)),k)}return O}function NQ(r){var{config:e,addScalar:t,subtract:n,abs:i,atan:a,cos:s,sin:o,multiplyScalar:c,inv:u,bignumber:h,multiply:d,add:m}=r;function v(C,R){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,H=arguments.length>3?arguments[3]:void 0,X=arguments.length>4?arguments[4]:void 0;if(H==="number")return x(C,F,X);if(H==="BigNumber")return b(C,F,X);throw TypeError("Unsupported data type: "+H)}function x(C,R,F){var H=C.length,X=Math.abs(R/H),$,Y;if(F){Y=new Array(H);for(var I=0;I<H;I++)Y[I]=Array(H).fill(0),Y[I][I]=1}for(var Z=N(C);Math.abs(Z[1])>=Math.abs(X);){var W=Z[0][0],te=Z[0][1];$=M(C[W][W],C[te][te],C[W][te]),C=D(C,$,W,te),F&&(Y=T(Y,$,W,te)),Z=N(C)}for(var le=Array(H).fill(0),Q=0;Q<H;Q++)le[Q]=C[Q][Q];return z(bn(le),Y,F)}function b(C,R,F){var H=C.length,X=i(R/H),$,Y;if(F){Y=new Array(H);for(var I=0;I<H;I++)Y[I]=Array(H).fill(0),Y[I][I]=1}for(var Z=O(C);i(Z[1])>=i(X);){var W=Z[0][0],te=Z[0][1];$=_(C[W][W],C[te][te],C[W][te]),C=A(C,$,W,te),F&&(Y=E(Y,$,W,te)),Z=O(C)}for(var le=Array(H).fill(0),Q=0;Q<H;Q++)le[Q]=C[Q][Q];return z(bn(le),Y,F)}function M(C,R,F){var H=R-C;return Math.abs(H)<=e.relTol?Math.PI/4:.5*Math.atan(2*F/(R-C))}function _(C,R,F){var H=n(R,C);return i(H)<=e.relTol?h(-1).acos().div(4):c(.5,a(d(2,F,u(H))))}function T(C,R,F,H){for(var X=C.length,$=Math.cos(R),Y=Math.sin(R),I=Array(X).fill(0),Z=Array(X).fill(0),W=0;W<X;W++)I[W]=$*C[W][F]-Y*C[W][H],Z[W]=Y*C[W][F]+$*C[W][H];for(var te=0;te<X;te++)C[te][F]=I[te],C[te][H]=Z[te];return C}function E(C,R,F,H){for(var X=C.length,$=s(R),Y=o(R),I=Array(X).fill(h(0)),Z=Array(X).fill(h(0)),W=0;W<X;W++)I[W]=n(c($,C[W][F]),c(Y,C[W][H])),Z[W]=t(c(Y,C[W][F]),c($,C[W][H]));for(var te=0;te<X;te++)C[te][F]=I[te],C[te][H]=Z[te];return C}function A(C,R,F,H){for(var X=C.length,$=h(s(R)),Y=h(o(R)),I=c($,$),Z=c(Y,Y),W=Array(X).fill(h(0)),te=Array(X).fill(h(0)),le=d(h(2),$,Y,C[F][H]),Q=t(n(c(I,C[F][F]),le),c(Z,C[H][H])),k=m(c(Z,C[F][F]),le,c(I,C[H][H])),ae=0;ae<X;ae++)W[ae]=n(c($,C[F][ae]),c(Y,C[H][ae])),te[ae]=t(c(Y,C[F][ae]),c($,C[H][ae]));C[F][F]=Q,C[H][H]=k,C[F][H]=h(0),C[H][F]=h(0);for(var J=0;J<X;J++)J!==F&&J!==H&&(C[F][J]=W[J],C[J][F]=W[J],C[H][J]=te[J],C[J][H]=te[J]);return C}function D(C,R,F,H){for(var X=C.length,$=Math.cos(R),Y=Math.sin(R),I=$*$,Z=Y*Y,W=Array(X).fill(0),te=Array(X).fill(0),le=I*C[F][F]-2*$*Y*C[F][H]+Z*C[H][H],Q=Z*C[F][F]+2*$*Y*C[F][H]+I*C[H][H],k=0;k<X;k++)W[k]=$*C[F][k]-Y*C[H][k],te[k]=Y*C[F][k]+$*C[H][k];C[F][F]=le,C[H][H]=Q,C[F][H]=0,C[H][F]=0;for(var ae=0;ae<X;ae++)ae!==F&&ae!==H&&(C[F][ae]=W[ae],C[ae][F]=W[ae],C[H][ae]=te[ae],C[ae][H]=te[ae]);return C}function N(C){for(var R=C.length,F=0,H=[0,1],X=0;X<R;X++)for(var $=X+1;$<R;$++)Math.abs(F)<Math.abs(C[X][$])&&(F=Math.abs(C[X][$]),H=[X,$]);return[H,F]}function O(C){for(var R=C.length,F=0,H=[0,1],X=0;X<R;X++)for(var $=X+1;$<R;$++)i(F)<i(C[X][$])&&(F=i(C[X][$]),H=[X,$]);return[H,F]}function z(C,R,F){var H=C.length,X=Array(H),$;if(F){$=Array(H);for(var Y=0;Y<H;Y++)$[Y]=Array(H)}for(var I=0;I<H;I++){for(var Z=0,W=C[0],te=0;te<C.length;te++)i(C[te])<i(W)&&(Z=te,W=C[Z]);if(X[I]=C.splice(Z,1)[0],F)for(var le=0;le<H;le++)$[I][le]=R[le][Z],R[le].splice(Z,1)}if(!F)return{values:X};var Q=$.map((k,ae)=>({value:X[ae],vector:k}));return{values:X,eigenvectors:Q}}return v}var DQ="eigs",CQ=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],RQ=de(DQ,CQ,r=>{var{config:e,typed:t,matrix:n,addScalar:i,subtract:a,equal:s,abs:o,atan:c,cos:u,sin:h,multiplyScalar:d,divideScalar:m,inv:v,bignumber:x,multiply:b,add:M,larger:_,column:T,flatten:E,number:A,complex:D,sqrt:N,diag:O,size:z,reshape:C,qr:R,usolve:F,usolveAll:H,im:X,re:$,smaller:Y,matrixFromColumns:I,dot:Z}=r,W=NQ({config:e,addScalar:i,subtract:a,abs:o,atan:c,cos:u,sin:h,multiplyScalar:d,inv:v,bignumber:x,multiply:b,add:M}),te=TQ({addScalar:i,subtract:a,multiply:b,multiplyScalar:d,flatten:E,divideScalar:m,sqrt:N,abs:o,bignumber:x,diag:O,size:z,reshape:C,qr:R,inv:v,usolve:F,usolveAll:H,equal:s,complex:D,larger:_,smaller:Y,matrixFromColumns:I,dot:Z});return t("eigs",{Array:function(_e){return le(n(_e))},"Array, number|BigNumber":function(_e,ne){return le(n(_e),{precision:ne})},"Array, Object"(pe,_e){return le(n(pe),_e)},Matrix:function(_e){return le(_e,{matricize:!0})},"Matrix, number|BigNumber":function(_e,ne){return le(_e,{precision:ne,matricize:!0})},"Matrix, Object":function(_e,ne){var ue={matricize:!0};return Ar(ue,ne),le(_e,ue)}});function le(pe){var _e,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue="eigenvectors"in ne?ne.eigenvectors:!0,ge=(_e=ne.precision)!==null&&_e!==void 0?_e:e.relTol,Ae=Q(pe,ge,ue);return ne.matricize&&(Ae.values=n(Ae.values),ue&&(Ae.eigenvectors=Ae.eigenvectors.map(Te=>{var{value:se,vector:Me}=Te;return{value:se,vector:n(Me)}}))),ue&&Object.defineProperty(Ae,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),Ae}function Q(pe,_e,ne){var ue=pe.toArray(),ge=pe.size();if(ge.length!==2||ge[0]!==ge[1])throw new RangeError("Matrix must be square (size: ".concat(Fn(ge),")"));var Ae=ge[0];if(ae(ue,Ae,_e)&&(J(ue,Ae),k(ue,Ae,_e))){var Te=De(pe,ue,Ae);return W(ue,Ae,_e,Te,ne)}var se=De(pe,ue,Ae);return te(ue,Ae,_e,se,ne)}function k(pe,_e,ne){for(var ue=0;ue<_e;ue++)for(var ge=ue;ge<_e;ge++)if(_(x(o(a(pe[ue][ge],pe[ge][ue]))),ne))return!1;return!0}function ae(pe,_e,ne){for(var ue=0;ue<_e;ue++)for(var ge=0;ge<_e;ge++)if(_(x(o(X(pe[ue][ge]))),ne))return!1;return!0}function J(pe,_e){for(var ne=0;ne<_e;ne++)for(var ue=0;ue<_e;ue++)pe[ne][ue]=$(pe[ne][ue])}function De(pe,_e,ne){var ue=pe.datatype();if(ue==="number"||ue==="BigNumber"||ue==="Complex")return ue;for(var ge=!1,Ae=!1,Te=!1,se=0;se<ne;se++)for(var Me=0;Me<ne;Me++){var Be=_e[se][Me];if(Qt(Be)||Ny(Be))ge=!0;else if(wn(Be))Ae=!0;else if(Jc(Be))Te=!0;else throw TypeError("Unsupported type in Matrix: "+Hr(Be))}if(Ae&&Te&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),Te){for(var Le=0;Le<ne;Le++)for(var Pe=0;Pe<ne;Pe++)_e[Le][Pe]=D(_e[Le][Pe]);return"Complex"}if(Ae){for(var Ye=0;Ye<ne;Ye++)for(var Ze=0;Ze<ne;Ze++)_e[Ye][Ze]=x(_e[Ye][Ze]);return"BigNumber"}if(ge){for(var re=0;re<ne;re++)for(var be=0;be<ne;be++)_e[re][be]=A(_e[re][be]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),nR="expm",OQ=["typed","abs","add","identity","inv","multiply"],BQ=de(nR,OQ,r=>{var{typed:e,abs:t,add:n,identity:i,inv:a,multiply:s}=r;return e(nR,{Matrix:function(d){var m=d.size();if(m.length!==2||m[0]!==m[1])throw new RangeError("Matrix must be square (size: "+Fn(m)+")");for(var v=m[0],x=1e-15,b=o(d),M=c(b,x),_=M.q,T=M.j,E=s(d,Math.pow(2,-T)),A=i(v),D=i(v),N=1,O=E,z=-1,C=1;C<=_;C++)C>1&&(O=s(O,E),z=-z),N=N*(_-C+1)/((2*_-C+1)*C),A=n(A,s(N,O)),D=n(D,s(N*z,O));for(var R=s(a(D),A),F=0;F<T;F++)R=s(R,R);return Xd(d)?d.createSparseMatrix(R):R}});function o(h){for(var d=h.size()[0],m=0,v=0;v<d;v++){for(var x=0,b=0;b<d;b++)x+=t(h.get([v,b]));m=Math.max(x,m)}return m}function c(h,d){for(var m=30,v=0;v<m;v++)for(var x=0;x<=v;x++){var b=v-x;if(u(h,x,b)<d)return{q:x,j:b}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(h,d,m){for(var v=1,x=2;x<=d;x++)v*=x;for(var b=v,M=d+1;M<=2*d;M++)b*=M;var _=b*(2*d+1);return 8*Math.pow(h/Math.pow(2,m),2*d)*v*v/(b*_)}}),rR="sqrtm",UQ=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],zQ=de(rR,UQ,r=>{var{typed:e,abs:t,add:n,multiply:i,map:a,sqrt:s,subtract:o,inv:c,size:u,max:h,identity:d}=r,m=1e3,v=1e-6;function x(b){var M,_=0,T=b,E=d(u(b));do{var A=T;if(T=i(.5,n(A,c(E))),E=i(.5,n(E,c(A))),M=h(t(o(T,A))),M>v&&++_>m)throw new Error("computing square root of matrix: iterative method could not converge")}while(M>v);return T}return e(rR,{"Array | Matrix":function(M){var _=rn(M)?M.size():_n(M);switch(_.length){case 1:if(_[0]===1)return a(M,s);throw new RangeError("Matrix must be square (size: "+Fn(_)+")");case 2:{var T=_[0],E=_[1];if(T===E)return x(M);throw new RangeError("Matrix must be square (size: "+Fn(_)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+Fn(_)+")")}}})}),iR="sylvester",FQ=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],LQ=de(iR,FQ,r=>{var{typed:e,schur:t,matrixFromColumns:n,matrix:i,multiply:a,range:s,concat:o,transpose:c,index:u,subset:h,add:d,subtract:m,identity:v,lusolve:x,abs:b,config:M}=r;return e(iR,{"Matrix, Matrix, Matrix":_,"Array, Matrix, Matrix":function(E,A,D){return _(i(E),A,D)},"Array, Array, Matrix":function(E,A,D){return _(i(E),i(A),D)},"Array, Matrix, Array":function(E,A,D){return _(i(E),A,i(D))},"Matrix, Array, Matrix":function(E,A,D){return _(E,i(A),D)},"Matrix, Array, Array":function(E,A,D){return _(E,i(A),i(D))},"Matrix, Matrix, Array":function(E,A,D){return _(E,A,i(D))},"Array, Array, Array":function(E,A,D){return _(i(E),i(A),i(D)).toArray()}});function _(T,E,A){for(var D=E.size()[0],N=T.size()[0],O=t(T),z=O.T,C=O.U,R=t(a(-1,E)),F=R.T,H=R.U,X=a(a(c(C),A),H),$=s(0,N),Y=[],I=(se,Me)=>o(se,Me,1),Z=(se,Me)=>o(se,Me,0),W=0;W<D;W++)if(W<D-1&&b(h(F,u(W+1,W)))>1e-5){for(var te=Z(h(X,u($,[W])),h(X,u($,[W+1]))),le=0;le<W;le++)te=d(te,Z(a(Y[le],h(F,u(le,W))),a(Y[le],h(F,u(le,W+1)))));var Q=a(v(N),a(-1,h(F,u(W,W)))),k=a(v(N),a(-1,h(F,u(W+1,W)))),ae=a(v(N),a(-1,h(F,u(W,W+1)))),J=a(v(N),a(-1,h(F,u(W+1,W+1)))),De=Z(I(d(z,Q),k),I(ae,d(z,J))),pe=x(De,te);Y[W]=pe.subset(u(s(0,N),[0])),Y[W+1]=pe.subset(u(s(N,2*N),[0])),W++}else{for(var _e=h(X,u($,[W])),ne=0;ne<W;ne++)_e=d(_e,a(Y[ne],h(F,u(ne,W))));var ue=h(F,u(W,W)),ge=m(z,a(ue,v(N)));Y[W]=x(ge,_e)}var Ae=i(n(...Y)),Te=a(C,a(Ae,c(H)));return Te}}),aR="schur",IQ=["typed","matrix","identity","multiply","qr","norm","subtract"],PQ=de(aR,IQ,r=>{var{typed:e,matrix:t,identity:n,multiply:i,qr:a,norm:s,subtract:o}=r;return e(aR,{Array:function(h){var d=c(t(h));return{U:d.U.valueOf(),T:d.T.valueOf()}},Matrix:function(h){return c(h)}});function c(u){var h=u.size()[0],d=u,m=n(h),v=0,x;do{x=d;var b=a(d),M=b.Q,_=b.R;if(d=i(_,M),m=i(m,M),v++>100)break}while(s(o(d,x))>1e-4);return{U:m,T:d}}}),sR="lyap",HQ=["typed","matrix","sylvester","multiply","transpose"],VQ=de(sR,HQ,r=>{var{typed:e,matrix:t,sylvester:n,multiply:i,transpose:a}=r;return e(sR,{"Matrix, Matrix":function(o,c){return n(o,a(o),i(-1,c))},"Array, Matrix":function(o,c){return n(t(o),a(t(o)),i(-1,c))},"Matrix, Array":function(o,c){return n(o,a(t(o)),t(i(-1,c)))},"Array, Array":function(o,c){return n(t(o),a(t(o)),t(i(-1,c))).toArray()}})}),qQ="divide",GQ=["typed","matrix","multiply","equalScalar","divideScalar","inv"],kQ=de(qQ,GQ,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:i,divideScalar:a,inv:s}=r,o=Ya({typed:e,equalScalar:i}),c=Ml({typed:e});return e("divide",RB({"Array | Matrix, Array | Matrix":function(h,d){return n(h,s(d))},"DenseMatrix, any":function(h,d){return c(h,d,a,!1)},"SparseMatrix, any":function(h,d){return o(h,d,a,!1)},"Array, any":function(h,d){return c(t(h),d,a,!1).valueOf()},"any, Array | Matrix":function(h,d){return n(h,s(d))}},a.signatures))}),oR="distance",XQ=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],jQ=de(oR,XQ,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:a,deepEqual:s,sqrt:o,abs:c}=r;return e(oR,{"Array, Array, Array":function(D,N,O){if(D.length===2&&N.length===2&&O.length===2){if(!h(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!h(O))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(N,O))throw new TypeError("LinePoint1 should not be same with LinePoint2");var z=n(O[1],N[1]),C=n(N[0],O[0]),R=n(i(O[0],N[1]),i(N[0],O[1]));return M(D[0],D[1],z,C,R)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(D,N,O){if(Object.keys(D).length===2&&Object.keys(N).length===2&&Object.keys(O).length===2){if(!h(D))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(N))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!h(O))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(x(N),x(O)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in D&&"pointY"in D&&"lineOnePtX"in N&&"lineOnePtY"in N&&"lineTwoPtX"in O&&"lineTwoPtY"in O){var z=n(O.lineTwoPtY,N.lineOnePtY),C=n(N.lineOnePtX,O.lineTwoPtX),R=n(i(O.lineTwoPtX,N.lineOnePtY),i(N.lineOnePtX,O.lineTwoPtY));return M(D.pointX,D.pointY,z,C,R)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(D,N){if(D.length===2&&N.length===3){if(!h(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!d(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return M(D[0],D[1],N[0],N[1],N[2])}else if(D.length===3&&N.length===6){if(!d(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!v(N))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return _(D[0],D[1],D[2],N[0],N[1],N[2],N[3],N[4],N[5])}else if(D.length===N.length&&D.length>0){if(!m(D))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!m(N))throw new TypeError("All values of an array should be numbers or BigNumbers");return T(D,N)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(D,N){if(Object.keys(D).length===2&&Object.keys(N).length===3){if(!h(D))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!d(N))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in D&&"pointY"in D&&"xCoeffLine"in N&&"yCoeffLine"in N&&"constant"in N)return M(D.pointX,D.pointY,N.xCoeffLine,N.yCoeffLine,N.constant);throw new TypeError("Key names do not match")}else if(Object.keys(D).length===3&&Object.keys(N).length===6){if(!d(D))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!v(N))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in D&&"pointY"in D&&"x0"in N&&"y0"in N&&"z0"in N&&"a"in N&&"b"in N&&"c"in N)return _(D.pointX,D.pointY,D.pointZ,N.x0,N.y0,N.z0,N.a,N.b,N.c);throw new TypeError("Key names do not match")}else if(Object.keys(D).length===2&&Object.keys(N).length===2){if(!h(D))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!h(N))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in D&&"pointOneY"in D&&"pointTwoX"in N&&"pointTwoY"in N)return T([D.pointOneX,D.pointOneY],[N.pointTwoX,N.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(D).length===3&&Object.keys(N).length===3){if(!d(D))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!d(N))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in D&&"pointOneY"in D&&"pointOneZ"in D&&"pointTwoX"in N&&"pointTwoY"in N&&"pointTwoZ"in N)return T([D.pointOneX,D.pointOneY,D.pointOneZ],[N.pointTwoX,N.pointTwoY,N.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(D){if(!b(D))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return E(D)}});function u(A){return typeof A=="number"||wn(A)}function h(A){return A.constructor!==Array&&(A=x(A)),u(A[0])&&u(A[1])}function d(A){return A.constructor!==Array&&(A=x(A)),u(A[0])&&u(A[1])&&u(A[2])}function m(A){return Array.isArray(A)||(A=x(A)),A.every(u)}function v(A){return A.constructor!==Array&&(A=x(A)),u(A[0])&&u(A[1])&&u(A[2])&&u(A[3])&&u(A[4])&&u(A[5])}function x(A){for(var D=Object.keys(A),N=[],O=0;O<D.length;O++)N.push(A[D[O]]);return N}function b(A){if(A[0].length===2&&u(A[0][0])&&u(A[0][1])){if(A.some(D=>D.length!==2||!u(D[0])||!u(D[1])))return!1}else if(A[0].length===3&&u(A[0][0])&&u(A[0][1])&&u(A[0][2])){if(A.some(D=>D.length!==3||!u(D[0])||!u(D[1])||!u(D[2])))return!1}else return!1;return!0}function M(A,D,N,O,z){var C=c(t(t(i(N,A),i(O,D)),z)),R=o(t(i(N,N),i(O,O)));return a(C,R)}function _(A,D,N,O,z,C,R,F,H){var X=[n(i(n(z,D),H),i(n(C,N),F)),n(i(n(C,N),R),i(n(O,A),H)),n(i(n(O,A),F),i(n(z,D),R))];X=o(t(t(i(X[0],X[0]),i(X[1],X[1])),i(X[2],X[2])));var $=o(t(t(i(R,R),i(F,F)),i(H,H)));return a(X,$)}function T(A,D){for(var N=A.length,O=0,z=0,C=0;C<N;C++)z=n(A[C],D[C]),O=t(i(z,z),O);return o(O)}function E(A){for(var D=[],N=[],O=[],z=0;z<A.length-1;z++)for(var C=z+1;C<A.length;C++)A[0].length===2?(N=[A[z][0],A[z][1]],O=[A[C][0],A[C][1]]):A[0].length===3&&(N=[A[z][0],A[z][1],A[z][2]],O=[A[C][0],A[C][1],A[C][2]]),D.push(T(N,O));return D}}),YQ="intersect",WQ=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],$Q=de(YQ,WQ,r=>{var{typed:e,config:t,abs:n,add:i,addScalar:a,matrix:s,multiply:o,multiplyScalar:c,divideScalar:u,subtract:h,smaller:d,equalScalar:m,flatten:v,isZero:x,isNumeric:b}=r;return e("intersect",{"Array, Array, Array":M,"Array, Array, Array, Array":_,"Matrix, Matrix, Matrix":function(F,H,X){var $=M(F.valueOf(),H.valueOf(),X.valueOf());return $===null?null:s($)},"Matrix, Matrix, Matrix, Matrix":function(F,H,X,$){var Y=_(F.valueOf(),H.valueOf(),X.valueOf(),$.valueOf());return Y===null?null:s(Y)}});function M(R,F,H){if(R=T(R),F=T(F),H=T(H),!A(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(F))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!D(H))throw new TypeError("Array with 4 numbers expected as third argument");return C(R[0],R[1],R[2],F[0],F[1],F[2],H[0],H[1],H[2],H[3])}function _(R,F,H,X){if(R=T(R),F=T(F),H=T(H),X=T(X),R.length===2){if(!E(R))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!E(F))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!E(H))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!E(X))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return N(R,F,H,X)}else if(R.length===3){if(!A(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(F))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!A(H))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!A(X))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return z(R[0],R[1],R[2],F[0],F[1],F[2],H[0],H[1],H[2],X[0],X[1],X[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function T(R){return R.length===1?R[0]:R.length>1&&Array.isArray(R[0])&&R.every(F=>Array.isArray(F)&&F.length===1)?v(R):R}function E(R){return R.length===2&&b(R[0])&&b(R[1])}function A(R){return R.length===3&&b(R[0])&&b(R[1])&&b(R[2])}function D(R){return R.length===4&&b(R[0])&&b(R[1])&&b(R[2])&&b(R[3])}function N(R,F,H,X){var $=R,Y=H,I=h($,F),Z=h(Y,X),W=h(c(I[0],Z[1]),c(Z[0],I[1]));if(x(W)||d(n(W),t.relTol))return null;var te=c(Z[0],$[1]),le=c(Z[1],$[0]),Q=c(Z[0],Y[1]),k=c(Z[1],Y[0]),ae=u(a(h(h(te,le),Q),k),W);return i(o(I,ae),$)}function O(R,F,H,X,$,Y,I,Z,W,te,le,Q){var k=c(h(R,F),h(H,X)),ae=c(h($,Y),h(I,Z)),J=c(h(W,te),h(le,Q));return a(a(k,ae),J)}function z(R,F,H,X,$,Y,I,Z,W,te,le,Q){var k=O(R,I,te,I,F,Z,le,Z,H,W,Q,W),ae=O(te,I,X,R,le,Z,$,F,Q,W,Y,H),J=O(R,I,X,R,F,Z,$,F,H,W,Y,H),De=O(te,I,te,I,le,Z,le,Z,Q,W,Q,W),pe=O(X,R,X,R,$,F,$,F,Y,H,Y,H),_e=h(c(k,ae),c(J,De)),ne=h(c(pe,De),c(ae,ae));if(x(ne))return null;var ue=u(_e,ne),ge=u(a(k,c(ue,ae)),De),Ae=a(R,c(ue,h(X,R))),Te=a(F,c(ue,h($,F))),se=a(H,c(ue,h(Y,H))),Me=a(I,c(ge,h(te,I))),Be=a(Z,c(ge,h(le,Z))),Le=a(W,c(ge,h(Q,W)));return m(Ae,Me)&&m(Te,Be)&&m(se,Le)?[Ae,Te,se]:null}function C(R,F,H,X,$,Y,I,Z,W,te){var le=c(R,I),Q=c(X,I),k=c(F,Z),ae=c($,Z),J=c(H,W),De=c(Y,W),pe=h(h(h(te,le),k),J),_e=h(h(h(a(a(Q,ae),De),le),k),J),ne=u(pe,_e),ue=a(R,c(ne,h(X,R))),ge=a(F,c(ne,h($,F))),Ae=a(H,c(ne,h(Y,H)));return[ue,ge,Ae]}}),lR="sum",ZQ=["typed","config","add","numeric"],Mz=de(lR,ZQ,r=>{var{typed:e,config:t,add:n,numeric:i}=r;return e(lR,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":s,"...":function(c){if(Fv(c))throw new TypeError("Scalar values expected in function sum");return a(c)}});function a(o){var c;return gh(o,function(u){try{c=c===void 0?u:n(c,u)}catch(h){throw Zs(h,"sum",u)}}),c===void 0&&(c=i(0,t.number)),typeof c=="string"&&(c=i(c,_h(c,t))),c}function s(o,c){try{var u=ES(o,c,n);return u}catch(h){throw Zs(h,"sum")}}}),Ox="cumsum",KQ=["typed","add","unaryPlus"],Ez=de(Ox,KQ,r=>{var{typed:e,add:t,unaryPlus:n}=r;return e(Ox,{Array:i,Matrix:function(u){return u.create(i(u.valueOf(),u.datatype()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(u,h){return u.create(s(u.valueOf(),h),u.datatype())},"...":function(u){if(Fv(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(c){try{return a(c)}catch(u){throw Zs(u,Ox)}}function a(c){if(c.length===0)return[];for(var u=[n(c[0])],h=1;h<c.length;++h)u.push(t(u[h-1],c[h]));return u}function s(c,u){var h=_n(c);if(u<0||u>=h.length)throw new uu(u,h.length);try{return o(c,u)}catch(d){throw Zs(d,Ox)}}function o(c,u){var h,d,m;if(u<=0){var v=c[0][0];if(Array.isArray(v)){for(m=aU(c),d=[],h=0;h<m.length;h++)d[h]=o(m[h],u-1);return d}else return a(c)}else{for(d=[],h=0;h<c.length;h++)d[h]=o(c[h],u-1);return d}}}),uR="mean",QQ=["typed","add","divide"],Az=de(uR,QQ,r=>{var{typed:e,add:t,divide:n}=r;return e(uR,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(o){if(Fv(o))throw new TypeError("Scalar values expected in function mean");return a(o)}});function i(s,o){try{var c=ES(s,o,t),u=Array.isArray(s)?_n(s):s.size();return n(c,u[o])}catch(h){throw Zs(h,"mean")}}function a(s){var o,c=0;if(gh(s,function(u){try{o=o===void 0?u:t(o,u),c++}catch(h){throw Zs(h,"mean",u)}}),c===0)throw new Error("Cannot calculate the mean of an empty array");return n(o,c)}}),cR="median",JQ=["typed","add","divide","compare","partitionSelect"],eJ=de(cR,JQ,r=>{var{typed:e,add:t,divide:n,compare:i,partitionSelect:a}=r;function s(u){try{u=mr(u.valueOf());var h=u.length;if(h===0)throw new Error("Cannot calculate median of an empty array");if(h%2===0){for(var d=h/2-1,m=a(u,d+1),v=u[d],x=0;x<d;++x)i(u[x],v)>0&&(v=u[x]);return c(v,m)}else{var b=a(u,(h-1)/2);return o(b)}}catch(M){throw Zs(M,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(h){return h}}),c=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(h,d){return n(t(h,d),2)}});return e(cR,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(h,d){throw new Error("median(A, dim) is not yet supported")},"...":function(h){if(Fv(h))throw new TypeError("Scalar values expected in function median");return s(h)}})}),fR="mad",tJ=["typed","abs","map","median","subtract"],nJ=de(fR,tJ,r=>{var{typed:e,abs:t,map:n,median:i,subtract:a}=r;return e(fR,{"Array | Matrix":s,"...":function(c){return s(c)}});function s(o){if(o=mr(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var c=i(o);return i(n(o,function(u){return t(a(u,c))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):Zs(u,"mad")}}}),bE="unbiased",hR="variance",rJ=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],wz=de(hR,rJ,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,mapSlices:s,isNaN:o}=r;return e(hR,{"Array | Matrix":function(d){return c(d,bE)},"Array | Matrix, string":c,"Array | Matrix, number | BigNumber":function(d,m){return u(d,m,bE)},"Array | Matrix, number | BigNumber, string":u,"...":function(d){return c(d,bE)}});function c(h,d){var m,v=0;if(h.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(gh(h,function(M){try{m=m===void 0?M:t(m,M),v++}catch(_){throw Zs(_,"variance",M)}}),v===0)throw new Error("Cannot calculate variance of an empty array");var x=a(m,v);if(m=void 0,gh(h,function(M){var _=n(M,x);m=m===void 0?i(_,_):t(m,i(_,_))}),o(m))return m;switch(d){case"uncorrected":return a(m,v);case"biased":return a(m,v+1);case"unbiased":{var b=wn(m)?m.mul(0):0;return v===1?b:a(m,v-1)}default:throw new Error('Unknown normalization "'+d+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(h,d,m){try{if(h.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(h,d,v=>c(v,m))}catch(v){throw Zs(v,"variance")}}}),dR="quantileSeq",iJ=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],Tz=de(dR,iJ,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:c,isInteger:u,smaller:h,smallerEq:d,larger:m,mapSlices:v}=r;return e(dR,{"Array | Matrix, number | BigNumber":(T,E)=>b(T,E,!1),"Array | Matrix, number | BigNumber, number":(T,E,A)=>x(T,E,!1,A,b),"Array | Matrix, number | BigNumber, boolean":b,"Array | Matrix, number | BigNumber, boolean, number":(T,E,A,D)=>x(T,E,A,D,b),"Array | Matrix, Array | Matrix":(T,E)=>M(T,E,!1),"Array | Matrix, Array | Matrix, number":(T,E,A)=>x(T,E,!1,A,M),"Array | Matrix, Array | Matrix, boolean":M,"Array | Matrix, Array | Matrix, boolean, number":(T,E,A,D)=>x(T,E,A,D,M)});function x(T,E,A,D,N){return v(T,D,O=>N(O,E,A))}function b(T,E,A){var D,N=T.valueOf();if(h(E,0))throw new Error("N/prob must be non-negative");if(d(E,1))return Qt(E)?_(N,E,A):t(_(N,E,A));if(m(E,1)){if(!u(E))throw new Error("N must be a positive integer");if(m(E,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var O=n(E,1);D=[];for(var z=0;h(z,E);z++){var C=a(z+1,O);D.push(_(N,C,A))}return Qt(E)?D:t(D)}}function M(T,E,A){for(var D=T.valueOf(),N=E.valueOf(),O=[],z=0;z<N.length;++z)O.push(_(D,N[z],A));return O}function _(T,E,A){var D=mr(T),N=D.length;if(N===0)throw new Error("Cannot calculate quantile of an empty sequence");var O=Qt(E)?E*(N-1):E.times(N-1),z=Qt(E)?Math.floor(O):O.floor().toNumber(),C=Qt(E)?O%1:O.minus(z);if(u(O))return A?D[O]:o(D,Qt(E)?O:O.valueOf());var R,F;if(A)R=D[z],F=D[z+1];else{F=o(D,z+1),R=D[z];for(var H=0;H<z;++H)c(D[H],R)>0&&(R=D[H])}return n(s(R,i(1,C)),s(F,C))}}),pR="std",aJ=["typed","map","sqrt","variance"],Nz=de(pR,aJ,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r;return e(pR,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(o){return a(o)}});function a(s,o){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var c=i.apply(null,arguments);return qo(c)?t(c,n):n(c)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),mR="corr",sJ=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],oJ=de(mR,sJ,r=>{var{typed:e,matrix:t,sqrt:n,sum:i,add:a,subtract:s,multiply:o,pow:c,divide:u}=r;return e(mR,{"Array, Array":function(v,x){return h(v,x)},"Matrix, Matrix":function(v,x){var b=h(v.toArray(),x.toArray());return Array.isArray(b)?t(b):b}});function h(m,v){var x=[];if(Array.isArray(m[0])&&Array.isArray(v[0])){if(m.length!==v.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var b=0;b<m.length;b++){if(m[b].length!==v[b].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");x.push(d(m[b],v[b]))}return x}else{if(m.length!==v.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return d(m,v)}}function d(m,v){var x=m.length,b=i(m),M=i(v),_=m.reduce((N,O,z)=>a(N,o(O,v[z])),0),T=i(m.map(N=>c(N,2))),E=i(v.map(N=>c(N,2))),A=s(o(x,_),o(b,M)),D=n(o(s(o(x,T),c(b,2)),s(o(x,E),c(M,2))));return u(A,D)}}),vR="combinations",lJ=["typed"],uJ=de(vR,lJ,r=>{var{typed:e}=r;return e(vR,{"number, number":wU,"BigNumber, BigNumber":function(n,i){var a=n.constructor,s,o,c=n.minus(i),u=new a(1);if(!gR(n)||!gR(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(s=u,i.lt(c))for(o=u;o.lte(c);o=o.plus(u))s=s.times(i.plus(o)).dividedBy(o);else for(o=u;o.lte(i);o=o.plus(u))s=s.times(c.plus(o)).dividedBy(o);return s}})});function gR(r){return r.isInteger()&&r.gte(0)}var yR="combinationsWithRep",cJ=["typed"],fJ=de(yR,cJ,r=>{var{typed:e}=r;return e(yR,{"number, number":function(n,i){if(!Xt(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Xt(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var a=Qc(n,n+i-1);return a/Qc(1,i)}var s=Qc(i+1,n+i-1);return s/Qc(1,n-1)},"BigNumber, BigNumber":function(n,i){var a=n.constructor,s,o,c=new a(1),u=n.minus(c);if(!xR(n)||!xR(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(c))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=c,i.lt(u))for(o=c;o.lte(u);o=o.plus(c))s=s.times(i.plus(o)).dividedBy(o);else for(o=c;o.lte(i);o=o.plus(c))s=s.times(u.plus(o)).dividedBy(o);return s}})});function xR(r){return r.isInteger()&&r.gte(0)}var bR="gamma",hJ=["typed","config","multiplyScalar","pow","BigNumber","Complex"],dJ=de(bR,hJ,r=>{var{typed:e,config:t,multiplyScalar:n,pow:i,BigNumber:a,Complex:s}=r;function o(u){if(u.im===0)return l_(u.re);if(u.re<.5){var h=new s(1-u.re,-u.im),d=new s(Math.PI*u.re,Math.PI*u.im);return new s(Math.PI).div(d.sin()).div(o(h))}u=new s(u.re-1,u.im);for(var m=new s(uv[0],0),v=1;v<uv.length;++v){var x=new s(uv[v],0);m=m.add(x.div(u.add(v)))}var b=new s(u.re+NU+.5,u.im),M=Math.sqrt(2*Math.PI),_=b.pow(u.add(.5)),T=b.neg().exp();return m.mul(M).mul(_).mul(T)}return e(bR,{number:l_,Complex:o,BigNumber:function(h){if(h.isInteger())return h.isNegative()||h.isZero()?new a(1/0):c(h.minus(1));if(!h.isFinite())return new a(h.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function c(u){if(u<8)return new a([1,1,2,6,24,120,720,5040][u]);var h=t.precision+(Math.log(u.toNumber())|0),d=a.clone({precision:h});if(u%2===1)return u.times(c(new a(u-1)));for(var m=u,v=new d(u),x=u.toNumber();m>2;)m-=2,x+=m,v=v.times(x);return new a(v.toPrecision(a.precision))}}),_R="lgamma",pJ=["Complex","typed"],mJ=de(_R,pJ,r=>{var{Complex:e,typed:t}=r,n=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(_R,{number:u_,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(u){var h=6.283185307179586,d=1.1447298858494002,m=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(u_(u.re),0);if(u.re>=n||Math.abs(u.im)>=i)return o(u);if(u.re<=m){var v=ZP(h,u.im)*Math.floor(.5*u.re+.25),x=u.mul(Math.PI).sin().log(),b=s(new e(1-u.re,-u.im));return new e(d,v).sub(x).sub(b)}else return u.im>=0?c(u):c(u.conjugate()).conjugate()}function o(u){for(var h=u.sub(.5).mul(u.log()).sub(u).add(DU),d=new e(1,0).div(u),m=d.div(u),v=a[0],x=a[1],b=2*m.re,M=m.re*m.re+m.im*m.im,_=2;_<8;_++){var T=x;x=-M*v+a[_],v=b*v+T}var E=d.mul(m.mul(v).add(x));return h.add(E)}function c(u){var h=0,d=0,m=u;for(u=u.add(1);u.re<=n;){m=m.mul(u);var v=m.im<0?1:0;v!==0&&d===0&&h++,d=v,u=u.add(1)}return o(u).sub(m.log()).sub(new e(0,h*2*Math.PI*1))}}),SR="factorial",vJ=["typed","gamma"],gJ=de(SR,vJ,r=>{var{typed:e,gamma:t}=r;return e(SR,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>Tn(i,n))})}),MR="kldivergence",yJ=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],xJ=de(MR,yJ,r=>{var{typed:e,matrix:t,divide:n,sum:i,multiply:a,map:s,dotDivide:o,log:c,isNumeric:u}=r;return e(MR,{"Array, Array":function(m,v){return h(t(m),t(v))},"Matrix, Array":function(m,v){return h(m,t(v))},"Array, Matrix":function(m,v){return h(t(m),v)},"Matrix, Matrix":function(m,v){return h(m,v)}});function h(d,m){var v=m.size().length,x=d.size().length;if(v>1)throw new Error("first object must be one dimensional");if(x>1)throw new Error("second object must be one dimensional");if(v!==x)throw new Error("Length of two vectors must be equal");var b=i(d);if(b===0)throw new Error("Sum of elements in first object must be non zero");var M=i(m);if(M===0)throw new Error("Sum of elements in second object must be non zero");var _=n(d,i(d)),T=n(m,i(m)),E=i(a(_,s(o(_,T),A=>c(A))));return u(E)?E:Number.NaN}}),ER="multinomial",bJ=["typed","add","divide","multiply","factorial","isInteger","isPositive"],_J=de(ER,bJ,r=>{var{typed:e,add:t,divide:n,multiply:i,factorial:a,isInteger:s,isPositive:o}=r;return e(ER,{"Array | Matrix":function(u){var h=0,d=1;return gh(u,function(m){if(!s(m)||!o(m))throw new TypeError("Positive integer value expected in function multinomial");h=t(h,m),d=i(d,a(m))}),n(a(h),d)}})}),AR="permutations",SJ=["typed","factorial"],MJ=de(AR,SJ,r=>{var{typed:e,factorial:t}=r;return e(AR,{"number | BigNumber":t,"number, number":function(i,a){if(!Xt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!Xt(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(a>i)throw new TypeError("second argument k must be less than or equal to first argument n");return Qc(i-a+1,i)},"BigNumber, BigNumber":function(i,a){var s,o;if(!wR(i)||!wR(a))throw new TypeError("Positive integer value expected in function permutations");if(a.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var c=i.mul(0).add(1);for(s=c,o=i.minus(a).plus(1);o.lte(i);o=o.plus(1))s=s.times(o);return s}})});function wR(r){return r.isInteger()&&r.gte(0)}var Bb={exports:{}},EJ=Bb.exports,TR;function AJ(){return TR||(TR=1,(function(r){(function(e,t,n){function i(c){var u=this,h=o();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=h(" "),u.s1=h(" "),u.s2=h(" "),u.s0-=h(c),u.s0<0&&(u.s0+=1),u.s1-=h(c),u.s1<0&&(u.s1+=1),u.s2-=h(c),u.s2<0&&(u.s2+=1),h=null}function a(c,u){return u.c=c.c,u.s0=c.s0,u.s1=c.s1,u.s2=c.s2,u}function s(c,u){var h=new i(c),d=u&&u.state,m=h.next;return m.int32=function(){return h.next()*4294967296|0},m.double=function(){return m()+(m()*2097152|0)*11102230246251565e-32},m.quick=m,d&&(typeof d=="object"&&a(d,h),m.state=function(){return a(h,{})}),m}function o(){var c=4022871197,u=function(h){h=String(h);for(var d=0;d<h.length;d++){c+=h.charCodeAt(d);var m=.02519603282416938*c;c=m>>>0,m-=c,m*=c,c=m>>>0,m-=c,c+=m*4294967296}return(c>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=s:this.alea=s})(EJ,r)})(Bb)),Bb.exports}var Ub={exports:{}},wJ=Ub.exports,NR;function TJ(){return NR||(NR=1,(function(r){(function(e,t,n){function i(o){var c=this,u="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var d=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^d^d>>>8},o===(o|0)?c.x=o:u+=o;for(var h=0;h<u.length+64;h++)c.x^=u.charCodeAt(h)|0,c.next()}function a(o,c){return c.x=o.x,c.y=o.y,c.z=o.z,c.w=o.w,c}function s(o,c){var u=new i(o),h=c&&c.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var m=u.next()>>>11,v=(u.next()>>>0)/4294967296,x=(m+v)/(1<<21);while(x===0);return x},d.int32=u.next,d.quick=d,h&&(typeof h=="object"&&a(h,u),d.state=function(){return a(u,{})}),d}t&&t.exports?t.exports=s:this.xor128=s})(wJ,r)})(Ub)),Ub.exports}var zb={exports:{}},NJ=zb.exports,DR;function DJ(){return DR||(DR=1,(function(r){(function(e,t,n){function i(o){var c=this,u="";c.next=function(){var d=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(d^d<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,o===(o|0)?c.x=o:u+=o;for(var h=0;h<u.length+64;h++)c.x^=u.charCodeAt(h)|0,h==u.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function a(o,c){return c.x=o.x,c.y=o.y,c.z=o.z,c.w=o.w,c.v=o.v,c.d=o.d,c}function s(o,c){var u=new i(o),h=c&&c.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var m=u.next()>>>11,v=(u.next()>>>0)/4294967296,x=(m+v)/(1<<21);while(x===0);return x},d.int32=u.next,d.quick=d,h&&(typeof h=="object"&&a(h,u),d.state=function(){return a(u,{})}),d}t&&t.exports?t.exports=s:this.xorwow=s})(NJ,r)})(zb)),zb.exports}var Fb={exports:{}},CJ=Fb.exports,CR;function RJ(){return CR||(CR=1,(function(r){(function(e,t,n){function i(o){var c=this;c.next=function(){var h=c.x,d=c.i,m,v;return m=h[d],m^=m>>>7,v=m^m<<24,m=h[d+1&7],v^=m^m>>>10,m=h[d+3&7],v^=m^m>>>3,m=h[d+4&7],v^=m^m<<7,m=h[d+7&7],m=m^m<<13,v^=m^m<<9,h[d]=v,c.i=d+1&7,v};function u(h,d){var m,v=[];if(d===(d|0))v[0]=d;else for(d=""+d,m=0;m<d.length;++m)v[m&7]=v[m&7]<<15^d.charCodeAt(m)+v[m+1&7]<<13;for(;v.length<8;)v.push(0);for(m=0;m<8&&v[m]===0;++m);for(m==8?v[7]=-1:v[m],h.x=v,h.i=0,m=256;m>0;--m)h.next()}u(c,o)}function a(o,c){return c.x=o.x.slice(),c.i=o.i,c}function s(o,c){o==null&&(o=+new Date);var u=new i(o),h=c&&c.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var m=u.next()>>>11,v=(u.next()>>>0)/4294967296,x=(m+v)/(1<<21);while(x===0);return x},d.int32=u.next,d.quick=d,h&&(h.x&&a(h,u),d.state=function(){return a(u,{})}),d}t&&t.exports?t.exports=s:this.xorshift7=s})(CJ,r)})(Fb)),Fb.exports}var Lb={exports:{}},OJ=Lb.exports,RR;function BJ(){return RR||(RR=1,(function(r){(function(e,t,n){function i(o){var c=this;c.next=function(){var h=c.w,d=c.X,m=c.i,v,x;return c.w=h=h+1640531527|0,x=d[m+34&127],v=d[m=m+1&127],x^=x<<13,v^=v<<17,x^=x>>>15,v^=v>>>12,x=d[m]=x^v,c.i=m,x+(h^h>>>16)|0};function u(h,d){var m,v,x,b,M,_=[],T=128;for(d===(d|0)?(v=d,d=null):(d=d+"\0",v=0,T=Math.max(T,d.length)),x=0,b=-32;b<T;++b)d&&(v^=d.charCodeAt((b+32)%d.length)),b===0&&(M=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,b>=0&&(M=M+1640531527|0,m=_[b&127]^=v+M,x=m==0?x+1:0);for(x>=128&&(_[(d&&d.length||0)&127]=-1),x=127,b=512;b>0;--b)v=_[x+34&127],m=_[x=x+1&127],v^=v<<13,m^=m<<17,v^=v>>>15,m^=m>>>12,_[x]=v^m;h.w=M,h.X=_,h.i=x}u(c,o)}function a(o,c){return c.i=o.i,c.w=o.w,c.X=o.X.slice(),c}function s(o,c){o==null&&(o=+new Date);var u=new i(o),h=c&&c.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var m=u.next()>>>11,v=(u.next()>>>0)/4294967296,x=(m+v)/(1<<21);while(x===0);return x},d.int32=u.next,d.quick=d,h&&(h.X&&a(h,u),d.state=function(){return a(u,{})}),d}t&&t.exports?t.exports=s:this.xor4096=s})(OJ,r)})(Lb)),Lb.exports}var Ib={exports:{}},UJ=Ib.exports,OR;function zJ(){return OR||(OR=1,(function(r){(function(e,t,n){function i(o){var c=this,u="";c.next=function(){var d=c.b,m=c.c,v=c.d,x=c.a;return d=d<<25^d>>>7^m,m=m-v|0,v=v<<24^v>>>8^x,x=x-d|0,c.b=d=d<<20^d>>>12^m,c.c=m=m-v|0,c.d=v<<16^m>>>16^x,c.a=x-d|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,o===Math.floor(o)?(c.a=o/4294967296|0,c.b=o|0):u+=o;for(var h=0;h<u.length+20;h++)c.b^=u.charCodeAt(h)|0,c.next()}function a(o,c){return c.a=o.a,c.b=o.b,c.c=o.c,c.d=o.d,c}function s(o,c){var u=new i(o),h=c&&c.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var m=u.next()>>>11,v=(u.next()>>>0)/4294967296,x=(m+v)/(1<<21);while(x===0);return x},d.int32=u.next,d.quick=d,h&&(typeof h=="object"&&a(h,u),d.state=function(){return a(u,{})}),d}t&&t.exports?t.exports=s:this.tychei=s})(UJ,r)})(Ib)),Ib.exports}var Pb={exports:{}};const FJ={},LJ=Object.freeze(Object.defineProperty({__proto__:null,default:FJ},Symbol.toStringTag,{value:"Module"})),IJ=eP(LJ);var PJ=Pb.exports,BR;function HJ(){return BR||(BR=1,(function(r){(function(e,t,n){var i=256,a=6,s=52,o="random",c=n.pow(i,a),u=n.pow(2,s),h=u*2,d=i-1,m;function v(A,D,N){var O=[];D=D==!0?{entropy:!0}:D||{};var z=_(M(D.entropy?[A,E(t)]:A??T(),3),O),C=new x(O),R=function(){for(var F=C.g(a),H=c,X=0;F<u;)F=(F+X)*i,H*=i,X=C.g(1);for(;F>=h;)F/=2,H/=2,X>>>=1;return(F+X)/H};return R.int32=function(){return C.g(4)|0},R.quick=function(){return C.g(4)/4294967296},R.double=R,_(E(C.S),t),(D.pass||N||function(F,H,X,$){return $&&($.S&&b($,C),F.state=function(){return b(C,{})}),X?(n[o]=F,H):F})(R,z,"global"in D?D.global:this==n,D.state)}function x(A){var D,N=A.length,O=this,z=0,C=O.i=O.j=0,R=O.S=[];for(N||(A=[N++]);z<i;)R[z]=z++;for(z=0;z<i;z++)R[z]=R[C=d&C+A[z%N]+(D=R[z])],R[C]=D;(O.g=function(F){for(var H,X=0,$=O.i,Y=O.j,I=O.S;F--;)H=I[$=d&$+1],X=X*i+I[d&(I[$]=I[Y=d&Y+H])+(I[Y]=H)];return O.i=$,O.j=Y,X})(i)}function b(A,D){return D.i=A.i,D.j=A.j,D.S=A.S.slice(),D}function M(A,D){var N=[],O=typeof A,z;if(D&&O=="object")for(z in A)try{N.push(M(A[z],D-1))}catch{}return N.length?N:O=="string"?A:A+"\0"}function _(A,D){for(var N=A+"",O,z=0;z<N.length;)D[d&z]=d&(O^=D[d&z]*19)+N.charCodeAt(z++);return E(D)}function T(){try{var A;return m&&(A=m.randomBytes)?A=A(i):(A=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(A)),E(A)}catch{var D=e.navigator,N=D&&D.plugins;return[+new Date,e,N,e.screen,E(t)]}}function E(A){return String.fromCharCode.apply(0,A)}if(_(n.random(),t),r.exports){r.exports=v;try{m=IJ}catch{}}else n["seed"+o]=v})(typeof self<"u"?self:PJ,[],Math)})(Pb)),Pb.exports}var _E,UR;function VJ(){if(UR)return _E;UR=1;var r=AJ(),e=TJ(),t=DJ(),n=RJ(),i=BJ(),a=zJ(),s=HJ();return s.alea=r,s.xor128=e,s.xorwow=t,s.xorshift7=n,s.xor4096=i,s.tychei=a,_E=s,_E}var qJ=VJ();const Dz=up(qJ);var GJ=Dz(Date.now());function xv(r){var e;function t(i){e=i===null?GJ:Dz(String(i))}t(r);function n(){return e()}return n}var zR="pickRandom",kJ=["typed","config","?on"],XJ=de(zR,kJ,r=>{var{typed:e,config:t,on:n}=r,i=xv(t.randomSeed);return n&&n("config",function(s,o){s.randomSeed!==o.randomSeed&&(i=xv(s.randomSeed))}),e(zR,{"Array | Matrix":function(o){return a(o,{})},"Array | Matrix, Object":function(o,c){return a(o,c)},"Array | Matrix, number":function(o,c){return a(o,{number:c})},"Array | Matrix, Array | Matrix":function(o,c){return a(o,{weights:c})},"Array | Matrix, Array | Matrix, number":function(o,c,u){return a(o,{number:u,weights:c})},"Array | Matrix, number, Array | Matrix":function(o,c,u){return a(o,{number:c,weights:u})}});function a(s,o){var{number:c,weights:u,elementWise:h=!0}=o,d=typeof c>"u";d&&(c=1);var m=rn(s)?s.create:rn(u)?u.create:null;s=s.valueOf(),u&&(u=u.valueOf()),h===!0&&(s=mr(s),u=mr(u));var v=0;if(typeof u<"u"){if(u.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var x=0,b=u.length;x<b;x++){if(!Qt(u[x])||u[x]<0)throw new Error("Weights must be an array of positive numbers");v+=u[x]}}for(var M=s.length,_=[],T;_.length<c;){if(typeof u>"u")T=s[Math.floor(i()*M)];else for(var E=i()*v,A=0,D=s.length;A<D;A++)if(E-=u[A],E<0){T=s[A];break}_.push(T)}return d?_[0]:m?m(_):_}});function W2(r,e){var t=[];if(r=r.slice(0),r.length>1)for(var n=0,i=r.shift();n<i;n++)t.push(W2(r,e));else for(var a=0,s=r.shift();a<s;a++)t.push(e());return t}var FR="random",jJ=["typed","config","?on"],YJ=de(FR,jJ,r=>{var{typed:e,config:t,on:n}=r,i=xv(t.randomSeed);return n&&n("config",function(o,c){o.randomSeed!==c.randomSeed&&(i=xv(o.randomSeed))}),e(FR,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,c)=>s(o,c),"Array | Matrix":o=>a(o,0,1),"Array | Matrix, number":(o,c)=>a(o,0,c),"Array | Matrix, number, number":(o,c,u)=>a(o,c,u)});function a(o,c,u){var h=W2(o.valueOf(),()=>s(c,u));return rn(o)?o.create(h,"number"):h}function s(o,c){return o+i()*(c-o)}}),LR="randomInt",WJ=["typed","config","log2","?on"],$J=de(LR,WJ,r=>{var{typed:e,config:t,log2:n,on:i}=r,a=xv(t.randomSeed);return i&&i("config",function(u,h){u.randomSeed!==h.randomSeed&&(a=xv(u.randomSeed))}),e(LR,{"":()=>o(0,2),number:u=>o(0,u),"number, number":(u,h)=>o(u,h),bigint:u=>c(0n,u),"bigint, bigint":c,"Array | Matrix":u=>s(u,0,1),"Array | Matrix, number":(u,h)=>s(u,0,h),"Array | Matrix, number, number":(u,h,d)=>s(u,h,d)});function s(u,h,d){var m=W2(u.valueOf(),()=>o(h,d));return rn(u)?u.create(m,"number"):m}function o(u,h){return Math.floor(u+a()*(h-u))}function c(u,h){var d=2n**30n,m=h-u;if(m<=d)return u+BigInt(o(0,Number(m)));for(var v=n(m),x=m;x>=m;){x=0n;for(var b=0;b<v;++b)x=2n*x+(a()<.5?0n:1n)}return u+x}}),IR="stirlingS2",ZJ=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],KJ=de(IR,ZJ,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:a,pow:s,factorial:o,combinations:c,isNegative:u,isInteger:h,number:d,bignumber:m,larger:v}=r,x=[],b=[];return e(IR,{"number | BigNumber, number | BigNumber":function(_,T){if(!h(_)||u(_)||!h(T)||u(T))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(v(T,_))throw new TypeError("k must be less than or equal to n in function stirlingS2");var E=!(Qt(_)&&Qt(T)),A=E?b:x,D=E?m:d,N=d(_),O=d(T);if(A[N]&&A[N].length>O)return A[N][O];for(var z=0;z<=N;++z)if(A[z]||(A[z]=[D(z===0?1:0)]),z!==0)for(var C=A[z],R=A[z-1],F=C.length;F<=z&&F<=O;++F)F===z?C[F]=1:C[F]=t(i(D(F),R[F]),R[F-1]);return A[N][O]}})}),PR="bellNumbers",QJ=["typed","addScalar","isNegative","isInteger","stirlingS2"],JJ=de(PR,QJ,r=>{var{typed:e,addScalar:t,isNegative:n,isInteger:i,stirlingS2:a}=r;return e(PR,{"number | BigNumber":function(o){if(!i(o)||n(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var c=0,u=0;u<=o;u++)c=t(c,a(o,u));return c}})}),HR="catalan",eee=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],tee=de(HR,eee,r=>{var{typed:e,addScalar:t,divideScalar:n,multiplyScalar:i,combinations:a,isNegative:s,isInteger:o}=r;return e(HR,{"number | BigNumber":function(u){if(!o(u)||s(u))throw new TypeError("Non-negative integer value expected in function catalan");return n(a(i(u,2),u),t(u,1))}})}),VR="composition",nee=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],ree=de(VR,nee,r=>{var{typed:e,addScalar:t,combinations:n,isPositive:i,isNegative:a,isInteger:s,larger:o}=r;return e(VR,{"number | BigNumber, number | BigNumber":function(u,h){if(!s(u)||!i(u)||!s(h)||!i(h))throw new TypeError("Positive integer value expected in function composition");if(o(h,u))throw new TypeError("k must be less than or equal to n in function composition");return n(t(u,-1),t(h,-1))}})}),qR="leafCount",iee=["parse","typed"],aee=de(qR,iee,r=>{var{parse:e,typed:t}=r;function n(i){var a=0;return i.forEach(s=>{a+=n(s)}),a||1}return t(qR,{Node:function(a){return n(a)}})});function GR(r){return Qn(r)||Pi(r)&&r.isUnary()&&Qn(r.args[0])}function x_(r){return!!(Qn(r)||(ph(r)||Pi(r))&&r.args.every(x_)||rf(r)&&x_(r.content))}function kR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function SE(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kR(Object(t),!0).forEach(function(n){$i(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var see="simplifyUtil",oee=["FunctionNode","OperatorNode","SymbolNode"],$2=de(see,oee,r=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:n}=r,i=!0,a=!1,s="defaultF",o={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},c={divide:{total:a},log:{total:a}},u={subtract:{total:a},abs:{trivial:i},log:{total:i}};function h(E,A){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,N=s;if(typeof E=="string"?N=E:Pi(E)?N=E.fn.toString():ph(E)?N=E.name:rf(E)&&(N="paren"),Pt(D,N)){var O=D[N];if(Pt(O,A))return O[A];if(Pt(o,N))return o[N][A]}if(Pt(D,s)){var z=D[s];return Pt(z,A)?z[A]:o[s][A]}if(Pt(o,N)){var C=o[N];if(Pt(C,A))return C[A]}return o[s][A]}function d(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return h(E,"commutative",A)}function m(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return h(E,"associative",A)}function v(E,A){var D=SE({},E);for(var N in A)Pt(E,N)?D[N]=SE(SE({},A[N]),E[N]):D[N]=A[N];return D}function x(E,A){if(!E.args||E.args.length===0)return E;E.args=b(E,A);for(var D=0;D<E.args.length;D++)x(E.args[D],A)}function b(E,A){var D,N=[],O=function(C){for(var R=0;R<C.args.length;R++){var F=C.args[R];Pi(F)&&D===F.op?O(F):N.push(F)}};return m(E,A)?(D=E.op,O(E),N):E.args}function M(E,A){if(!(!E.args||E.args.length===0)){for(var D=T(E),N=E.args.length,O=0;O<N;O++)M(E.args[O],A);if(N>2&&m(E,A)){for(var z=E.args.pop();E.args.length>0;)z=D([E.args.pop(),z]);E.args=z.args}}}function _(E,A){if(!(!E.args||E.args.length===0)){for(var D=T(E),N=E.args.length,O=0;O<N;O++)_(E.args[O],A);if(N>2&&m(E,A)){for(var z=E.args.shift();E.args.length>0;)z=D([z,E.args.shift()]);E.args=z.args}}}function T(E){return Pi(E)?function(A){try{return new t(E.op,E.fn,A,E.implicit)}catch(D){return console.error(D),[]}}:function(A){return new e(new n(E.name),A)}}return{createMakeNodeFunction:T,hasProperty:h,isCommutative:d,isAssociative:m,mergeContext:v,flatten:x,allChildren:b,unflattenr:M,unflattenl:_,defaultContext:o,realContext:c,positiveContext:u}}),lee="simplify",uee=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],cee=de(lee,uee,r=>{var{typed:e,parse:t,equal:n,resolve:i,simplifyConstant:a,simplifyCore:s,AccessorNode:o,ArrayNode:c,ConstantNode:u,FunctionNode:h,IndexNode:d,ObjectNode:m,OperatorNode:v,ParenthesisNode:x,SymbolNode:b,replacer:M}=r,{hasProperty:_,isCommutative:T,isAssociative:E,mergeContext:A,flatten:D,unflattenr:N,unflattenl:O,createMakeNodeFunction:z,defaultContext:C,realContext:R,positiveContext:F}=$2({FunctionNode:h,OperatorNode:v,SymbolNode:b});e.addConversion({from:"Object",to:"Map",convert:ov});var H=e("simplify",{Node:te,"Node, Map":(ne,ue)=>te(ne,!1,ue),"Node, Map, Object":(ne,ue,ge)=>te(ne,!1,ue,ge),"Node, Array":te,"Node, Array, Map":te,"Node, Array, Map, Object":te});e.removeConversion({from:"Object",to:"Map",convert:ov}),H.defaultContext=C,H.realContext=R,H.positiveContext=F;function X(ne){return ne.transform(function(ue){return rf(ue)?X(ue.content):ue})}var $={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};H.rules=[s,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},a,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},a,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function Y(ne,ue){var ge={};if(ne.s){var Ae=ne.s.split("->");if(Ae.length===2)ge.l=Ae[0],ge.r=Ae[1];else throw SyntaxError("Could not parse rule: "+ne.s)}else ge.l=ne.l,ge.r=ne.r;ge.l=X(t(ge.l)),ge.r=X(t(ge.r));for(var Te of["imposeContext","repeat","assuming"])Te in ne&&(ge[Te]=ne[Te]);if(ne.evaluate&&(ge.evaluate=t(ne.evaluate)),E(ge.l,ue)){var se=!T(ge.l,ue),Me;se&&(Me=W());var Be=z(ge.l),Le=W();ge.expanded={},ge.expanded.l=Be([ge.l,Le]),D(ge.expanded.l,ue),N(ge.expanded.l,ue),ge.expanded.r=Be([ge.r,Le]),se&&(ge.expandedNC1={},ge.expandedNC1.l=Be([Me,ge.l]),ge.expandedNC1.r=Be([Me,ge.r]),ge.expandedNC2={},ge.expandedNC2.l=Be([Me,ge.expanded.l]),ge.expandedNC2.r=Be([Me,ge.expanded.r]))}return ge}function I(ne,ue){for(var ge=[],Ae=0;Ae<ne.length;Ae++){var Te=ne[Ae],se=void 0,Me=typeof Te;switch(Me){case"string":Te={s:Te};case"object":se=Y(Te,ue);break;case"function":se=Te;break;default:throw TypeError("Unsupported type of rule: "+Me)}ge.push(se)}return ge}var Z=0;function W(){return new b("_p"+Z++)}function te(ne,ue){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ry(),Ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Te=Ae.consoleDebug;ue=I(ue||H.rules,Ae.context);var se=i(ne,ge);se=X(se);for(var Me={},Be=se.toString({parenthesis:"all"});!Me[Be];){Me[Be]=!0,Z=0;var Le=Be;Te&&console.log("Working on: ",Be);for(var Pe=0;Pe<ue.length;Pe++){var Ye="";if(typeof ue[Pe]=="function"?(se=ue[Pe](se,Ae),Te&&(Ye=ue[Pe].name)):(D(se,Ae.context),se=Q(se,ue[Pe],Ae.context),Te&&(Ye="".concat(ue[Pe].l.toString()," -> ").concat(ue[Pe].r.toString()))),Te){var Ze=se.toString({parenthesis:"all"});Ze!==Le&&(console.log("Applying",Ye,"produced",Ze),Le=Ze)}O(se,Ae.context)}Be=se.toString({parenthesis:"all"})}return se}function le(ne,ue,ge){var Ae=ne;if(ne)for(var Te=0;Te<ne.length;++Te){var se=Q(ne[Te],ue,ge);se!==ne[Te]&&(Ae===ne&&(Ae=ne.slice()),Ae[Te]=se)}return Ae}function Q(ne,ue,ge){if(ue.assuming){for(var Ae in ue.assuming)for(var Te in ue.assuming[Ae])if(_(Ae,Te,ge)!==ue.assuming[Ae][Te])return ne}var se=A(ue.imposeContext,ge),Me=ne;if(Me instanceof v||Me instanceof h){var Be=le(Me.args,ue,ge);Be!==Me.args&&(Me=Me.clone(),Me.args=Be)}else if(Me instanceof x){if(Me.content){var Le=Q(Me.content,ue,ge);Le!==Me.content&&(Me=new x(Le))}}else if(Me instanceof c){var Pe=le(Me.items,ue,ge);Pe!==Me.items&&(Me=new c(Pe))}else if(Me instanceof o){var Ye=Me.object;Me.object&&(Ye=Q(Me.object,ue,ge));var Ze=Me.index;Me.index&&(Ze=Q(Me.index,ue,ge)),(Ye!==Me.object||Ze!==Me.index)&&(Me=new o(Ye,Ze))}else if(Me instanceof d){var re=le(Me.dimensions,ue,ge);re!==Me.dimensions&&(Me=new d(re))}else if(Me instanceof m){var be=!1,Ce={};for(var q in Me.properties)Ce[q]=Q(Me.properties[q],ue,ge),Ce[q]!==Me.properties[q]&&(be=!0);be&&(Me=new m(Ce))}var V=ue.r,ie=pe(ue.l,Me,se)[0];if(!ie&&ue.expanded&&(V=ue.expanded.r,ie=pe(ue.expanded.l,Me,se)[0]),!ie&&ue.expandedNC1&&(V=ue.expandedNC1.r,ie=pe(ue.expandedNC1.l,Me,se)[0],ie||(V=ue.expandedNC2.r,ie=pe(ue.expandedNC2.l,Me,se)[0])),ie){var fe=Me.implicit;Me=V.clone(),fe&&"implicit"in V&&(Me.implicit=!0),Me=Me.transform(function(Se){return Se.isSymbolNode&&Pt(ie.placeholders,Se.name)?ie.placeholders[Se.name].clone():Se})}return ue.repeat&&Me!==ne&&(Me=Q(Me,ue,ge)),Me}function k(ne,ue){var ge=[],Ae,Te,se=z(ne);if(T(ne,ue))for(var Me=0;Me<ne.args.length;Me++)Te=ne.args.slice(0),Te.splice(Me,1),Ae=Te.length===1?Te[0]:se(Te),ge.push(se([ne.args[Me],Ae]));else for(var Be=1;Be<ne.args.length;Be++){var Le=ne.args[0];Be>1&&(Le=se(ne.args.slice(0,Be))),Te=ne.args.slice(Be),Ae=Te.length===1?Te[0]:se(Te),ge.push(se([Le,Ae]))}return ge}function ae(ne,ue){var ge={placeholders:{}};if(!ne.placeholders&&!ue.placeholders)return ge;if(ne.placeholders){if(!ue.placeholders)return ne}else return ue;for(var Ae in ne.placeholders)if(Pt(ne.placeholders,Ae)&&(ge.placeholders[Ae]=ne.placeholders[Ae],Pt(ue.placeholders,Ae)&&!_e(ne.placeholders[Ae],ue.placeholders[Ae])))return null;for(var Te in ue.placeholders)Pt(ue.placeholders,Te)&&(ge.placeholders[Te]=ue.placeholders[Te]);return ge}function J(ne,ue){var ge=[];if(ne.length===0||ue.length===0)return ge;for(var Ae,Te=0;Te<ne.length;Te++)for(var se=0;se<ue.length;se++)Ae=ae(ne[Te],ue[se]),Ae&&ge.push(Ae);return ge}function De(ne){if(ne.length===0)return ne;for(var ue=ne.reduce(J),ge=[],Ae={},Te=0;Te<ue.length;Te++){var se=JSON.stringify(ue[Te],M);Ae[se]||(Ae[se]=!0,ge.push(ue[Te]))}return ge}function pe(ne,ue,ge,Ae){var Te=[{placeholders:{}}];if(ne instanceof v&&ue instanceof v||ne instanceof h&&ue instanceof h){if(ne instanceof v){if(ne.op!==ue.op||ne.fn!==ue.fn)return[]}else if(ne instanceof h&&ne.name!==ue.name)return[];if(ue.args.length===1&&ne.args.length===1||!E(ue,ge)&&ue.args.length===ne.args.length||Ae){for(var se=[],Me=0;Me<ne.args.length;Me++){var Be=pe(ne.args[Me],ue.args[Me],ge);if(Be.length===0)break;se.push(Be)}if(se.length!==ne.args.length){if(!T(ue,ge)||ne.args.length===1)return[];if(ne.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var Le=pe(ne.args[0],ue.args[1],ge);if(Le.length===0)return[];var Pe=pe(ne.args[1],ue.args[0],ge);if(Pe.length===0)return[];se=[Le,Pe]}Te=De(se)}else if(ue.args.length>=2&&ne.args.length===2){for(var Ye=k(ue,ge),Ze=[],re=0;re<Ye.length;re++){var be=pe(ne,Ye[re],ge,!0);Ze=Ze.concat(be)}return Ze}else{if(ne.args.length>2)throw Error("Unexpected non-binary associative function: "+ne.toString());return[]}}else if(ne instanceof b){if(ne.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if($[ne.name]){if(ne.name!==ue.name)return[]}else switch(ne.name[1]>="a"&&ne.name[1]<="z"?ne.name.substring(0,2):ne.name[0]){case"n":case"_p":Te[0].placeholders[ne.name]=ue;break;case"c":case"cl":if(Qn(ue))Te[0].placeholders[ne.name]=ue;else return[];break;case"v":if(!Qn(ue))Te[0].placeholders[ne.name]=ue;else return[];break;case"vl":if(Na(ue))Te[0].placeholders[ne.name]=ue;else return[];break;case"cd":if(GR(ue))Te[0].placeholders[ne.name]=ue;else return[];break;case"vd":if(!GR(ue))Te[0].placeholders[ne.name]=ue;else return[];break;case"ce":if(x_(ue))Te[0].placeholders[ne.name]=ue;else return[];break;case"ve":if(!x_(ue))Te[0].placeholders[ne.name]=ue;else return[];break;default:throw new Error("Invalid symbol in rule: "+ne.name)}}else if(ne instanceof u){if(!n(ne.value,ue.value))return[]}else return[];return Te}function _e(ne,ue){if(ne instanceof u&&ue instanceof u){if(!n(ne.value,ue.value))return!1}else if(ne instanceof b&&ue instanceof b){if(ne.name!==ue.name)return!1}else if(ne instanceof v&&ue instanceof v||ne instanceof h&&ue instanceof h){if(ne instanceof v){if(ne.op!==ue.op||ne.fn!==ue.fn)return!1}else if(ne instanceof h&&ne.name!==ue.name)return!1;if(ne.args.length!==ue.args.length)return!1;for(var ge=0;ge<ne.args.length;ge++)if(!_e(ne.args[ge],ue.args[ge]))return!1}else return!1;return!0}return H}),fee="simplifyConstant",hee=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],dee=de(fee,hee,r=>{var{typed:e,config:t,mathWithTransform:n,matrix:i,fraction:a,bignumber:s,AccessorNode:o,ArrayNode:c,ConstantNode:u,FunctionNode:h,IndexNode:d,ObjectNode:m,OperatorNode:v,SymbolNode:x}=r,{isCommutative:b,isAssociative:M,allChildren:_,createMakeNodeFunction:T}=$2({FunctionNode:h,OperatorNode:v,SymbolNode:x}),E=e("simplifyConstant",{Node:Y=>O($(Y,{})),"Node, Object":function(I,Z){return O($(I,Z))}});function A(Y){return Ny(Y)?Y.valueOf():Y instanceof Array?Y.map(A):rn(Y)?i(A(Y.valueOf())):Y}function D(Y,I,Z){try{return n[Y].apply(null,I)}catch{return I=I.map(A),C(n[Y].apply(null,I),Z)}}var N=e({Fraction:F,number:function(I){return I<0?R(new u(-I)):new u(I)},BigNumber:function(I){return I<0?R(new u(-I)):new u(I)},bigint:function(I){return I<0n?R(new u(-I)):new u(I)},Complex:function(I){throw new Error("Cannot convert Complex number to Node")},string:function(I){return new u(I)},Matrix:function(I){return new c(I.valueOf().map(Z=>N(Z)))}});function O(Y){return Ur(Y)?Y:N(Y)}function z(Y,I){var Z=I&&I.exactFractions!==!1;if(Z&&isFinite(Y)&&a){var W=a(Y),te=I&&typeof I.fractionsLimit=="number"?I.fractionsLimit:1/0;if(W.valueOf()===Y&&W.n<te&&W.d<te)return W}return Y}var C=e({"string, Object":function(I,Z){var W=_h(I,t);if(W==="BigNumber")return s===void 0&&k2(),s(I);if(W==="bigint")return BigInt(I);if(W==="Fraction")return a===void 0&&uz(),a(I);var te=parseFloat(I);return z(te,Z)},"Fraction, Object":function(I,Z){return I},"BigNumber, Object":function(I,Z){return I},"number, Object":function(I,Z){return z(I,Z)},"bigint, Object":function(I,Z){return I},"Complex, Object":function(I,Z){return I.im!==0?I:z(I.re,Z)},"Matrix, Object":function(I,Z){return i(z(I.valueOf()))},"Array, Object":function(I,Z){return I.map(z)}});function R(Y){return new v("-","unaryMinus",[Y])}function F(Y){var I=te=>t.number==="BigNumber"&&s?s(te):Number(te),Z=Y.s*Y.n,W=Z<0n?new v("-","unaryMinus",[new u(-I(Z))]):new u(I(Z));return Y.d===1n?W:new v("/","divide",[W,new u(I(Y.d))])}function H(Y,I,Z){if(!zv(I))return new o(O(Y),O(I));if(gl(Y)||rn(Y)){for(var W=Array.from(I.dimensions);W.length>0;)if(Qn(W[0])&&typeof W[0].value!="string"){var te=C(W.shift().value,Z);gl(Y)?Y=Y.items[te-1]:(Y=Y.valueOf()[te-1],Y instanceof Array&&(Y=i(Y)))}else if(W.length>1&&Qn(W[1])&&typeof W[1].value!="string"){var le=C(W[1].value,Z),Q=[],k=gl(Y)?Y.items:Y.valueOf();for(var ae of k)if(gl(ae))Q.push(ae.items[le-1]);else if(rn(Y))Q.push(ae[le-1]);else break;if(Q.length===k.length)gl(Y)?Y=new c(Q):Y=i(Q),W.splice(1,1);else break}else break;return W.length===I.dimensions.length?new o(O(Y),I):W.length>0?(I=new d(W),new o(O(Y),I)):Y}if(yS(Y)&&I.dimensions.length===1&&Qn(I.dimensions[0])){var J=I.dimensions[0].value;return J in Y.properties?Y.properties[J]:new u}return new o(O(Y),I)}function X(Y,I,Z,W){var te=I.shift(),le=I.reduce((Q,k)=>{if(!Ur(k)){var ae=Q.pop();if(Ur(ae))return[ae,k];try{return Q.push(D(Y,[ae,k],W)),Q}catch{Q.push(ae)}}Q.push(O(Q.pop()));var J=Q.length===1?Q[0]:Z(Q);return[Z([J,O(k)])]},[te]);return le.length===1?le[0]:Z([le[0],N(le[1])])}function $(Y,I){switch(Y.type){case"SymbolNode":return Y;case"ConstantNode":switch(typeof Y.value){case"number":return C(Y.value,I);case"bigint":return C(Y.value,I);case"string":return Y.value;default:if(!isNaN(Y.value))return C(Y.value,I)}return Y;case"FunctionNode":if(n[Y.name]&&n[Y.name].rawArgs)return Y;{var Z=["add","multiply"];if(!Z.includes(Y.name)){var W=Y.args.map(Ae=>$(Ae,I));if(!W.some(Ur))try{return D(Y.name,W,I)}catch{}if(Y.name==="size"&&W.length===1&&gl(W[0])){for(var te=[],le=W[0];gl(le);)te.push(le.items.length),le=le.items[0];return i(te)}return new h(Y.name,W.map(O))}}case"OperatorNode":{var Q=Y.fn.toString(),k,ae,J=T(Y);if(Pi(Y)&&Y.isUnary())k=[$(Y.args[0],I)],Ur(k[0])?ae=J(k):ae=D(Q,k,I);else if(M(Y,I.context))if(k=_(Y,I.context),k=k.map(Ae=>$(Ae,I)),b(Q,I.context)){for(var De=[],pe=[],_e=0;_e<k.length;_e++)Ur(k[_e])?pe.push(k[_e]):De.push(k[_e]);De.length>1?(ae=X(Q,De,J,I),pe.unshift(ae),ae=X(Q,pe,J,I)):ae=X(Q,k,J,I)}else ae=X(Q,k,J,I);else k=Y.args.map(Ae=>$(Ae,I)),ae=X(Q,k,J,I);return ae}case"ParenthesisNode":return $(Y.content,I);case"AccessorNode":return H($(Y.object,I),$(Y.index,I),I);case"ArrayNode":{var ne=Y.items.map(Ae=>$(Ae,I));return ne.some(Ur)?new c(ne.map(O)):i(ne)}case"IndexNode":return new d(Y.dimensions.map(Ae=>E(Ae,I)));case"ObjectNode":{var ue={};for(var ge in Y.properties)ue[ge]=E(Y.properties[ge],I);return new m(ue)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(Y.type))}}return E}),XR="simplifyCore",pee=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],mee=de(XR,pee,r=>{var{typed:e,parse:t,equal:n,isZero:i,add:a,subtract:s,multiply:o,divide:c,pow:u,AccessorNode:h,ArrayNode:d,ConstantNode:m,FunctionNode:v,IndexNode:x,ObjectNode:b,OperatorNode:M,ParenthesisNode:_,SymbolNode:T}=r,E=new m(0),A=new m(1),D=new m(!0),N=new m(!1);function O(F){return Pi(F)&&["and","not","or"].includes(F.op)}var{hasProperty:z,isCommutative:C}=$2({FunctionNode:v,OperatorNode:M,SymbolNode:T});function R(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=H?H.context:void 0;if(z(F,"trivial",X)){if(ph(F)&&F.args.length===1)return R(F.args[0],H);var $=!1,Y=0;if(F.forEach(pe=>{++Y,Y===1&&($=R(pe,H))}),Y===1)return $}var I=F;if(ph(I)){var Z=cj(I.name);if(Z){if(I.args.length>2&&z(I,"associative",X))for(;I.args.length>2;){var W=I.args.pop(),te=I.args.pop();I.args.push(new M(Z,I.name,[W,te]))}I=new M(Z,I.name,I.args)}else return new v(R(I.fn),I.args.map(pe=>R(pe,H)))}if(Pi(I)&&I.isUnary()){var le=R(I.args[0],H);if(I.op==="~"&&Pi(le)&&le.isUnary()&&le.op==="~"||I.op==="not"&&Pi(le)&&le.isUnary()&&le.op==="not"&&O(le.args[0]))return le.args[0];var Q=!0;if(I.op==="-"&&Pi(le)&&(le.isBinary()&&le.fn==="subtract"&&(I=new M("-","subtract",[le.args[1],le.args[0]]),Q=!1),le.isUnary()&&le.op==="-"))return le.args[0];if(Q)return new M(I.op,I.fn,[le])}if(Pi(I)&&I.isBinary()){var k=R(I.args[0],H),ae=R(I.args[1],H);if(I.op==="+"){if(Qn(k)&&i(k.value))return ae;if(Qn(ae)&&i(ae.value))return k;Pi(ae)&&ae.isUnary()&&ae.op==="-"&&(ae=ae.args[0],I=new M("-","subtract",[k,ae]))}if(I.op==="-")return Pi(ae)&&ae.isUnary()&&ae.op==="-"?R(new M("+","add",[k,ae.args[0]]),H):Qn(k)&&i(k.value)?R(new M("-","unaryMinus",[ae])):Qn(ae)&&i(ae.value)?k:new M(I.op,I.fn,[k,ae]);if(I.op==="*"){if(Qn(k)){if(i(k.value))return E;if(n(k.value,1))return ae}if(Qn(ae)){if(i(ae.value))return E;if(n(ae.value,1))return k;if(C(I,X))return new M(I.op,I.fn,[ae,k],I.implicit)}return new M(I.op,I.fn,[k,ae],I.implicit)}if(I.op==="/")return Qn(k)&&i(k.value)?E:Qn(ae)&&n(ae.value,1)?k:new M(I.op,I.fn,[k,ae]);if(I.op==="^"&&Qn(ae)){if(i(ae.value))return A;if(n(ae.value,1))return k}if(I.op==="and"){if(Qn(k))if(k.value){if(O(ae))return ae;if(Qn(ae))return ae.value?D:N}else return N;if(Qn(ae))if(ae.value){if(O(k))return k}else return N}if(I.op==="or"){if(Qn(k)){if(k.value)return D;if(O(ae))return ae}if(Qn(ae)){if(ae.value)return D;if(O(k))return k}}return new M(I.op,I.fn,[k,ae])}if(Pi(I))return new M(I.op,I.fn,I.args.map(pe=>R(pe,H)));if(gl(I))return new d(I.items.map(pe=>R(pe,H)));if(rp(I))return new h(R(I.object,H),R(I.index,H));if(zv(I))return new x(I.dimensions.map(pe=>R(pe,H)));if(yS(I)){var J={};for(var De in I.properties)J[De]=R(I.properties[De],H);return new b(J)}return I}return e(XR,{Node:R,"Node,Object":R})}),vee="resolve",gee=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],yee=de(vee,gee,r=>{var{typed:e,parse:t,ConstantNode:n,FunctionNode:i,OperatorNode:a,ParenthesisNode:s}=r;function o(c,u){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return c;if(Na(c)){if(h.has(c.name)){var d=Array.from(h).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(d,"}"))}var m=u.get(c.name);if(Ur(m)){var v=new Set(h);return v.add(c.name),o(m,u,v)}else return typeof m=="number"?t(String(m)):m!==void 0?new n(m):c}else if(Pi(c)){var x=c.args.map(function(M){return o(M,u,h)});return new a(c.op,c.fn,x,c.implicit)}else{if(rf(c))return new s(o(c.content,u,h));if(ph(c)){var b=c.args.map(function(M){return o(M,u,h)});return new i(c.name,b)}}return c.map(M=>o(M,u,h))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(c,u)=>o(c,ov(u)),"Array | Matrix":e.referToSelf(c=>u=>u.map(h=>c(h))),"Array | Matrix, null | undefined":e.referToSelf(c=>u=>u.map(h=>c(h))),"Array, Object":e.referTo("Array,Map",c=>(u,h)=>c(u,ov(h))),"Matrix, Object":e.referTo("Matrix,Map",c=>(u,h)=>c(u,ov(h))),"Array | Matrix, Map":e.referToSelf(c=>(u,h)=>u.map(d=>c(d,h)))})}),jR="symbolicEqual",xee=["parse","simplify","typed","OperatorNode"],bee=de(jR,xee,r=>{var{parse:e,simplify:t,typed:n,OperatorNode:i}=r;function a(s,o){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[s,o]),h=t(u,{},c);return Qn(h)&&!h.value}return n(jR,{"Node, Node":a,"Node, Node, Object":a})}),YR="derivative",_ee=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],See=de(YR,_ee,r=>{var{typed:e,config:t,parse:n,simplify:i,equal:a,isZero:s,numeric:o,ConstantNode:c,FunctionNode:u,OperatorNode:h,ParenthesisNode:d,SymbolNode:m}=r;function v(A,D){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},O=new Map,z=D.name;function C(F){var H=O.get(F);if(H!==void 0)return H;var X=_(C,F,z);return O.set(F,X),X}var R=T(A,C);return N.simplify?i(R):R}function x(A){var D=n(A);if(!D.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(A)," into a variable in function derivative"));return D}var b=e(YR,{"Node, SymbolNode":v,"Node, SymbolNode, Object":v,"Node, string":(A,D)=>v(A,x(D)),"Node, string, Object":(A,D,N)=>v(A,x(D),N)});b._simplify=!0,b.toTex=function(A){return M.apply(null,A.args)};var M=e("_derivTex",{"Node, SymbolNode":function(D,N){return Qn(D)&&Hr(D.value)==="string"?M(n(D.value).toString(),N.toString(),1):M(D.toTex(),N.toString(),1)},"Node, ConstantNode":function(D,N){if(Hr(N.value)==="string")return M(D,n(N.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(D,N,O){return M(D.toString(),N.name,O.value)},"string, string, number":function(D,N,O){var z;return O===1?z="{d\\over d"+N+"}":z="{d^{"+O+"}\\over d"+N+"^{"+O+"}}",z+"\\left[".concat(D,"\\right]")}}),_=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(D,N,O){return N.name!==O},"function, ParenthesisNode, string":function(D,N,O){return D(N.content,O)},"function, FunctionAssignmentNode, string":function(D,N,O){return N.params.includes(O)?D(N.expr,O):!0},"function, FunctionNode | OperatorNode, string":function(D,N,O){return N.args.every(z=>D(z,O))}}),T=e("_derivative",{"ConstantNode, function":function(){return E(0)},"SymbolNode, function":function(D,N){return N(D)?E(0):E(1)},"ParenthesisNode, function":function(D,N){return new d(T(D.content,N))},"FunctionAssignmentNode, function":function(D,N){return N(D)?E(0):T(D.expr,N)},"FunctionNode, function":function(D,N){if(N(D))return E(0);var O=D.args[0],z,C=!1,R=!1,F;switch(D.name){case"cbrt":C=!0,F=new h("*","multiply",[E(3),new h("^","pow",[O,new h("/","divide",[E(2),E(3)])])]);break;case"sqrt":case"nthRoot":if(D.args.length===1)C=!0,F=new h("*","multiply",[E(2),new u("sqrt",[O])]);else if(D.args.length===2)return z=new h("/","divide",[E(1),D.args[1]]),T(new h("^","pow",[O,z]),N);break;case"log10":z=E(10);case"log":if(!z&&D.args.length===1)F=O.clone(),C=!0;else if(D.args.length===1&&z||D.args.length===2&&N(D.args[1]))F=new h("*","multiply",[O.clone(),new u("log",[z||D.args[1]])]),C=!0;else if(D.args.length===2)return T(new h("/","divide",[new u("log",[O]),new u("log",[D.args[1]])]),N);break;case"pow":if(D.args.length===2)return T(new h("^","pow",[O,D.args[1]]),N);break;case"exp":F=new u("exp",[O.clone()]);break;case"sin":F=new u("cos",[O.clone()]);break;case"cos":F=new h("-","unaryMinus",[new u("sin",[O.clone()])]);break;case"tan":F=new h("^","pow",[new u("sec",[O.clone()]),E(2)]);break;case"sec":F=new h("*","multiply",[D,new u("tan",[O.clone()])]);break;case"csc":R=!0,F=new h("*","multiply",[D,new u("cot",[O.clone()])]);break;case"cot":R=!0,F=new h("^","pow",[new u("csc",[O.clone()]),E(2)]);break;case"asin":C=!0,F=new u("sqrt",[new h("-","subtract",[E(1),new h("^","pow",[O.clone(),E(2)])])]);break;case"acos":C=!0,R=!0,F=new u("sqrt",[new h("-","subtract",[E(1),new h("^","pow",[O.clone(),E(2)])])]);break;case"atan":C=!0,F=new h("+","add",[new h("^","pow",[O.clone(),E(2)]),E(1)]);break;case"asec":C=!0,F=new h("*","multiply",[new u("abs",[O.clone()]),new u("sqrt",[new h("-","subtract",[new h("^","pow",[O.clone(),E(2)]),E(1)])])]);break;case"acsc":C=!0,R=!0,F=new h("*","multiply",[new u("abs",[O.clone()]),new u("sqrt",[new h("-","subtract",[new h("^","pow",[O.clone(),E(2)]),E(1)])])]);break;case"acot":C=!0,R=!0,F=new h("+","add",[new h("^","pow",[O.clone(),E(2)]),E(1)]);break;case"sinh":F=new u("cosh",[O.clone()]);break;case"cosh":F=new u("sinh",[O.clone()]);break;case"tanh":F=new h("^","pow",[new u("sech",[O.clone()]),E(2)]);break;case"sech":R=!0,F=new h("*","multiply",[D,new u("tanh",[O.clone()])]);break;case"csch":R=!0,F=new h("*","multiply",[D,new u("coth",[O.clone()])]);break;case"coth":R=!0,F=new h("^","pow",[new u("csch",[O.clone()]),E(2)]);break;case"asinh":C=!0,F=new u("sqrt",[new h("+","add",[new h("^","pow",[O.clone(),E(2)]),E(1)])]);break;case"acosh":C=!0,F=new u("sqrt",[new h("-","subtract",[new h("^","pow",[O.clone(),E(2)]),E(1)])]);break;case"atanh":C=!0,F=new h("-","subtract",[E(1),new h("^","pow",[O.clone(),E(2)])]);break;case"asech":C=!0,R=!0,F=new h("*","multiply",[O.clone(),new u("sqrt",[new h("-","subtract",[E(1),new h("^","pow",[O.clone(),E(2)])])])]);break;case"acsch":C=!0,R=!0,F=new h("*","multiply",[new u("abs",[O.clone()]),new u("sqrt",[new h("+","add",[new h("^","pow",[O.clone(),E(2)]),E(1)])])]);break;case"acoth":C=!0,R=!0,F=new h("-","subtract",[E(1),new h("^","pow",[O.clone(),E(2)])]);break;case"abs":F=new h("/","divide",[new u(new m("abs"),[O.clone()]),O.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+D.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var H,X;C?(H="/",X="divide"):(H="*",X="multiply");var $=T(O,N);return R&&($=new h("-","unaryMinus",[$])),new h(H,X,[$,F])},"OperatorNode, function":function(D,N){if(N(D))return E(0);if(D.op==="+")return new h(D.op,D.fn,D.args.map(function(I){return T(I,N)}));if(D.op==="-"){if(D.isUnary())return new h(D.op,D.fn,[T(D.args[0],N)]);if(D.isBinary())return new h(D.op,D.fn,[T(D.args[0],N),T(D.args[1],N)])}if(D.op==="*"){var O=D.args.filter(function(I){return N(I)});if(O.length>0){var z=D.args.filter(function(I){return!N(I)}),C=z.length===1?z[0]:new h("*","multiply",z),R=O.concat(T(C,N));return new h("*","multiply",R)}return new h("+","add",D.args.map(function(I){return new h("*","multiply",D.args.map(function(Z){return Z===I?T(Z,N):Z.clone()}))}))}if(D.op==="/"&&D.isBinary()){var F=D.args[0],H=D.args[1];return N(H)?new h("/","divide",[T(F,N),H]):N(F)?new h("*","multiply",[new h("-","unaryMinus",[F]),new h("/","divide",[T(H,N),new h("^","pow",[H.clone(),E(2)])])]):new h("/","divide",[new h("-","subtract",[new h("*","multiply",[T(F,N),H.clone()]),new h("*","multiply",[F.clone(),T(H,N)])]),new h("^","pow",[H.clone(),E(2)])])}if(D.op==="^"&&D.isBinary()){var X=D.args[0],$=D.args[1];if(N(X))return Qn(X)&&(s(X.value)||a(X.value,1))?E(0):new h("*","multiply",[D,new h("*","multiply",[new u("log",[X.clone()]),T($.clone(),N)])]);if(N($)){if(Qn($)){if(s($.value))return E(0);if(a($.value,1))return T(X,N)}var Y=new h("^","pow",[X.clone(),new h("-","subtract",[$,E(1)])]);return new h("*","multiply",[$.clone(),new h("*","multiply",[T(X,N),Y])])}return new h("*","multiply",[new h("^","pow",[X.clone(),$.clone()]),new h("+","add",[new h("*","multiply",[T(X,N),new h("/","divide",[$.clone(),X.clone()])]),new h("*","multiply",[T($,N),new u("log",[X.clone()])])])])}throw new Error('Cannot process operator "'+D.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function E(A,D){return new c(o(A,_h(String(A),t)))}return b}),WR="rationalize",Mee=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],Eee=de(WR,Mee,r=>{var{config:e,typed:t,equal:n,isZero:i,add:a,subtract:s,multiply:o,divide:c,pow:u,parse:h,simplifyConstant:d,simplifyCore:m,simplify:v,fraction:x,bignumber:b,mathWithTransform:M,matrix:_,AccessorNode:T,ArrayNode:E,ConstantNode:A,FunctionNode:D,IndexNode:N,ObjectNode:O,OperatorNode:z,SymbolNode:C,ParenthesisNode:R}=r;function F(I){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,te=X(),le=H(I,Z,!0,te.firstRules),Q=le.variables.length,k={exactFractions:!1},ae={exactFractions:!0};if(I=le.expression,Q>=1){I=$(I);var J,De,pe=!0,_e=!1;I=v(I,te.firstRules,{},k);for(var ne;De=pe?te.distrDivRules:te.sucDivRules,I=v(I,De,{},ae),pe=!pe,ne=I.toString(),ne!==J;)_e=!0,J=ne;_e&&(I=v(I,te.firstRulesAgain,{},k)),I=v(I,te.finalRules,{},k)}var ue=[],ge={};return I.type==="OperatorNode"&&I.isBinary()&&I.op==="/"?(Q===1&&(I.args[0]=Y(I.args[0],ue),I.args[1]=Y(I.args[1])),W&&(ge.numerator=I.args[0],ge.denominator=I.args[1])):(Q===1&&(I=Y(I,ue)),W&&(ge.numerator=I,ge.denominator=null)),W?(ge.coefficients=ue,ge.variables=le.variables,ge.expression=I,ge):I}return t(WR,{Node:F,"Node, boolean":(I,Z)=>F(I,{},Z),"Node, Object":F,"Node, Object, boolean":F});function H(I,Z,W,te){var le=[],Q=v(I,te,Z,{exactFractions:!1});W=!!W;var k="+-*"+(W?"/":"");J(Q);var ae={};return ae.expression=Q,ae.variables=le,ae;function J(De){var pe=De.type;if(pe==="FunctionNode")throw new Error("There is an unsolved function call");if(pe==="OperatorNode")if(De.op==="^"){if(De.args[1].type!=="ConstantNode"||!Xt(parseFloat(De.args[1].value)))throw new Error("There is a non-integer exponent");J(De.args[0])}else{if(!k.includes(De.op))throw new Error("Operator "+De.op+" invalid in polynomial expression");for(var _e=0;_e<De.args.length;_e++)J(De.args[_e])}else if(pe==="SymbolNode"){var ne=De.name,ue=le.indexOf(ne);ue===-1&&le.push(ne)}else if(pe==="ParenthesisNode")J(De.content);else if(pe!=="ConstantNode")throw new Error("type "+pe+" is not allowed in polynomial expression")}}function X(){var I=[m,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},d,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],Z=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],W=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],te=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],le={};return le.firstRules=I.concat(Z,te),le.distrDivRules=W,le.sucDivRules=te,le.firstRulesAgain=I.concat(Z),le.finalRules=[m,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},d,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],le}function $(I,Z,W){var te=I.type,le=arguments.length>1;if(te==="OperatorNode"&&I.isBinary()){var Q=!1,k;if(I.op==="^"&&(I.args[0].type==="ParenthesisNode"||I.args[0].type==="OperatorNode")&&I.args[1].type==="ConstantNode"&&(k=parseFloat(I.args[1].value),Q=k>=2&&Xt(k)),Q){if(k>2){var ae=I.args[0],J=new z("^","pow",[I.args[0].cloneDeep(),new A(k-1)]);I=new z("*","multiply",[ae,J])}else I=new z("*","multiply",[I.args[0],I.args[0].cloneDeep()]);le&&(W==="content"?Z.content=I:Z.args[W]=I)}}if(te==="ParenthesisNode")$(I.content,I,"content");else if(te!=="ConstantNode"&&te!=="SymbolNode")for(var De=0;De<I.args.length;De++)$(I.args[De],I,De);if(!le)return I}function Y(I,Z){Z===void 0&&(Z=[]),Z[0]=0;var W={};W.cte=1,W.oper="+",W.fire="";var te=0,le="";ne(I,null,W),te=Z.length-1;for(var Q=!0,k,ae=te;ae>=0;ae--)if(Z[ae]!==0){var J=new A(Q?Z[ae]:Math.abs(Z[ae])),De=Z[ae]<0?"-":"+";if(ae>0){var pe=new C(le);if(ae>1){var _e=new A(ae);pe=new z("^","pow",[pe,_e])}Z[ae]===-1&&Q?J=new z("-","unaryMinus",[pe]):Math.abs(Z[ae])===1?J=pe:J=new z("*","multiply",[J,pe])}Q?k=J:De==="+"?k=new z("+","add",[k,J]):k=new z("-","subtract",[k,J]),Q=!1}if(Q)return new A(0);return k;function ne(ue,ge,Ae){var Te=ue.type;if(Te==="FunctionNode")throw new Error("There is an unsolved function call");if(Te==="OperatorNode"){if(!"+-*^".includes(ue.op))throw new Error("Operator "+ue.op+" invalid");if(ge!==null){if((ue.fn==="unaryMinus"||ue.fn==="pow")&&ge.fn!=="add"&&ge.fn!=="subtract"&&ge.fn!=="multiply")throw new Error("Invalid "+ue.op+" placing");if((ue.fn==="subtract"||ue.fn==="add"||ue.fn==="multiply")&&ge.fn!=="add"&&ge.fn!=="subtract")throw new Error("Invalid "+ue.op+" placing");if((ue.fn==="subtract"||ue.fn==="add"||ue.fn==="unaryMinus")&&Ae.noFil!==0)throw new Error("Invalid "+ue.op+" placing")}(ue.op==="^"||ue.op==="*")&&(Ae.fire=ue.op);for(var se=0;se<ue.args.length;se++)ue.fn==="unaryMinus"&&(Ae.oper="-"),(ue.op==="+"||ue.fn==="subtract")&&(Ae.fire="",Ae.cte=1,Ae.oper=se===0?"+":ue.op),Ae.noFil=se,ne(ue.args[se],ue,Ae)}else if(Te==="SymbolNode"){if(ue.name!==le&&le!=="")throw new Error("There is more than one variable");if(le=ue.name,ge===null){Z[1]=1;return}if(ge.op==="^"&&Ae.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ge.op==="*"&&Ae.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(Ae.fire===""||Ae.fire==="*")&&(te<1&&(Z[1]=0),Z[1]+=Ae.cte*(Ae.oper==="+"?1:-1),te=Math.max(1,te))}else if(Te==="ConstantNode"){var Me=parseFloat(ue.value);if(ge===null){Z[0]=Me;return}if(ge.op==="^"){if(Ae.noFil!==1)throw new Error("Constant cannot be powered");if(!Xt(Me)||Me<=0)throw new Error("Non-integer exponent is not allowed");for(var Be=te+1;Be<Me;Be++)Z[Be]=0;Me>te&&(Z[Me]=0),Z[Me]+=Ae.cte*(Ae.oper==="+"?1:-1),te=Math.max(Me,te);return}Ae.cte=Me,Ae.fire===""&&(Z[0]+=Ae.cte*(Ae.oper==="+"?1:-1))}else throw new Error("Type "+Te+" is not allowed")}}}),$R="zpk2tf",Aee=["typed","add","multiply","Complex","number"],wee=de($R,Aee,r=>{var{typed:e,add:t,multiply:n,Complex:i,number:a}=r;return e($R,{"Array,Array,number":function(u,h,d){return s(u,h,d)},"Array,Array":function(u,h){return s(u,h,1)},"Matrix,Matrix,number":function(u,h,d){return s(u.valueOf(),h.valueOf(),d)},"Matrix,Matrix":function(u,h){return s(u.valueOf(),h.valueOf(),1)}});function s(c,u,h){c.some(T=>T.type==="BigNumber")&&(c=c.map(T=>a(T))),u.some(T=>T.type==="BigNumber")&&(u=u.map(T=>a(T)));for(var d=[i(1,0)],m=[i(1,0)],v=0;v<c.length;v++){var x=c[v];typeof x=="number"&&(x=i(x,0)),d=o(d,[i(1,0),i(-x.re,-x.im)])}for(var b=0;b<u.length;b++){var M=u[b];typeof M=="number"&&(M=i(M,0)),m=o(m,[i(1,0),i(-M.re,-M.im)])}for(var _=0;_<d.length;_++)d[_]=n(d[_],h);return[d,m]}function o(c,u){for(var h=[],d=0;d<c.length+u.length-1;d++){h[d]=i(0,0);for(var m=0;m<c.length;m++)d-m>=0&&d-m<u.length&&(h[d]=t(h[d],n(c[m],u[d-m])))}return h}}),ZR="freqz",Tee=["typed","add","multiply","Complex","divide","matrix"],Nee=de(ZR,Tee,r=>{var{typed:e,add:t,multiply:n,Complex:i,divide:a,matrix:s}=r;return e(ZR,{"Array, Array":function(h,d){var m=c(512);return o(h,d,m)},"Array, Array, Array":function(h,d,m){return o(h,d,m)},"Array, Array, number":function(h,d,m){if(m<0)throw new Error("w must be a positive number");var v=c(m);return o(h,d,v)},"Matrix, Matrix":function(h,d){var m=c(512),{w:v,h:x}=o(h.valueOf(),d.valueOf(),m);return{w:s(v),h:s(x)}},"Matrix, Matrix, Matrix":function(h,d,m){var{h:v}=o(h.valueOf(),d.valueOf(),m.valueOf());return{h:s(v),w:s(m)}},"Matrix, Matrix, number":function(h,d,m){if(m<0)throw new Error("w must be a positive number");var v=c(m),{h:x}=o(h.valueOf(),d.valueOf(),v);return{h:s(x),w:s(v)}}});function o(u,h,d){for(var m=[],v=[],x=0;x<d.length;x++){for(var b=i(0,0),M=i(0,0),_=0;_<u.length;_++)b=t(b,n(u[_],i(Math.cos(-_*d[x]),Math.sin(-_*d[x]))));for(var T=0;T<h.length;T++)M=t(M,n(h[T],i(Math.cos(-T*d[x]),Math.sin(-T*d[x]))));m.push(b),v.push(M)}for(var E=[],A=0;A<m.length;A++)E.push(a(m[A],v[A]));return{h:E,w:d}}function c(u){for(var h=[],d=0;d<u;d++)h.push(d/u*Math.PI);return h}}),Dee="reviver",Cee=["classes"],Ree=de(Dee,Cee,r=>{var{classes:e}=r;return function(n,i){var a=e[i&&i.mathjs];return a&&typeof a.fromJSON=="function"?a.fromJSON(i):i}}),Oee="replacer",Bee=[],Uee=de(Oee,Bee,()=>function(e,t){return typeof t=="number"&&(!isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:typeof t=="bigint"?{mathjs:"bigint",value:String(t)}:t}),zee="15.0.0",Fee=de("true",[],()=>!0),Lee=de("false",[],()=>!1),Iee=de("null",[],()=>null),Pee=Xo("Infinity",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1/0):1/0}),Hee=Xo("NaN",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(NaN):NaN}),Vee=Xo("pi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Y2(t):P6}),qee=Xo("tau",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?pk(t):H6}),Gee=Xo("e",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?hk(t):V6}),kee=Xo("phi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?dk(t):q6}),Xee=Xo("LN2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),jee=Xo("LN10",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),Yee=Xo("LOG2E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),Wee=Xo("LOG10E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),$ee=Xo("SQRT1_2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),Zee=Xo("SQRT2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),Kee=Xo("i",["Complex"],r=>{var{Complex:e}=r;return e.I}),Qee=de("version",[],()=>zee);function Xo(r,e,t){return de(r,e,t,{recreateOnConfigChange:!0})}var Jee=Sn("speedOfLight","299792458","m s^-1"),ete=Sn("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),tte=Sn("planckConstant","6.62607015e-34","J s"),nte=Sn("reducedPlanckConstant","1.0545718176461565e-34","J s"),rte=Sn("magneticConstant","1.25663706212e-6","N A^-2"),ite=Sn("electricConstant","8.8541878128e-12","F m^-1"),ate=Sn("vacuumImpedance","376.730313667","ohm"),ste=Sn("coulomb","8.987551792261171e9","N m^2 C^-2"),ote=Sn("coulombConstant","8.987551792261171e9","N m^2 C^-2"),lte=Sn("elementaryCharge","1.602176634e-19","C"),ute=Sn("bohrMagneton","9.2740100783e-24","J T^-1"),cte=Sn("conductanceQuantum","7.748091729863649e-5","S"),fte=Sn("inverseConductanceQuantum","12906.403729652257","ohm"),hte=Sn("magneticFluxQuantum","2.0678338484619295e-15","Wb"),dte=Sn("nuclearMagneton","5.0507837461e-27","J T^-1"),pte=Sn("klitzing","25812.807459304513","ohm"),mte=Sn("bohrRadius","5.29177210903e-11","m"),vte=Sn("classicalElectronRadius","2.8179403262e-15","m"),gte=Sn("electronMass","9.1093837015e-31","kg"),yte=Sn("fermiCoupling","1.1663787e-5","GeV^-2"),xte=NS("fineStructure",.0072973525693),bte=Sn("hartreeEnergy","4.3597447222071e-18","J"),_te=Sn("protonMass","1.67262192369e-27","kg"),Ste=Sn("deuteronMass","3.3435830926e-27","kg"),Mte=Sn("neutronMass","1.6749271613e-27","kg"),Ete=Sn("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),Ate=Sn("rydberg","10973731.568160","m^-1"),wte=Sn("thomsonCrossSection","6.6524587321e-29","m^2"),Tte=NS("weakMixingAngle",.2229),Nte=NS("efimovFactor",22.7),Dte=Sn("atomicMass","1.66053906660e-27","kg"),Cte=Sn("avogadro","6.02214076e23","mol^-1"),Rte=Sn("boltzmann","1.380649e-23","J K^-1"),Ote=Sn("faraday","96485.33212331001","C mol^-1"),Bte=Sn("firstRadiation","3.7417718521927573e-16","W m^2"),Ute=Sn("loschmidt","2.686780111798444e25","m^-3"),zte=Sn("gasConstant","8.31446261815324","J K^-1 mol^-1"),Fte=Sn("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Lte=Sn("molarVolume","0.022413969545014137","m^3 mol^-1"),Ite=NS("sackurTetrode",-1.16487052358),Pte=Sn("secondRadiation","0.014387768775039337","m K"),Hte=Sn("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),Vte=Sn("wienDisplacement","2.897771955e-3","m K"),qte=Sn("molarMass","0.99999999965e-3","kg mol^-1"),Gte=Sn("molarMassC12","11.9999999958e-3","kg mol^-1"),kte=Sn("gravity","9.80665","m s^-2"),Xte=Sn("planckLength","1.616255e-35","m"),jte=Sn("planckMass","2.176435e-8","kg"),Yte=Sn("planckTime","5.391245e-44","s"),Wte=Sn("planckCharge","1.87554603778e-18","C"),$te=Sn("planckTemperature","1.416785e+32","K");function Sn(r,e,t){var n=["config","Unit","BigNumber"];return de(r,n,i=>{var{config:a,Unit:s,BigNumber:o}=i,c=a.number==="BigNumber"?new o(e):parseFloat(e),u=new s(c,t);return u.fixPrefix=!0,u})}function NS(r,e){var t=["config","BigNumber"];return de(r,t,n=>{var{config:i,BigNumber:a}=n;return i.number==="BigNumber"?new a(e):e})}function KR(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Zte(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KR(Object(t),!0).forEach(function(n){$i(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):KR(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Kte="mapSlices",Qte=["typed","isInteger"],Jte=de(Kte,Qte,r=>{var{typed:e,isInteger:t}=r,n=KA({typed:e,isInteger:t});return e("mapSlices",{"...any":function(a){var s=a[1];Qt(s)?a[1]=s-1:wn(s)&&(a[1]=s.minus(1));try{return n.apply(null,a)}catch(o){throw Ks(o)}}})},Zte({isTransformFunction:!0},KA.meta)),ene="column",tne=["typed","Index","matrix","range"],nne=de(ene,tne,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,a=iz({typed:e,Index:t,matrix:n,range:i});return e("column",{"...any":function(o){var c=o.length-1,u=o[c];Qt(u)&&(o[c]=u-1);try{return a.apply(null,o)}catch(h){throw Ks(h)}}})},{isTransformFunction:!0});function Z2(r,e,t){var n=r.filter(function(c){return Na(c)&&!(c.name in e)&&!t.has(c.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+r+'"');var i=n.name,a=new Map,s=new AB(t,a,new Set([i])),o=r.compile();return function(u){return a.set(i,u),o.evaluate(s)}}var rne="transformCallback",ine=["typed"],K2=de(rne,ine,r=>{var{typed:e}=r;return function(n,i){return e.isTypedFunction(n)?t(n,i):QR(n,n.length,i)};function t(n,i){var a=Object.fromEntries(Object.entries(n.signatures).map(s=>{var[o,c]=s,u=o.split(",").length;return e.isTypedFunction(c)?[o,t(c,i)]:[o,QR(c,u,i)]}));return typeof n.name=="string"?e(n.name,a):e(a)}});function QR(r,e,t){return e===t?r:e===t+1?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.slice(0,t),o=JR(i[t]);return r(...s,o)}:e>t+1?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.slice(0,t),o=JR(i[t]),c=i.slice(t+1);return r(...s,o,...c)}:r}function JR(r){return r.map(e=>e+1)}var ane="filter",sne=["typed"],one=de(ane,sne,r=>{var{typed:e}=r;function t(i,a,s){var o=az({typed:e}),c=K2({typed:e});if(i.length===0)return o();var u=i[0];if(i.length===1)return o(u);var h=i.length-1,d=i[h];return u&&(u=n(u,s)),d&&(Na(d)||Dy(d)?d=n(d,s):d=Z2(d,a,s)),o(u,c(d,h))}t.rawArgs=!0;function n(i,a){return i.compile().evaluate(a)}return t},{isTransformFunction:!0}),lne="forEach",une=["typed"],cne=de(lne,une,r=>{var{typed:e}=r,t=sz({typed:e}),n=K2({typed:e});function i(s,o,c){if(s.length===0)return t();var u=s[0];if(s.length===1)return t(u);var h=s.length-1,d=s[h];return u&&(u=a(u,c)),d&&(Na(d)||Dy(d)?d=a(d,c):d=Z2(d,o,c)),t(u,n(d,h))}i.rawArgs=!0;function a(s,o){return s.compile().evaluate(o)}return i},{isTransformFunction:!0}),fne="index",hne=["Index","getMatrixDataType"],dne=de(fne,hne,r=>{var{Index:e,getMatrixDataType:t}=r;return function(){for(var i=[],a=0,s=arguments.length;a<s;a++){var o=arguments[a];if(U2(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(u){return u-1});else if(Ir(o)||rn(o))t(o)!=="boolean"&&(o=o.map(function(u){return u-1}));else if(Qt(o)||k0(o))o--;else if(wn(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");i[a]=o}var c=new e;return e.apply(c,i),c}},{isTransformFunction:!0}),pne="map",mne=["typed"],vne=de(pne,mne,r=>{var{typed:e}=r,t=oz({typed:e}),n=K2({typed:e});function i(a,s,o){if(a.length===0)return t();if(a.length===1)return t(a[0]);var c=a.length-1,u=a.slice(0,c),h=a[c];return u=u.map(m=>d(m,o)),h&&(Na(h)||Dy(h)?h=d(h,o):h=Z2(h,s,o)),t(...u,n(h,c));function d(m,v){return m.compile().evaluate(v)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function gne(r){return Qt(r)?r-1:wn(r)?r.minus(1):r}function yne(r){return Qt(r)||wn(r)}function Eh(r){if(r.length===2&&qo(r[0])){r=r.slice();var e=r[1];yne(e)&&(r[1]=gne(e))}return r}var xne="max",bne=["typed","config","numeric","larger","isNaN"],_ne=de(xne,bne,r=>{var{typed:e,config:t,numeric:n,larger:i,isNaN:a}=r,s=vz({typed:e,config:t,numeric:n,larger:i,isNaN:a});return e("max",{"...any":function(c){c=Eh(c);try{return s.apply(null,c)}catch(u){throw Ks(u)}}})},{isTransformFunction:!0}),Sne="mean",Mne=["typed","add","divide"],Ene=de(Sne,Mne,r=>{var{typed:e,add:t,divide:n}=r,i=Az({typed:e,add:t,divide:n});return e("mean",{"...any":function(s){s=Eh(s);try{return i.apply(null,s)}catch(o){throw Ks(o)}}})},{isTransformFunction:!0}),Ane="min",wne=["typed","config","numeric","smaller","isNaN"],Tne=de(Ane,wne,r=>{var{typed:e,config:t,numeric:n,smaller:i,isNaN:a}=r,s=gz({typed:e,config:t,numeric:n,smaller:i,isNaN:a});return e("min",{"...any":function(c){c=Eh(c);try{return s.apply(null,c)}catch(u){throw Ks(u)}}})},{isTransformFunction:!0}),Nne="range",Dne=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],Cne=de(Nne,Dne,r=>{var{typed:e,config:t,matrix:n,bignumber:i,equal:a,smaller:s,smallerEq:o,larger:c,largerEq:u,add:h,isZero:d,isPositive:m}=r,v=cz({typed:e,config:t,matrix:n,bignumber:i,equal:a,smaller:s,smallerEq:o,larger:c,largerEq:u,add:h,isZero:d,isPositive:m});return e("range",{"...any":function(b){var M=b.length-1,_=b[M];return typeof _!="boolean"&&b.push(!0),v.apply(null,b)}})},{isTransformFunction:!0}),Rne="row",One=["typed","Index","matrix","range"],Bne=de(Rne,One,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,a=fz({typed:e,Index:t,matrix:n,range:i});return e("row",{"...any":function(o){var c=o.length-1,u=o[c];Qt(u)&&(o[c]=u-1);try{return a.apply(null,o)}catch(h){throw Ks(h)}}})},{isTransformFunction:!0}),Une="subset",zne=["typed","matrix","zeros","add"],Fne=de(Une,zne,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,a=hz({typed:e,matrix:t,zeros:n,add:i});return e("subset",{"...any":function(o){try{return a.apply(null,o)}catch(c){throw Ks(c)}}})},{isTransformFunction:!0}),Lne="concat",Ine=["typed","matrix","isInteger"],Pne=de(Lne,Ine,r=>{var{typed:e,matrix:t,isInteger:n}=r,i=rz({typed:e,matrix:t,isInteger:n});return e("concat",{"...any":function(s){var o=s.length-1,c=s[o];Qt(c)?s[o]=c-1:wn(c)&&(s[o]=c.minus(1));try{return i.apply(null,s)}catch(u){throw Ks(u)}}})},{isTransformFunction:!0}),eO="diff",Hne=["typed","matrix","subtract","number","bignumber"],Vne=de(eO,Hne,r=>{var{typed:e,matrix:t,subtract:n,number:i,bignumber:a}=r,s=lz({typed:e,matrix:t,subtract:n,number:i,bignumber:a});return e(eO,{"...any":function(c){c=Eh(c);try{return s.apply(null,c)}catch(u){throw Ks(u)}}})},{isTransformFunction:!0}),qne="std",Gne=["typed","map","sqrt","variance"],kne=de(qne,Gne,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r,a=Nz({typed:e,map:t,sqrt:n,variance:i});return e("std",{"...any":function(o){o=Eh(o);try{return a.apply(null,o)}catch(c){throw Ks(c)}}})},{isTransformFunction:!0}),tO="sum",Xne=["typed","config","add","numeric"],jne=de(tO,Xne,r=>{var{typed:e,config:t,add:n,numeric:i}=r,a=Mz({typed:e,config:t,add:n,numeric:i});return e(tO,{"...any":function(o){o=Eh(o);try{return a.apply(null,o)}catch(c){throw Ks(c)}}})},{isTransformFunction:!0}),Yne="quantileSeq",Wne=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],$ne=de(Yne,Wne,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:c,isInteger:u,smaller:h,smallerEq:d,larger:m,mapSlices:v}=r,x=Tz({typed:e,bignumber:t,add:n,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:c,isInteger:u,smaller:h,smallerEq:d,larger:m,mapSlices:v});return e("quantileSeq",{"Array | Matrix, number | BigNumber":x,"Array | Matrix, number | BigNumber, number":(M,_,T)=>x(M,_,b(T)),"Array | Matrix, number | BigNumber, boolean":x,"Array | Matrix, number | BigNumber, boolean, number":(M,_,T,E)=>x(M,_,T,b(E)),"Array | Matrix, Array | Matrix":x,"Array | Matrix, Array | Matrix, number":(M,_,T)=>x(M,_,b(T)),"Array | Matrix, Array | Matrix, boolean":x,"Array | Matrix, Array | Matrix, boolean, number":(M,_,T,E)=>x(M,_,T,b(E))});function b(M){return Eh([[],M])[1]}},{isTransformFunction:!0}),nO="cumsum",Zne=["typed","add","unaryPlus"],Kne=de(nO,Zne,r=>{var{typed:e,add:t,unaryPlus:n}=r,i=Ez({typed:e,add:t,unaryPlus:n});return e(nO,{"...any":function(s){if(s.length===2&&qo(s[0])){var o=s[1];Qt(o)?s[1]=o-1:wn(o)&&(s[1]=o.minus(1))}try{return i.apply(null,s)}catch(c){throw Ks(c)}}})},{isTransformFunction:!0}),rO="variance",Qne=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],Jne=de(rO,Qne,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:a,mapSlices:s,isNaN:o}=r,c=wz({typed:e,add:t,subtract:n,multiply:i,divide:a,mapSlices:s,isNaN:o});return e(rO,{"...any":function(h){h=Eh(h);try{return c.apply(null,h)}catch(d){throw Ks(d)}}})},{isTransformFunction:!0}),iO="print",ere=["typed","matrix","zeros","add"],tre=de(iO,ere,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,a=pz({typed:e,matrix:t,zeros:n,add:i});return e(iO,{"string, Object | Array":function(c,u){return a(s(c),u)},"string, Object | Array, number | Object":function(c,u,h){return a(s(c),u,h)}});function s(o){return o.replace(dz,c=>{var u=c.slice(1).split("."),h=u.map(function(d){return!isNaN(d)&&d.length>0?parseInt(d)-1:d});return"$"+h.join(".")})}},{isTransformFunction:!0}),nre="and",rre=["typed","matrix","zeros","add","equalScalar","not","concat"],ire=de(nre,rre,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s}=r,o=mz({typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s});function c(u,h,d){var m=u[0].compile().evaluate(d);if(!qo(m)&&!o(m,!0))return!1;var v=u[1].compile().evaluate(d);return o(m,v)}return c.rawArgs=!0,c},{isTransformFunction:!0}),are="or",sre=["typed","matrix","equalScalar","DenseMatrix","concat"],ore=de(are,sre,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=nz({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a});function o(c,u,h){var d=c[0].compile().evaluate(h);if(!qo(d)&&s(d,!1))return!0;var m=c[1].compile().evaluate(h);return s(d,m)}return o.rawArgs=!0,o},{isTransformFunction:!0}),lre="nullish",ure=["typed","matrix","size","flatten","deepEqual"],cre=de(lre,ure,r=>{var{typed:e,matrix:t,size:n,flatten:i,deepEqual:a}=r,s=tz({typed:e,matrix:t,size:n,flatten:i,deepEqual:a});function o(c,u,h){var d=c[0].compile().evaluate(h);if(!qo(d)&&d!=null&&d!==void 0)return d;var m=c[1].compile().evaluate(h);return s(d,m)}return o.rawArgs=!0,o},{isTransformFunction:!0}),fre="bitAnd",hre=["typed","matrix","zeros","add","equalScalar","not","concat"],dre=de(fre,hre,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s}=r,o=JU({typed:e,matrix:t,equalScalar:n,zeros:i,not:a,concat:s});function c(u,h,d){var m=u[0].compile().evaluate(d);if(!qo(m)){if(isNaN(m))return NaN;if(m===0||m===!1)return 0}var v=u[1].compile().evaluate(d);return o(m,v)}return c.rawArgs=!0,c},{isTransformFunction:!0}),pre="bitOr",mre=["typed","matrix","equalScalar","DenseMatrix","concat"],vre=de(pre,mre,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a}=r,s=ez({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:a});function o(c,u,h){var d=c[0].compile().evaluate(h);if(!qo(d)){if(isNaN(d))return NaN;if(d===-1)return-1;if(d===!0)return 1}var m=c[1].compile().evaluate(h);return s(d,m)}return o.rawArgs=!0,o},{isTransformFunction:!0}),Et=Q8({config:mt}),Vr=r6({}),aO=Gee({BigNumber:Et,config:mt}),gre=Lee({}),yre=xte({BigNumber:Et,config:mt}),hp=f6({}),Cz=Kee({Complex:Vr}),xre=Pee({BigNumber:Et,config:mt}),bre=jee({BigNumber:Et,config:mt}),_re=Wee({BigNumber:Et,config:mt}),DS=g6({}),Sre=Hee({BigNumber:Et,config:mt}),Mre=Iee({}),Ere=kee({BigNumber:Et,config:mt}),Are=p6({}),Rz=n8({}),wre=$ee({BigNumber:Et,config:mt}),Tre=Ite({BigNumber:Et,config:mt}),Oz=qee({BigNumber:Et,config:mt}),Nre=Fee({}),Dre=Qee({}),Dn=B6({Matrix:DS,config:mt}),Cre=Nte({BigNumber:Et,config:mt}),Rre=Xee({BigNumber:Et,config:mt}),a2=Vee({BigNumber:Et,config:mt}),Bz=Uee({}),Ore=Zee({BigNumber:Et,config:mt}),we=QP({BigNumber:Et,Complex:Vr,DenseMatrix:Dn,Fraction:hp}),Bre=Tte({BigNumber:Et,config:mt}),Qs=W7({typed:we}),Ure=Ak({Complex:Vr,config:mt,typed:we}),zre=Dk({BigNumber:Et,typed:we}),Fre=Bk({BigNumber:Et,Complex:Vr,config:mt,typed:we}),ha=Q7({typed:we}),Lre=PH({typed:we}),Ire=Pk({BigNumber:Et,Complex:Vr,config:mt,typed:we}),Pre=kk({typed:we}),Uz=Yk({typed:we}),Hre=Kk({Complex:Vr,config:mt,typed:we}),Vre=x7({typed:we}),qre=OH({typed:we}),Gre=M7({typed:we}),kre=z6({typed:we}),CS=uJ({typed:we}),RS=D7({Complex:Vr,typed:we}),dp=VH({typed:we}),Q2=Jk({typed:we}),Xre=rX({BigNumber:Et,typed:we}),jre=oX({BigNumber:Et,typed:we}),Yre=p9({typed:we}),Ln=l7({config:mt,typed:we}),Wre=oq({typed:we}),zz=v9({typed:we}),$re=y9({Complex:Vr,typed:we}),Zre=az({typed:we}),pp=uV({typed:we}),Kre=sz({typed:we}),By=yq({typed:we}),J2=dV({typed:we}),Qre=Eq({format:By,typed:we}),ew=GH({typed:we}),mo=L6({typed:we}),Ah=Y6({config:mt,typed:we}),mp=J6({config:mt,typed:we}),El=t7({equalScalar:Ln,typed:we}),Jre=Yee({BigNumber:Et,config:mt}),eie=mJ({Complex:Vr,typed:we}),tie=Q9({Complex:Vr,config:mt,typed:we}),tw=eH({Complex:Vr,config:mt,typed:we}),vp=oz({typed:we}),Di=rH({typed:we}),b_=YH({typed:we}),cf=v7({typed:we}),nie=Sq({format:By,typed:we}),rie=XJ({config:mt,typed:we}),iie=pz({typed:we}),aie=YJ({config:mt,typed:we}),nw=XH({typed:we}),sie=fX({BigNumber:Et,typed:we}),Fz=uH({BigNumber:Et,Fraction:hp,complex:RS,typed:we}),OS=mX({typed:we}),da=FV({typed:we}),pa=f7({Matrix:DS,equalScalar:Ln,typed:we}),oie=q7({typed:we}),lie=pH({typed:we}),uie=_7({typed:we}),Al=e9({typed:we}),cie=xX({typed:we}),Lz=Dq({typed:we}),rw=a7({typed:we}),fie=Tk({Complex:Vr,config:mt,typed:we}),hie=zk({BigNumber:Et,typed:we}),die=Lk({BigNumber:Et,Complex:Vr,config:mt,typed:we}),vo=w7({BigNumber:Et,typed:we}),pie=fJ({typed:we}),mie=tX({typed:we}),vie=uX({BigNumber:Et,typed:we}),BS=ZX({addScalar:ha,conj:dp,multiplyScalar:Di,size:da,typed:we}),ef=r7({typed:we}),gie=Rq({typed:we}),oy=KA({isInteger:mo,typed:we}),bt=U7({DenseMatrix:Dn,Matrix:DS,SparseMatrix:pa,typed:we}),yie=F7({isZero:El,matrix:bt,typed:we}),vr=aH({addScalar:ha,dot:BS,equalScalar:Ln,matrix:bt,multiplyScalar:Di,typed:we}),xie=SV({BigNumber:Et,config:mt,matrix:bt,typed:we}),bie=$J({config:mt,log2:tw,typed:we}),Iz=wV({isInteger:mo,matrix:bt,typed:we}),_ie=dX({BigNumber:Et,typed:we}),Sie=gX({typed:we}),Mie=_k({SparseMatrix:pa,typed:we}),hu=hH({Complex:Vr,config:mt,typed:we}),Eie=IV({typed:we}),Aie=SX({typed:we}),Uy=kV({matrix:bt,typed:we}),Pz=yH({BigNumber:Et,config:mt,matrix:bt,typed:we}),Xa=WV({BigNumber:Et,config:mt,matrix:bt,typed:we}),wie=Rk({BigNumber:Et,Complex:Vr,config:mt,typed:we}),Tie=Vk({Complex:Vr,config:mt,typed:we}),Nie=bq({format:By,typed:we}),ar=rz({isInteger:mo,matrix:bt,typed:we}),Die=aX({BigNumber:Et,typed:we}),iw=jV({conj:dp,transpose:Uy,typed:we}),aw=aV({DenseMatrix:Dn,SparseMatrix:pa,matrix:bt,typed:we}),Cie=EH({concat:ar,equalScalar:Ln,matrix:bt,multiplyScalar:Di,typed:we}),yo=wG({DenseMatrix:Dn,SparseMatrix:pa,concat:ar,equalScalar:Ln,matrix:bt,typed:we}),zy=O7({Fraction:hp,typed:we}),wh=mV({BigNumber:Et,DenseMatrix:Dn,SparseMatrix:pa,config:mt,matrix:bt,typed:we}),gp=$6({typed:we}),Rie=gV({matrix:bt,multiplyScalar:Di,typed:we}),US=HG({DenseMatrix:Dn,SparseMatrix:pa,concat:ar,config:mt,matrix:bt,typed:we}),Oie=uG({DenseMatrix:Dn,concat:ar,equalScalar:Ln,matrix:bt,typed:we,zeros:Xa}),Bie=I7({flatten:pp,matrix:bt,size:da,typed:we}),Uie=pq({isNaN:ef,isNumeric:gp,typed:we}),zie=oH({BigNumber:Et,concat:ar,equalScalar:Ln,matrix:bt,typed:we}),bl=Uq({bignumber:vo,fraction:zy,number:cf}),Hz=vq({config:mt,multiplyScalar:Di,numeric:bl,typed:we}),Fie=DV({config:mt,matrix:bt}),Lie=fG({DenseMatrix:Dn,concat:ar,equalScalar:Ln,matrix:bt,typed:we,zeros:Xa}),Vv=Hq({BigNumber:Et,DenseMatrix:Dn,config:mt,equalScalar:Ln,matrix:bt,typed:we,zeros:Xa}),Ws=RG({DenseMatrix:Dn,SparseMatrix:pa,bignumber:vo,concat:ar,config:mt,matrix:bt,typed:we}),Iie=Tq({concat:ar,matrix:bt,typed:we}),oc=k7({typed:we}),Pie=XG({DenseMatrix:Dn,SparseMatrix:pa,concat:ar,config:mt,equalScalar:Ln,matrix:bt,typed:we}),Hie=KH({DenseMatrix:Dn,SparseMatrix:pa,concat:ar,matrix:bt,typed:we}),Wn=kX({DenseMatrix:Dn,SparseMatrix:pa,addScalar:ha,concat:ar,equalScalar:Ln,matrix:bt,typed:we}),Vie=$k({BigNumber:Et,DenseMatrix:Dn,concat:ar,equalScalar:Ln,matrix:bt,typed:we}),qie=JU({concat:ar,equalScalar:Ln,matrix:bt,typed:we}),Gie=ez({DenseMatrix:Dn,concat:ar,equalScalar:Ln,matrix:bt,typed:we}),kie=LH({DenseMatrix:Dn,SparseMatrix:pa,concat:ar,matrix:bt,typed:we}),Vz=n9({BigNumber:Et,Complex:Vr,Fraction:hp,config:mt,isNegative:Ah,matrix:bt,typed:we,unaryMinus:oc}),yp=vG({BigNumber:Et,DenseMatrix:Dn,Fraction:hp,concat:ar,config:mt,equalScalar:Ln,matrix:bt,typed:we}),qz=EG({concat:ar,matrix:bt,typed:we}),Xie=tV({prod:Hz,size:da,typed:we}),Fy=GG({equal:yo,typed:we}),di=Fq({numeric:bl,typed:we}),jie=DG({compareText:qz,isZero:El,typed:we}),Gz=$U({DenseMatrix:Dn,config:mt,equalScalar:Ln,matrix:bt,round:Vv,typed:we,zeros:Xa}),Yie=X9({BigNumber:Et,DenseMatrix:Dn,concat:ar,config:mt,equalScalar:Ln,matrix:bt,round:Vv,typed:we,zeros:Xa}),Wie=K6({isNumeric:gp,typed:we}),$ie=jX({abs:Qs,addScalar:ha,divideScalar:di,isPositive:mp,multiplyScalar:Di,smaller:Ws,sqrt:hu,typed:we}),kz=tk({DenseMatrix:Dn,smaller:Ws}),vs=ik({ImmutableDenseMatrix:kz,getMatrixDataType:J2}),$s=LG({DenseMatrix:Dn,SparseMatrix:pa,bignumber:vo,concat:ar,config:mt,matrix:bt,typed:we}),zS=Gq({Complex:Vr,config:mt,divideScalar:di,typeOf:rw,typed:we}),Xz=Jq({DenseMatrix:Dn,divideScalar:di,equalScalar:Ln,matrix:bt,multiplyScalar:Di,subtractScalar:Al,typed:we}),sw=H7({flatten:pp,matrix:bt,size:da,typed:we}),Zie=gz({config:mt,isNaN:ef,numeric:bl,smaller:Ws,typed:we}),jz=KU({DenseMatrix:Dn,concat:ar,config:mt,equalScalar:Ln,matrix:bt,round:Vv,typed:we,zeros:Xa}),Kie=Yq({Complex:Vr,config:mt,divideScalar:di,typed:we}),Qie=tz({deepEqual:Fy,flatten:pp,matrix:bt,size:da,typed:we}),Jie=nz({DenseMatrix:Dn,concat:ar,equalScalar:Ln,matrix:bt,typed:we}),FS=WG({compare:yp,isNaN:ef,isNumeric:gp,typed:we}),LS=rY({addScalar:ha,complex:RS,conj:dp,divideScalar:di,equal:yo,identity:wh,isZero:El,matrix:bt,multiplyScalar:Di,sign:Fz,sqrt:hu,subtractScalar:Al,typed:we,unaryMinus:oc,zeros:Xa}),eae=dG({DenseMatrix:Dn,concat:ar,equalScalar:Ln,matrix:bt,typed:we,zeros:Xa}),bv=UG({DenseMatrix:Dn,SparseMatrix:pa,concat:ar,config:mt,matrix:bt,typed:we}),jo=hz({add:Wn,matrix:bt,typed:we,zeros:Xa}),qi=vH({DenseMatrix:Dn,concat:ar,equalScalar:Ln,matrix:bt,subtractScalar:Al,typed:we,unaryMinus:oc}),tae=JX({add:Wn,matrix:bt,typed:we}),ow=tG({DenseMatrix:Dn,divideScalar:di,equalScalar:Ln,matrix:bt,multiplyScalar:Di,subtractScalar:Al,typed:we}),nae=wee({Complex:Vr,add:Wn,multiply:vr,number:cf,typed:we}),rae=tee({addScalar:ha,combinations:CS,divideScalar:di,isInteger:mo,isNegative:Ah,multiplyScalar:Di,typed:we}),lc=_G({compare:yp,typed:we}),iae=ree({addScalar:ha,combinations:CS,isInteger:mo,isNegative:Ah,isPositive:mp,larger:$s,typed:we}),aae=rV({matrix:bt,multiply:vr,subtract:qi,typed:we}),j0=SQ({divideScalar:di,isZero:El,matrix:bt,multiply:vr,subtractScalar:Al,typed:we,unaryMinus:oc}),sae=lz({matrix:bt,number:cf,subtract:qi,typed:we}),oae=jQ({abs:Qs,addScalar:ha,deepEqual:Fy,divideScalar:di,multiplyScalar:Di,sqrt:hu,subtractScalar:Al,typed:we}),Ly=Kq({DenseMatrix:Dn,SparseMatrix:pa,concat:ar,divideScalar:di,equalScalar:Ln,matrix:bt,typed:we}),Yz=ok({larger:$s,smaller:Ws}),Wz=tj({Index:vs,typed:we}),lae=$Q({abs:Qs,add:Wn,addScalar:ha,config:mt,divideScalar:di,equalScalar:Ln,flatten:pp,isNumeric:gp,isZero:El,matrix:bt,multiply:vr,multiplyScalar:Di,smaller:Ws,subtract:qi,typed:we}),uae=bH({BigNumber:Et,add:Wn,config:mt,equal:yo,isInteger:mo,mod:jz,smaller:Ws,typed:we,xgcd:Pz}),cae=$9({concat:ar,equalScalar:Ln,matrix:bt,typed:we}),fae=Xq({Complex:Vr,config:mt,divideScalar:di,log:zS,typed:we}),hae=rG({DenseMatrix:Dn,divideScalar:di,equalScalar:Ln,matrix:bt,multiplyScalar:Di,subtractScalar:Al,typed:we}),lw=vz({config:mt,isNaN:ef,larger:$s,numeric:bl,typed:we}),_v=cz({bignumber:vo,matrix:bt,add:Wn,config:mt,equal:yo,isPositive:mp,isZero:El,larger:$s,largerEq:US,smaller:Ws,smallerEq:bv,typed:we}),dae=fz({Index:vs,matrix:bt,range:_v,typed:we}),pae=EX({DenseMatrix:Dn,Index:vs,compareNatural:lc,size:da,subset:jo,typed:we}),mae=NX({DenseMatrix:Dn,Index:vs,compareNatural:lc,size:da,subset:jo,typed:we}),vae=OX({Index:vs,compareNatural:lc,size:da,subset:jo,typed:we}),gae=FX({Index:vs,compareNatural:lc,size:da,subset:jo,typed:we}),$z=TY({SparseMatrix:pa,abs:Qs,add:Wn,divideScalar:di,larger:$s,largerEq:US,multiply:vr,subtract:qi,transpose:Uy,typed:we}),yae=ZG({compare:yp,compareNatural:lc,matrix:bt,typed:we}),uw=j7({config:mt,numeric:bl,typed:we}),Zz=aG({DenseMatrix:Dn,divideScalar:di,equalScalar:Ln,matrix:bt,multiplyScalar:Di,subtractScalar:Al,typed:we}),xae=mz({concat:ar,equalScalar:Ln,matrix:bt,not:b_,typed:we,zeros:Xa}),cw=h9({DenseMatrix:Dn,config:mt,equalScalar:Ln,matrix:bt,round:Vv,typed:we,zeros:Xa}),Kz=iz({Index:vs,matrix:bt,range:_v,typed:we}),bae=Ez({add:Wn,typed:we,unaryPlus:uw}),Qz=_9({Complex:Vr,DenseMatrix:Dn,ceil:cw,equalScalar:Ln,floor:Gz,matrix:bt,typed:we,zeros:Xa}),Jz=wX({DenseMatrix:Dn,Index:vs,compareNatural:lc,size:da,subset:jo,typed:we}),_ae=UX({Index:vs,compareNatural:lc,size:da,subset:jo,typed:we}),eF=HX({Index:vs,concat:ar,setDifference:Jz,size:da,subset:jo,typed:we}),tF=ck({FibonacciHeap:Yz,addScalar:ha,equalScalar:Ln}),fw=Mz({add:Wn,config:mt,numeric:bl,typed:we}),Th=EQ({abs:Qs,addScalar:ha,det:j0,divideScalar:di,identity:wh,matrix:bt,multiply:vr,typed:we,unaryMinus:oc}),nF=tY({DenseMatrix:Dn,Spa:tF,SparseMatrix:pa,abs:Qs,addScalar:ha,divideScalar:di,equalScalar:Ln,larger:$s,matrix:bt,multiplyScalar:Di,subtractScalar:Al,typed:we,unaryMinus:oc}),Sae=wQ({Complex:Vr,add:Wn,ctranspose:iw,deepEqual:Fy,divideScalar:di,dot:BS,dotDivide:Ly,equal:yo,inv:Th,matrix:bt,multiply:vr,typed:we}),wl=Iq({Complex:Vr,config:mt,fraction:zy,identity:wh,inv:Th,matrix:bt,multiply:vr,number:cf,typed:we}),rF=CX({DenseMatrix:Dn,Index:vs,compareNatural:lc,size:da,subset:jo,typed:we}),Mae=qX({Index:vs,concat:ar,setIntersect:rF,setSymDifference:eF,size:da,subset:jo,typed:we}),Eae=zQ({abs:Qs,add:Wn,identity:wh,inv:Th,map:vp,max:lw,multiply:vr,size:da,sqrt:hu,subtract:qi,typed:we}),fn=gk({BigNumber:Et,Complex:Vr,Fraction:hp,abs:Qs,addScalar:ha,config:mt,divideScalar:di,equal:yo,fix:Qz,format:By,isNumeric:gp,multiplyScalar:Di,number:cf,pow:wl,round:Vv,subtractScalar:Al,toBest:Lz}),Aae=ate({BigNumber:Et,Unit:fn,config:mt}),wae=Vte({BigNumber:Et,Unit:fn,config:mt}),Tae=Dte({BigNumber:Et,Unit:fn,config:mt}),Nae=ute({BigNumber:Et,Unit:fn,config:mt}),Dae=Rte({BigNumber:Et,Unit:fn,config:mt}),Cae=cte({BigNumber:Et,Unit:fn,config:mt}),Rae=ste({BigNumber:Et,Unit:fn,config:mt}),Oae=Mk({Unit:fn,typed:we}),Bae=Ste({BigNumber:Et,Unit:fn,config:mt}),Uae=$q({DenseMatrix:Dn,SparseMatrix:pa,concat:ar,equalScalar:Ln,matrix:bt,pow:wl,typed:we}),zae=ite({BigNumber:Et,Unit:fn,config:mt}),Fae=lte({BigNumber:Et,Unit:fn,config:mt}),iF=BQ({abs:Qs,add:Wn,identity:wh,inv:Th,multiply:vr,typed:we}),Lae=Ote({BigNumber:Et,Unit:fn,config:mt}),aF=ZV({addScalar:ha,ceil:cw,conj:dp,divideScalar:di,dotDivide:Ly,exp:zz,i:Cz,log2:tw,matrix:bt,multiplyScalar:Di,pow:wl,tau:Oz,typed:we}),hw=dJ({BigNumber:Et,Complex:Vr,config:mt,multiplyScalar:Di,pow:wl,typed:we}),Iae=ete({BigNumber:Et,Unit:fn,config:mt}),Pae=bte({BigNumber:Et,Unit:fn,config:mt}),Hae=QV({conj:dp,dotDivide:Ly,fft:aF,typed:we}),Vae=pte({BigNumber:Et,Unit:fn,config:mt}),qae=Ute({BigNumber:Et,Unit:fn,config:mt}),Gae=rte({BigNumber:Et,Unit:fn,config:mt}),kae=qte({BigNumber:Et,Unit:fn,config:mt}),Xae=Fte({BigNumber:Et,Unit:fn,config:mt}),jae=Mte({BigNumber:Et,Unit:fn,config:mt}),Yae=dte({BigNumber:Et,Unit:fn,config:mt}),Wae=Wte({BigNumber:Et,Unit:fn,config:mt}),$ae=Xte({BigNumber:Et,Unit:fn,config:mt}),Zae=$te({BigNumber:Et,Unit:fn,config:mt}),Kae=_te({BigNumber:Et,Unit:fn,config:mt}),Qae=Ete({BigNumber:Et,Unit:fn,config:mt}),Jae=nte({BigNumber:Et,Unit:fn,config:mt}),ese=Ate({BigNumber:Et,Unit:fn,config:mt}),tse=Pte({BigNumber:Et,Unit:fn,config:mt}),nse=Jee({BigNumber:Et,Unit:fn,config:mt}),rse=Hte({BigNumber:Et,Unit:fn,config:mt}),ise=wte({BigNumber:Et,Unit:fn,config:mt}),ase=Cte({BigNumber:Et,Unit:fn,config:mt}),sse=mte({BigNumber:Et,Unit:fn,config:mt}),ose=ote({BigNumber:Et,Unit:fn,config:mt}),Da=kQ({divideScalar:di,equalScalar:Ln,inv:Th,matrix:bt,multiply:vr,typed:we}),lse=gte({BigNumber:Et,Unit:fn,config:mt}),Iy=gJ({gamma:hw,typed:we}),use=Bte({BigNumber:Et,Unit:fn,config:mt}),cse=kte({BigNumber:Et,Unit:fn,config:mt}),fse=fte({BigNumber:Et,Unit:fn,config:mt}),sF=DY({DenseMatrix:Dn,lsolve:Xz,lup:nF,matrix:bt,slu:$z,typed:we,usolve:ow}),hse=hte({BigNumber:Et,Unit:fn,config:mt}),dse=Gte({BigNumber:Et,Unit:fn,config:mt}),pse=_J({add:Wn,divide:Da,factorial:Iy,isInteger:mo,isPositive:mp,multiply:vr,typed:we}),mse=MJ({factorial:Iy,typed:we}),vse=jte({BigNumber:Et,Unit:fn,config:mt}),gse=RY({add:Wn,cbrt:Vz,divide:Da,equalScalar:Ln,im:ew,isZero:El,multiply:vr,re:nw,sqrt:hu,subtract:qi,typeOf:rw,typed:we,unaryMinus:oc}),yse=IX({compareNatural:lc,typed:we}),xse=iq({abs:Qs,add:Wn,bignumber:vo,divide:Da,isNegative:Ah,isPositive:mp,larger:$s,map:vp,matrix:bt,max:lw,multiply:vr,smaller:Ws,subtract:qi,typed:we,unaryMinus:oc}),oF=KJ({bignumber:vo,addScalar:ha,combinations:CS,divideScalar:di,factorial:Iy,isInteger:mo,isNegative:Ah,larger:$s,multiplyScalar:Di,number:cf,pow:wl,subtractScalar:Al,typed:we}),bse=xk({Unit:fn,typed:we}),_se=JJ({addScalar:ha,isInteger:mo,isNegative:Ah,stirlingS2:oF,typed:we}),qv=RQ({abs:Qs,add:Wn,addScalar:ha,atan:Uz,bignumber:vo,column:Kz,complex:RS,config:mt,cos:Q2,diag:aw,divideScalar:di,dot:BS,equal:yo,flatten:pp,im:ew,inv:Th,larger:$s,matrix:bt,matrixFromColumns:sw,multiply:vr,multiplyScalar:Di,number:cf,qr:LS,re:nw,reshape:Iz,sin:OS,size:da,smaller:Ws,sqrt:hu,subtract:qi,typed:we,usolve:ow,usolveAll:Zz}),Sse=yte({BigNumber:Et,Unit:fn,config:mt}),Mse=zte({BigNumber:Et,Unit:fn,config:mt}),Ese=xJ({divide:Da,dotDivide:Ly,isNumeric:gp,log:zS,map:vp,matrix:bt,multiply:vr,sum:fw,typed:we}),lF=Az({add:Wn,divide:Da,typed:we}),Ase=Lte({BigNumber:Et,Unit:fn,config:mt}),wse=tte({BigNumber:Et,Unit:fn,config:mt}),Tse=Tz({bignumber:vo,add:Wn,compare:yp,divide:Da,isInteger:mo,larger:$s,mapSlices:oy,multiply:vr,partitionSelect:FS,smaller:Ws,smallerEq:bv,subtract:qi,typed:we}),dw=wz({add:Wn,divide:Da,isNaN:ef,mapSlices:oy,multiply:vr,subtract:qi,typed:we}),Nse=vte({BigNumber:Et,Unit:fn,config:mt}),uF=eJ({add:Wn,compare:yp,divide:Da,partitionSelect:FS,typed:we}),Dse=oJ({add:Wn,divide:Da,matrix:bt,mean:lF,multiply:vr,pow:wl,sqrt:hu,subtract:qi,sum:fw,typed:we}),Cse=Nee({Complex:Vr,add:Wn,divide:Da,matrix:bt,multiply:vr,typed:we}),Rse=nJ({abs:Qs,map:vp,median:uF,subtract:qi,typed:we}),Ose=Nz({map:vp,sqrt:hu,typed:we,variance:dw}),Bse=hq({BigNumber:Et,Complex:Vr,add:Wn,config:mt,divide:Da,equal:yo,factorial:Iy,gamma:hw,isNegative:Ah,multiply:vr,pi:a2,pow:wl,sin:OS,smallerEq:bv,subtract:qi,typed:we}),pw=WX({abs:Qs,add:Wn,conj:dp,ctranspose:iw,eigs:qv,equalScalar:Ln,larger:$s,matrix:bt,multiply:vr,pow:wl,smaller:Ws,sqrt:hu,typed:we}),cF=BV({BigNumber:Et,DenseMatrix:Dn,SparseMatrix:pa,addScalar:ha,config:mt,cos:Q2,matrix:bt,multiplyScalar:Di,norm:pw,sin:OS,typed:we,unaryMinus:oc}),Use=Yte({BigNumber:Et,Unit:fn,config:mt}),fF=PQ({identity:wh,matrix:bt,multiply:vr,norm:pw,qr:LS,subtract:qi,typed:we}),zse=RV({multiply:vr,rotationMatrix:cF,typed:we}),hF=LQ({abs:Qs,add:Wn,concat:ar,identity:wh,index:Wz,lusolve:sF,matrix:bt,matrixFromColumns:sw,multiply:vr,range:_v,schur:fF,subset:jo,subtract:qi,transpose:Uy,typed:we}),Fse=VQ({matrix:bt,multiply:vr,sylvester:hF,transpose:Uy,typed:we}),Gv={},Py={},dF={},Ss=ij({mathWithTransform:Py}),kv=Nj({Node:Ss}),ff=Cj({Node:Ss}),xp=Oj({Node:Ss}),pF=Fj({Node:Ss}),Xv=lj({Node:Ss}),mF=pj({Node:Ss,ResultSet:Rz}),vF=vj({Node:Ss}),Nh=Sj({Node:Ss}),gF=Uj({Node:Ss}),Lse=Ree({classes:dF}),mw=LY({math:Gv,typed:we}),yF=Ej({Node:Ss,typed:we}),Ise=bQ({Chain:mw,typed:we}),jv=wj({Node:Ss,size:da}),Yv=sj({Node:Ss,subset:jo}),xF=hj({matrix:bt,Node:Ss,subset:jo}),Dh=Pj({Unit:fn,Node:Ss,math:Gv}),Ch=Vj({Node:Ss,SymbolNode:Dh,math:Gv}),Tl=Gj({AccessorNode:Yv,ArrayNode:Xv,AssignmentNode:xF,BlockNode:mF,ConditionalNode:vF,ConstantNode:Nh,FunctionAssignmentNode:yF,FunctionNode:Ch,IndexNode:jv,ObjectNode:kv,OperatorNode:ff,ParenthesisNode:xp,RangeNode:gF,RelationalNode:pF,SymbolNode:Dh,config:mt,numeric:bl,typed:we}),bF=yee({ConstantNode:Nh,FunctionNode:Ch,OperatorNode:ff,ParenthesisNode:xp,parse:Tl,typed:we}),vw=dee({bignumber:vo,fraction:zy,AccessorNode:Yv,ArrayNode:Xv,ConstantNode:Nh,FunctionNode:Ch,IndexNode:jv,ObjectNode:kv,OperatorNode:ff,SymbolNode:Dh,config:mt,mathWithTransform:Py,matrix:bt,typed:we}),Pse=Xj({parse:Tl,typed:we}),gw=mee({AccessorNode:Yv,ArrayNode:Xv,ConstantNode:Nh,FunctionNode:Ch,IndexNode:jv,ObjectNode:kv,OperatorNode:ff,ParenthesisNode:xp,SymbolNode:Dh,add:Wn,divide:Da,equal:yo,isZero:El,multiply:vr,parse:Tl,pow:wl,subtract:qi,typed:we}),yw=Yj({parse:Tl,typed:we}),_F=UY({evaluate:yw}),SF=Zj({evaluate:yw,parse:Tl}),IS=cee({AccessorNode:Yv,ArrayNode:Xv,ConstantNode:Nh,FunctionNode:Ch,IndexNode:jv,ObjectNode:kv,OperatorNode:ff,ParenthesisNode:xp,SymbolNode:Dh,equal:yo,parse:Tl,replacer:Bz,resolve:bF,simplifyConstant:vw,simplifyCore:gw,typed:we}),Hse=bee({OperatorNode:ff,parse:Tl,simplify:IS,typed:we}),Vse=aee({parse:Tl,typed:we}),qse=Jj({Parser:SF,typed:we}),Gse=Eee({bignumber:vo,fraction:zy,AccessorNode:Yv,ArrayNode:Xv,ConstantNode:Nh,FunctionNode:Ch,IndexNode:jv,ObjectNode:kv,OperatorNode:ff,ParenthesisNode:xp,SymbolNode:Dh,add:Wn,config:mt,divide:Da,equal:yo,isZero:El,mathWithTransform:Py,matrix:bt,multiply:vr,parse:Tl,pow:wl,simplify:IS,simplifyConstant:vw,simplifyCore:gw,subtract:qi,typed:we}),kse=See({ConstantNode:Nh,FunctionNode:Ch,OperatorNode:ff,ParenthesisNode:xp,SymbolNode:Dh,config:mt,equal:yo,isZero:El,numeric:bl,parse:Tl,simplify:IS,typed:we}),Xse=yQ({Help:_F,mathWithTransform:Py,typed:we});Ar(Gv,{e:aO,false:gre,fineStructure:yre,i:Cz,Infinity:xre,LN10:bre,LOG10E:_re,NaN:Sre,null:Mre,phi:Ere,SQRT1_2:wre,sackurTetrode:Tre,tau:Oz,true:Nre,E:aO,version:Dre,efimovFactor:Cre,LN2:Rre,pi:a2,replacer:Bz,reviver:Lse,SQRT2:Ore,typed:we,PI:a2,weakMixingAngle:Bre,abs:Qs,acos:Ure,acot:zre,acsc:Fre,addScalar:ha,arg:Lre,asech:Ire,asinh:Pre,atan:Uz,atanh:Hre,bigint:Vre,bitNot:qre,boolean:Gre,clone:kre,combinations:CS,complex:RS,conj:dp,cos:Q2,cot:Xre,csc:jre,cube:Yre,equalScalar:Ln,erf:Wre,exp:zz,expm1:$re,filter:Zre,flatten:pp,forEach:Kre,format:By,getMatrixDataType:J2,hex:Qre,im:ew,isInteger:mo,isNegative:Ah,isPositive:mp,isZero:El,LOG2E:Jre,lgamma:eie,log10:tie,log2:tw,map:vp,multiplyScalar:Di,not:b_,number:cf,oct:nie,pickRandom:rie,print:iie,random:aie,re:nw,sec:sie,sign:Fz,sin:OS,size:da,splitUnit:oie,square:lie,string:uie,subtractScalar:Al,tan:cie,toBest:Lz,typeOf:rw,acosh:fie,acsch:hie,asec:die,bignumber:vo,chain:Ise,combinationsWithRep:pie,cosh:mie,csch:vie,dot:BS,isNaN:ef,isPrime:gie,mapSlices:oy,matrix:bt,matrixFromFunction:yie,multiply:vr,ones:xie,randomInt:bie,reshape:Iz,sech:_ie,sinh:Sie,sparse:Mie,sqrt:hu,squeeze:Eie,tanh:Aie,transpose:Uy,xgcd:Pz,zeros:Xa,acoth:wie,asin:Tie,bin:Nie,concat:ar,coth:Die,ctranspose:iw,diag:aw,dotMultiply:Cie,equal:yo,fraction:zy,identity:wh,isNumeric:gp,kron:Rie,largerEq:US,leftShift:Oie,matrixFromRows:Bie,mode:Uie,nthRoot:zie,numeric:bl,prod:Hz,resize:Fie,rightArithShift:Lie,round:Vv,smaller:Ws,to:Iie,unaryMinus:oc,unequal:Pie,xor:Hie,add:Wn,atan2:Vie,bitAnd:qie,bitOr:Gie,bitXor:kie,cbrt:Vz,compare:yp,compareText:qz,count:Xie,deepEqual:Fy,divideScalar:di,equalText:jie,floor:Gz,gcd:Yie,hasNumericValue:Wie,hypot:$ie,larger:$s,log:zS,lsolve:Xz,matrixFromColumns:sw,min:Zie,mod:jz,nthRoots:Kie,nullish:Qie,or:Jie,partitionSelect:FS,qr:LS,rightLogShift:eae,smallerEq:bv,subset:jo,subtract:qi,trace:tae,usolve:ow,zpk2tf:nae,catalan:rae,compareNatural:lc,composition:iae,cross:aae,det:j0,diff:sae,distance:oae,dotDivide:Ly,index:Wz,intersect:lae,invmod:uae,lcm:cae,log1p:fae,lsolveAll:hae,max:lw,range:_v,row:dae,setCartesian:pae,setDistinct:mae,setIsSubset:vae,setPowerset:gae,slu:$z,sort:yae,unaryPlus:uw,usolveAll:Zz,and:xae,ceil:cw,column:Kz,cumsum:bae,fix:Qz,setDifference:Jz,setMultiplicity:_ae,setSymDifference:eF,sum:fw,inv:Th,lup:nF,pinv:Sae,pow:wl,setIntersect:rF,setUnion:Mae,sqrtm:Eae,vacuumImpedance:Aae,wienDisplacement:wae,atomicMass:Tae,bohrMagneton:Nae,boltzmann:Dae,conductanceQuantum:Cae,coulomb:Rae,createUnit:Oae,deuteronMass:Bae,dotPow:Uae,electricConstant:zae,elementaryCharge:Fae,expm:iF,faraday:Lae,fft:aF,gamma:hw,gravitationConstant:Iae,hartreeEnergy:Pae,ifft:Hae,klitzing:Vae,loschmidt:qae,magneticConstant:Gae,molarMass:kae,molarPlanckConstant:Xae,neutronMass:jae,nuclearMagneton:Yae,planckCharge:Wae,planckLength:$ae,planckTemperature:Zae,protonMass:Kae,quantumOfCirculation:Qae,reducedPlanckConstant:Jae,rydberg:ese,secondRadiation:tse,speedOfLight:nse,stefanBoltzmann:rse,thomsonCrossSection:ise,avogadro:ase,bohrRadius:sse,coulombConstant:ose,divide:Da,electronMass:lse,factorial:Iy,firstRadiation:use,gravity:cse,inverseConductanceQuantum:fse,lusolve:sF,magneticFluxQuantum:hse,molarMassC12:dse,multinomial:pse,parse:Tl,permutations:mse,planckMass:vse,polynomialRoot:gse,resolve:bF,setSize:yse,simplifyConstant:vw,solveODE:xse,stirlingS2:oF,unit:bse,bellNumbers:_se,compile:Pse,eigs:qv,fermiCoupling:Sse,gasConstant:Mse,kldivergence:Ese,mean:lF,molarVolume:Ase,planckConstant:wse,quantileSeq:Tse,simplifyCore:gw,variance:dw,classicalElectronRadius:Nse,evaluate:yw,median:uF,simplify:IS,symbolicEqual:Hse,corr:Dse,freqz:Cse,leafCount:Vse,mad:Rse,parser:qse,rationalize:Gse,std:Ose,zeta:Bse,derivative:kse,norm:pw,rotationMatrix:cF,help:Xse,planckTime:Use,schur:fF,rotate:zse,sylvester:hF,lyap:Fse,config:mt});Ar(Py,Gv,{mapSlices:Jte({isInteger:mo,typed:we}),filter:one({typed:we}),forEach:cne({typed:we}),map:vne({typed:we}),or:ore({DenseMatrix:Dn,concat:ar,equalScalar:Ln,matrix:bt,typed:we}),and:ire({add:Wn,concat:ar,equalScalar:Ln,matrix:bt,not:b_,typed:we,zeros:Xa}),concat:Pne({isInteger:mo,matrix:bt,typed:we}),max:_ne({config:mt,isNaN:ef,larger:$s,numeric:bl,typed:we}),print:tre({add:Wn,matrix:bt,typed:we,zeros:Xa}),sum:jne({add:Wn,config:mt,numeric:bl,typed:we}),bitAnd:dre({add:Wn,concat:ar,equalScalar:Ln,matrix:bt,not:b_,typed:we,zeros:Xa}),min:Tne({config:mt,isNaN:ef,numeric:bl,smaller:Ws,typed:we}),nullish:cre({deepEqual:Fy,flatten:pp,matrix:bt,size:da,typed:we}),subset:Fne({add:Wn,matrix:bt,typed:we,zeros:Xa}),bitOr:vre({DenseMatrix:Dn,concat:ar,equalScalar:Ln,matrix:bt,typed:we}),diff:Vne({bignumber:vo,matrix:bt,number:cf,subtract:qi,typed:we}),index:dne({Index:vs,getMatrixDataType:J2}),range:Cne({bignumber:vo,matrix:bt,add:Wn,config:mt,equal:yo,isPositive:mp,isZero:El,larger:$s,largerEq:US,smaller:Ws,smallerEq:bv,typed:we}),row:Bne({Index:vs,matrix:bt,range:_v,typed:we}),column:nne({Index:vs,matrix:bt,range:_v,typed:we}),cumsum:Kne({add:Wn,typed:we,unaryPlus:uw}),mean:Ene({add:Wn,divide:Da,typed:we}),quantileSeq:$ne({add:Wn,bignumber:vo,compare:yp,divide:Da,isInteger:mo,larger:$s,mapSlices:oy,multiply:vr,partitionSelect:FS,smaller:Ws,smallerEq:bv,subtract:qi,typed:we}),variance:Jne({add:Wn,divide:Da,isNaN:ef,mapSlices:oy,multiply:vr,subtract:qi,typed:we}),std:kne({map:vp,sqrt:hu,typed:we,variance:dw})});Ar(dF,{BigNumber:Et,Complex:Vr,Fraction:hp,Matrix:DS,Node:Ss,ObjectNode:kv,OperatorNode:ff,ParenthesisNode:xp,Range:Are,RelationalNode:pF,ResultSet:Rz,ArrayNode:Xv,BlockNode:mF,ConditionalNode:vF,ConstantNode:Nh,DenseMatrix:Dn,RangeNode:gF,Chain:mw,FunctionAssignmentNode:yF,SparseMatrix:pa,IndexNode:jv,ImmutableDenseMatrix:kz,Index:vs,AccessorNode:Yv,AssignmentNode:xF,FibonacciHeap:Yz,Spa:tF,Unit:fn,SymbolNode:Dh,FunctionNode:Ch,Help:_F,Parser:SF});mw.createProxy(Gv);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Wv="180",Pd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Hd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},MF=0,s2=1,EF=2,jse=3,AF=0,PS=1,Y0=2,iu=3,sf=0,gs=1,Io=2,tf=0,Kd=1,ly=2,o2=3,l2=4,wF=5,oh=100,TF=101,NF=102,DF=103,CF=104,RF=200,OF=201,BF=202,UF=203,__=204,S_=205,zF=206,FF=207,LF=208,IF=209,PF=210,HF=211,VF=212,qF=213,GF=214,M_=0,E_=1,A_=2,ap=3,w_=4,T_=5,N_=6,D_=7,Hy=0,kF=1,XF=2,nc=0,jF=1,YF=2,WF=3,xw=4,$F=5,ZF=6,KF=7,u2="attached",QF="detached",HS=300,of=301,yh=302,uy=303,cy=304,$v=306,fy=1e3,xl=1001,hy=1002,ja=1003,bw=1004,Yse=1004,rv=1005,Wse=1005,sa=1006,W0=1007,$se=1007,ec=1008,Zse=1008,Sl=1009,_w=1010,Sw=1011,Sv=1012,VS=1013,lf=1014,po=1015,Zv=1016,qS=1017,GS=1018,Mv=1020,Mw=35902,Ew=35899,Aw=1021,ww=1022,ms=1023,Ev=1026,Av=1027,kS=1028,Vy=1029,Tw=1030,XS=1031,Kse=1032,jS=1033,$0=33776,Z0=33777,K0=33778,Q0=33779,C_=35840,R_=35841,O_=35842,B_=35843,U_=36196,z_=37492,F_=37496,L_=37808,I_=37809,P_=37810,H_=37811,V_=37812,q_=37813,G_=37814,k_=37815,X_=37816,j_=37817,Y_=37818,W_=37819,$_=37820,Z_=37821,K_=36492,Q_=36494,J_=36495,eS=36283,tS=36284,nS=36285,rS=36286,JF=2200,e5=2201,t5=2202,dy=2300,iS=2301,Hb=2302,Yd=2400,Wd=2401,py=2402,YS=2500,Nw=2501,Qse=0,Jse=1,eoe=2,n5=3200,r5=3201,toe=3202,noe=3203,Rh=0,i5=1,$c="",ds="srgb",xh="srgb-linear",my="linear",Lr="srgb",roe=0,Vd=7680,ioe=7681,aoe=7682,soe=7683,ooe=34055,loe=34056,uoe=5386,coe=512,foe=513,hoe=514,doe=515,poe=516,moe=517,voe=518,c2=519,a5=512,s5=513,o5=514,Dw=515,l5=516,u5=517,c5=518,f5=519,vy=35044,Qd=35048,goe=35040,yoe=35045,xoe=35049,boe=35041,_oe=35046,Soe=35050,Moe=35042,Eoe="100",f2="300 es",Po=2e3,wv=2001,Aoe={COMPUTE:"compute",RENDER:"render"},woe={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Toe={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let uc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const i=n[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}};const cs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let sO=1234567;const Jd=Math.PI/180,Tv=180/Math.PI;function Vo(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(cs[r&255]+cs[r>>8&255]+cs[r>>16&255]+cs[r>>24&255]+"-"+cs[e&255]+cs[e>>8&255]+"-"+cs[e>>16&15|64]+cs[e>>24&255]+"-"+cs[t&63|128]+cs[t>>8&255]+"-"+cs[t>>16&255]+cs[t>>24&255]+cs[n&255]+cs[n>>8&255]+cs[n>>16&255]+cs[n>>24&255]).toLowerCase()}function gn(r,e,t){return Math.max(e,Math.min(t,r))}function Cw(r,e){return(r%e+e)%e}function Noe(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function Doe(r,e,t){return r!==e?(t-r)/(e-r):0}function J0(r,e,t){return(1-t)*r+t*e}function Coe(r,e,t,n){return J0(r,e,1-Math.exp(-t*n))}function Roe(r,e=1){return e-Math.abs(Cw(r,e*2)-e)}function Ooe(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function Boe(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function Uoe(r,e){return r+Math.floor(Math.random()*(e-r+1))}function zoe(r,e){return r+Math.random()*(e-r)}function Foe(r){return r*(.5-Math.random())}function Loe(r){r!==void 0&&(sO=r);let e=sO+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Ioe(r){return r*Jd}function Poe(r){return r*Tv}function Hoe(r){return(r&r-1)===0&&r!==0}function Voe(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function qoe(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Goe(r,e,t,n,i){const a=Math.cos,s=Math.sin,o=a(t/2),c=s(t/2),u=a((e+n)/2),h=s((e+n)/2),d=a((e-n)/2),m=s((e-n)/2),v=a((n-e)/2),x=s((n-e)/2);switch(i){case"XYX":r.set(o*h,c*d,c*m,o*u);break;case"YZY":r.set(c*m,o*h,c*d,o*u);break;case"ZXZ":r.set(c*d,c*m,o*h,o*u);break;case"XZX":r.set(o*h,c*x,c*v,o*u);break;case"YXY":r.set(c*v,o*h,c*x,o*u);break;case"ZYZ":r.set(c*x,c*v,o*h,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function js(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function zn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const Ku={DEG2RAD:Jd,RAD2DEG:Tv,generateUUID:Vo,clamp:gn,euclideanModulo:Cw,mapLinear:Noe,inverseLerp:Doe,lerp:J0,damp:Coe,pingpong:Roe,smoothstep:Ooe,smootherstep:Boe,randInt:Uoe,randFloat:zoe,randFloatSpread:Foe,seededRandom:Loe,degToRad:Ioe,radToDeg:Poe,isPowerOfTwo:Hoe,ceilPowerOfTwo:Voe,floorPowerOfTwo:qoe,setQuaternionFromProperEuler:Goe,normalize:zn,denormalize:js};class gt{constructor(e=0,t=0){gt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(gn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(gn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*n-s*i+e.x,this.y=a*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ys{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,a,s,o){let c=n[i+0],u=n[i+1],h=n[i+2],d=n[i+3];const m=a[s+0],v=a[s+1],x=a[s+2],b=a[s+3];if(o===0){e[t+0]=c,e[t+1]=u,e[t+2]=h,e[t+3]=d;return}if(o===1){e[t+0]=m,e[t+1]=v,e[t+2]=x,e[t+3]=b;return}if(d!==b||c!==m||u!==v||h!==x){let M=1-o;const _=c*m+u*v+h*x+d*b,T=_>=0?1:-1,E=1-_*_;if(E>Number.EPSILON){const D=Math.sqrt(E),N=Math.atan2(D,_*T);M=Math.sin(M*N)/D,o=Math.sin(o*N)/D}const A=o*T;if(c=c*M+m*A,u=u*M+v*A,h=h*M+x*A,d=d*M+b*A,M===1-o){const D=1/Math.sqrt(c*c+u*u+h*h+d*d);c*=D,u*=D,h*=D,d*=D}}e[t]=c,e[t+1]=u,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,i,a,s){const o=n[i],c=n[i+1],u=n[i+2],h=n[i+3],d=a[s],m=a[s+1],v=a[s+2],x=a[s+3];return e[t]=o*x+h*d+c*v-u*m,e[t+1]=c*x+h*m+u*d-o*v,e[t+2]=u*x+h*v+o*m-c*d,e[t+3]=h*x-o*d-c*m-u*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,c=Math.sin,u=o(n/2),h=o(i/2),d=o(a/2),m=c(n/2),v=c(i/2),x=c(a/2);switch(s){case"XYZ":this._x=m*h*d+u*v*x,this._y=u*v*d-m*h*x,this._z=u*h*x+m*v*d,this._w=u*h*d-m*v*x;break;case"YXZ":this._x=m*h*d+u*v*x,this._y=u*v*d-m*h*x,this._z=u*h*x-m*v*d,this._w=u*h*d+m*v*x;break;case"ZXY":this._x=m*h*d-u*v*x,this._y=u*v*d+m*h*x,this._z=u*h*x+m*v*d,this._w=u*h*d-m*v*x;break;case"ZYX":this._x=m*h*d-u*v*x,this._y=u*v*d+m*h*x,this._z=u*h*x-m*v*d,this._w=u*h*d+m*v*x;break;case"YZX":this._x=m*h*d+u*v*x,this._y=u*v*d+m*h*x,this._z=u*h*x-m*v*d,this._w=u*h*d-m*v*x;break;case"XZY":this._x=m*h*d-u*v*x,this._y=u*v*d-m*h*x,this._z=u*h*x+m*v*d,this._w=u*h*d+m*v*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],a=t[8],s=t[1],o=t[5],c=t[9],u=t[2],h=t[6],d=t[10],m=n+o+d;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(h-c)*v,this._y=(a-u)*v,this._z=(s-i)*v}else if(n>o&&n>d){const v=2*Math.sqrt(1+n-o-d);this._w=(h-c)/v,this._x=.25*v,this._y=(i+s)/v,this._z=(a+u)/v}else if(o>d){const v=2*Math.sqrt(1+o-n-d);this._w=(a-u)/v,this._x=(i+s)/v,this._y=.25*v,this._z=(c+h)/v}else{const v=2*Math.sqrt(1+d-n-o);this._w=(s-i)/v,this._x=(a+u)/v,this._y=(c+h)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,a=e._z,s=e._w,o=t._x,c=t._y,u=t._z,h=t._w;return this._x=n*h+s*o+i*u-a*c,this._y=i*h+s*c+a*o-n*u,this._z=a*h+s*u+n*c-i*o,this._w=s*h-n*o-i*c-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,a=this._z,s=this._w;let o=s*e._w+n*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=i,this._z=a,this;const c=1-o*o;if(c<=Number.EPSILON){const v=1-t;return this._w=v*s+t*this._w,this._x=v*n+t*this._x,this._y=v*i+t*this._y,this._z=v*a+t*this._z,this.normalize(),this}const u=Math.sqrt(c),h=Math.atan2(u,o),d=Math.sin((1-t)*h)/u,m=Math.sin(t*h)/u;return this._w=s*d+this._w*m,this._x=n*d+this._x*m,this._y=i*d+this._y*m,this._z=a*d+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),a=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class xe{constructor(e=0,t=0,n=0){xe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(oO.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(oO.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*i,this.y=a[1]*t+a[4]*n+a[7]*i,this.z=a[2]*t+a[5]*n+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,a=e.elements,s=1/(a[3]*t+a[7]*n+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*i+a[12])*s,this.y=(a[1]*t+a[5]*n+a[9]*i+a[13])*s,this.z=(a[2]*t+a[6]*n+a[10]*i+a[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,a=e.x,s=e.y,o=e.z,c=e.w,u=2*(s*i-o*n),h=2*(o*t-a*i),d=2*(a*n-s*t);return this.x=t+c*u+s*d-o*h,this.y=n+c*h+o*u-a*d,this.z=i+c*d+a*h-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i,this.y=a[1]*t+a[5]*n+a[9]*i,this.z=a[2]*t+a[6]*n+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this.z=gn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this.z=gn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(gn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,a=e.z,s=t.x,o=t.y,c=t.z;return this.x=i*c-a*o,this.y=a*s-n*c,this.z=n*o-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ME.copy(this).projectOnVector(e),this.sub(ME)}reflect(e){return this.sub(ME.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(gn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ME=new xe,oO=new ys;class Bn{constructor(e,t,n,i,a,s,o,c,u){Bn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,a,s,o,c,u)}set(e,t,n,i,a,s,o,c,u){const h=this.elements;return h[0]=e,h[1]=i,h[2]=o,h[3]=t,h[4]=a,h[5]=c,h[6]=n,h[7]=s,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,a=this.elements,s=n[0],o=n[3],c=n[6],u=n[1],h=n[4],d=n[7],m=n[2],v=n[5],x=n[8],b=i[0],M=i[3],_=i[6],T=i[1],E=i[4],A=i[7],D=i[2],N=i[5],O=i[8];return a[0]=s*b+o*T+c*D,a[3]=s*M+o*E+c*N,a[6]=s*_+o*A+c*O,a[1]=u*b+h*T+d*D,a[4]=u*M+h*E+d*N,a[7]=u*_+h*A+d*O,a[2]=m*b+v*T+x*D,a[5]=m*M+v*E+x*N,a[8]=m*_+v*A+x*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],h=e[8];return t*s*h-t*o*u-n*a*h+n*o*c+i*a*u-i*s*c}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],h=e[8],d=h*s-o*u,m=o*c-h*a,v=u*a-s*c,x=t*d+n*m+i*v;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/x;return e[0]=d*b,e[1]=(i*u-h*n)*b,e[2]=(o*n-i*s)*b,e[3]=m*b,e[4]=(h*t-i*c)*b,e[5]=(i*a-o*t)*b,e[6]=v*b,e[7]=(n*c-u*t)*b,e[8]=(s*t-n*a)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,a,s,o){const c=Math.cos(a),u=Math.sin(a);return this.set(n*c,n*u,-n*(c*s+u*o)+s+e,-i*u,i*c,-i*(-u*s+c*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(EE.makeScale(e,t)),this}rotate(e){return this.premultiply(EE.makeRotation(-e)),this}translate(e,t){return this.premultiply(EE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const EE=new Bn;function h5(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const koe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function iv(r,e){return new koe[r](e)}function gy(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function d5(){const r=gy("canvas");return r.style.display="block",r}const lO={};function yy(r){r in lO||(lO[r]=!0,console.warn(r))}function Xoe(r,e,t){return new Promise(function(n,i){function a(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:n()}}setTimeout(a,t)})}const uO=new Bn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),cO=new Bn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function joe(){const r={enabled:!0,workingColorSpace:xh,spaces:{},convert:function(i,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===Lr&&(i.r=nf(i.r),i.g=nf(i.g),i.b=nf(i.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[a].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Lr&&(i.r=cv(i.r),i.g=cv(i.g),i.b=cv(i.b))),i},workingToColorSpace:function(i,a){return this.convert(i,this.workingColorSpace,a)},colorSpaceToWorking:function(i,a){return this.convert(i,a,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===$c?my:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,a=this.workingColorSpace){return i.fromArray(this.spaces[a].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,a,s){return i.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,a){return yy("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),r.workingToColorSpace(i,a)},toWorkingColorSpace:function(i,a){return yy("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),r.colorSpaceToWorking(i,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return r.define({[xh]:{primaries:e,whitePoint:n,transfer:my,toXYZ:uO,fromXYZ:cO,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ds},outputColorSpaceConfig:{drawingBufferColorSpace:ds}},[ds]:{primaries:e,whitePoint:n,transfer:Lr,toXYZ:uO,fromXYZ:cO,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ds}}}),r}const pr=joe();function nf(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function cv(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Cm;class p5{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Cm===void 0&&(Cm=gy("canvas")),Cm.width=e.width,Cm.height=e.height;const i=Cm.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Cm}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=gy("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=nf(a[s]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(nf(t[n]/255)*255):t[n]=nf(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Yoe=0;class fh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Yoe++}),this.uuid=Vo(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(AE(i[s].image)):a.push(AE(i[s]))}else a=AE(i);n.url=a}return t||(e.images[this.uuid]=n),n}}function AE(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?p5.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Woe=0;const wE=new xe;class Ni extends uc{constructor(e=Ni.DEFAULT_IMAGE,t=Ni.DEFAULT_MAPPING,n=xl,i=xl,a=sa,s=ec,o=ms,c=Sl,u=Ni.DEFAULT_ANISOTROPY,h=$c){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Woe++}),this.uuid=Vo(),this.name="",this.source=new fh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=c,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(wE).x}get height(){return this.source.getSize(wE).y}get depth(){return this.source.getSize(wE).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==HS)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case fy:e.x=e.x-Math.floor(e.x);break;case xl:e.x=e.x<0?0:1;break;case hy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case fy:e.y=e.y-Math.floor(e.y);break;case xl:e.y=e.y<0?0:1;break;case hy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ni.DEFAULT_IMAGE=null;Ni.DEFAULT_MAPPING=HS;Ni.DEFAULT_ANISOTROPY=1;class Xn{constructor(e=0,t=0,n=0,i=1){Xn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*a,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*a,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*a,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,a;const c=e.elements,u=c[0],h=c[4],d=c[8],m=c[1],v=c[5],x=c[9],b=c[2],M=c[6],_=c[10];if(Math.abs(h-m)<.01&&Math.abs(d-b)<.01&&Math.abs(x-M)<.01){if(Math.abs(h+m)<.1&&Math.abs(d+b)<.1&&Math.abs(x+M)<.1&&Math.abs(u+v+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(u+1)/2,A=(v+1)/2,D=(_+1)/2,N=(h+m)/4,O=(d+b)/4,z=(x+M)/4;return E>A&&E>D?E<.01?(n=0,i=.707106781,a=.707106781):(n=Math.sqrt(E),i=N/n,a=O/n):A>D?A<.01?(n=.707106781,i=0,a=.707106781):(i=Math.sqrt(A),n=N/i,a=z/i):D<.01?(n=.707106781,i=.707106781,a=0):(a=Math.sqrt(D),n=O/a,i=z/a),this.set(n,i,a,t),this}let T=Math.sqrt((M-x)*(M-x)+(d-b)*(d-b)+(m-h)*(m-h));return Math.abs(T)<.001&&(T=1),this.x=(M-x)/T,this.y=(d-b)/T,this.z=(m-h)/T,this.w=Math.acos((u+v+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=gn(this.x,e.x,t.x),this.y=gn(this.y,e.y,t.y),this.z=gn(this.z,e.z,t.z),this.w=gn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=gn(this.x,e,t),this.y=gn(this.y,e,t),this.z=gn(this.z,e,t),this.w=gn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(gn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Rw extends uc{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:sa,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new Xn(0,0,e,t),this.scissorTest=!1,this.viewport=new Xn(0,0,e,t);const i={width:e,height:t,depth:n.depth},a=new Ni(i);this.textures=[];const s=n.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:sa,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new fh(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ac extends Rw{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class WS extends Ni{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ja,this.minFilter=ja,this.wrapR=xl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class $oe extends ac{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new WS(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class $S extends Ni{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ja,this.minFilter=ja,this.wrapR=xl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zoe extends ac{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new $S(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class oa{constructor(e=new xe(1/0,1/0,1/0),t=new xe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(tu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(tu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=tu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const a=n.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,tu):tu.fromBufferAttribute(a,s),tu.applyMatrix4(e.matrixWorld),this.expandByPoint(tu);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Bx.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Bx.copy(n.boundingBox)),Bx.applyMatrix4(e.matrixWorld),this.union(Bx)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,tu),tu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(A0),Ux.subVectors(this.max,A0),Rm.subVectors(e.a,A0),Om.subVectors(e.b,A0),Bm.subVectors(e.c,A0),Kf.subVectors(Om,Rm),Qf.subVectors(Bm,Om),Md.subVectors(Rm,Bm);let t=[0,-Kf.z,Kf.y,0,-Qf.z,Qf.y,0,-Md.z,Md.y,Kf.z,0,-Kf.x,Qf.z,0,-Qf.x,Md.z,0,-Md.x,-Kf.y,Kf.x,0,-Qf.y,Qf.x,0,-Md.y,Md.x,0];return!TE(t,Rm,Om,Bm,Ux)||(t=[1,0,0,0,1,0,0,0,1],!TE(t,Rm,Om,Bm,Ux))?!1:(zx.crossVectors(Kf,Qf),t=[zx.x,zx.y,zx.z],TE(t,Rm,Om,Bm,Ux))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,tu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(tu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ic[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ic[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ic[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ic[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ic[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ic[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ic[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ic[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ic),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Ic=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe],tu=new xe,Bx=new oa,Rm=new xe,Om=new xe,Bm=new xe,Kf=new xe,Qf=new xe,Md=new xe,A0=new xe,Ux=new xe,zx=new xe,Ed=new xe;function TE(r,e,t,n,i){for(let a=0,s=r.length-3;a<=s;a+=3){Ed.fromArray(r,a);const o=i.x*Math.abs(Ed.x)+i.y*Math.abs(Ed.y)+i.z*Math.abs(Ed.z),c=e.dot(Ed),u=t.dot(Ed),h=n.dot(Ed);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>o)return!1}return!0}const Koe=new oa,w0=new xe,NE=new xe;let la=class{constructor(e=new xe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Koe.setFromPoints(e).getCenter(n);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;w0.subVectors(e,this.center);const t=w0.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(w0,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(NE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(w0.copy(e.center).add(NE)),this.expandByPoint(w0.copy(e.center).sub(NE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}};const Pc=new xe,DE=new xe,Fx=new xe,Jf=new xe,CE=new xe,Lx=new xe,RE=new xe;class bp{constructor(e=new xe,t=new xe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Pc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Pc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Pc.copy(this.origin).addScaledVector(this.direction,t),Pc.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){DE.copy(e).add(t).multiplyScalar(.5),Fx.copy(t).sub(e).normalize(),Jf.copy(this.origin).sub(DE);const a=e.distanceTo(t)*.5,s=-this.direction.dot(Fx),o=Jf.dot(this.direction),c=-Jf.dot(Fx),u=Jf.lengthSq(),h=Math.abs(1-s*s);let d,m,v,x;if(h>0)if(d=s*c-o,m=s*o-c,x=a*h,d>=0)if(m>=-x)if(m<=x){const b=1/h;d*=b,m*=b,v=d*(d+s*m+2*o)+m*(s*d+m+2*c)+u}else m=a,d=Math.max(0,-(s*m+o)),v=-d*d+m*(m+2*c)+u;else m=-a,d=Math.max(0,-(s*m+o)),v=-d*d+m*(m+2*c)+u;else m<=-x?(d=Math.max(0,-(-s*a+o)),m=d>0?-a:Math.min(Math.max(-a,-c),a),v=-d*d+m*(m+2*c)+u):m<=x?(d=0,m=Math.min(Math.max(-a,-c),a),v=m*(m+2*c)+u):(d=Math.max(0,-(s*a+o)),m=d>0?a:Math.min(Math.max(-a,-c),a),v=-d*d+m*(m+2*c)+u);else m=s>0?-a:a,d=Math.max(0,-(s*m+o)),v=-d*d+m*(m+2*c)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(DE).addScaledVector(Fx,m),v}intersectSphere(e,t){Pc.subVectors(e.center,this.origin);const n=Pc.dot(this.direction),i=Pc.dot(Pc)-n*n,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=n-s,c=n+s;return c<0?null:o<0?this.at(c,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,a,s,o,c;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,m=this.origin;return u>=0?(n=(e.min.x-m.x)*u,i=(e.max.x-m.x)*u):(n=(e.max.x-m.x)*u,i=(e.min.x-m.x)*u),h>=0?(a=(e.min.y-m.y)*h,s=(e.max.y-m.y)*h):(a=(e.max.y-m.y)*h,s=(e.min.y-m.y)*h),n>s||a>i||((a>n||isNaN(n))&&(n=a),(s<i||isNaN(i))&&(i=s),d>=0?(o=(e.min.z-m.z)*d,c=(e.max.z-m.z)*d):(o=(e.max.z-m.z)*d,c=(e.min.z-m.z)*d),n>c||o>i)||((o>n||n!==n)&&(n=o),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Pc)!==null}intersectTriangle(e,t,n,i,a){CE.subVectors(t,e),Lx.subVectors(n,e),RE.crossVectors(CE,Lx);let s=this.direction.dot(RE),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Jf.subVectors(this.origin,e);const c=o*this.direction.dot(Lx.crossVectors(Jf,Lx));if(c<0)return null;const u=o*this.direction.dot(CE.cross(Jf));if(u<0||c+u>s)return null;const h=-o*Jf.dot(RE);return h<0?null:this.at(h/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pn{constructor(e,t,n,i,a,s,o,c,u,h,d,m,v,x,b,M){pn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,a,s,o,c,u,h,d,m,v,x,b,M)}set(e,t,n,i,a,s,o,c,u,h,d,m,v,x,b,M){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=i,_[1]=a,_[5]=s,_[9]=o,_[13]=c,_[2]=u,_[6]=h,_[10]=d,_[14]=m,_[3]=v,_[7]=x,_[11]=b,_[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Um.setFromMatrixColumn(e,0).length(),a=1/Um.setFromMatrixColumn(e,1).length(),s=1/Um.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,a=e.z,s=Math.cos(n),o=Math.sin(n),c=Math.cos(i),u=Math.sin(i),h=Math.cos(a),d=Math.sin(a);if(e.order==="XYZ"){const m=s*h,v=s*d,x=o*h,b=o*d;t[0]=c*h,t[4]=-c*d,t[8]=u,t[1]=v+x*u,t[5]=m-b*u,t[9]=-o*c,t[2]=b-m*u,t[6]=x+v*u,t[10]=s*c}else if(e.order==="YXZ"){const m=c*h,v=c*d,x=u*h,b=u*d;t[0]=m+b*o,t[4]=x*o-v,t[8]=s*u,t[1]=s*d,t[5]=s*h,t[9]=-o,t[2]=v*o-x,t[6]=b+m*o,t[10]=s*c}else if(e.order==="ZXY"){const m=c*h,v=c*d,x=u*h,b=u*d;t[0]=m-b*o,t[4]=-s*d,t[8]=x+v*o,t[1]=v+x*o,t[5]=s*h,t[9]=b-m*o,t[2]=-s*u,t[6]=o,t[10]=s*c}else if(e.order==="ZYX"){const m=s*h,v=s*d,x=o*h,b=o*d;t[0]=c*h,t[4]=x*u-v,t[8]=m*u+b,t[1]=c*d,t[5]=b*u+m,t[9]=v*u-x,t[2]=-u,t[6]=o*c,t[10]=s*c}else if(e.order==="YZX"){const m=s*c,v=s*u,x=o*c,b=o*u;t[0]=c*h,t[4]=b-m*d,t[8]=x*d+v,t[1]=d,t[5]=s*h,t[9]=-o*h,t[2]=-u*h,t[6]=v*d+x,t[10]=m-b*d}else if(e.order==="XZY"){const m=s*c,v=s*u,x=o*c,b=o*u;t[0]=c*h,t[4]=-d,t[8]=u*h,t[1]=m*d+b,t[5]=s*h,t[9]=v*d-x,t[2]=x*d-v,t[6]=o*h,t[10]=b*d+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Qoe,e,Joe)}lookAt(e,t,n){const i=this.elements;return zo.subVectors(e,t),zo.lengthSq()===0&&(zo.z=1),zo.normalize(),eh.crossVectors(n,zo),eh.lengthSq()===0&&(Math.abs(n.z)===1?zo.x+=1e-4:zo.z+=1e-4,zo.normalize(),eh.crossVectors(n,zo)),eh.normalize(),Ix.crossVectors(zo,eh),i[0]=eh.x,i[4]=Ix.x,i[8]=zo.x,i[1]=eh.y,i[5]=Ix.y,i[9]=zo.y,i[2]=eh.z,i[6]=Ix.z,i[10]=zo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,a=this.elements,s=n[0],o=n[4],c=n[8],u=n[12],h=n[1],d=n[5],m=n[9],v=n[13],x=n[2],b=n[6],M=n[10],_=n[14],T=n[3],E=n[7],A=n[11],D=n[15],N=i[0],O=i[4],z=i[8],C=i[12],R=i[1],F=i[5],H=i[9],X=i[13],$=i[2],Y=i[6],I=i[10],Z=i[14],W=i[3],te=i[7],le=i[11],Q=i[15];return a[0]=s*N+o*R+c*$+u*W,a[4]=s*O+o*F+c*Y+u*te,a[8]=s*z+o*H+c*I+u*le,a[12]=s*C+o*X+c*Z+u*Q,a[1]=h*N+d*R+m*$+v*W,a[5]=h*O+d*F+m*Y+v*te,a[9]=h*z+d*H+m*I+v*le,a[13]=h*C+d*X+m*Z+v*Q,a[2]=x*N+b*R+M*$+_*W,a[6]=x*O+b*F+M*Y+_*te,a[10]=x*z+b*H+M*I+_*le,a[14]=x*C+b*X+M*Z+_*Q,a[3]=T*N+E*R+A*$+D*W,a[7]=T*O+E*F+A*Y+D*te,a[11]=T*z+E*H+A*I+D*le,a[15]=T*C+E*X+A*Z+D*Q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],a=e[12],s=e[1],o=e[5],c=e[9],u=e[13],h=e[2],d=e[6],m=e[10],v=e[14],x=e[3],b=e[7],M=e[11],_=e[15];return x*(+a*c*d-i*u*d-a*o*m+n*u*m+i*o*v-n*c*v)+b*(+t*c*v-t*u*m+a*s*m-i*s*v+i*u*h-a*c*h)+M*(+t*u*d-t*o*v-a*s*d+n*s*v+a*o*h-n*u*h)+_*(-i*o*h-t*c*d+t*o*m+i*s*d-n*s*m+n*c*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u=e[7],h=e[8],d=e[9],m=e[10],v=e[11],x=e[12],b=e[13],M=e[14],_=e[15],T=d*M*u-b*m*u+b*c*v-o*M*v-d*c*_+o*m*_,E=x*m*u-h*M*u-x*c*v+s*M*v+h*c*_-s*m*_,A=h*b*u-x*d*u+x*o*v-s*b*v-h*o*_+s*d*_,D=x*d*c-h*b*c-x*o*m+s*b*m+h*o*M-s*d*M,N=t*T+n*E+i*A+a*D;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/N;return e[0]=T*O,e[1]=(b*m*a-d*M*a-b*i*v+n*M*v+d*i*_-n*m*_)*O,e[2]=(o*M*a-b*c*a+b*i*u-n*M*u-o*i*_+n*c*_)*O,e[3]=(d*c*a-o*m*a-d*i*u+n*m*u+o*i*v-n*c*v)*O,e[4]=E*O,e[5]=(h*M*a-x*m*a+x*i*v-t*M*v-h*i*_+t*m*_)*O,e[6]=(x*c*a-s*M*a-x*i*u+t*M*u+s*i*_-t*c*_)*O,e[7]=(s*m*a-h*c*a+h*i*u-t*m*u-s*i*v+t*c*v)*O,e[8]=A*O,e[9]=(x*d*a-h*b*a-x*n*v+t*b*v+h*n*_-t*d*_)*O,e[10]=(s*b*a-x*o*a+x*n*u-t*b*u-s*n*_+t*o*_)*O,e[11]=(h*o*a-s*d*a-h*n*u+t*d*u+s*n*v-t*o*v)*O,e[12]=D*O,e[13]=(h*b*i-x*d*i+x*n*m-t*b*m-h*n*M+t*d*M)*O,e[14]=(x*o*i-s*b*i-x*n*c+t*b*c+s*n*M-t*o*M)*O,e[15]=(s*d*i-h*o*i+h*n*c-t*d*c-s*n*m+t*o*m)*O,this}scale(e){const t=this.elements,n=e.x,i=e.y,a=e.z;return t[0]*=n,t[4]*=i,t[8]*=a,t[1]*=n,t[5]*=i,t[9]*=a,t[2]*=n,t[6]*=i,t[10]*=a,t[3]*=n,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),a=1-n,s=e.x,o=e.y,c=e.z,u=a*s,h=a*o;return this.set(u*s+n,u*o-i*c,u*c+i*o,0,u*o+i*c,h*o+n,h*c-i*s,0,u*c-i*o,h*c+i*s,a*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,a,s){return this.set(1,n,a,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,a=t._x,s=t._y,o=t._z,c=t._w,u=a+a,h=s+s,d=o+o,m=a*u,v=a*h,x=a*d,b=s*h,M=s*d,_=o*d,T=c*u,E=c*h,A=c*d,D=n.x,N=n.y,O=n.z;return i[0]=(1-(b+_))*D,i[1]=(v+A)*D,i[2]=(x-E)*D,i[3]=0,i[4]=(v-A)*N,i[5]=(1-(m+_))*N,i[6]=(M+T)*N,i[7]=0,i[8]=(x+E)*O,i[9]=(M-T)*O,i[10]=(1-(m+b))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let a=Um.set(i[0],i[1],i[2]).length();const s=Um.set(i[4],i[5],i[6]).length(),o=Um.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],nu.copy(this);const u=1/a,h=1/s,d=1/o;return nu.elements[0]*=u,nu.elements[1]*=u,nu.elements[2]*=u,nu.elements[4]*=h,nu.elements[5]*=h,nu.elements[6]*=h,nu.elements[8]*=d,nu.elements[9]*=d,nu.elements[10]*=d,t.setFromRotationMatrix(nu),n.x=a,n.y=s,n.z=o,this}makePerspective(e,t,n,i,a,s,o=Po,c=!1){const u=this.elements,h=2*a/(t-e),d=2*a/(n-i),m=(t+e)/(t-e),v=(n+i)/(n-i);let x,b;if(c)x=a/(s-a),b=s*a/(s-a);else if(o===Po)x=-(s+a)/(s-a),b=-2*s*a/(s-a);else if(o===wv)x=-s/(s-a),b=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=h,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=d,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=x,u[14]=b,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,i,a,s,o=Po,c=!1){const u=this.elements,h=2/(t-e),d=2/(n-i),m=-(t+e)/(t-e),v=-(n+i)/(n-i);let x,b;if(c)x=1/(s-a),b=s/(s-a);else if(o===Po)x=-2/(s-a),b=-(s+a)/(s-a);else if(o===wv)x=-1/(s-a),b=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=h,u[4]=0,u[8]=0,u[12]=m,u[1]=0,u[5]=d,u[9]=0,u[13]=v,u[2]=0,u[6]=0,u[10]=x,u[14]=b,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Um=new xe,nu=new pn,Qoe=new xe(0,0,0),Joe=new xe(1,1,1),eh=new xe,Ix=new xe,zo=new xe,fO=new pn,hO=new ys;class Go{constructor(e=0,t=0,n=0,i=Go.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],c=i[1],u=i[5],h=i[9],d=i[2],m=i[6],v=i[10];switch(t){case"XYZ":this._y=Math.asin(gn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-gn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,v),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(gn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-d,v),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-gn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(gn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(o,v));break;case"XZY":this._z=Math.asin(-gn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return fO.makeRotationFromQuaternion(e),this.setFromRotationMatrix(fO,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return hO.setFromEuler(this),this.setFromQuaternion(hO,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Go.DEFAULT_ORDER="XYZ";class Nv{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ele=0;const dO=new xe,zm=new ys,Hc=new pn,Px=new xe,T0=new xe,tle=new xe,nle=new ys,pO=new xe(1,0,0),mO=new xe(0,1,0),vO=new xe(0,0,1),gO={type:"added"},rle={type:"removed"},Fm={type:"childadded",child:null},OE={type:"childremoved",child:null};class xr extends uc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ele++}),this.uuid=Vo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xr.DEFAULT_UP.clone();const e=new xe,t=new Go,n=new ys,i=new xe(1,1,1);function a(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new pn},normalMatrix:{value:new Bn}}),this.matrix=new pn,this.matrixWorld=new pn,this.matrixAutoUpdate=xr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=xr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Nv,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return zm.setFromAxisAngle(e,t),this.quaternion.multiply(zm),this}rotateOnWorldAxis(e,t){return zm.setFromAxisAngle(e,t),this.quaternion.premultiply(zm),this}rotateX(e){return this.rotateOnAxis(pO,e)}rotateY(e){return this.rotateOnAxis(mO,e)}rotateZ(e){return this.rotateOnAxis(vO,e)}translateOnAxis(e,t){return dO.copy(e).applyQuaternion(this.quaternion),this.position.add(dO.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(pO,e)}translateY(e){return this.translateOnAxis(mO,e)}translateZ(e){return this.translateOnAxis(vO,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Hc.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Px.copy(e):Px.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),T0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Hc.lookAt(T0,Px,this.up):Hc.lookAt(Px,T0,this.up),this.quaternion.setFromRotationMatrix(Hc),i&&(Hc.extractRotation(i.matrixWorld),zm.setFromRotationMatrix(Hc),this.quaternion.premultiply(zm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(gO),Fm.child=e,this.dispatchEvent(Fm),Fm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(rle),OE.child=e,this.dispatchEvent(OE),OE.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Hc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Hc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Hc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(gO),Fm.child=e,this.dispatchEvent(Fm),Fm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const s=this.children[n].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(T0,e,tle),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(T0,nle,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function a(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){const d=c[u];a(e.shapes,d)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,u=this.material.length;c<u;c++)o.push(a(e.materials,this.material[c]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];i.animations.push(a(e.animations,c))}}if(t){const o=s(e.geometries),c=s(e.materials),u=s(e.textures),h=s(e.images),d=s(e.shapes),m=s(e.skeletons),v=s(e.animations),x=s(e.nodes);o.length>0&&(n.geometries=o),c.length>0&&(n.materials=c),u.length>0&&(n.textures=u),h.length>0&&(n.images=h),d.length>0&&(n.shapes=d),m.length>0&&(n.skeletons=m),v.length>0&&(n.animations=v),x.length>0&&(n.nodes=x)}return n.object=i,n;function s(o){const c=[];for(const u in o){const h=o[u];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}xr.DEFAULT_UP=new xe(0,1,0);xr.DEFAULT_MATRIX_AUTO_UPDATE=!0;xr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ru=new xe,Vc=new xe,BE=new xe,qc=new xe,Lm=new xe,Im=new xe,yO=new xe,UE=new xe,zE=new xe,FE=new xe,LE=new Xn,IE=new Xn,PE=new Xn;class ho{constructor(e=new xe,t=new xe,n=new xe){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),ru.subVectors(e,t),i.cross(ru);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,n,i,a){ru.subVectors(i,t),Vc.subVectors(n,t),BE.subVectors(e,t);const s=ru.dot(ru),o=ru.dot(Vc),c=ru.dot(BE),u=Vc.dot(Vc),h=Vc.dot(BE),d=s*u-o*o;if(d===0)return a.set(0,0,0),null;const m=1/d,v=(u*c-o*h)*m,x=(s*h-o*c)*m;return a.set(1-v-x,x,v)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,qc)===null?!1:qc.x>=0&&qc.y>=0&&qc.x+qc.y<=1}static getInterpolation(e,t,n,i,a,s,o,c){return this.getBarycoord(e,t,n,i,qc)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,qc.x),c.addScaledVector(s,qc.y),c.addScaledVector(o,qc.z),c)}static getInterpolatedAttribute(e,t,n,i,a,s){return LE.setScalar(0),IE.setScalar(0),PE.setScalar(0),LE.fromBufferAttribute(e,t),IE.fromBufferAttribute(e,n),PE.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(LE,a.x),s.addScaledVector(IE,a.y),s.addScaledVector(PE,a.z),s}static isFrontFacing(e,t,n,i){return ru.subVectors(n,t),Vc.subVectors(e,t),ru.cross(Vc).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ru.subVectors(this.c,this.b),Vc.subVectors(this.a,this.b),ru.cross(Vc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ho.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ho.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,a){return ho.getInterpolation(e,this.a,this.b,this.c,t,n,i,a)}containsPoint(e){return ho.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ho.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,a=this.c;let s,o;Lm.subVectors(i,n),Im.subVectors(a,n),UE.subVectors(e,n);const c=Lm.dot(UE),u=Im.dot(UE);if(c<=0&&u<=0)return t.copy(n);zE.subVectors(e,i);const h=Lm.dot(zE),d=Im.dot(zE);if(h>=0&&d<=h)return t.copy(i);const m=c*d-h*u;if(m<=0&&c>=0&&h<=0)return s=c/(c-h),t.copy(n).addScaledVector(Lm,s);FE.subVectors(e,a);const v=Lm.dot(FE),x=Im.dot(FE);if(x>=0&&v<=x)return t.copy(a);const b=v*u-c*x;if(b<=0&&u>=0&&x<=0)return o=u/(u-x),t.copy(n).addScaledVector(Im,o);const M=h*x-v*d;if(M<=0&&d-h>=0&&v-x>=0)return yO.subVectors(a,i),o=(d-h)/(d-h+(v-x)),t.copy(i).addScaledVector(yO,o);const _=1/(M+b+m);return s=b*_,o=m*_,t.copy(n).addScaledVector(Lm,s).addScaledVector(Im,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const m5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},th={h:0,s:0,l:0},Hx={h:0,s:0,l:0};function HE(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class zt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ds){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,pr.colorSpaceToWorking(this,t),this}setRGB(e,t,n,i=pr.workingColorSpace){return this.r=e,this.g=t,this.b=n,pr.colorSpaceToWorking(this,i),this}setHSL(e,t,n,i=pr.workingColorSpace){if(e=Cw(e,1),t=gn(t,0,1),n=gn(n,0,1),t===0)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+t):n+t-n*t,s=2*n-a;this.r=HE(s,a,e+1/3),this.g=HE(s,a,e),this.b=HE(s,a,e-1/3)}return pr.colorSpaceToWorking(this,i),this}setStyle(e,t=ds){function n(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ds){const n=m5[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=nf(e.r),this.g=nf(e.g),this.b=nf(e.b),this}copyLinearToSRGB(e){return this.r=cv(e.r),this.g=cv(e.g),this.b=cv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ds){return pr.workingToColorSpace(fs.copy(this),e),Math.round(gn(fs.r*255,0,255))*65536+Math.round(gn(fs.g*255,0,255))*256+Math.round(gn(fs.b*255,0,255))}getHexString(e=ds){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=pr.workingColorSpace){pr.workingToColorSpace(fs.copy(this),t);const n=fs.r,i=fs.g,a=fs.b,s=Math.max(n,i,a),o=Math.min(n,i,a);let c,u;const h=(o+s)/2;if(o===s)c=0,u=0;else{const d=s-o;switch(u=h<=.5?d/(s+o):d/(2-s-o),s){case n:c=(i-a)/d+(i<a?6:0);break;case i:c=(a-n)/d+2;break;case a:c=(n-i)/d+4;break}c/=6}return e.h=c,e.s=u,e.l=h,e}getRGB(e,t=pr.workingColorSpace){return pr.workingToColorSpace(fs.copy(this),t),e.r=fs.r,e.g=fs.g,e.b=fs.b,e}getStyle(e=ds){pr.workingToColorSpace(fs.copy(this),e);const t=fs.r,n=fs.g,i=fs.b;return e!==ds?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(th),this.setHSL(th.h+e,th.s+t,th.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(th),e.getHSL(Hx);const n=J0(th.h,Hx.h,t),i=J0(th.s,Hx.s,t),a=J0(th.l,Hx.l,t);return this.setHSL(n,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*i,this.g=a[1]*t+a[4]*n+a[7]*i,this.b=a[2]*t+a[5]*n+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const fs=new zt;zt.NAMES=m5;let ile=0;class Ms extends uc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ile++}),this.uuid=Vo(),this.name="",this.type="Material",this.blending=Kd,this.side=sf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=__,this.blendDst=S_,this.blendEquation=oh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new zt(0,0,0),this.blendAlpha=0,this.depthFunc=ap,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=c2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vd,this.stencilZFail=Vd,this.stencilZPass=Vd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Kd&&(n.blending=this.blending),this.side!==sf&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==__&&(n.blendSrc=this.blendSrc),this.blendDst!==S_&&(n.blendDst=this.blendDst),this.blendEquation!==oh&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ap&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==c2&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Vd&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Vd&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Vd&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(a){const s=[];for(const o in a){const c=a[o];delete c.metadata,s.push(c)}return s}if(t){const a=i(e.textures),s=i(e.images);a.length>0&&(n.textures=a),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let a=0;a!==i;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Oh extends Ms{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Go,this.combine=Hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zc=ale();function ale(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(n[c]=0,n[c|256]=32768,i[c]=24,i[c|256]=24):u<-14?(n[c]=1024>>-u-14,n[c|256]=1024>>-u-14|32768,i[c]=-u-1,i[c|256]=-u-1):u<=15?(n[c]=u+15<<10,n[c|256]=u+15<<10|32768,i[c]=13,i[c|256]=13):u<128?(n[c]=31744,n[c|256]=64512,i[c]=24,i[c|256]=24):(n[c]=31744,n[c|256]=64512,i[c]=13,i[c|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,h=0;for(;(u&8388608)===0;)u<<=1,h-=8388608;u&=-8388609,h+=947912704,a[c]=u|h}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function uo(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=gn(r,-65504,65504),Zc.floatView[0]=r;const e=Zc.uint32View[0],t=e>>23&511;return Zc.baseTable[t]+((e&8388607)>>Zc.shiftTable[t])}function V0(r){const e=r>>10;return Zc.uint32View[0]=Zc.mantissaTable[Zc.offsetTable[e]+(r&1023)]+Zc.exponentTable[e],Zc.floatView[0]}class sle{static toHalfFloat(e){return uo(e)}static fromHalfFloat(e){return V0(e)}}const Wi=new xe,Vx=new gt;let ole=0;class Wr{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:ole++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=vy,this.updateRanges=[],this.gpuType=po,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Vx.fromBufferAttribute(this,t),Vx.applyMatrix3(e),this.setXY(t,Vx.x,Vx.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix3(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Wi.fromBufferAttribute(this,t),Wi.applyMatrix4(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Wi.fromBufferAttribute(this,t),Wi.applyNormalMatrix(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Wi.fromBufferAttribute(this,t),Wi.transformDirection(e),this.setXYZ(t,Wi.x,Wi.y,Wi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=js(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=zn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=js(t,this.array)),t}setX(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=js(t,this.array)),t}setY(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=js(t,this.array)),t}setW(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),i=zn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,a){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),i=zn(i,this.array),a=zn(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==vy&&(e.usage=this.usage),e}}class lle extends Wr{constructor(e,t,n){super(new Int8Array(e),t,n)}}class ule extends Wr{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class cle extends Wr{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class fle extends Wr{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Ow extends Wr{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class hle extends Wr{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Bw extends Wr{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class dle extends Wr{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=V0(this.array[e*this.itemSize]);return this.normalized&&(t=js(t,this.array)),t}setX(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize]=uo(t),this}getY(e){let t=V0(this.array[e*this.itemSize+1]);return this.normalized&&(t=js(t,this.array)),t}setY(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+1]=uo(t),this}getZ(e){let t=V0(this.array[e*this.itemSize+2]);return this.normalized&&(t=js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+2]=uo(t),this}getW(e){let t=V0(this.array[e*this.itemSize+3]);return this.normalized&&(t=js(t,this.array)),t}setW(e,t){return this.normalized&&(t=zn(t,this.array)),this.array[e*this.itemSize+3]=uo(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array)),this.array[e+0]=uo(t),this.array[e+1]=uo(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),i=zn(i,this.array)),this.array[e+0]=uo(t),this.array[e+1]=uo(n),this.array[e+2]=uo(i),this}setXYZW(e,t,n,i,a){return e*=this.itemSize,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),i=zn(i,this.array),a=zn(a,this.array)),this.array[e+0]=uo(t),this.array[e+1]=uo(n),this.array[e+2]=uo(i),this.array[e+3]=uo(a),this}}class Ht extends Wr{constructor(e,t,n){super(new Float32Array(e),t,n)}}let ple=0;const ml=new pn,VE=new xr,Pm=new xe,Fo=new oa,N0=new oa,Aa=new xe;class In extends uc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ple++}),this.uuid=Vo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(h5(e)?Bw:Ow)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new Bn().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ml.makeRotationFromQuaternion(e),this.applyMatrix4(ml),this}rotateX(e){return ml.makeRotationX(e),this.applyMatrix4(ml),this}rotateY(e){return ml.makeRotationY(e),this.applyMatrix4(ml),this}rotateZ(e){return ml.makeRotationZ(e),this.applyMatrix4(ml),this}translate(e,t,n){return ml.makeTranslation(e,t,n),this.applyMatrix4(ml),this}scale(e,t,n){return ml.makeScale(e,t,n),this.applyMatrix4(ml),this}lookAt(e){return VE.lookAt(e),VE.updateMatrix(),this.applyMatrix4(VE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pm).negate(),this.translate(Pm.x,Pm.y,Pm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,a=e.length;i<a;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Ht(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const a=e[i];t.setXYZ(i,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new oa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new xe(-1/0,-1/0,-1/0),new xe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const a=t[n];Fo.setFromBufferAttribute(a),this.morphTargetsRelative?(Aa.addVectors(this.boundingBox.min,Fo.min),this.boundingBox.expandByPoint(Aa),Aa.addVectors(this.boundingBox.max,Fo.max),this.boundingBox.expandByPoint(Aa)):(this.boundingBox.expandByPoint(Fo.min),this.boundingBox.expandByPoint(Fo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new la);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new xe,1/0);return}if(e){const n=this.boundingSphere.center;if(Fo.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];N0.setFromBufferAttribute(o),this.morphTargetsRelative?(Aa.addVectors(Fo.min,N0.min),Fo.expandByPoint(Aa),Aa.addVectors(Fo.max,N0.max),Fo.expandByPoint(Aa)):(Fo.expandByPoint(N0.min),Fo.expandByPoint(N0.max))}Fo.getCenter(n);let i=0;for(let a=0,s=e.count;a<s;a++)Aa.fromBufferAttribute(e,a),i=Math.max(i,n.distanceToSquared(Aa));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],c=this.morphTargetsRelative;for(let u=0,h=o.count;u<h;u++)Aa.fromBufferAttribute(o,u),c&&(Pm.fromBufferAttribute(e,u),Aa.add(Pm)),i=Math.max(i,n.distanceToSquared(Aa))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Wr(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),o=[],c=[];for(let z=0;z<n.count;z++)o[z]=new xe,c[z]=new xe;const u=new xe,h=new xe,d=new xe,m=new gt,v=new gt,x=new gt,b=new xe,M=new xe;function _(z,C,R){u.fromBufferAttribute(n,z),h.fromBufferAttribute(n,C),d.fromBufferAttribute(n,R),m.fromBufferAttribute(a,z),v.fromBufferAttribute(a,C),x.fromBufferAttribute(a,R),h.sub(u),d.sub(u),v.sub(m),x.sub(m);const F=1/(v.x*x.y-x.x*v.y);isFinite(F)&&(b.copy(h).multiplyScalar(x.y).addScaledVector(d,-v.y).multiplyScalar(F),M.copy(d).multiplyScalar(v.x).addScaledVector(h,-x.x).multiplyScalar(F),o[z].add(b),o[C].add(b),o[R].add(b),c[z].add(M),c[C].add(M),c[R].add(M))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let z=0,C=T.length;z<C;++z){const R=T[z],F=R.start,H=R.count;for(let X=F,$=F+H;X<$;X+=3)_(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const E=new xe,A=new xe,D=new xe,N=new xe;function O(z){D.fromBufferAttribute(i,z),N.copy(D);const C=o[z];E.copy(C),E.sub(D.multiplyScalar(D.dot(C))).normalize(),A.crossVectors(N,C);const F=A.dot(c[z])<0?-1:1;s.setXYZW(z,E.x,E.y,E.z,F)}for(let z=0,C=T.length;z<C;++z){const R=T[z],F=R.start,H=R.count;for(let X=F,$=F+H;X<$;X+=3)O(e.getX(X+0)),O(e.getX(X+1)),O(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Wr(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let m=0,v=n.count;m<v;m++)n.setXYZ(m,0,0,0);const i=new xe,a=new xe,s=new xe,o=new xe,c=new xe,u=new xe,h=new xe,d=new xe;if(e)for(let m=0,v=e.count;m<v;m+=3){const x=e.getX(m+0),b=e.getX(m+1),M=e.getX(m+2);i.fromBufferAttribute(t,x),a.fromBufferAttribute(t,b),s.fromBufferAttribute(t,M),h.subVectors(s,a),d.subVectors(i,a),h.cross(d),o.fromBufferAttribute(n,x),c.fromBufferAttribute(n,b),u.fromBufferAttribute(n,M),o.add(h),c.add(h),u.add(h),n.setXYZ(x,o.x,o.y,o.z),n.setXYZ(b,c.x,c.y,c.z),n.setXYZ(M,u.x,u.y,u.z)}else for(let m=0,v=t.count;m<v;m+=3)i.fromBufferAttribute(t,m+0),a.fromBufferAttribute(t,m+1),s.fromBufferAttribute(t,m+2),h.subVectors(s,a),d.subVectors(i,a),h.cross(d),n.setXYZ(m+0,h.x,h.y,h.z),n.setXYZ(m+1,h.x,h.y,h.z),n.setXYZ(m+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Aa.fromBufferAttribute(e,t),Aa.normalize(),e.setXYZ(t,Aa.x,Aa.y,Aa.z)}toNonIndexed(){function e(o,c){const u=o.array,h=o.itemSize,d=o.normalized,m=new u.constructor(c.length*h);let v=0,x=0;for(let b=0,M=c.length;b<M;b++){o.isInterleavedBufferAttribute?v=c[b]*o.data.stride+o.offset:v=c[b]*h;for(let _=0;_<h;_++)m[x++]=u[v++]}return new Wr(m,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new In,n=this.index.array,i=this.attributes;for(const o in i){const c=i[o],u=e(c,n);t.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const c=[],u=a[o];for(let h=0,d=u.length;h<d;h++){const m=u[h],v=e(m,n);c.push(v)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,c=s.length;o<c;o++){const u=s[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const u=n[c];e.data.attributes[c]=u.toJSON(e.data)}const i={};let a=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],h=[];for(let d=0,m=u.length;d<m;d++){const v=u[d];h.push(v.toJSON(e.data))}h.length>0&&(i[c]=h,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const i=e.attributes;for(const u in i){const h=i[u];this.setAttribute(u,h.clone(t))}const a=e.morphAttributes;for(const u in a){const h=[],d=a[u];for(let m=0,v=d.length;m<v;m++)h.push(d[m].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,h=s.length;u<h;u++){const d=s[u];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const xO=new pn,Ad=new bp,qx=new la,bO=new xe,Gx=new xe,kx=new xe,Xx=new xe,qE=new xe,jx=new xe,_O=new xe,Yx=new xe;class Vi extends xr{constructor(e=new In,t=new Oh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,a=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){jx.set(0,0,0);for(let c=0,u=a.length;c<u;c++){const h=o[c],d=a[c];h!==0&&(qE.fromBufferAttribute(d,e),s?jx.addScaledVector(qE,h):jx.addScaledVector(qE.sub(t),h))}t.add(jx)}return t}raycast(e,t){const n=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),qx.copy(n.boundingSphere),qx.applyMatrix4(a),Ad.copy(e.ray).recast(e.near),!(qx.containsPoint(Ad.origin)===!1&&(Ad.intersectSphere(qx,bO)===null||Ad.origin.distanceToSquared(bO)>(e.far-e.near)**2))&&(xO.copy(a).invert(),Ad.copy(e.ray).applyMatrix4(xO),!(n.boundingBox!==null&&Ad.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Ad)))}_computeIntersections(e,t,n){let i;const a=this.geometry,s=this.material,o=a.index,c=a.attributes.position,u=a.attributes.uv,h=a.attributes.uv1,d=a.attributes.normal,m=a.groups,v=a.drawRange;if(o!==null)if(Array.isArray(s))for(let x=0,b=m.length;x<b;x++){const M=m[x],_=s[M.materialIndex],T=Math.max(M.start,v.start),E=Math.min(o.count,Math.min(M.start+M.count,v.start+v.count));for(let A=T,D=E;A<D;A+=3){const N=o.getX(A),O=o.getX(A+1),z=o.getX(A+2);i=Wx(this,_,e,n,u,h,d,N,O,z),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=M.materialIndex,t.push(i))}}else{const x=Math.max(0,v.start),b=Math.min(o.count,v.start+v.count);for(let M=x,_=b;M<_;M+=3){const T=o.getX(M),E=o.getX(M+1),A=o.getX(M+2);i=Wx(this,s,e,n,u,h,d,T,E,A),i&&(i.faceIndex=Math.floor(M/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(s))for(let x=0,b=m.length;x<b;x++){const M=m[x],_=s[M.materialIndex],T=Math.max(M.start,v.start),E=Math.min(c.count,Math.min(M.start+M.count,v.start+v.count));for(let A=T,D=E;A<D;A+=3){const N=A,O=A+1,z=A+2;i=Wx(this,_,e,n,u,h,d,N,O,z),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=M.materialIndex,t.push(i))}}else{const x=Math.max(0,v.start),b=Math.min(c.count,v.start+v.count);for(let M=x,_=b;M<_;M+=3){const T=M,E=M+1,A=M+2;i=Wx(this,s,e,n,u,h,d,T,E,A),i&&(i.faceIndex=Math.floor(M/3),t.push(i))}}}}function mle(r,e,t,n,i,a,s,o){let c;if(e.side===gs?c=n.intersectTriangle(s,a,i,!0,o):c=n.intersectTriangle(i,a,s,e.side===sf,o),c===null)return null;Yx.copy(o),Yx.applyMatrix4(r.matrixWorld);const u=t.ray.origin.distanceTo(Yx);return u<t.near||u>t.far?null:{distance:u,point:Yx.clone(),object:r}}function Wx(r,e,t,n,i,a,s,o,c,u){r.getVertexPosition(o,Gx),r.getVertexPosition(c,kx),r.getVertexPosition(u,Xx);const h=mle(r,e,t,n,Gx,kx,Xx,_O);if(h){const d=new xe;ho.getBarycoord(_O,Gx,kx,Xx,d),i&&(h.uv=ho.getInterpolatedAttribute(i,o,c,u,d,new gt)),a&&(h.uv1=ho.getInterpolatedAttribute(a,o,c,u,d,new gt)),s&&(h.normal=ho.getInterpolatedAttribute(s,o,c,u,d,new xe),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));const m={a:o,b:c,c:u,normal:new xe,materialIndex:0};ho.getNormal(Gx,kx,Xx,m.normal),h.face=m,h.barycoord=d}return h}class _p extends In{constructor(e=1,t=1,n=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const c=[],u=[],h=[],d=[];let m=0,v=0;x("z","y","x",-1,-1,n,t,e,s,a,0),x("z","y","x",1,-1,n,t,-e,s,a,1),x("x","z","y",1,1,e,n,t,i,s,2),x("x","z","y",1,-1,e,n,-t,i,s,3),x("x","y","z",1,-1,e,t,n,i,a,4),x("x","y","z",-1,-1,e,t,-n,i,a,5),this.setIndex(c),this.setAttribute("position",new Ht(u,3)),this.setAttribute("normal",new Ht(h,3)),this.setAttribute("uv",new Ht(d,2));function x(b,M,_,T,E,A,D,N,O,z,C){const R=A/O,F=D/z,H=A/2,X=D/2,$=N/2,Y=O+1,I=z+1;let Z=0,W=0;const te=new xe;for(let le=0;le<I;le++){const Q=le*F-X;for(let k=0;k<Y;k++){const ae=k*R-H;te[b]=ae*T,te[M]=Q*E,te[_]=$,u.push(te.x,te.y,te.z),te[b]=0,te[M]=0,te[_]=N>0?1:-1,h.push(te.x,te.y,te.z),d.push(k/O),d.push(1-le/z),Z+=1}}for(let le=0;le<z;le++)for(let Q=0;Q<O;Q++){const k=m+Q+Y*le,ae=m+Q+Y*(le+1),J=m+(Q+1)+Y*(le+1),De=m+(Q+1)+Y*le;c.push(k,ae,De),c.push(ae,J,De),W+=6}o.addGroup(v,W,C),v+=W,m+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _p(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Dv(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Xs(r){const e={};for(let t=0;t<r.length;t++){const n=Dv(r[t]);for(const i in n)e[i]=n[i]}return e}function vle(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function v5(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:pr.workingColorSpace}const xy={clone:Dv,merge:Xs};var gle=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,yle=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ko extends Ms{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=gle,this.fragmentShader=yle,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Dv(e.uniforms),this.uniformsGroups=vle(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ZS extends xr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pn,this.projectionMatrix=new pn,this.projectionMatrixInverse=new pn,this.coordinateSystem=Po,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const nh=new xe,SO=new gt,MO=new gt;class Hi extends ZS{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Tv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Jd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Tv*2*Math.atan(Math.tan(Jd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){nh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(nh.x,nh.y).multiplyScalar(-e/nh.z),nh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(nh.x,nh.y).multiplyScalar(-e/nh.z)}getViewSize(e,t){return this.getViewBounds(e,SO,MO),t.subVectors(MO,SO)}setViewOffset(e,t,n,i,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Jd*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/c,t-=s.offsetY*n/u,i*=s.width/c,n*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Hm=-90,Vm=1;class g5 extends xr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Hi(Hm,Vm,e,t);i.layers=this.layers,this.add(i);const a=new Hi(Hm,Vm,e,t);a.layers=this.layers,this.add(a);const s=new Hi(Hm,Vm,e,t);s.layers=this.layers,this.add(s);const o=new Hi(Hm,Vm,e,t);o.layers=this.layers,this.add(o);const c=new Hi(Hm,Vm,e,t);c.layers=this.layers,this.add(c);const u=new Hi(Hm,Vm,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,a,s,o,c]=t;for(const u of t)this.remove(u);if(e===Po)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===wv)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,c,u,h]=this.children,d=e.getRenderTarget(),m=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const b=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,a),e.setRenderTarget(n,1,i),e.render(t,s),e.setRenderTarget(n,2,i),e.render(t,o),e.setRenderTarget(n,3,i),e.render(t,c),e.setRenderTarget(n,4,i),e.render(t,u),n.texture.generateMipmaps=b,e.setRenderTarget(n,5,i),e.render(t,h),e.setRenderTarget(d,m,v),e.xr.enabled=x,n.texture.needsPMREMUpdate=!0}}class qy extends Ni{constructor(e=[],t=of,n,i,a,s,o,c,u,h){super(e,t,n,i,a,s,o,c,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class y5 extends ac{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new qy(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new _p(5,5,5),a=new ko({name:"CubemapFromEquirect",uniforms:Dv(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:gs,blending:tf});a.uniforms.tEquirect.value=t;const s=new Vi(i,a),o=t.minFilter;return t.minFilter===ec&&(t.minFilter=sa),new g5(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,n=!0,i=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,i);e.setRenderTarget(a)}}class av extends xr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const xle={type:"move"};class Vb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new av,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new av,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new xe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new xe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new av,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new xe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new xe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,a=null,s=null;const o=this._targetRay,c=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const b of e.hand.values()){const M=t.getJointPose(b,n),_=this._getHandJoint(u,b);M!==null&&(_.matrix.fromArray(M.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=M.radius),_.visible=M!==null}const h=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],m=h.position.distanceTo(d.position),v=.02,x=.005;u.inputState.pinching&&m>v+x?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=v-x&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(xle)))}return o!==null&&(o.visible=i!==null),c!==null&&(c.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new av;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class KS{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new zt(e),this.density=t}clone(){return new KS(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class QS{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new zt(e),this.near=t,this.far=n}clone(){return new QS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Uw=class extends xr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Go,this.environmentIntensity=1,this.environmentRotation=new Go,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class JS{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=vy,this.updateRanges=[],this.version=0,this.uuid=Vo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ks=new xe;class Ho{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ks.fromBufferAttribute(this,t),ks.applyMatrix4(e),this.setXYZ(t,ks.x,ks.y,ks.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ks.fromBufferAttribute(this,t),ks.applyNormalMatrix(e),this.setXYZ(t,ks.x,ks.y,ks.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ks.fromBufferAttribute(this,t),ks.transformDirection(e),this.setXYZ(t,ks.x,ks.y,ks.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=js(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=zn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=js(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=js(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=js(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=js(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),i=zn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=zn(t,this.array),n=zn(n,this.array),i=zn(i,this.array),a=zn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new Wr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ho(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class zw extends Ms{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let qm;const D0=new xe,Gm=new xe,km=new xe,Xm=new gt,C0=new gt,x5=new pn,$x=new xe,R0=new xe,Zx=new xe,EO=new gt,GE=new gt,AO=new gt;class b5 extends xr{constructor(e=new zw){if(super(),this.isSprite=!0,this.type="Sprite",qm===void 0){qm=new In;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new JS(t,5);qm.setIndex([0,1,2,0,2,3]),qm.setAttribute("position",new Ho(n,3,0,!1)),qm.setAttribute("uv",new Ho(n,2,3,!1))}this.geometry=qm,this.material=e,this.center=new gt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gm.setFromMatrixScale(this.matrixWorld),x5.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),km.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Gm.multiplyScalar(-km.z);const n=this.material.rotation;let i,a;n!==0&&(a=Math.cos(n),i=Math.sin(n));const s=this.center;Kx($x.set(-.5,-.5,0),km,s,Gm,i,a),Kx(R0.set(.5,-.5,0),km,s,Gm,i,a),Kx(Zx.set(.5,.5,0),km,s,Gm,i,a),EO.set(0,0),GE.set(1,0),AO.set(1,1);let o=e.ray.intersectTriangle($x,R0,Zx,!1,D0);if(o===null&&(Kx(R0.set(-.5,.5,0),km,s,Gm,i,a),GE.set(0,1),o=e.ray.intersectTriangle($x,Zx,R0,!1,D0),o===null))return;const c=e.ray.origin.distanceTo(D0);c<e.near||c>e.far||t.push({distance:c,point:D0.clone(),uv:ho.getInterpolation(D0,$x,R0,Zx,EO,GE,AO,new gt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Kx(r,e,t,n,i,a){Xm.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(C0.x=a*Xm.x-i*Xm.y,C0.y=i*Xm.x+a*Xm.y):C0.copy(Xm),r.copy(e),r.x+=C0.x,r.y+=C0.y,r.applyMatrix4(x5)}const Qx=new xe,wO=new xe;class _5 extends xr{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const a=t[n];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let a;for(a=0;a<i.length&&!(t<i[a].distance);a++);return i.splice(a,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),e<a)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Qx.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Qx);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Qx.setFromMatrixPosition(e.matrixWorld),wO.setFromMatrixPosition(this.matrixWorld);const n=Qx.distanceTo(wO)/e.zoom;t[0].object.visible=!0;let i,a;for(i=1,a=t.length;i<a;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),n>=s)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,a=n.length;i<a;i++){const s=n[i];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const TO=new xe,NO=new Xn,DO=new Xn,ble=new xe,CO=new pn,Jx=new xe,kE=new la,RO=new pn,XE=new bp;class S5 extends Vi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=u2,this.bindMatrix=new pn,this.bindMatrixInverse=new pn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new oa),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Jx),this.boundingBox.expandByPoint(Jx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new la),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Jx),this.boundingSphere.expandByPoint(Jx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),kE.copy(this.boundingSphere),kE.applyMatrix4(i),e.ray.intersectsSphere(kE)!==!1&&(RO.copy(i).invert(),XE.copy(e.ray).applyMatrix4(RO),!(this.boundingBox!==null&&XE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,XE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Xn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===u2?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===QF?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;NO.fromBufferAttribute(i.attributes.skinIndex,e),DO.fromBufferAttribute(i.attributes.skinWeight,e),TO.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=DO.getComponent(a);if(s!==0){const o=NO.getComponent(a);CO.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(ble.copy(TO).applyMatrix4(CO),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Fw extends xr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class rc extends Ni{constructor(e=null,t=1,n=1,i,a,s,o,c,u=ja,h=ja,d,m){super(null,s,o,c,u,h,i,a,d,m),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const OO=new pn,_le=new pn;class eM{constructor(e=[],t=[]){this.uuid=Vo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new pn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new pn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:_le;OO.multiplyMatrices(o,t[a]),OO.toArray(n,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new eM(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new rc(t,e,e,ms,po);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const a=e.bones[n];let s=t[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new Fw),this.bones.push(s),this.boneInverses.push(new pn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const s=t[i];e.bones.push(s.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class Cv extends Wr{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const jm=new pn,BO=new pn,eb=[],UO=new oa,Sle=new pn,O0=new Vi,B0=new la;class M5 extends Vi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Cv(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Sle)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new oa),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,jm),UO.copy(e.boundingBox).applyMatrix4(jm),this.boundingBox.union(UO)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new la),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,jm),B0.copy(e.boundingSphere).applyMatrix4(jm),this.boundingSphere.union(B0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,a=n.length+1,s=e*a+1;for(let o=0;o<n.length;o++)n[o]=i[s+o]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(O0.geometry=this.geometry,O0.material=this.material,O0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),B0.copy(this.boundingSphere),B0.applyMatrix4(n),e.ray.intersectsSphere(B0)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,jm),BO.multiplyMatrices(n,jm),O0.matrixWorld=BO,O0.raycast(e,eb);for(let s=0,o=eb.length;s<o;s++){const c=eb[s];c.instanceId=a,c.object=this,t.push(c)}eb.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Cv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new rc(new Float32Array(i*this.count),i,this.count,kS,po));const a=this.morphTexture.source.data.data;let s=0;for(let u=0;u<n.length;u++)s+=n[u];const o=this.geometry.morphTargetsRelative?1:1-s,c=i*e;a[c]=o,a.set(n,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const jE=new xe,Mle=new xe,Ele=new Bn;class Zu{constructor(e=new xe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=jE.subVectors(n,t).cross(Mle.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(jE),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Ele.getNormalMatrix(e),i=this.coplanarPoint(jE).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const wd=new la,Ale=new gt(.5,.5),tb=new xe;class Kv{constructor(e=new Zu,t=new Zu,n=new Zu,i=new Zu,a=new Zu,s=new Zu){this.planes=[e,t,n,i,a,s]}set(e,t,n,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Po,n=!1){const i=this.planes,a=e.elements,s=a[0],o=a[1],c=a[2],u=a[3],h=a[4],d=a[5],m=a[6],v=a[7],x=a[8],b=a[9],M=a[10],_=a[11],T=a[12],E=a[13],A=a[14],D=a[15];if(i[0].setComponents(u-s,v-h,_-x,D-T).normalize(),i[1].setComponents(u+s,v+h,_+x,D+T).normalize(),i[2].setComponents(u+o,v+d,_+b,D+E).normalize(),i[3].setComponents(u-o,v-d,_-b,D-E).normalize(),n)i[4].setComponents(c,m,M,A).normalize(),i[5].setComponents(u-c,v-m,_-M,D-A).normalize();else if(i[4].setComponents(u-c,v-m,_-M,D-A).normalize(),t===Po)i[5].setComponents(u+c,v+m,_+M,D+A).normalize();else if(t===wv)i[5].setComponents(c,m,M,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),wd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),wd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(wd)}intersectsSprite(e){wd.center.set(0,0,0);const t=Ale.distanceTo(e.center);return wd.radius=.7071067811865476+t,wd.applyMatrix4(e.matrixWorld),this.intersectsSphere(wd)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(tb.x=i.normal.x>0?e.max.x:e.min.x,tb.y=i.normal.y>0?e.max.y:e.min.y,tb.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(tb)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Xu=new pn,ju=new Kv;class tM{constructor(){this.coordinateSystem=Po}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Xu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),ju.setFromProjectionMatrix(Xu,i.coordinateSystem,i.reversedDepth),ju.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Xu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),ju.setFromProjectionMatrix(Xu,i.coordinateSystem,i.reversedDepth),ju.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Xu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),ju.setFromProjectionMatrix(Xu,i.coordinateSystem,i.reversedDepth),ju.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Xu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),ju.setFromProjectionMatrix(Xu,i.coordinateSystem,i.reversedDepth),ju.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Xu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),ju.setFromProjectionMatrix(Xu,i.coordinateSystem,i.reversedDepth),ju.containsPoint(e))return!0}return!1}clone(){return new tM}}function YE(r,e){return r-e}function wle(r,e){return r.z-e.z}function Tle(r,e){return e.z-r.z}class Nle{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=i}reset(){this.list.length=0,this.index=0}}const lo=new pn,Dle=new zt(1,1,1),zO=new Kv,Cle=new tM,nb=new oa,Td=new la,U0=new xe,FO=new xe,Rle=new xe,WE=new Nle,hs=new Vi,rb=[];function Ole(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let a=0;a<i;a++)for(let s=0;s<n;s++)e.setComponent(a+t,s,r.getComponent(a,s))}else e.array.set(r.array,t*n);e.needsUpdate=!0}function Nd(r,e){if(r.constructor!==e.constructor){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)e[n]=r[n]}else{const t=Math.min(r.length,e.length);e.set(new r.constructor(r.buffer,0,t))}}class E5 extends Vi{constructor(e,t,n=t*2,i){super(new In,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new rc(t,e,e,ms,po);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new rc(t,e,e,Vy,lf);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new rc(t,e,e,ms,po);n.colorSpace=pr.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:c,normalized:u}=s,h=new o.constructor(n*c),d=new Wr(h,c,u);t.setAttribute(a,d)}if(e.getIndex()!==null){const a=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Wr(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),a=t.getAttribute(n);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new oa);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,lo),this.getBoundingBoxAt(a,nb).applyMatrix4(lo),e.union(nb)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new la);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,lo),this.getBoundingSphereAt(a,Td).applyMatrix4(lo),e.union(Td)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(YE),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const a=this._matricesTexture;lo.identity().toArray(a.image.data,i*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(Dle.toArray(s.image.data,i*4),s.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?s.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(YE),c=this._availableGeometryIds.shift(),a[c]=i):(c=this._geometryCount,this._geometryCount++,a.push(i)),this.setGeometryAt(c,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,a=n.getIndex(),s=t.getIndex(),o=this._geometryInfo[e];if(i&&s.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=o.vertexStart,u=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const h in n.attributes){const d=t.getAttribute(h),m=n.getAttribute(h);Ole(d,m,c);const v=d.itemSize;for(let x=d.count,b=u;x<b;x++){const M=c+x;for(let _=0;_<v;_++)m.setComponent(M,_,0)}m.needsUpdate=!0,m.addUpdateRange(c*v,u*v)}if(i){const h=o.indexStart,d=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let m=0;m<s.count;m++)a.setX(h+m,c+s.getX(m));for(let m=s.count,v=d;m<v;m++)a.setX(h+m,c);a.needsUpdate=!0,a.addUpdateRange(h,o.reservedIndexCount)}return o.start=i?o.indexStart:o.vertexStart,o.count=i?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,a=n.length;i<a;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((s,o)=>o).sort((s,o)=>n[s].vertexStart-n[o].vertexStart),a=this.geometry;for(let s=0,o=n.length;s<o;s++){const c=i[s],u=n[c];if(u.active!==!1){if(a.index!==null){if(u.indexStart!==t){const{indexStart:h,vertexStart:d,reservedIndexCount:m}=u,v=a.index,x=v.array,b=e-d;for(let M=h;M<h+m;M++)x[M]=x[M]+b;v.array.copyWithin(t,h,h+m),v.addUpdateRange(t,m),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:h,reservedVertexCount:d}=u,m=a.attributes;for(const v in m){const x=m[v],{array:b,itemSize:M}=x;b.copyWithin(e*M,h*M,(h+d)*M),x.addUpdateRange(e*M,d*M)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=a.index?u.indexStart:u.vertexStart,this._nextIndexStart=a.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const a=new oa,s=n.index,o=n.attributes.position;for(let c=i.start,u=i.start+i.count;c<u;c++){let h=c;s&&(h=s.getX(h)),a.expandByPoint(U0.fromBufferAttribute(o,h))}i.boundingBox=a}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const a=new la;this.getBoundingBoxAt(e,nb),nb.getCenter(a.center);const s=n.index,o=n.attributes.position;let c=0;for(let u=i.start,h=i.start+i.count;u<h;u++){let d=u;s&&(d=s.getX(d)),U0.fromBufferAttribute(o,d),c=Math.max(c,a.center.distanceToSquared(U0))}a.radius=Math.sqrt(c),i.boundingSphere=a}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(YE);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),a=new Int32Array(e);Nd(this._multiDrawCounts,i),Nd(this._multiDrawStarts,a),this._multiDrawCounts=i,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,c=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Nd(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Nd(o.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Nd(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...n.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new In,this._initializeGeometry(a));const s=this.geometry;a.index&&Nd(a.index.array,s.index.array);for(const o in a.attributes)Nd(a.attributes[o].array,s.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,a=this.matrixWorld,s=this.geometry;hs.material=this.material,hs.geometry.index=s.index,hs.geometry.attributes=s.attributes,hs.geometry.boundingBox===null&&(hs.geometry.boundingBox=new oa),hs.geometry.boundingSphere===null&&(hs.geometry.boundingSphere=new la);for(let o=0,c=n.length;o<c;o++){if(!n[o].visible||!n[o].active)continue;const u=n[o].geometryIndex,h=i[u];hs.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(o,hs.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,hs.geometry.boundingBox),this.getBoundingSphereAt(u,hs.geometry.boundingSphere),hs.raycast(e,rb);for(let d=0,m=rb.length;d<m;d++){const v=rb[d];v.object=this,v.batchId=o,t.push(v)}rb.length=0}hs.material=null,hs.geometry.index=null,hs.geometry.attributes={},hs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,c=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,d=this._geometryInfo,m=this.perObjectFrustumCulled,v=this._indirectTexture,x=v.image.data,b=n.isArrayCamera?Cle:zO;m&&!n.isArrayCamera&&(lo.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),zO.setFromProjectionMatrix(lo,n.coordinateSystem,n.reversedDepth));let M=0;if(this.sortObjects){lo.copy(this.matrixWorld).invert(),U0.setFromMatrixPosition(n.matrixWorld).applyMatrix4(lo),FO.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(lo);for(let E=0,A=c.length;E<A;E++)if(c[E].visible&&c[E].active){const D=c[E].geometryIndex;this.getMatrixAt(E,lo),this.getBoundingSphereAt(D,Td).applyMatrix4(lo);let N=!1;if(m&&(N=!b.intersectsSphere(Td,n)),!N){const O=d[D],z=Rle.subVectors(Td.center,U0).dot(FO);WE.push(O.start,O.count,z,E)}}const _=WE.list,T=this.customSort;T===null?_.sort(a.transparent?Tle:wle):T.call(this,_,n);for(let E=0,A=_.length;E<A;E++){const D=_[E];u[M]=D.start*o,h[M]=D.count,x[M]=D.index,M++}WE.reset()}else for(let _=0,T=c.length;_<T;_++)if(c[_].visible&&c[_].active){const E=c[_].geometryIndex;let A=!1;if(m&&(this.getMatrixAt(_,lo),this.getBoundingSphereAt(E,Td).applyMatrix4(lo),A=!b.intersectsSphere(Td,n)),!A){const D=d[E];u[M]=D.start*o,h[M]=D.count,x[M]=_,M++}}v.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,a,s){this.onBeforeRender(e,null,i,a,s)}}class Js extends Ms{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new zt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const aS=new xe,sS=new xe,LO=new pn,z0=new bp,ib=new la,$E=new xe,IO=new xe;let bh=class extends xr{constructor(e=new In,t=new Js){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,a=t.count;i<a;i++)aS.fromBufferAttribute(t,i-1),sS.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=aS.distanceTo(sS);e.setAttribute("lineDistance",new Ht(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),ib.copy(n.boundingSphere),ib.applyMatrix4(i),ib.radius+=a,e.ray.intersectsSphere(ib)===!1)return;LO.copy(i).invert(),z0.copy(e.ray).applyMatrix4(LO);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=this.isLineSegments?2:1,h=n.index,m=n.attributes.position;if(h!==null){const v=Math.max(0,s.start),x=Math.min(h.count,s.start+s.count);for(let b=v,M=x-1;b<M;b+=u){const _=h.getX(b),T=h.getX(b+1),E=ab(this,e,z0,c,_,T,b);E&&t.push(E)}if(this.isLineLoop){const b=h.getX(x-1),M=h.getX(v),_=ab(this,e,z0,c,b,M,x-1);_&&t.push(_)}}else{const v=Math.max(0,s.start),x=Math.min(m.count,s.start+s.count);for(let b=v,M=x-1;b<M;b+=u){const _=ab(this,e,z0,c,b,b+1,b);_&&t.push(_)}if(this.isLineLoop){const b=ab(this,e,z0,c,x-1,v,x-1);b&&t.push(b)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}};function ab(r,e,t,n,i,a,s){const o=r.geometry.attributes.position;if(aS.fromBufferAttribute(o,i),sS.fromBufferAttribute(o,a),t.distanceSqToSegment(aS,sS,$E,IO)>n)return;$E.applyMatrix4(r.matrixWorld);const u=e.ray.origin.distanceTo($E);if(!(u<e.near||u>e.far))return{distance:u,point:IO.clone().applyMatrix4(r.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:r}}const PO=new xe,HO=new xe;class cc extends bh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,a=t.count;i<a;i+=2)PO.fromBufferAttribute(t,i),HO.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+PO.distanceTo(HO);e.setAttribute("lineDistance",new Ht(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class A5 extends bh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class nM extends Ms{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const VO=new pn,h2=new bp,sb=new la,ob=new xe;let w5=class extends xr{constructor(e=new In,t=new nM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),sb.copy(n.boundingSphere),sb.applyMatrix4(i),sb.radius+=a,e.ray.intersectsSphere(sb)===!1)return;VO.copy(i).invert(),h2.copy(e.ray).applyMatrix4(VO);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=n.index,d=n.attributes.position;if(u!==null){const m=Math.max(0,s.start),v=Math.min(u.count,s.start+s.count);for(let x=m,b=v;x<b;x++){const M=u.getX(x);ob.fromBufferAttribute(d,M),qO(ob,M,c,i,e,t,this)}}else{const m=Math.max(0,s.start),v=Math.min(d.count,s.start+s.count);for(let x=m,b=v;x<b;x++)ob.fromBufferAttribute(d,x),qO(ob,x,c,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}};function qO(r,e,t,n,i,a,s){const o=h2.distanceSqToPoint(r);if(o<t){const c=new xe;h2.closestPointToPoint(r,c),c.applyMatrix4(n);const u=i.ray.origin.distanceTo(c);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class T5 extends Ni{constructor(e,t,n,i,a=sa,s=sa,o,c,u){super(e,t,n,i,a,s,o,c,u),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const h=this;function d(){h.needsUpdate=!0,h._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(d))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class Ble extends T5{constructor(e,t,n,i,a,s,o,c){super({},e,t,n,i,a,s,o,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Ule extends Ni{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ja,this.minFilter=ja,this.generateMipmaps=!1,this.needsUpdate=!0}}class rM extends Ni{constructor(e,t,n,i,a,s,o,c,u,h,d,m){super(null,s,o,c,u,h,i,a,d,m),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class zle extends rM{constructor(e,t,n,i,a,s){super(e,t,n,a,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=xl,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Fle extends rM{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,of),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Lle extends Ni{constructor(e,t,n,i,a,s,o,c,u){super(e,t,n,i,a,s,o,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Lw extends Ni{constructor(e,t,n=lf,i,a,s,o=ja,c=ja,u,h=Ev,d=1){if(h!==Ev&&h!==Av)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const m={width:e,height:t,depth:d};super(m,i,a,s,o,c,h,n,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new fh(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Iw extends Ni{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class iM extends In{constructor(e=1,t=1,n=4,i=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i,heightSegments:a},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),i=Math.max(3,Math.floor(i)),a=Math.max(1,Math.floor(a));const s=[],o=[],c=[],u=[],h=t/2,d=Math.PI/2*e,m=t,v=2*d+m,x=n*2+a,b=i+1,M=new xe,_=new xe;for(let T=0;T<=x;T++){let E=0,A=0,D=0,N=0;if(T<=n){const C=T/n,R=C*Math.PI/2;A=-h-e*Math.cos(R),D=e*Math.sin(R),N=-e*Math.cos(R),E=C*d}else if(T<=n+a){const C=(T-n)/a;A=-h+C*t,D=e,N=0,E=d+C*m}else{const C=(T-n-a)/n,R=C*Math.PI/2;A=h+e*Math.sin(R),D=e*Math.cos(R),N=e*Math.sin(R),E=d+m+C*d}const O=Math.max(0,Math.min(1,E/v));let z=0;T===0?z=.5/i:T===x&&(z=-.5/i);for(let C=0;C<=i;C++){const R=C/i,F=R*Math.PI*2,H=Math.sin(F),X=Math.cos(F);_.x=-D*X,_.y=A,_.z=D*H,o.push(_.x,_.y,_.z),M.set(-D*X,N,D*H),M.normalize(),c.push(M.x,M.y,M.z),u.push(R+z,O)}if(T>0){const C=(T-1)*b;for(let R=0;R<i;R++){const F=C+R,H=C+R+1,X=T*b+R,$=T*b+R+1;s.push(F,H,X),s.push(H,$,X)}}}this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("normal",new Ht(c,3)),this.setAttribute("uv",new Ht(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iM(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class aM extends In{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const a=[],s=[],o=[],c=[],u=new xe,h=new gt;s.push(0,0,0),o.push(0,0,1),c.push(.5,.5);for(let d=0,m=3;d<=t;d++,m+=3){const v=n+d/t*i;u.x=e*Math.cos(v),u.y=e*Math.sin(v),s.push(u.x,u.y,u.z),o.push(0,0,1),h.x=(s[m]/e+1)/2,h.y=(s[m+1]/e+1)/2,c.push(h.x,h.y)}for(let d=1;d<=t;d++)a.push(d,d+1,0);this.setIndex(a),this.setAttribute("position",new Ht(s,3)),this.setAttribute("normal",new Ht(o,3)),this.setAttribute("uv",new Ht(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aM(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Gy extends In{constructor(e=1,t=1,n=1,i=32,a=1,s=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:c};const u=this;i=Math.floor(i),a=Math.floor(a);const h=[],d=[],m=[],v=[];let x=0;const b=[],M=n/2;let _=0;T(),s===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(h),this.setAttribute("position",new Ht(d,3)),this.setAttribute("normal",new Ht(m,3)),this.setAttribute("uv",new Ht(v,2));function T(){const A=new xe,D=new xe;let N=0;const O=(t-e)/n;for(let z=0;z<=a;z++){const C=[],R=z/a,F=R*(t-e)+e;for(let H=0;H<=i;H++){const X=H/i,$=X*c+o,Y=Math.sin($),I=Math.cos($);D.x=F*Y,D.y=-R*n+M,D.z=F*I,d.push(D.x,D.y,D.z),A.set(Y,O,I).normalize(),m.push(A.x,A.y,A.z),v.push(X,1-R),C.push(x++)}b.push(C)}for(let z=0;z<i;z++)for(let C=0;C<a;C++){const R=b[C][z],F=b[C+1][z],H=b[C+1][z+1],X=b[C][z+1];(e>0||C!==0)&&(h.push(R,F,X),N+=3),(t>0||C!==a-1)&&(h.push(F,H,X),N+=3)}u.addGroup(_,N,0),_+=N}function E(A){const D=x,N=new gt,O=new xe;let z=0;const C=A===!0?e:t,R=A===!0?1:-1;for(let H=1;H<=i;H++)d.push(0,M*R,0),m.push(0,R,0),v.push(.5,.5),x++;const F=x;for(let H=0;H<=i;H++){const $=H/i*c+o,Y=Math.cos($),I=Math.sin($);O.x=C*I,O.y=M*R,O.z=C*Y,d.push(O.x,O.y,O.z),m.push(0,R,0),N.x=Y*.5+.5,N.y=I*.5*R+.5,v.push(N.x,N.y),x++}for(let H=0;H<i;H++){const X=D+H,$=F+H;A===!0?h.push($,$+1,X):h.push($+1,$,X),z+=3}u.addGroup(_,z,A===!0?1:2),_+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gy(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ky extends Gy{constructor(e=1,t=1,n=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,n,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new ky(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bh extends In{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const a=[],s=[];o(i),u(n),h(),this.setAttribute("position",new Ht(a,3)),this.setAttribute("normal",new Ht(a.slice(),3)),this.setAttribute("uv",new Ht(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(T){const E=new xe,A=new xe,D=new xe;for(let N=0;N<t.length;N+=3)v(t[N+0],E),v(t[N+1],A),v(t[N+2],D),c(E,A,D,T)}function c(T,E,A,D){const N=D+1,O=[];for(let z=0;z<=N;z++){O[z]=[];const C=T.clone().lerp(A,z/N),R=E.clone().lerp(A,z/N),F=N-z;for(let H=0;H<=F;H++)H===0&&z===N?O[z][H]=C:O[z][H]=C.clone().lerp(R,H/F)}for(let z=0;z<N;z++)for(let C=0;C<2*(N-z)-1;C++){const R=Math.floor(C/2);C%2===0?(m(O[z][R+1]),m(O[z+1][R]),m(O[z][R])):(m(O[z][R+1]),m(O[z+1][R+1]),m(O[z+1][R]))}}function u(T){const E=new xe;for(let A=0;A<a.length;A+=3)E.x=a[A+0],E.y=a[A+1],E.z=a[A+2],E.normalize().multiplyScalar(T),a[A+0]=E.x,a[A+1]=E.y,a[A+2]=E.z}function h(){const T=new xe;for(let E=0;E<a.length;E+=3){T.x=a[E+0],T.y=a[E+1],T.z=a[E+2];const A=M(T)/2/Math.PI+.5,D=_(T)/Math.PI+.5;s.push(A,1-D)}x(),d()}function d(){for(let T=0;T<s.length;T+=6){const E=s[T+0],A=s[T+2],D=s[T+4],N=Math.max(E,A,D),O=Math.min(E,A,D);N>.9&&O<.1&&(E<.2&&(s[T+0]+=1),A<.2&&(s[T+2]+=1),D<.2&&(s[T+4]+=1))}}function m(T){a.push(T.x,T.y,T.z)}function v(T,E){const A=T*3;E.x=e[A+0],E.y=e[A+1],E.z=e[A+2]}function x(){const T=new xe,E=new xe,A=new xe,D=new xe,N=new gt,O=new gt,z=new gt;for(let C=0,R=0;C<a.length;C+=9,R+=6){T.set(a[C+0],a[C+1],a[C+2]),E.set(a[C+3],a[C+4],a[C+5]),A.set(a[C+6],a[C+7],a[C+8]),N.set(s[R+0],s[R+1]),O.set(s[R+2],s[R+3]),z.set(s[R+4],s[R+5]),D.copy(T).add(E).add(A).divideScalar(3);const F=M(D);b(N,R+0,T,F),b(O,R+2,E,F),b(z,R+4,A,F)}}function b(T,E,A,D){D<0&&T.x===1&&(s[E]=T.x-1),A.x===0&&A.z===0&&(s[E]=D/2/Math.PI+.5)}function M(T){return Math.atan2(T.z,-T.x)}function _(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bh(e.vertices,e.indices,e.radius,e.details)}}class sM extends Bh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sM(e.radius,e.detail)}}const lb=new xe,ub=new xe,ZE=new xe,cb=new ho;class N5 extends In{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),a=Math.cos(Jd*t),s=e.getIndex(),o=e.getAttribute("position"),c=s?s.count:o.count,u=[0,0,0],h=["a","b","c"],d=new Array(3),m={},v=[];for(let x=0;x<c;x+=3){s?(u[0]=s.getX(x),u[1]=s.getX(x+1),u[2]=s.getX(x+2)):(u[0]=x,u[1]=x+1,u[2]=x+2);const{a:b,b:M,c:_}=cb;if(b.fromBufferAttribute(o,u[0]),M.fromBufferAttribute(o,u[1]),_.fromBufferAttribute(o,u[2]),cb.getNormal(ZE),d[0]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,d[1]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,d[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let T=0;T<3;T++){const E=(T+1)%3,A=d[T],D=d[E],N=cb[h[T]],O=cb[h[E]],z=`${A}_${D}`,C=`${D}_${A}`;C in m&&m[C]?(ZE.dot(m[C].normal)<=a&&(v.push(N.x,N.y,N.z),v.push(O.x,O.y,O.z)),m[C]=null):z in m||(m[z]={index0:u[T],index1:u[E],normal:ZE.clone()})}}for(const x in m)if(m[x]){const{index0:b,index1:M}=m[x];lb.fromBufferAttribute(o,b),ub.fromBufferAttribute(o,M),v.push(lb.x,lb.y,lb.z),v.push(ub.x,ub.y,ub.z)}this.setAttribute("position",new Ht(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class du{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),a+=n.distanceTo(i),t.push(a),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let i=0;const a=n.length;let s;t?s=t:s=e*n[a-1];let o=0,c=a-1,u;for(;o<=c;)if(i=Math.floor(o+(c-o)/2),u=n[i]-s,u<0)o=i+1;else if(u>0)c=i-1;else{c=i;break}if(i=c,n[i]===s)return i/(a-1);const h=n[i],m=n[i+1]-h,v=(s-h)/m;return(i+v)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),c=t||(s.isVector2?new gt:new xe);return c.copy(o).sub(s).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new xe,i=[],a=[],s=[],o=new xe,c=new pn;for(let v=0;v<=e;v++){const x=v/e;i[v]=this.getTangentAt(x,new xe)}a[0]=new xe,s[0]=new xe;let u=Number.MAX_VALUE;const h=Math.abs(i[0].x),d=Math.abs(i[0].y),m=Math.abs(i[0].z);h<=u&&(u=h,n.set(1,0,0)),d<=u&&(u=d,n.set(0,1,0)),m<=u&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let v=1;v<=e;v++){if(a[v]=a[v-1].clone(),s[v]=s[v-1].clone(),o.crossVectors(i[v-1],i[v]),o.length()>Number.EPSILON){o.normalize();const x=Math.acos(gn(i[v-1].dot(i[v]),-1,1));a[v].applyMatrix4(c.makeRotationAxis(o,x))}s[v].crossVectors(i[v],a[v])}if(t===!0){let v=Math.acos(gn(a[0].dot(a[e]),-1,1));v/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(v=-v);for(let x=1;x<=e;x++)a[x].applyMatrix4(c.makeRotationAxis(i[x],v*x)),s[x].crossVectors(i[x],a[x])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class oM extends du{constructor(e=0,t=0,n=1,i=1,a=0,s=Math.PI*2,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=c}getPoint(e,t=new gt){const n=t,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),m=c-this.aX,v=u-this.aY;c=m*h-v*d+this.aX,u=m*d+v*h+this.aY}return n.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class D5 extends oM{constructor(e,t,n,i,a,s){super(e,t,n,n,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function Pw(){let r=0,e=0,t=0,n=0;function i(a,s,o,c){r=a,e=o,t=-3*a+3*s-2*o-c,n=2*a-2*s+o+c}return{initCatmullRom:function(a,s,o,c,u){i(s,o,u*(o-a),u*(c-s))},initNonuniformCatmullRom:function(a,s,o,c,u,h,d){let m=(s-a)/u-(o-a)/(u+h)+(o-s)/h,v=(o-s)/h-(c-s)/(h+d)+(c-o)/d;m*=h,v*=h,i(s,o,m,v)},calc:function(a){const s=a*a,o=s*a;return r+e*a+t*s+n*o}}}const fb=new xe,KE=new Pw,QE=new Pw,JE=new Pw;class C5 extends du{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new xe){const n=t,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),c=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:c===0&&o===a-1&&(o=a-2,c=1);let u,h;this.closed||o>0?u=i[(o-1)%a]:(fb.subVectors(i[0],i[1]).add(i[0]),u=fb);const d=i[o%a],m=i[(o+1)%a];if(this.closed||o+2<a?h=i[(o+2)%a]:(fb.subVectors(i[a-1],i[a-2]).add(i[a-1]),h=fb),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let x=Math.pow(u.distanceToSquared(d),v),b=Math.pow(d.distanceToSquared(m),v),M=Math.pow(m.distanceToSquared(h),v);b<1e-4&&(b=1),x<1e-4&&(x=b),M<1e-4&&(M=b),KE.initNonuniformCatmullRom(u.x,d.x,m.x,h.x,x,b,M),QE.initNonuniformCatmullRom(u.y,d.y,m.y,h.y,x,b,M),JE.initNonuniformCatmullRom(u.z,d.z,m.z,h.z,x,b,M)}else this.curveType==="catmullrom"&&(KE.initCatmullRom(u.x,d.x,m.x,h.x,this.tension),QE.initCatmullRom(u.y,d.y,m.y,h.y,this.tension),JE.initCatmullRom(u.z,d.z,m.z,h.z,this.tension));return n.set(KE.calc(c),QE.calc(c),JE.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new xe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function GO(r,e,t,n,i){const a=(n-e)*.5,s=(i-t)*.5,o=r*r,c=r*o;return(2*t-2*n+a+s)*c+(-3*t+3*n-2*a-s)*o+a*r+t}function Ile(r,e){const t=1-r;return t*t*e}function Ple(r,e){return 2*(1-r)*r*e}function Hle(r,e){return r*r*e}function ey(r,e,t,n){return Ile(r,e)+Ple(r,t)+Hle(r,n)}function Vle(r,e){const t=1-r;return t*t*t*e}function qle(r,e){const t=1-r;return 3*t*t*r*e}function Gle(r,e){return 3*(1-r)*r*r*e}function kle(r,e){return r*r*r*e}function ty(r,e,t,n,i){return Vle(r,e)+qle(r,t)+Gle(r,n)+kle(r,i)}class Hw extends du{constructor(e=new gt,t=new gt,n=new gt,i=new gt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new gt){const n=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return n.set(ty(e,i.x,a.x,s.x,o.x),ty(e,i.y,a.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class R5 extends du{constructor(e=new xe,t=new xe,n=new xe,i=new xe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new xe){const n=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return n.set(ty(e,i.x,a.x,s.x,o.x),ty(e,i.y,a.y,s.y,o.y),ty(e,i.z,a.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Vw extends du{constructor(e=new gt,t=new gt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new gt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new gt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class O5 extends du{constructor(e=new xe,t=new xe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new xe){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new xe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qw extends du{constructor(e=new gt,t=new gt,n=new gt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new gt){const n=t,i=this.v0,a=this.v1,s=this.v2;return n.set(ey(e,i.x,a.x,s.x),ey(e,i.y,a.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gw extends du{constructor(e=new xe,t=new xe,n=new xe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new xe){const n=t,i=this.v0,a=this.v1,s=this.v2;return n.set(ey(e,i.x,a.x,s.x),ey(e,i.y,a.y,s.y),ey(e,i.z,a.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kw extends du{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new gt){const n=t,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,c=i[s===0?s:s-1],u=i[s],h=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return n.set(GO(o,c.x,u.x,h.x,d.x),GO(o,c.y,u.y,h.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new gt().fromArray(i))}return this}}var oS=Object.freeze({__proto__:null,ArcCurve:D5,CatmullRomCurve3:C5,CubicBezierCurve:Hw,CubicBezierCurve3:R5,EllipseCurve:oM,LineCurve:Vw,LineCurve3:O5,QuadraticBezierCurve:qw,QuadraticBezierCurve3:Gw,SplineCurve:kw});class B5 extends du{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new oS[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=n){const s=i[a]-n,o=this.curves[a],c=o.getLength(),u=c===0?0:1-s/c;return o.getPointAt(u,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(o);for(let u=0;u<c.length;u++){const h=c[u];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new oS[i.type]().fromJSON(i))}return this}}class lS extends B5{constructor(e){super(),this.type="Path",this.currentPoint=new gt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Vw(this.currentPoint.clone(),new gt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const a=new qw(this.currentPoint.clone(),new gt(e,t),new gt(n,i));return this.curves.push(a),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,a,s){const o=new Hw(this.currentPoint.clone(),new gt(e,t),new gt(n,i),new gt(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new kw(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,a,s){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+o,t+c,n,i,a,s),this}absarc(e,t,n,i,a,s){return this.absellipse(e,t,n,n,i,a,s),this}ellipse(e,t,n,i,a,s,o,c){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,n,i,a,s,o,c),this}absellipse(e,t,n,i,a,s,o,c){const u=new oM(e,t,n,i,a,s,o,c);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ep extends lS{constructor(e){super(e),this.uuid=Vo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new lS().fromJSON(i))}return this}}function Xle(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let a=U5(r,0,i,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,c,u;if(n&&(a=Zle(r,e,a,t)),r.length>80*t){o=1/0,c=1/0;let h=-1/0,d=-1/0;for(let m=t;m<i;m+=t){const v=r[m],x=r[m+1];v<o&&(o=v),x<c&&(c=x),v>h&&(h=v),x>d&&(d=x)}u=Math.max(h-o,d-c),u=u!==0?32767/u:0}return by(a,s,t,o,c,u,0),s}function U5(r,e,t,n,i){let a;if(i===oue(r,e,t,n)>0)for(let s=e;s<t;s+=n)a=kO(s/n|0,r[s],r[s+1],a);else for(let s=t-n;s>=e;s-=n)a=kO(s/n|0,r[s],r[s+1],a);return a&&Rv(a,a.next)&&(Sy(a),a=a.next),a}function sp(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Rv(t,t.next)||bi(t.prev,t,t.next)===0)){if(Sy(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function by(r,e,t,n,i,a,s){if(!r)return;!s&&a&&tue(r,n,i,a);let o=r;for(;r.prev!==r.next;){const c=r.prev,u=r.next;if(a?Yle(r,n,i,a):jle(r)){e.push(c.i,r.i,u.i),Sy(r),r=u.next,o=u.next;continue}if(r=u,r===o){s?s===1?(r=Wle(sp(r),e),by(r,e,t,n,i,a,2)):s===2&&$le(r,e,t,n,i,a):by(sp(r),e,t,n,i,a,1);break}}}function jle(r){const e=r.prev,t=r,n=r.next;if(bi(e,t,n)>=0)return!1;const i=e.x,a=t.x,s=n.x,o=e.y,c=t.y,u=n.y,h=Math.min(i,a,s),d=Math.min(o,c,u),m=Math.max(i,a,s),v=Math.max(o,c,u);let x=n.next;for(;x!==e;){if(x.x>=h&&x.x<=m&&x.y>=d&&x.y<=v&&q0(i,o,a,c,s,u,x.x,x.y)&&bi(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function Yle(r,e,t,n){const i=r.prev,a=r,s=r.next;if(bi(i,a,s)>=0)return!1;const o=i.x,c=a.x,u=s.x,h=i.y,d=a.y,m=s.y,v=Math.min(o,c,u),x=Math.min(h,d,m),b=Math.max(o,c,u),M=Math.max(h,d,m),_=d2(v,x,e,t,n),T=d2(b,M,e,t,n);let E=r.prevZ,A=r.nextZ;for(;E&&E.z>=_&&A&&A.z<=T;){if(E.x>=v&&E.x<=b&&E.y>=x&&E.y<=M&&E!==i&&E!==s&&q0(o,h,c,d,u,m,E.x,E.y)&&bi(E.prev,E,E.next)>=0||(E=E.prevZ,A.x>=v&&A.x<=b&&A.y>=x&&A.y<=M&&A!==i&&A!==s&&q0(o,h,c,d,u,m,A.x,A.y)&&bi(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;E&&E.z>=_;){if(E.x>=v&&E.x<=b&&E.y>=x&&E.y<=M&&E!==i&&E!==s&&q0(o,h,c,d,u,m,E.x,E.y)&&bi(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;A&&A.z<=T;){if(A.x>=v&&A.x<=b&&A.y>=x&&A.y<=M&&A!==i&&A!==s&&q0(o,h,c,d,u,m,A.x,A.y)&&bi(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function Wle(r,e){let t=r;do{const n=t.prev,i=t.next.next;!Rv(n,i)&&F5(n,t,t.next,i)&&_y(n,i)&&_y(i,n)&&(e.push(n.i,t.i,i.i),Sy(t),Sy(t.next),t=r=i),t=t.next}while(t!==r);return sp(t)}function $le(r,e,t,n,i,a){let s=r;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&iue(s,o)){let c=L5(s,o);s=sp(s,s.next),c=sp(c,c.next),by(s,e,t,n,i,a,0),by(c,e,t,n,i,a,0);return}o=o.next}s=s.next}while(s!==r)}function Zle(r,e,t,n){const i=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*n,c=a<s-1?e[a+1]*n:r.length,u=U5(r,o,c,n,!1);u===u.next&&(u.steiner=!0),i.push(rue(u))}i.sort(Kle);for(let a=0;a<i.length;a++)t=Qle(i[a],t);return t}function Kle(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const n=(r.next.y-r.y)/(r.next.x-r.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=n-i}return t}function Qle(r,e){const t=Jle(r,e);if(!t)return e;const n=L5(t,r);return sp(n,n.next),sp(t,t.next)}function Jle(r,e){let t=e;const n=r.x,i=r.y;let a=-1/0,s;if(Rv(r,t))return t;do{if(Rv(r,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const d=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=n&&d>a&&(a=d,s=t.x<t.next.x?t:t.next,d===n))return s}t=t.next}while(t!==e);if(!s)return null;const o=s,c=s.x,u=s.y;let h=1/0;t=s;do{if(n>=t.x&&t.x>=c&&n!==t.x&&z5(i<u?n:a,i,c,u,i<u?a:n,i,t.x,t.y)){const d=Math.abs(i-t.y)/(n-t.x);_y(t,r)&&(d<h||d===h&&(t.x>s.x||t.x===s.x&&eue(s,t)))&&(s=t,h=d)}t=t.next}while(t!==o);return s}function eue(r,e){return bi(r.prev,r,e.prev)<0&&bi(e.next,r,r.next)<0}function tue(r,e,t,n){let i=r;do i.z===0&&(i.z=d2(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,nue(i)}function nue(r){let e,t=1;do{let n=r,i;r=null;let a=null;for(e=0;n;){e++;let s=n,o=0;for(let u=0;u<t&&(o++,s=s.nextZ,!!s);u++);let c=t;for(;o>0||c>0&&s;)o!==0&&(c===0||!s||n.z<=s.z)?(i=n,n=n.nextZ,o--):(i=s,s=s.nextZ,c--),a?a.nextZ=i:r=i,i.prevZ=a,a=i;n=s}a.nextZ=null,t*=2}while(e>1);return r}function d2(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function rue(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function z5(r,e,t,n,i,a,s,o){return(i-s)*(e-o)>=(r-s)*(a-o)&&(r-s)*(n-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(i-s)*(n-o)}function q0(r,e,t,n,i,a,s,o){return!(r===s&&e===o)&&z5(r,e,t,n,i,a,s,o)}function iue(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!aue(r,e)&&(_y(r,e)&&_y(e,r)&&sue(r,e)&&(bi(r.prev,r,e.prev)||bi(r,e.prev,e))||Rv(r,e)&&bi(r.prev,r,r.next)>0&&bi(e.prev,e,e.next)>0)}function bi(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Rv(r,e){return r.x===e.x&&r.y===e.y}function F5(r,e,t,n){const i=db(bi(r,e,t)),a=db(bi(r,e,n)),s=db(bi(t,n,r)),o=db(bi(t,n,e));return!!(i!==a&&s!==o||i===0&&hb(r,t,e)||a===0&&hb(r,n,e)||s===0&&hb(t,r,n)||o===0&&hb(t,e,n))}function hb(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function db(r){return r>0?1:r<0?-1:0}function aue(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&F5(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function _y(r,e){return bi(r.prev,r,r.next)<0?bi(r,e,r.next)>=0&&bi(r,r.prev,e)>=0:bi(r,e,r.prev)<0||bi(r,r.next,e)<0}function sue(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,a=(r.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function L5(r,e){const t=p2(r.i,r.x,r.y),n=p2(e.i,e.x,e.y),i=r.next,a=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function kO(r,e,t,n){const i=p2(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Sy(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function p2(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function oue(r,e,t,n){let i=0;for(let a=e,s=t-n;a<t;a+=n)i+=(r[s]-r[a])*(r[a+1]+r[s+1]),s=a;return i}class lue{static triangulate(e,t,n=2){return Xle(e,t,n)}}class ou{static area(e){const t=e.length;let n=0;for(let i=t-1,a=0;a<t;i=a++)n+=e[i].x*e[a].y-e[a].x*e[i].y;return n*.5}static isClockWise(e){return ou.area(e)<0}static triangulateShape(e,t){const n=[],i=[],a=[];XO(e),jO(n,e);let s=e.length;t.forEach(XO);for(let c=0;c<t.length;c++)i.push(s),s+=t[c].length,jO(n,t[c]);const o=lue.triangulate(n,i);for(let c=0;c<o.length;c+=3)a.push(o.slice(c,c+3));return a}}function XO(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function jO(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class lM extends In{constructor(e=new ep([new gt(.5,.5),new gt(-.5,.5),new gt(-.5,-.5),new gt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],a=[];for(let o=0,c=e.length;o<c;o++){const u=e[o];s(u)}this.setAttribute("position",new Ht(i,3)),this.setAttribute("uv",new Ht(a,2)),this.computeVertexNormals();function s(o){const c=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:v-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:uue;let E,A=!1,D,N,O,z;_&&(E=_.getSpacedPoints(h),A=!0,m=!1,D=_.computeFrenetFrames(h,!1),N=new xe,O=new xe,z=new xe),m||(M=0,v=0,x=0,b=0);const C=o.extractPoints(u);let R=C.shape;const F=C.holes;if(!ou.isClockWise(R)){R=R.reverse();for(let Me=0,Be=F.length;Me<Be;Me++){const Le=F[Me];ou.isClockWise(Le)&&(F[Me]=Le.reverse())}}function X(Me){const Le=10000000000000001e-36;let Pe=Me[0];for(let Ye=1;Ye<=Me.length;Ye++){const Ze=Ye%Me.length,re=Me[Ze],be=re.x-Pe.x,Ce=re.y-Pe.y,q=be*be+Ce*Ce,V=Math.max(Math.abs(re.x),Math.abs(re.y),Math.abs(Pe.x),Math.abs(Pe.y)),ie=Le*V*V;if(q<=ie){Me.splice(Ze,1),Ye--;continue}Pe=re}}X(R),F.forEach(X);const $=F.length,Y=R;for(let Me=0;Me<$;Me++){const Be=F[Me];R=R.concat(Be)}function I(Me,Be,Le){return Be||console.error("THREE.ExtrudeGeometry: vec does not exist"),Me.clone().addScaledVector(Be,Le)}const Z=R.length;function W(Me,Be,Le){let Pe,Ye,Ze;const re=Me.x-Be.x,be=Me.y-Be.y,Ce=Le.x-Me.x,q=Le.y-Me.y,V=re*re+be*be,ie=re*q-be*Ce;if(Math.abs(ie)>Number.EPSILON){const fe=Math.sqrt(V),Se=Math.sqrt(Ce*Ce+q*q),ve=Be.x-be/fe,qe=Be.y+re/fe,Fe=Le.x-q/Se,We=Le.y+Ce/Se,Ge=((Fe-ve)*q-(We-qe)*Ce)/(re*q-be*Ce);Pe=ve+re*Ge-Me.x,Ye=qe+be*Ge-Me.y;const rt=Pe*Pe+Ye*Ye;if(rt<=2)return new gt(Pe,Ye);Ze=Math.sqrt(rt/2)}else{let fe=!1;re>Number.EPSILON?Ce>Number.EPSILON&&(fe=!0):re<-Number.EPSILON?Ce<-Number.EPSILON&&(fe=!0):Math.sign(be)===Math.sign(q)&&(fe=!0),fe?(Pe=-be,Ye=re,Ze=Math.sqrt(V)):(Pe=re,Ye=be,Ze=Math.sqrt(V/2))}return new gt(Pe/Ze,Ye/Ze)}const te=[];for(let Me=0,Be=Y.length,Le=Be-1,Pe=Me+1;Me<Be;Me++,Le++,Pe++)Le===Be&&(Le=0),Pe===Be&&(Pe=0),te[Me]=W(Y[Me],Y[Le],Y[Pe]);const le=[];let Q,k=te.concat();for(let Me=0,Be=$;Me<Be;Me++){const Le=F[Me];Q=[];for(let Pe=0,Ye=Le.length,Ze=Ye-1,re=Pe+1;Pe<Ye;Pe++,Ze++,re++)Ze===Ye&&(Ze=0),re===Ye&&(re=0),Q[Pe]=W(Le[Pe],Le[Ze],Le[re]);le.push(Q),k=k.concat(Q)}let ae;if(M===0)ae=ou.triangulateShape(Y,F);else{const Me=[],Be=[];for(let Le=0;Le<M;Le++){const Pe=Le/M,Ye=v*Math.cos(Pe*Math.PI/2),Ze=x*Math.sin(Pe*Math.PI/2)+b;for(let re=0,be=Y.length;re<be;re++){const Ce=I(Y[re],te[re],Ze);ue(Ce.x,Ce.y,-Ye),Pe===0&&Me.push(Ce)}for(let re=0,be=$;re<be;re++){const Ce=F[re];Q=le[re];const q=[];for(let V=0,ie=Ce.length;V<ie;V++){const fe=I(Ce[V],Q[V],Ze);ue(fe.x,fe.y,-Ye),Pe===0&&q.push(fe)}Pe===0&&Be.push(q)}}ae=ou.triangulateShape(Me,Be)}const J=ae.length,De=x+b;for(let Me=0;Me<Z;Me++){const Be=m?I(R[Me],k[Me],De):R[Me];A?(O.copy(D.normals[0]).multiplyScalar(Be.x),N.copy(D.binormals[0]).multiplyScalar(Be.y),z.copy(E[0]).add(O).add(N),ue(z.x,z.y,z.z)):ue(Be.x,Be.y,0)}for(let Me=1;Me<=h;Me++)for(let Be=0;Be<Z;Be++){const Le=m?I(R[Be],k[Be],De):R[Be];A?(O.copy(D.normals[Me]).multiplyScalar(Le.x),N.copy(D.binormals[Me]).multiplyScalar(Le.y),z.copy(E[Me]).add(O).add(N),ue(z.x,z.y,z.z)):ue(Le.x,Le.y,d/h*Me)}for(let Me=M-1;Me>=0;Me--){const Be=Me/M,Le=v*Math.cos(Be*Math.PI/2),Pe=x*Math.sin(Be*Math.PI/2)+b;for(let Ye=0,Ze=Y.length;Ye<Ze;Ye++){const re=I(Y[Ye],te[Ye],Pe);ue(re.x,re.y,d+Le)}for(let Ye=0,Ze=F.length;Ye<Ze;Ye++){const re=F[Ye];Q=le[Ye];for(let be=0,Ce=re.length;be<Ce;be++){const q=I(re[be],Q[be],Pe);A?ue(q.x,q.y+E[h-1].y,E[h-1].x+Le):ue(q.x,q.y,d+Le)}}}pe(),_e();function pe(){const Me=i.length/3;if(m){let Be=0,Le=Z*Be;for(let Pe=0;Pe<J;Pe++){const Ye=ae[Pe];ge(Ye[2]+Le,Ye[1]+Le,Ye[0]+Le)}Be=h+M*2,Le=Z*Be;for(let Pe=0;Pe<J;Pe++){const Ye=ae[Pe];ge(Ye[0]+Le,Ye[1]+Le,Ye[2]+Le)}}else{for(let Be=0;Be<J;Be++){const Le=ae[Be];ge(Le[2],Le[1],Le[0])}for(let Be=0;Be<J;Be++){const Le=ae[Be];ge(Le[0]+Z*h,Le[1]+Z*h,Le[2]+Z*h)}}n.addGroup(Me,i.length/3-Me,0)}function _e(){const Me=i.length/3;let Be=0;ne(Y,Be),Be+=Y.length;for(let Le=0,Pe=F.length;Le<Pe;Le++){const Ye=F[Le];ne(Ye,Be),Be+=Ye.length}n.addGroup(Me,i.length/3-Me,1)}function ne(Me,Be){let Le=Me.length;for(;--Le>=0;){const Pe=Le;let Ye=Le-1;Ye<0&&(Ye=Me.length-1);for(let Ze=0,re=h+M*2;Ze<re;Ze++){const be=Z*Ze,Ce=Z*(Ze+1),q=Be+Pe+be,V=Be+Ye+be,ie=Be+Ye+Ce,fe=Be+Pe+Ce;Ae(q,V,ie,fe)}}}function ue(Me,Be,Le){c.push(Me),c.push(Be),c.push(Le)}function ge(Me,Be,Le){Te(Me),Te(Be),Te(Le);const Pe=i.length/3,Ye=T.generateTopUV(n,i,Pe-3,Pe-2,Pe-1);se(Ye[0]),se(Ye[1]),se(Ye[2])}function Ae(Me,Be,Le,Pe){Te(Me),Te(Be),Te(Pe),Te(Be),Te(Le),Te(Pe);const Ye=i.length/3,Ze=T.generateSideWallUV(n,i,Ye-6,Ye-3,Ye-2,Ye-1);se(Ze[0]),se(Ze[1]),se(Ze[3]),se(Ze[1]),se(Ze[2]),se(Ze[3])}function Te(Me){i.push(c[Me*3+0]),i.push(c[Me*3+1]),i.push(c[Me*3+2])}function se(Me){a.push(Me.x),a.push(Me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return cue(t,n,e)}static fromJSON(e,t){const n=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];n.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new oS[i.type]().fromJSON(i)),new lM(n,e.options)}}const uue={generateTopUV:function(r,e,t,n,i){const a=e[t*3],s=e[t*3+1],o=e[n*3],c=e[n*3+1],u=e[i*3],h=e[i*3+1];return[new gt(a,s),new gt(o,c),new gt(u,h)]},generateSideWallUV:function(r,e,t,n,i,a){const s=e[t*3],o=e[t*3+1],c=e[t*3+2],u=e[n*3],h=e[n*3+1],d=e[n*3+2],m=e[i*3],v=e[i*3+1],x=e[i*3+2],b=e[a*3],M=e[a*3+1],_=e[a*3+2];return Math.abs(o-h)<Math.abs(s-u)?[new gt(s,1-c),new gt(u,1-d),new gt(m,1-x),new gt(b,1-_)]:[new gt(o,1-c),new gt(h,1-d),new gt(v,1-x),new gt(M,1-_)]}};function cue(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const a=r[n];t.shapes.push(a.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class uM extends Bh{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uM(e.radius,e.detail)}}class cM extends In{constructor(e=[new gt(0,-.5),new gt(.5,0),new gt(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=gn(i,0,Math.PI*2);const a=[],s=[],o=[],c=[],u=[],h=1/t,d=new xe,m=new gt,v=new xe,x=new xe,b=new xe;let M=0,_=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:M=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,v.x=_*1,v.y=-M,v.z=_*0,b.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case e.length-1:c.push(b.x,b.y,b.z);break;default:M=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,v.x=_*1,v.y=-M,v.z=_*0,x.copy(v),v.x+=b.x,v.y+=b.y,v.z+=b.z,v.normalize(),c.push(v.x,v.y,v.z),b.copy(x)}for(let T=0;T<=t;T++){const E=n+T*h*i,A=Math.sin(E),D=Math.cos(E);for(let N=0;N<=e.length-1;N++){d.x=e[N].x*A,d.y=e[N].y,d.z=e[N].x*D,s.push(d.x,d.y,d.z),m.x=T/t,m.y=N/(e.length-1),o.push(m.x,m.y);const O=c[3*N+0]*A,z=c[3*N+1],C=c[3*N+0]*D;u.push(O,z,C)}}for(let T=0;T<t;T++)for(let E=0;E<e.length-1;E++){const A=E+T*e.length,D=A,N=A+e.length,O=A+e.length+1,z=A+1;a.push(D,N,z),a.push(O,z,N)}this.setIndex(a),this.setAttribute("position",new Ht(s,3)),this.setAttribute("uv",new Ht(o,2)),this.setAttribute("normal",new Ht(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cM(e.points,e.segments,e.phiStart,e.phiLength)}}class Xy extends Bh{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xy(e.radius,e.detail)}}class Qv extends In{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const a=e/2,s=t/2,o=Math.floor(n),c=Math.floor(i),u=o+1,h=c+1,d=e/o,m=t/c,v=[],x=[],b=[],M=[];for(let _=0;_<h;_++){const T=_*m-s;for(let E=0;E<u;E++){const A=E*d-a;x.push(A,-T,0),b.push(0,0,1),M.push(E/o),M.push(1-_/c)}}for(let _=0;_<c;_++)for(let T=0;T<o;T++){const E=T+u*_,A=T+u*(_+1),D=T+1+u*(_+1),N=T+1+u*_;v.push(E,A,N),v.push(A,D,N)}this.setIndex(v),this.setAttribute("position",new Ht(x,3)),this.setAttribute("normal",new Ht(b,3)),this.setAttribute("uv",new Ht(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qv(e.width,e.height,e.widthSegments,e.heightSegments)}}class fM extends In{constructor(e=.5,t=1,n=32,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:a,thetaLength:s},n=Math.max(3,n),i=Math.max(1,i);const o=[],c=[],u=[],h=[];let d=e;const m=(t-e)/i,v=new xe,x=new gt;for(let b=0;b<=i;b++){for(let M=0;M<=n;M++){const _=a+M/n*s;v.x=d*Math.cos(_),v.y=d*Math.sin(_),c.push(v.x,v.y,v.z),u.push(0,0,1),x.x=(v.x/t+1)/2,x.y=(v.y/t+1)/2,h.push(x.x,x.y)}d+=m}for(let b=0;b<i;b++){const M=b*(n+1);for(let _=0;_<n;_++){const T=_+M,E=T,A=T+n+1,D=T+n+2,N=T+1;o.push(E,A,N),o.push(A,D,N)}}this.setIndex(o),this.setAttribute("position",new Ht(c,3)),this.setAttribute("normal",new Ht(u,3)),this.setAttribute("uv",new Ht(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fM(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class hM extends In{constructor(e=new ep([new gt(0,.5),new gt(-.5,-.5),new gt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],a=[],s=[];let o=0,c=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(o,c,h),o+=c,c=0;this.setIndex(n),this.setAttribute("position",new Ht(i,3)),this.setAttribute("normal",new Ht(a,3)),this.setAttribute("uv",new Ht(s,2));function u(h){const d=i.length/3,m=h.extractPoints(t);let v=m.shape;const x=m.holes;ou.isClockWise(v)===!1&&(v=v.reverse());for(let M=0,_=x.length;M<_;M++){const T=x[M];ou.isClockWise(T)===!0&&(x[M]=T.reverse())}const b=ou.triangulateShape(v,x);for(let M=0,_=x.length;M<_;M++){const T=x[M];v=v.concat(T)}for(let M=0,_=v.length;M<_;M++){const T=v[M];i.push(T.x,T.y,0),a.push(0,0,1),s.push(T.x,T.y)}for(let M=0,_=b.length;M<_;M++){const T=b[M],E=T[0]+d,A=T[1]+d,D=T[2]+d;n.push(E,A,D),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return fue(t,e)}static fromJSON(e,t){const n=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=t[e.shapes[i]];n.push(s)}return new hM(n,e.curveSegments)}}function fue(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class jy extends In{constructor(e=1,t=32,n=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(s+o,Math.PI);let u=0;const h=[],d=new xe,m=new xe,v=[],x=[],b=[],M=[];for(let _=0;_<=n;_++){const T=[],E=_/n;let A=0;_===0&&s===0?A=.5/t:_===n&&c===Math.PI&&(A=-.5/t);for(let D=0;D<=t;D++){const N=D/t;d.x=-e*Math.cos(i+N*a)*Math.sin(s+E*o),d.y=e*Math.cos(s+E*o),d.z=e*Math.sin(i+N*a)*Math.sin(s+E*o),x.push(d.x,d.y,d.z),m.copy(d).normalize(),b.push(m.x,m.y,m.z),M.push(N+A,1-E),T.push(u++)}h.push(T)}for(let _=0;_<n;_++)for(let T=0;T<t;T++){const E=h[_][T+1],A=h[_][T],D=h[_+1][T],N=h[_+1][T+1];(_!==0||s>0)&&v.push(E,A,N),(_!==n-1||c<Math.PI)&&v.push(A,D,N)}this.setIndex(v),this.setAttribute("position",new Ht(x,3)),this.setAttribute("normal",new Ht(b,3)),this.setAttribute("uv",new Ht(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class dM extends Bh{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dM(e.radius,e.detail)}}class pM extends In{constructor(e=1,t=.4,n=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:a},n=Math.floor(n),i=Math.floor(i);const s=[],o=[],c=[],u=[],h=new xe,d=new xe,m=new xe;for(let v=0;v<=n;v++)for(let x=0;x<=i;x++){const b=x/i*a,M=v/n*Math.PI*2;d.x=(e+t*Math.cos(M))*Math.cos(b),d.y=(e+t*Math.cos(M))*Math.sin(b),d.z=t*Math.sin(M),o.push(d.x,d.y,d.z),h.x=e*Math.cos(b),h.y=e*Math.sin(b),m.subVectors(d,h).normalize(),c.push(m.x,m.y,m.z),u.push(x/i),u.push(v/n)}for(let v=1;v<=n;v++)for(let x=1;x<=i;x++){const b=(i+1)*v+x-1,M=(i+1)*(v-1)+x-1,_=(i+1)*(v-1)+x,T=(i+1)*v+x;s.push(b,M,T),s.push(M,_,T)}this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("normal",new Ht(c,3)),this.setAttribute("uv",new Ht(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pM(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class mM extends In{constructor(e=1,t=.4,n=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:a,q:s},n=Math.floor(n),i=Math.floor(i);const o=[],c=[],u=[],h=[],d=new xe,m=new xe,v=new xe,x=new xe,b=new xe,M=new xe,_=new xe;for(let E=0;E<=n;++E){const A=E/n*a*Math.PI*2;T(A,a,s,e,v),T(A+.01,a,s,e,x),M.subVectors(x,v),_.addVectors(x,v),b.crossVectors(M,_),_.crossVectors(b,M),b.normalize(),_.normalize();for(let D=0;D<=i;++D){const N=D/i*Math.PI*2,O=-t*Math.cos(N),z=t*Math.sin(N);d.x=v.x+(O*_.x+z*b.x),d.y=v.y+(O*_.y+z*b.y),d.z=v.z+(O*_.z+z*b.z),c.push(d.x,d.y,d.z),m.subVectors(d,v).normalize(),u.push(m.x,m.y,m.z),h.push(E/n),h.push(D/i)}}for(let E=1;E<=n;E++)for(let A=1;A<=i;A++){const D=(i+1)*(E-1)+(A-1),N=(i+1)*E+(A-1),O=(i+1)*E+A,z=(i+1)*(E-1)+A;o.push(D,N,z),o.push(N,O,z)}this.setIndex(o),this.setAttribute("position",new Ht(c,3)),this.setAttribute("normal",new Ht(u,3)),this.setAttribute("uv",new Ht(h,2));function T(E,A,D,N,O){const z=Math.cos(E),C=Math.sin(E),R=D/A*E,F=Math.cos(R);O.x=N*(2+F)*.5*z,O.y=N*(2+F)*C*.5,O.z=N*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class vM extends In{constructor(e=new Gw(new xe(-1,-1,0),new xe(-1,1,0),new xe(1,1,0)),t=64,n=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new xe,c=new xe,u=new gt;let h=new xe;const d=[],m=[],v=[],x=[];b(),this.setIndex(x),this.setAttribute("position",new Ht(d,3)),this.setAttribute("normal",new Ht(m,3)),this.setAttribute("uv",new Ht(v,2));function b(){for(let E=0;E<t;E++)M(E);M(a===!1?t:0),T(),_()}function M(E){h=e.getPointAt(E/t,h);const A=s.normals[E],D=s.binormals[E];for(let N=0;N<=i;N++){const O=N/i*Math.PI*2,z=Math.sin(O),C=-Math.cos(O);c.x=C*A.x+z*D.x,c.y=C*A.y+z*D.y,c.z=C*A.z+z*D.z,c.normalize(),m.push(c.x,c.y,c.z),o.x=h.x+n*c.x,o.y=h.y+n*c.y,o.z=h.z+n*c.z,d.push(o.x,o.y,o.z)}}function _(){for(let E=1;E<=t;E++)for(let A=1;A<=i;A++){const D=(i+1)*(E-1)+(A-1),N=(i+1)*E+(A-1),O=(i+1)*E+A,z=(i+1)*(E-1)+A;x.push(D,N,z),x.push(N,O,z)}}function T(){for(let E=0;E<=t;E++)for(let A=0;A<=i;A++)u.x=E/t,u.y=A/i,v.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new vM(new oS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Xw extends In{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new xe,a=new xe;if(e.index!==null){const s=e.attributes.position,o=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,h=c.length;u<h;++u){const d=c[u],m=d.start,v=d.count;for(let x=m,b=m+v;x<b;x+=3)for(let M=0;M<3;M++){const _=o.getX(x+M),T=o.getX(x+(M+1)%3);i.fromBufferAttribute(s,_),a.fromBufferAttribute(s,T),YO(i,a,n)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,c=s.count/3;o<c;o++)for(let u=0;u<3;u++){const h=3*o+u,d=3*o+(u+1)%3;i.fromBufferAttribute(s,h),a.fromBufferAttribute(s,d),YO(i,a,n)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Ht(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function YO(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var WO=Object.freeze({__proto__:null,BoxGeometry:_p,CapsuleGeometry:iM,CircleGeometry:aM,ConeGeometry:ky,CylinderGeometry:Gy,DodecahedronGeometry:sM,EdgesGeometry:N5,ExtrudeGeometry:lM,IcosahedronGeometry:uM,LatheGeometry:cM,OctahedronGeometry:Xy,PlaneGeometry:Qv,PolyhedronGeometry:Bh,RingGeometry:fM,ShapeGeometry:hM,SphereGeometry:jy,TetrahedronGeometry:dM,TorusGeometry:pM,TorusKnotGeometry:mM,TubeGeometry:vM,WireframeGeometry:Xw});class I5 extends Ms{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new zt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class P5 extends ko{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class jw extends Ms{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Go,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class H5 extends jw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new gt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return gn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new zt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new zt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class V5 extends Ms{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new zt(16777215),this.specular=new zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Go,this.combine=Hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class q5 extends Ms{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class G5 extends Ms{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class k5 extends Ms{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Go,this.combine=Hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Yw extends Ms{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=n5,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ww extends Ms{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class X5 extends Ms{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class j5 extends Js{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function $d(r,e){return!r||r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function Y5(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function W5(r){function e(i,a){return r[i]-r[a]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function m2(r,e,t){const n=r.length,i=new r.constructor(n);for(let a=0,s=0;s!==n;++a){const o=t[a]*e;for(let c=0;c!==e;++c)i[s++]=r[o+c]}return i}function $w(r,e,t,n){let i=1,a=r[0];for(;a!==void 0&&a[n]===void 0;)a=r[i++];if(a===void 0)return;let s=a[n];if(s!==void 0)if(Array.isArray(s))do s=a[n],s!==void 0&&(e.push(a.time),t.push(...s)),a=r[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[n],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=r[i++];while(a!==void 0);else do s=a[n],s!==void 0&&(e.push(a.time),t.push(s)),a=r[i++];while(a!==void 0)}function hue(r,e,t,n,i=30){const a=r.clone();a.name=e;const s=[];for(let c=0;c<a.tracks.length;++c){const u=a.tracks[c],h=u.getValueSize(),d=[],m=[];for(let v=0;v<u.times.length;++v){const x=u.times[v]*i;if(!(x<t||x>=n)){d.push(u.times[v]);for(let b=0;b<h;++b)m.push(u.values[v*h+b])}}d.length!==0&&(u.times=$d(d,u.times.constructor),u.values=$d(m,u.values.constructor),s.push(u))}a.tracks=s;let o=1/0;for(let c=0;c<a.tracks.length;++c)o>a.tracks[c].times[0]&&(o=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*o);return a.resetDuration(),a}function due(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,a=e/n;for(let s=0;s<i;++s){const o=t.tracks[s],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const u=r.tracks.find(function(_){return _.name===o.name&&_.ValueTypeName===c});if(u===void 0)continue;let h=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let m=0;const v=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);const x=o.times.length-1;let b;if(a<=o.times[0]){const _=h,T=d-h;b=o.values.slice(_,T)}else if(a>=o.times[x]){const _=x*d+h,T=_+d-h;b=o.values.slice(_,T)}else{const _=o.createInterpolant(),T=h,E=d-h;_.evaluate(a),b=_.resultBuffer.slice(T,E)}c==="quaternion"&&new ys().fromArray(b).normalize().conjugate().toArray(b);const M=u.times.length;for(let _=0;_<M;++_){const T=_*v+m;if(c==="quaternion")ys.multiplyQuaternionsFlat(u.values,T,b,0,u.values,T);else{const E=v-m*2;for(let A=0;A<E;++A)u.values[T+A]-=b[A]}}}return r.blendMode=Nw,r}class pue{static convertArray(e,t){return $d(e,t)}static isTypedArray(e){return Y5(e)}static getKeyframeOrder(e){return W5(e)}static sortedArray(e,t,n){return m2(e,t,n)}static flattenJSON(e,t,n,i){$w(e,t,n,i)}static subclip(e,t,n,i,a=30){return hue(e,t,n,i,a)}static makeClipAdditive(e,t=0,n=e,i=30){return due(e,t,n,i)}}class Yy{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],a=t[n-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=n+2;;){if(i===void 0){if(e<a)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(a=i,i=t[++n],e<i)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(n=2,a=o);for(let c=n-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(i=a,a=t[--n-1],e>=a)break t}s=n,n=0;break n}break e}for(;n<s;){const o=n+s>>>1;e<t[o]?s=o:n=o+1}if(i=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,i)}return this.interpolate_(n,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)t[s]=n[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class $5 extends Yy{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Yd,endingEnd:Yd}}intervalChanged_(e,t,n){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],c=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case Wd:a=e,o=2*t-n;break;case py:a=i.length-2,o=t+i[a]-i[a+1];break;default:a=e,o=n}if(c===void 0)switch(this.getSettings_().endingEnd){case Wd:s=e,c=2*n-t;break;case py:s=1,c=n+i[1]-i[0];break;default:s=e-1,c=t}const u=(n-t)*.5,h=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(c-n),this._offsetPrev=a*h,this._offsetNext=s*h}interpolate_(e,t,n,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,u=c-o,h=this._offsetPrev,d=this._offsetNext,m=this._weightPrev,v=this._weightNext,x=(n-t)/(i-t),b=x*x,M=b*x,_=-m*M+2*m*b-m*x,T=(1+m)*M+(-1.5-2*m)*b+(-.5+m)*x+1,E=(-1-v)*M+(1.5+v)*b+.5*x,A=v*M-v*b;for(let D=0;D!==o;++D)a[D]=_*s[h+D]+T*s[u+D]+E*s[c+D]+A*s[d+D];return a}}class Zw extends Yy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=e*o,u=c-o,h=(n-t)/(i-t),d=1-h;for(let m=0;m!==o;++m)a[m]=s[u+m]*d+s[c+m]*h;return a}}class Z5 extends Yy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Nl{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=$d(t,this.TimeBufferType),this.values=$d(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:$d(e.times,Array),values:$d(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Z5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Zw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new $5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case dy:t=this.InterpolantFactoryMethodDiscrete;break;case iS:t=this.InterpolantFactoryMethodLinear;break;case Hb:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return dy;case this.InterpolantFactoryMethodLinear:return iS;case this.InterpolantFactoryMethodSmooth:return Hb}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let a=0,s=i-1;for(;a!==i&&n[a]<e;)++a;for(;s!==-1&&n[s]>t;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=n.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const c=n[o];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,c,s),e=!1;break}s=c}if(i!==void 0&&Y5(i))for(let o=0,c=i.length;o!==c;++o){const u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Hb,a=e.length-1;let s=1;for(let o=1;o<a;++o){let c=!1;const u=e[o],h=e[o+1];if(u!==h&&(o!==1||u!==e[0]))if(i)c=!0;else{const d=o*n,m=d-n,v=d+n;for(let x=0;x!==n;++x){const b=t[d+x];if(b!==t[m+x]||b!==t[v+x]){c=!0;break}}}if(c){if(o!==s){e[s]=e[o];const d=o*n,m=s*n;for(let v=0;v!==n;++v)t[m+v]=t[d+v]}++s}}if(a>0){e[s]=e[a];for(let o=a*n,c=s*n,u=0;u!==n;++u)t[c+u]=t[o+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Nl.prototype.ValueTypeName="";Nl.prototype.TimeBufferType=Float32Array;Nl.prototype.ValueBufferType=Float32Array;Nl.prototype.DefaultInterpolation=iS;class Sp extends Nl{constructor(e,t,n){super(e,t,n)}}Sp.prototype.ValueTypeName="bool";Sp.prototype.ValueBufferType=Array;Sp.prototype.DefaultInterpolation=dy;Sp.prototype.InterpolantFactoryMethodLinear=void 0;Sp.prototype.InterpolantFactoryMethodSmooth=void 0;class Kw extends Nl{constructor(e,t,n,i){super(e,t,n,i)}}Kw.prototype.ValueTypeName="color";class My extends Nl{constructor(e,t,n,i){super(e,t,n,i)}}My.prototype.ValueTypeName="number";class K5 extends Yy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,c=(n-t)/(i-t);let u=e*o;for(let h=u+o;u!==h;u+=4)ys.slerpFlat(a,0,s,u-o,s,u,c);return a}}class Wy extends Nl{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new K5(this.times,this.values,this.getValueSize(),e)}}Wy.prototype.ValueTypeName="quaternion";Wy.prototype.InterpolantFactoryMethodSmooth=void 0;class Mp extends Nl{constructor(e,t,n){super(e,t,n)}}Mp.prototype.ValueTypeName="string";Mp.prototype.ValueBufferType=Array;Mp.prototype.DefaultInterpolation=dy;Mp.prototype.InterpolantFactoryMethodLinear=void 0;Mp.prototype.InterpolantFactoryMethodSmooth=void 0;class Ey extends Nl{constructor(e,t,n,i){super(e,t,n,i)}}Ey.prototype.ValueTypeName="vector";class Ay{constructor(e="",t=-1,n=[],i=YS){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Vo(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let s=0,o=n.length;s!==o;++s)t.push(vue(n[s]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=n.length;a!==s;++a)t.push(Nl.toJSON(n[a]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const a=t.length,s=[];for(let o=0;o<a;o++){let c=[],u=[];c.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);const h=W5(c);c=m2(c,1,h),u=m2(u,1,h),!i&&c[0]===0&&(c.push(a),u.push(u[0])),s.push(new My(".morphTargetInfluences["+t[o].name+"]",c,u).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const u=e[o],h=u.name.match(a);if(h&&h.length>1){const d=h[1];let m=i[d];m||(i[d]=m=[]),m.push(u)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],t,n));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(d,m,v,x,b){if(v.length!==0){const M=[],_=[];$w(v,M,_,x),M.length!==0&&b.push(new d(m,M,_))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let c=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const m=u[d].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const v={};let x;for(x=0;x<m.length;x++)if(m[x].morphTargets)for(let b=0;b<m[x].morphTargets.length;b++)v[m[x].morphTargets[b]]=-1;for(const b in v){const M=[],_=[];for(let T=0;T!==m[x].morphTargets.length;++T){const E=m[x];M.push(E.time),_.push(E.morphTarget===b?1:0)}i.push(new My(".morphTargetInfluence["+b+"]",M,_))}c=v.length*s}else{const v=".bones["+t[d].name+"]";n(Ey,v+".position",m,"pos",i),n(Wy,v+".quaternion",m,"rot",i),n(Ey,v+".scale",m,"scl",i)}}return i.length===0?null:new this(a,c,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function mue(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return My;case"vector":case"vector2":case"vector3":case"vector4":return Ey;case"color":return Kw;case"quaternion":return Wy;case"bool":case"boolean":return Sp;case"string":return Mp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function vue(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=mue(r.type);if(r.times===void 0){const t=[],n=[];$w(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const tc={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class Qw{constructor(e,t,n){const i=this;let a=!1,s=0,o=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(h){o++,a===!1&&i.onStart!==void 0&&i.onStart(h,s,o),a=!0},this.itemEnd=function(h){s++,i.onProgress!==void 0&&i.onProgress(h,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){const d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,m=u.length;d<m;d+=2){const v=u[d],x=u[d+1];if(v.global&&(v.lastIndex=0),v.test(h))return x}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const Q5=new Qw;class xo{constructor(e){this.manager=e!==void 0?e:Q5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,a){n.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}xo.DEFAULT_MATERIAL_NAME="__DEFAULT";const Gc={};class gue extends Error{constructor(e,t){super(e),this.response=t}}class uf extends xo{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=tc.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Gc[e]!==void 0){Gc[e].push({onLoad:t,onProgress:n,onError:i});return}Gc[e]=[],Gc[e].push({onLoad:t,onProgress:n,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,c=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=Gc[e],d=u.body.getReader(),m=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),v=m?parseInt(m):0,x=v!==0;let b=0;const M=new ReadableStream({start(_){T();function T(){d.read().then(({done:E,value:A})=>{if(E)_.close();else{b+=A.byteLength;const D=new ProgressEvent("progress",{lengthComputable:x,loaded:b,total:v});for(let N=0,O=h.length;N<O;N++){const z=h[N];z.onProgress&&z.onProgress(D)}_.enqueue(A),T()}},E=>{_.error(E)})}}});return new Response(M)}else throw new gue(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return u.json();default:if(o==="")return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),m=d&&d[1]?d[1].toLowerCase():void 0,v=new TextDecoder(m);return u.arrayBuffer().then(x=>v.decode(x))}}}).then(u=>{tc.add(`file:${e}`,u);const h=Gc[e];delete Gc[e];for(let d=0,m=h.length;d<m;d++){const v=h[d];v.onLoad&&v.onLoad(u)}}).catch(u=>{const h=Gc[e];if(h===void 0)throw this.manager.itemError(e),u;delete Gc[e];for(let d=0,m=h.length;d<m;d++){const v=h[d];v.onError&&v.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class yue extends xo{constructor(e){super(e)}load(e,t,n,i){const a=this,s=new uf(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){i?i(c):console.error(c),a.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Ay.parse(e[n]);t.push(i)}return t}}class xue extends xo{constructor(e){super(e)}load(e,t,n,i){const a=this,s=[],o=new rM,c=new uf(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let u=0;function h(d){c.load(e[d],function(m){const v=a.parse(m,!0);s[d]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},u+=1,u===6&&(v.mipmapCount===1&&(o.minFilter=sa),o.image=s,o.format=v.format,o.needsUpdate=!0,t&&t(o))},n,i)}if(Array.isArray(e))for(let d=0,m=e.length;d<m;++d)h(d);else c.load(e,function(d){const m=a.parse(d,!0);if(m.isCubemap){const v=m.mipmaps.length/m.mipmapCount;for(let x=0;x<v;x++){s[x]={mipmaps:[]};for(let b=0;b<m.mipmapCount;b++)s[x].mipmaps.push(m.mipmaps[x*m.mipmapCount+b]),s[x].format=m.format,s[x].width=m.width,s[x].height=m.height}o.image=s}else o.image.width=m.width,o.image.height=m.height,o.mipmaps=m.mipmaps;m.mipmapCount===1&&(o.minFilter=sa),o.format=m.format,o.needsUpdate=!0,t&&t(o)},n,i);return o}}const Ym=new WeakMap;class wy extends xo{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=tc.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0);else{let d=Ym.get(s);d===void 0&&(d=[],Ym.set(s,d)),d.push({onLoad:t,onError:i})}return s}const o=gy("img");function c(){h(),t&&t(this);const d=Ym.get(this)||[];for(let m=0;m<d.length;m++){const v=d[m];v.onLoad&&v.onLoad(this)}Ym.delete(this),a.manager.itemEnd(e)}function u(d){h(),i&&i(d),tc.remove(`image:${e}`);const m=Ym.get(this)||[];for(let v=0;v<m.length;v++){const x=m[v];x.onError&&x.onError(d)}Ym.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){o.removeEventListener("load",c,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),tc.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class bue extends xo{constructor(e){super(e)}load(e,t,n,i){const a=new qy;a.colorSpace=ds;const s=new wy(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function c(u){s.load(e[u],function(h){a.images[u]=h,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let u=0;u<e.length;++u)c(u);return a}}class _ue extends xo{constructor(e){super(e)}load(e,t,n,i){const a=this,s=new rc,o=new uf(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(c){let u;try{u=a.parse(c)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:xl,s.wrapT=u.wrapT!==void 0?u.wrapT:xl,s.magFilter=u.magFilter!==void 0?u.magFilter:sa,s.minFilter=u.minFilter!==void 0?u.minFilter:sa,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(s.colorSpace=u.colorSpace),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=ec),u.mipmapCount===1&&(s.minFilter=sa),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,t&&t(s,u)},n,i),s}}class Sue extends xo{constructor(e){super(e)}load(e,t,n,i){const a=new Ni,s=new wy(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},n,i),a}}class Uh extends xr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new zt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class J5 extends Uh{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(xr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new zt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const eA=new pn,$O=new xe,ZO=new xe;class Jw{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gt(512,512),this.mapType=Sl,this.map=null,this.mapPass=null,this.matrix=new pn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kv,this._frameExtents=new gt(1,1),this._viewportCount=1,this._viewports=[new Xn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;$O.setFromMatrixPosition(e.matrixWorld),t.position.copy($O),ZO.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ZO),t.updateMatrixWorld(),eA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eA,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(eA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Mue extends Jw{constructor(){super(new Hi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=Tv*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(n!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class eL extends Uh{constructor(e,t,n=0,i=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(xr.DEFAULT_UP),this.updateMatrix(),this.target=new xr,this.distance=n,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new Mue}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const KO=new pn,F0=new xe,tA=new xe;class Eue extends Jw{constructor(){super(new Hi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new gt(4,2),this._viewportCount=6,this._viewports=[new Xn(2,1,1,1),new Xn(0,1,1,1),new Xn(3,1,1,1),new Xn(1,1,1,1),new Xn(3,0,1,1),new Xn(1,0,1,1)],this._cubeDirections=[new xe(1,0,0),new xe(-1,0,0),new xe(0,0,1),new xe(0,0,-1),new xe(0,1,0),new xe(0,-1,0)],this._cubeUps=[new xe(0,1,0),new xe(0,1,0),new xe(0,1,0),new xe(0,1,0),new xe(0,0,1),new xe(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),F0.setFromMatrixPosition(e.matrixWorld),n.position.copy(F0),tA.copy(n.position),tA.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(tA),n.updateMatrixWorld(),i.makeTranslation(-F0.x,-F0.y,-F0.z),KO.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(KO,n.coordinateSystem,n.reversedDepth)}}class tL extends Uh{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Eue}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class dh extends ZS{constructor(e=-1,t=1,n=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=n-e,s=n+e,o=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=h*this.view.offsetY,c=o-h*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Aue extends Jw{constructor(){super(new dh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nL extends Uh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xr.DEFAULT_UP),this.updateMatrix(),this.target=new xr,this.shadow=new Aue}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class rL extends Uh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class iL extends Uh{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class aL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new xe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],1.092548*(n*i)),t.addScaledVector(s[5],1.092548*(i*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(n*a)),t.addScaledVector(s[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*n),t.addScaledVector(s[4],2*.429043*n*i),t.addScaledVector(s[5],2*.429043*i*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*n*a),t.addScaledVector(s[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-i*i)}}class sL extends Uh{constructor(e=new aL,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class gM extends xo{constructor(e){super(e),this.textures={}}load(e,t,n,i){const a=this,s=new uf(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){i?i(c):console.error(c),a.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new zt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=n(s.value);break;case"c":i.uniforms[a].value=new zt().setHex(s.value);break;case"v2":i.uniforms[a].value=new gt().fromArray(s.value);break;case"v3":i.uniforms[a].value=new xe().fromArray(s.value);break;case"v4":i.uniforms[a].value=new Xn().fromArray(s.value);break;case"m3":i.uniforms[a].value=new Bn().fromArray(s.value);break;case"m4":i.uniforms[a].value=new pn().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new gt().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new gt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return gM.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:I5,SpriteMaterial:zw,RawShaderMaterial:P5,ShaderMaterial:ko,PointsMaterial:nM,MeshPhysicalMaterial:H5,MeshStandardMaterial:jw,MeshPhongMaterial:V5,MeshToonMaterial:q5,MeshNormalMaterial:G5,MeshLambertMaterial:k5,MeshDepthMaterial:Yw,MeshDistanceMaterial:Ww,MeshBasicMaterial:Oh,MeshMatcapMaterial:X5,LineDashedMaterial:j5,LineBasicMaterial:Js,Material:Ms};return new t[e]}}class v2{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class eT extends In{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class oL extends xo{constructor(e){super(e)}load(e,t,n,i){const a=this,s=new uf(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(c){i?i(c):console.error(c),a.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(v,x){if(t[x]!==void 0)return t[x];const M=v.interleavedBuffers[x],_=a(v,M.buffer),T=iv(M.type,_),E=new JS(T,M.stride);return E.uuid=M.uuid,t[x]=E,E}function a(v,x){if(n[x]!==void 0)return n[x];const M=v.arrayBuffers[x],_=new Uint32Array(M).buffer;return n[x]=_,_}const s=e.isInstancedBufferGeometry?new eT:new In,o=e.data.index;if(o!==void 0){const v=iv(o.type,o.array);s.setIndex(new Wr(v,1))}const c=e.data.attributes;for(const v in c){const x=c[v];let b;if(x.isInterleavedBufferAttribute){const M=i(e.data,x.data);b=new Ho(M,x.itemSize,x.offset,x.normalized)}else{const M=iv(x.type,x.array),_=x.isInstancedBufferAttribute?Cv:Wr;b=new _(M,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),x.usage!==void 0&&b.setUsage(x.usage),s.setAttribute(v,b)}const u=e.data.morphAttributes;if(u)for(const v in u){const x=u[v],b=[];for(let M=0,_=x.length;M<_;M++){const T=x[M];let E;if(T.isInterleavedBufferAttribute){const A=i(e.data,T.data);E=new Ho(A,T.itemSize,T.offset,T.normalized)}else{const A=iv(T.type,T.array);E=new Wr(A,T.itemSize,T.normalized)}T.name!==void 0&&(E.name=T.name),b.push(E)}s.morphAttributes[v]=b}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let v=0,x=d.length;v!==x;++v){const b=d[v];s.addGroup(b.start,b.count,b.materialIndex)}const m=e.data.boundingSphere;return m!==void 0&&(s.boundingSphere=new la().fromJSON(m)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class wue extends xo{constructor(e){super(e)}load(e,t,n,i){const a=this,s=this.path===""?v2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new uf(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){let u=null;try{u=JSON.parse(c)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(u,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?v2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new uf(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,a,c,o,n),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),t!==void 0){let d=!1;for(const m in s)if(s[m].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,i,o,s,t),u=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,u),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const a=new ep().fromJSON(e[n]);t[a.uuid]=a}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new eM().fromJSON(e[a],i);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new oL;for(let a=0,s=e.length;a<s;a++){let o;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(c);break;default:c.type in WO?o=WO[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}o.uuid=c.uuid,c.name!==void 0&&(o.name=c.name),c.userData!==void 0&&(o.userData=c.userData),n[c.uuid]=o}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const a=new gM;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const c=e[s];n[c.uuid]===void 0&&(n[c.uuid]=a.parse(c)),i[c.uuid]=n[c.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],a=Ay.parse(i);t[a.uuid]=a}return t}parseImages(e,t){const n=this,i={};let a;function s(c){return n.manager.itemStart(c),a.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function o(c){if(typeof c=="string"){const u=c,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return s(h)}else return c.data?{data:iv(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new Qw(t);a=new wy(c),a.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const d=e[u],m=d.url;if(Array.isArray(m)){const v=[];for(let x=0,b=m.length;x<b;x++){const M=m[x],_=o(M);_!==null&&(_ instanceof HTMLImageElement?v.push(_):v.push(new rc(_.data,_.width,_.height)))}i[d.uuid]=new fh(v)}else{const v=o(d.url);i[d.uuid]=new fh(v)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function a(s){if(typeof s=="string"){const o=s,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(c)}else return s.data?{data:iv(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new wy(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const c=e[s],u=c.url;if(Array.isArray(u)){const h=[];for(let d=0,m=u.length;d<m;d++){const v=u[d],x=await a(v);x!==null&&(x instanceof HTMLImageElement?h.push(x):h.push(new rc(x.data,x.width,x.height)))}n[c.uuid]=new fh(h)}else{const h=await a(c.url);n[c.uuid]=new fh(h)}}}return n}parseTextures(e,t){function n(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const c=t[o.image],u=c.data;let h;Array.isArray(u)?(h=new qy,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new rc:h=new Ni,u&&(h.needsUpdate=!0)),h.source=c,h.uuid=o.uuid,o.name!==void 0&&(h.name=o.name),o.mapping!==void 0&&(h.mapping=n(o.mapping,Tue)),o.channel!==void 0&&(h.channel=o.channel),o.offset!==void 0&&h.offset.fromArray(o.offset),o.repeat!==void 0&&h.repeat.fromArray(o.repeat),o.center!==void 0&&h.center.fromArray(o.center),o.rotation!==void 0&&(h.rotation=o.rotation),o.wrap!==void 0&&(h.wrapS=n(o.wrap[0],QO),h.wrapT=n(o.wrap[1],QO)),o.format!==void 0&&(h.format=o.format),o.internalFormat!==void 0&&(h.internalFormat=o.internalFormat),o.type!==void 0&&(h.type=o.type),o.colorSpace!==void 0&&(h.colorSpace=o.colorSpace),o.minFilter!==void 0&&(h.minFilter=n(o.minFilter,JO)),o.magFilter!==void 0&&(h.magFilter=n(o.magFilter,JO)),o.anisotropy!==void 0&&(h.anisotropy=o.anisotropy),o.flipY!==void 0&&(h.flipY=o.flipY),o.generateMipmaps!==void 0&&(h.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(h.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(h.compareFunction=o.compareFunction),o.userData!==void 0&&(h.userData=o.userData),i[o.uuid]=h}return i}parseObject(e,t,n,i,a){let s;function o(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function c(m){if(m!==void 0){if(Array.isArray(m)){const v=[];for(let x=0,b=m.length;x<b;x++){const M=m[x];n[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),v.push(n[M])}return v}return n[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),n[m]}}function u(m){return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),i[m]}let h,d;switch(e.type){case"Scene":s=new Uw,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new zt(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new QS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new KS(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Hi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new dh(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new rL(e.color,e.intensity);break;case"DirectionalLight":s=new nL(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new tL(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new iL(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new eL(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new J5(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new sL().fromJSON(e);break;case"SkinnedMesh":h=o(e.geometry),d=c(e.material),s=new S5(h,d),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":h=o(e.geometry),d=c(e.material),s=new Vi(h,d);break;case"InstancedMesh":h=o(e.geometry),d=c(e.material);const m=e.count,v=e.instanceMatrix,x=e.instanceColor;s=new M5(h,d,m),s.instanceMatrix=new Cv(new Float32Array(v.array),16),x!==void 0&&(s.instanceColor=new Cv(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":h=o(e.geometry),d=c(e.material),s=new E5(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),s.geometry=h,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(b=>{let M=null,_=null;return b.boundingBox!==void 0&&(M=new oa().fromJSON(b.boundingBox)),b.boundingSphere!==void 0&&(_=new la().fromJSON(b.boundingSphere)),{...b,boundingBox:M,boundingSphere:_}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=u(e.matricesTexture.uuid),s._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new la().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new oa().fromJSON(e.boundingBox));break;case"LOD":s=new _5;break;case"Line":s=new bh(o(e.geometry),c(e.material));break;case"LineLoop":s=new A5(o(e.geometry),c(e.material));break;case"LineSegments":s=new cc(o(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new w5(o(e.geometry),c(e.material));break;case"Sprite":s=new b5(c(e.material));break;case"Group":s=new av;break;case"Bone":s=new Fw;break;default:s=new xr}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let v=0;v<m.length;v++)s.add(this.parseObject(m[v],t,n,i,a))}if(e.animations!==void 0){const m=e.animations;for(let v=0;v<m.length;v++){const x=m[v];s.animations.push(a[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const m=e.levels;for(let v=0;v<m.length;v++){const x=m[v],b=s.getObjectByProperty("uuid",x.object);b!==void 0&&s.addLevel(b,x.distance,x.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new xr}})}}const Tue={UVMapping:HS,CubeReflectionMapping:of,CubeRefractionMapping:yh,EquirectangularReflectionMapping:uy,EquirectangularRefractionMapping:cy,CubeUVReflectionMapping:$v},QO={RepeatWrapping:fy,ClampToEdgeWrapping:xl,MirroredRepeatWrapping:hy},JO={NearestFilter:ja,NearestMipmapNearestFilter:bw,NearestMipmapLinearFilter:rv,LinearFilter:sa,LinearMipmapNearestFilter:W0,LinearMipmapLinearFilter:ec},nA=new WeakMap;class Nue extends xo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=tc.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(u=>{if(nA.has(s)===!0)i&&i(nA.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(u),a.manager.itemEnd(e),u});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return tc.add(`image-bitmap:${e}`,u),t&&t(u),a.manager.itemEnd(e),u}).catch(function(u){i&&i(u),nA.set(c,u),tc.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});tc.add(`image-bitmap:${e}`,c),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let pb;class tT{static getContext(){return pb===void 0&&(pb=new(window.AudioContext||window.webkitAudioContext)),pb}static setContext(e){pb=e}}class Due extends xo{constructor(e){super(e)}load(e,t,n,i){const a=this,s=new uf(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(c){try{const u=c.slice(0);tT.getContext().decodeAudioData(u,function(d){t(d)}).catch(o)}catch(u){o(u)}},n,i);function o(c){i?i(c):console.error(c),a.manager.itemError(e)}}}const e4=new pn,t4=new pn,Dd=new pn;class Cue{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Hi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Hi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Dd.copy(e.projectionMatrix);const i=t.eyeSep/2,a=i*t.near/t.focus,s=t.near*Math.tan(Jd*t.fov*.5)/t.zoom;let o,c;t4.elements[12]=-i,e4.elements[12]=i,o=-s*t.aspect+a,c=s*t.aspect+a,Dd.elements[0]=2*t.near/(c-o),Dd.elements[8]=(c+o)/(c-o),this.cameraL.projectionMatrix.copy(Dd),o=-s*t.aspect-a,c=s*t.aspect-a,Dd.elements[0]=2*t.near/(c-o),Dd.elements[8]=(c+o)/(c-o),this.cameraR.projectionMatrix.copy(Dd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(t4),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(e4)}}class lL extends Hi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class nT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Cd=new xe,rA=new ys,Rue=new xe,Rd=new xe,Od=new xe;class Oue extends xr{constructor(){super(),this.type="AudioListener",this.context=tT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new nT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Cd,rA,Rue),Rd.set(0,0,-1).applyQuaternion(rA),Od.set(0,1,0).applyQuaternion(rA),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Cd.x,n),t.positionY.linearRampToValueAtTime(Cd.y,n),t.positionZ.linearRampToValueAtTime(Cd.z,n),t.forwardX.linearRampToValueAtTime(Rd.x,n),t.forwardY.linearRampToValueAtTime(Rd.y,n),t.forwardZ.linearRampToValueAtTime(Rd.z,n),t.upX.linearRampToValueAtTime(Od.x,n),t.upY.linearRampToValueAtTime(Od.y,n),t.upZ.linearRampToValueAtTime(Od.z,n)}else t.setPosition(Cd.x,Cd.y,Cd.z),t.setOrientation(Rd.x,Rd.y,Rd.z,Od.x,Od.y,Od.z)}}class uL extends xr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Bd=new xe,n4=new ys,Bue=new xe,Ud=new xe;class Uue extends uL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Bd,n4,Bue),Ud.set(0,0,1).applyQuaternion(n4);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Bd.x,n),t.positionY.linearRampToValueAtTime(Bd.y,n),t.positionZ.linearRampToValueAtTime(Bd.z,n),t.orientationX.linearRampToValueAtTime(Ud.x,n),t.orientationY.linearRampToValueAtTime(Ud.y,n),t.orientationZ.linearRampToValueAtTime(Ud.z,n)}else t.setPosition(Bd.x,Bd.y,Bd.z),t.setOrientation(Ud.x,Ud.y,Ud.z)}}class zue{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class cL{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,a,s;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)n[a+o]=n[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(n,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(n,i,c,1-a,t)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let c=t,u=t+t;c!==u;++c)if(n[c]!==n[c+t]){o.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let a=n,s=i;a!==s;++a)t[a]=t[i+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[t+s]=e[n+s]}_slerp(e,t,n,i){ys.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,a){const s=this._workIndex*a;ys.multiplyQuaternionsFlat(e,s,e,t,e,n),ys.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,n,i,a){const s=1-i;for(let o=0;o!==a;++o){const c=t+o;e[c]=e[c]*s+e[n+o]*i}}_lerpAdditive(e,t,n,i,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[n+s]*i}}}const rT="\\[\\]\\.:\\/",Fue=new RegExp("["+rT+"]","g"),iT="[^"+rT+"]",Lue="[^"+rT.replace("\\.","")+"]",Iue=/((?:WC+[\/:])*)/.source.replace("WC",iT),Pue=/(WCOD+)?/.source.replace("WCOD",Lue),Hue=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",iT),Vue=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",iT),que=new RegExp("^"+Iue+Pue+Hue+Vue+"$"),Gue=["material","materials","bones","map"];class kue{constructor(e,t,n){const i=n||yr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=n.length;i!==a;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class yr{constructor(e,t,n){this.path=t,this.parsedPath=n||yr.parseTrackName(t),this.node=yr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new yr.Composite(e,t,n):new yr(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Fue,"")}static parseTrackName(e){const t=que.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=n.nodeName.substring(i+1);Gue.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const c=n(o.children);if(c)return c}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=yr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}yr.Composite=kue;yr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};yr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};yr.prototype.GetterByBindingType=[yr.prototype._getValue_direct,yr.prototype._getValue_array,yr.prototype._getValue_arrayElement,yr.prototype._getValue_toArray];yr.prototype.SetterByBindingTypeAndVersioning=[[yr.prototype._setValue_direct,yr.prototype._setValue_direct_setNeedsUpdate,yr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[yr.prototype._setValue_array,yr.prototype._setValue_array_setNeedsUpdate,yr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[yr.prototype._setValue_arrayElement,yr.prototype._setValue_arrayElement_setNeedsUpdate,yr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[yr.prototype._setValue_fromArray,yr.prototype._setValue_fromArray_setNeedsUpdate,yr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Xue{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Vo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length;let o,c=e.length,u=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const m=arguments[h],v=m.uuid;let x=t[v];if(x===void 0){x=c++,t[v]=x,e.push(m);for(let b=0,M=s;b!==M;++b)a[b].push(new yr(m,n[b],i[b]))}else if(x<u){o=e[x];const b=--u,M=e[b];t[M.uuid]=x,e[x]=M,t[v]=b,e[b]=m;for(let _=0,T=s;_!==T;++_){const E=a[_],A=E[b];let D=E[x];E[x]=A,D===void 0&&(D=new yr(m,n[_],i[_])),E[b]=D}}else e[x]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const c=arguments[s],u=c.uuid,h=t[u];if(h!==void 0&&h>=a){const d=a++,m=e[d];t[m.uuid]=h,e[h]=m,t[u]=d,e[d]=c;for(let v=0,x=i;v!==x;++v){const b=n[v],M=b[d],_=b[h];b[h]=M,b[d]=_}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,c=arguments.length;o!==c;++o){const u=arguments[o],h=u.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<a){const m=--a,v=e[m],x=--s,b=e[x];t[v.uuid]=d,e[d]=v,t[b.uuid]=m,e[m]=b,e.pop();for(let M=0,_=i;M!==_;++M){const T=n[M],E=T[m],A=T[x];T[d]=E,T[m]=A,T.pop()}}else{const m=--s,v=e[m];m>0&&(t[v.uuid]=d),e[d]=v,e.pop();for(let x=0,b=i;x!==b;++x){const M=n[x];M[d]=M[m],M.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const a=this._bindings;if(i!==void 0)return a[i];const s=this._paths,o=this._parsedPaths,c=this._objects,u=c.length,h=this.nCachedObjects_,d=new Array(u);i=a.length,n[e]=i,s.push(e),o.push(t),a.push(d);for(let m=h,v=c.length;m!==v;++m){const x=c[m];d[m]=new yr(x,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,c=s[o],u=e[o];t[u]=n,s[n]=c,s.pop(),a[n]=a[o],a.pop(),i[n]=i[o],i.pop()}}}class fL{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const a=t.tracks,s=a.length,o=new Array(s),c={endingStart:Yd,endingEnd:Yd};for(let u=0;u!==s;++u){const h=a[u].createInterpolant(null);o[u]=h,h.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=e5,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,u=o.sampleValues;return c[0]=a,c[1]=a+n,u[0]=e/s,u[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Nw:for(let h=0,d=c.length;h!==d;++h)c[h].evaluate(s),u[h].accumulateAdditive(o);break;case YS:default:for(let h=0,d=c.length;h!==d;++h)c[h].evaluate(s),u[h].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,a=this._loopCount;const s=n===t5;if(e===0)return a===-1?i:s&&(a&1)===1?t-i:i;if(n===JF){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,a+=Math.abs(o);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Wd,i.endingEnd=Wd):(e?i.endingStart=this.zeroSlopeAtStart?Wd:Yd:i.endingStart=py,t?i.endingEnd=this.zeroSlopeAtEnd?Wd:Yd:i.endingEnd=py)}_scheduleFading(e,t,n){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,c=s.sampleValues;return o[0]=a,c[0]=t,o[1]=a+e,c[1]=n,this}}const jue=new Float32Array(1);class Yue extends uc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,c=n.uuid,u=this._bindingsByRootAndName;let h=u[c];h===void 0&&(h={},u[c]=h);for(let d=0;d!==a;++d){const m=i[d],v=m.name;let x=h[v];if(x!==void 0)++x.referenceCount,s[d]=x;else{if(x=s[d],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,c,v));continue}const b=t&&t._propertyBindings[d].binding.parsedPath;x=new cL(yr.create(n,v,b),m.ValueTypeName,m.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,v),s[d]=x}o[d].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],c=o.knownActions,u=c[c.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,c[h]=u,c.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,m=(e._localRoot||this._root).uuid;delete d[m],c.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,a=n.path,s=this._bindingsByRootAndName,o=s[i],c=t[t.length-1],u=e._cacheIndex;c._cacheIndex=u,t[u]=c,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Zw(new Float32Array(2),new Float32Array(2),1,jue),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){const i=t||this._root,a=i.uuid;let s=typeof e=="string"?Ay.findByName(i,e):e;const o=s!==null?s.uuid:e,c=this._actionsByClip[o];let u=null;if(n===void 0&&(s!==null?n=s.blendMode:n=YS),c!==void 0){const d=c.actionByRoot[a];if(d!==void 0&&d.blendMode===n)return d;u=c.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const h=new fL(this,s,t,n);return this._bindAction(h,u),this._addInactiveAction(h,o,a),h}existingAction(e,t){const n=t||this._root,i=n.uuid,a=typeof e=="string"?Ay.findByName(n,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(i,e,a,s);const o=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)o[u].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,a=i[n];if(a!==void 0){const s=a.knownActions;for(let o=0,c=s.length;o!==c;++o){const u=s[o];this._deactivateAction(u);const h=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const o=n[s].actionByRoot,c=o[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Wue extends Rw{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new $S(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class yM{constructor(e){this.value=e}clone(){return new yM(this.value.clone===void 0?this.value:this.value.clone())}}let $ue=0;class Zue extends uc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:$ue++}),this.name="",this.usage=vy,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const a=Array.isArray(t[n])?t[n]:[t[n]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class uS extends JS{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Kue{constructor(e,t,n,i,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const r4=new pn;class hL{constructor(e,t,n=0,i=1/0){this.ray=new bp(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Nv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return r4.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(r4),this}intersectObject(e,t=!0,n=[]){return g2(e,this,n,t),n.sort(i4),n}intersectObjects(e,t=!0,n=[]){for(let i=0,a=e.length;i<a;i++)g2(e[i],this,n,t);return n.sort(i4),n}}function i4(r,e){return r.distance-e.distance}function g2(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const a=r.children;for(let s=0,o=a.length;s<o;s++)g2(a[s],e,t,!0)}}class Que{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Jue.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Jue(){this._document.hidden===!1&&this.reset()}class y2{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=gn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(gn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class ece{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class aT{constructor(e,t,n,i){aT.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const a=this.elements;return a[0]=e,a[2]=t,a[1]=n,a[3]=i,this}}const a4=new gt;class tce{constructor(e=new gt(1/0,1/0),t=new gt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=a4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,a4).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const s4=new xe,mb=new xe,Wm=new xe,$m=new xe,iA=new xe,nce=new xe,rce=new xe;class dL{constructor(e=new xe,t=new xe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){s4.subVectors(e,this.start),mb.subVectors(this.end,this.start);const n=mb.dot(mb);let a=mb.dot(s4)/n;return t&&(a=gn(a,0,1)),a}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=nce,n=rce){const i=10000000000000001e-32;let a,s;const o=this.start,c=e.start,u=this.end,h=e.end;Wm.subVectors(u,o),$m.subVectors(h,c),iA.subVectors(o,c);const d=Wm.dot(Wm),m=$m.dot($m),v=$m.dot(iA);if(d<=i&&m<=i)return t.copy(o),n.copy(c),t.sub(n),t.dot(t);if(d<=i)a=0,s=v/m,s=gn(s,0,1);else{const x=Wm.dot(iA);if(m<=i)s=0,a=gn(-x/d,0,1);else{const b=Wm.dot($m),M=d*m-b*b;M!==0?a=gn((b*v-x*m)/M,0,1):a=0,s=(b*a+v)/m,s<0?(s=0,a=gn(-x/d,0,1)):s>1&&(s=1,a=gn((b-x)/d,0,1))}}return t.copy(o).add(Wm.multiplyScalar(a)),n.copy(c).add($m.multiplyScalar(s)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const o4=new xe;class ice extends xr{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new In,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,c=32;s<c;s++,o++){const u=s/c*Math.PI*2,h=o/c*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}n.setAttribute("position",new Ht(i,3));const a=new Js({fog:!1,toneMapped:!1});this.cone=new cc(n,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),o4.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(o4),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const rh=new xe,vb=new pn,aA=new pn;class ace extends cc{constructor(e){const t=pL(e),n=new In,i=[],a=[];for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}n.setAttribute("position",new Ht(i,3)),n.setAttribute("color",new Ht(a,3));const s=new Js({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new zt(255),c=new zt(65280);this.setColors(o,c)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");aA.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(vb.multiplyMatrices(aA,o.matrixWorld),rh.setFromMatrixPosition(vb),i.setXYZ(s,rh.x,rh.y,rh.z),vb.multiplyMatrices(aA,o.parent.matrixWorld),rh.setFromMatrixPosition(vb),i.setXYZ(s+1,rh.x,rh.y,rh.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let a=0;a<i.count;a+=2)i.setXYZ(a,e.r,e.g,e.b),i.setXYZ(a+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function pL(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push(...pL(r.children[t]));return e}class sce extends Vi{constructor(e,t,n){const i=new jy(t,4,2),a=new Oh({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const oce=new xe,l4=new zt,u4=new zt;class lce extends xr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Xy(t);i.rotateY(Math.PI*.5),this.material=new Oh({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),s=new Float32Array(a.count*3);i.setAttribute("color",new Wr(s,3)),this.add(new Vi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");l4.copy(this.light.color),u4.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const a=n<i/2?l4:u4;t.setXYZ(n,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(oce.setFromMatrixPosition(this.light.matrixWorld).negate())}}class uce extends cc{constructor(e=10,t=10,n=4473924,i=8947848){n=new zt(n),i=new zt(i);const a=t/2,s=e/t,o=e/2,c=[],u=[];for(let m=0,v=0,x=-o;m<=t;m++,x+=s){c.push(-o,0,x,o,0,x),c.push(x,0,-o,x,0,o);const b=m===a?n:i;b.toArray(u,v),v+=3,b.toArray(u,v),v+=3,b.toArray(u,v),v+=3,b.toArray(u,v),v+=3}const h=new In;h.setAttribute("position",new Ht(c,3)),h.setAttribute("color",new Ht(u,3));const d=new Js({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class cce extends cc{constructor(e=10,t=16,n=8,i=64,a=4473924,s=8947848){a=new zt(a),s=new zt(s);const o=[],c=[];if(t>1)for(let d=0;d<t;d++){const m=d/t*(Math.PI*2),v=Math.sin(m)*e,x=Math.cos(m)*e;o.push(0,0,0),o.push(v,0,x);const b=d&1?a:s;c.push(b.r,b.g,b.b),c.push(b.r,b.g,b.b)}for(let d=0;d<n;d++){const m=d&1?a:s,v=e-e/n*d;for(let x=0;x<i;x++){let b=x/i*(Math.PI*2),M=Math.sin(b)*v,_=Math.cos(b)*v;o.push(M,0,_),c.push(m.r,m.g,m.b),b=(x+1)/i*(Math.PI*2),M=Math.sin(b)*v,_=Math.cos(b)*v,o.push(M,0,_),c.push(m.r,m.g,m.b)}}const u=new In;u.setAttribute("position",new Ht(o,3)),u.setAttribute("color",new Ht(c,3));const h=new Js({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const c4=new xe,gb=new xe,f4=new xe;class fce extends xr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new In;i.setAttribute("position",new Ht([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Js({fog:!1,toneMapped:!1});this.lightPlane=new bh(i,a),this.add(this.lightPlane),i=new In,i.setAttribute("position",new Ht([0,0,0,0,0,1],3)),this.targetLine=new bh(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),c4.setFromMatrixPosition(this.light.matrixWorld),gb.setFromMatrixPosition(this.light.target.matrixWorld),f4.subVectors(gb,c4),this.lightPlane.lookAt(gb),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(gb),this.targetLine.scale.z=f4.length()}}const yb=new xe,wi=new ZS;class hce extends cc{constructor(e){const t=new In,n=new Js({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(x,b){c(x),c(b)}function c(x){i.push(0,0,0),a.push(0,0,0),s[x]===void 0&&(s[x]=[]),s[x].push(i.length/3-1)}t.setAttribute("position",new Ht(i,3)),t.setAttribute("color",new Ht(a,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new zt(16755200),h=new zt(16711680),d=new zt(43775),m=new zt(16777215),v=new zt(3355443);this.setColors(u,h,d,m,v)}setColors(e,t,n,i,a){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;let a,s;if(wi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===Po)a=-1,s=1;else if(this.camera.coordinateSystem===wv)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Ii("c",t,e,wi,0,0,a),Ii("t",t,e,wi,0,0,s),Ii("n1",t,e,wi,-n,-i,a),Ii("n2",t,e,wi,n,-i,a),Ii("n3",t,e,wi,-n,i,a),Ii("n4",t,e,wi,n,i,a),Ii("f1",t,e,wi,-n,-i,s),Ii("f2",t,e,wi,n,-i,s),Ii("f3",t,e,wi,-n,i,s),Ii("f4",t,e,wi,n,i,s),Ii("u1",t,e,wi,n*.7,i*1.1,a),Ii("u2",t,e,wi,-n*.7,i*1.1,a),Ii("u3",t,e,wi,0,i*2,a),Ii("cf1",t,e,wi,-n,0,s),Ii("cf2",t,e,wi,n,0,s),Ii("cf3",t,e,wi,0,-i,s),Ii("cf4",t,e,wi,0,i,s),Ii("cn1",t,e,wi,-n,0,a),Ii("cn2",t,e,wi,n,0,a),Ii("cn3",t,e,wi,0,-i,a),Ii("cn4",t,e,wi,0,i,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ii(r,e,t,n,i,a,s){yb.set(i,a,s).unproject(n);const o=e[r];if(o!==void 0){const c=t.getAttribute("position");for(let u=0,h=o.length;u<h;u++)c.setXYZ(o[u],yb.x,yb.y,yb.z)}}const xb=new oa;class dce extends cc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),a=new In;a.setIndex(new Wr(n,1)),a.setAttribute("position",new Wr(i,3)),super(a,new Js({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&xb.setFromObject(this.object),xb.isEmpty())return;const e=xb.min,t=xb.max,n=this.geometry.attributes.position,i=n.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pce extends cc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new In;a.setIndex(new Wr(n,1)),a.setAttribute("position",new Ht(i,3)),super(a,new Js({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class mce extends bh{constructor(e,t=1,n=16776960){const i=n,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new In;s.setAttribute("position",new Ht(a,3)),s.computeBoundingSphere(),super(s,new Js({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new In;c.setAttribute("position",new Ht(o,3)),c.computeBoundingSphere(),this.add(new Vi(c,new Oh({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const h4=new xe;let bb,sA;class mL extends xr{constructor(e=new xe(0,0,1),t=new xe(0,0,0),n=1,i=16776960,a=n*.2,s=a*.2){super(),this.type="ArrowHelper",bb===void 0&&(bb=new In,bb.setAttribute("position",new Ht([0,0,0,0,1,0],3)),sA=new ky(.5,1,5,1),sA.translate(0,-.5,0)),this.position.copy(t),this.line=new bh(bb,new Js({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Vi(sA,new Oh({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{h4.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(h4,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class vce extends cc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new In;i.setAttribute("position",new Ht(t,3)),i.setAttribute("color",new Ht(n,3));const a=new Js({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,t,n){const i=new zt,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(n),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class gce{constructor(){this.type="ShapePath",this.color=new zt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new lS,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,a,s){return this.currentPath.bezierCurveTo(e,t,n,i,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const T=[];for(let E=0,A=_.length;E<A;E++){const D=_[E],N=new ep;N.curves=D.curves,T.push(N)}return T}function n(_,T){const E=T.length;let A=!1;for(let D=E-1,N=0;N<E;D=N++){let O=T[D],z=T[N],C=z.x-O.x,R=z.y-O.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(O=T[N],C=-C,z=T[D],R=-R),_.y<O.y||_.y>z.y)continue;if(_.y===O.y){if(_.x===O.x)return!0}else{const F=R*(_.x-O.x)-C*(_.y-O.y);if(F===0)return!0;if(F<0)continue;A=!A}}else{if(_.y!==O.y)continue;if(z.x<=_.x&&_.x<=O.x||O.x<=_.x&&_.x<=z.x)return!0}}return A}const i=ou.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,c;const u=[];if(a.length===1)return o=a[0],c=new ep,c.curves=o.curves,u.push(c),u;let h=!i(a[0].getPoints());h=e?!h:h;const d=[],m=[];let v=[],x=0,b;m[x]=void 0,v[x]=[];for(let _=0,T=a.length;_<T;_++)o=a[_],b=o.getPoints(),s=i(b),s=e?!s:s,s?(!h&&m[x]&&x++,m[x]={s:new ep,p:b},m[x].s.curves=o.curves,h&&x++,v[x]=[]):v[x].push({h:o,p:b[0]});if(!m[0])return t(a);if(m.length>1){let _=!1,T=0;for(let E=0,A=m.length;E<A;E++)d[E]=[];for(let E=0,A=m.length;E<A;E++){const D=v[E];for(let N=0;N<D.length;N++){const O=D[N];let z=!0;for(let C=0;C<m.length;C++)n(O.p,m[C].p)&&(E!==C&&T++,z?(z=!1,d[C].push(O)):_=!0);z&&d[E].push(O)}}T>0&&_===!1&&(v=d)}let M;for(let _=0,T=m.length;_<T;_++){c=m[_].s,u.push(c),M=v[_];for(let E=0,A=M.length;E<A;E++)c.holes.push(M[E].h)}return u}}class yce extends uc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function xce(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function bce(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function _ce(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function x2(r,e,t,n){const i=Sce(n);switch(t){case Aw:return r*e;case kS:return r*e/i.components*i.byteLength;case Vy:return r*e/i.components*i.byteLength;case Tw:return r*e*2/i.components*i.byteLength;case XS:return r*e*2/i.components*i.byteLength;case ww:return r*e*3/i.components*i.byteLength;case ms:return r*e*4/i.components*i.byteLength;case jS:return r*e*4/i.components*i.byteLength;case $0:case Z0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case K0:case Q0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case R_:case B_:return Math.max(r,16)*Math.max(e,8)/4;case C_:case O_:return Math.max(r,8)*Math.max(e,8)/2;case U_:case z_:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case F_:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case L_:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case I_:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case P_:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case H_:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case V_:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case q_:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case G_:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case k_:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case X_:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case j_:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case Y_:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case W_:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case $_:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case Z_:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case K_:case Q_:case J_:return Math.ceil(r/4)*Math.ceil(e/4)*16;case eS:case tS:return Math.ceil(r/4)*Math.ceil(e/4)*8;case nS:case rS:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Sce(r){switch(r){case Sl:case _w:return{byteLength:1,components:1};case Sv:case Sw:case Zv:return{byteLength:2,components:1};case qS:case GS:return{byteLength:2,components:4};case lf:case VS:case po:return{byteLength:4,components:1};case Mw:case Ew:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}class Mce{static contain(e,t){return xce(e,t)}static cover(e,t){return bce(e,t)}static fill(e){return _ce(e)}static getByteLength(e,t,n,i){return x2(e,t,n,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Wv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Wv);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function vL(){let r=null,e=!1,t=null,n=null;function i(a,s){t(a,s),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){r=a}}}function Ece(r){const e=new WeakMap;function t(o,c){const u=o.array,h=o.usage,d=u.byteLength,m=r.createBuffer();r.bindBuffer(c,m),r.bufferData(c,u,h),o.onUploadCallback();let v;if(u instanceof Float32Array)v=r.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)v=r.HALF_FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?v=r.HALF_FLOAT:v=r.UNSIGNED_SHORT;else if(u instanceof Int16Array)v=r.SHORT;else if(u instanceof Uint32Array)v=r.UNSIGNED_INT;else if(u instanceof Int32Array)v=r.INT;else if(u instanceof Int8Array)v=r.BYTE;else if(u instanceof Uint8Array)v=r.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)v=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:m,type:v,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:d}}function n(o,c,u){const h=c.array,d=c.updateRanges;if(r.bindBuffer(u,o),d.length===0)r.bufferSubData(u,0,h);else{d.sort((v,x)=>v.start-x.start);let m=0;for(let v=1;v<d.length;v++){const x=d[m],b=d[v];b.start<=x.start+x.count+1?x.count=Math.max(x.count,b.start+b.count-x.start):(++m,d[m]=b)}d.length=m+1;for(let v=0,x=d.length;v<x;v++){const b=d[v];r.bufferSubData(u,b.start*h.BYTES_PER_ELEMENT,h,b.start,b.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(r.deleteBuffer(c.buffer),e.delete(o))}function s(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const h=e.get(o);(!h||h.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,c));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,o,c),u.version=o.version}}return{get:i,remove:a,update:s}}var Ace=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,wce=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Tce=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Nce=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dce=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Cce=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Rce=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Oce=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Bce=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Uce=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,zce=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Fce=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Lce=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Ice=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Pce=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Hce=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Vce=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,qce=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Gce=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,kce=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Xce=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,jce=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Yce=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Wce=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,$ce=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Zce=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Kce=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Qce=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Jce=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,efe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,tfe="gl_FragColor = linearToOutputTexel( gl_FragColor );",nfe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,rfe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ife=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,afe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,sfe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ofe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,lfe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ufe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,cfe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ffe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,hfe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,dfe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,pfe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,mfe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,vfe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,gfe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,yfe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,xfe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,bfe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_fe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Sfe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Mfe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Efe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Afe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,wfe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Tfe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Nfe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Dfe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Cfe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Rfe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Ofe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Bfe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Ufe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zfe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ffe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Lfe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Ife=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Pfe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Hfe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Vfe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,qfe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Gfe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,kfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Xfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jfe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Yfe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Wfe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,$fe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Zfe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Kfe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Qfe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Jfe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ehe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,the=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,nhe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,rhe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ihe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ahe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,she=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,ohe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lhe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,uhe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,che=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,fhe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,hhe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,dhe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,phe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,mhe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,vhe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ghe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,yhe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,xhe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,bhe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_he=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,She=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Mhe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ehe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Ahe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,whe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,The=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Nhe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Dhe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Che=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Rhe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Ohe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Bhe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Uhe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,zhe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Fhe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Lhe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ihe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Phe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hhe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vhe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qhe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ghe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,khe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Xhe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,jhe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yhe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Whe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,$he=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zhe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Khe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qhe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Jhe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ede=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tde=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nde=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rde=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Vn={alphahash_fragment:Ace,alphahash_pars_fragment:wce,alphamap_fragment:Tce,alphamap_pars_fragment:Nce,alphatest_fragment:Dce,alphatest_pars_fragment:Cce,aomap_fragment:Rce,aomap_pars_fragment:Oce,batching_pars_vertex:Bce,batching_vertex:Uce,begin_vertex:zce,beginnormal_vertex:Fce,bsdfs:Lce,iridescence_fragment:Ice,bumpmap_pars_fragment:Pce,clipping_planes_fragment:Hce,clipping_planes_pars_fragment:Vce,clipping_planes_pars_vertex:qce,clipping_planes_vertex:Gce,color_fragment:kce,color_pars_fragment:Xce,color_pars_vertex:jce,color_vertex:Yce,common:Wce,cube_uv_reflection_fragment:$ce,defaultnormal_vertex:Zce,displacementmap_pars_vertex:Kce,displacementmap_vertex:Qce,emissivemap_fragment:Jce,emissivemap_pars_fragment:efe,colorspace_fragment:tfe,colorspace_pars_fragment:nfe,envmap_fragment:rfe,envmap_common_pars_fragment:ife,envmap_pars_fragment:afe,envmap_pars_vertex:sfe,envmap_physical_pars_fragment:gfe,envmap_vertex:ofe,fog_vertex:lfe,fog_pars_vertex:ufe,fog_fragment:cfe,fog_pars_fragment:ffe,gradientmap_pars_fragment:hfe,lightmap_pars_fragment:dfe,lights_lambert_fragment:pfe,lights_lambert_pars_fragment:mfe,lights_pars_begin:vfe,lights_toon_fragment:yfe,lights_toon_pars_fragment:xfe,lights_phong_fragment:bfe,lights_phong_pars_fragment:_fe,lights_physical_fragment:Sfe,lights_physical_pars_fragment:Mfe,lights_fragment_begin:Efe,lights_fragment_maps:Afe,lights_fragment_end:wfe,logdepthbuf_fragment:Tfe,logdepthbuf_pars_fragment:Nfe,logdepthbuf_pars_vertex:Dfe,logdepthbuf_vertex:Cfe,map_fragment:Rfe,map_pars_fragment:Ofe,map_particle_fragment:Bfe,map_particle_pars_fragment:Ufe,metalnessmap_fragment:zfe,metalnessmap_pars_fragment:Ffe,morphinstance_vertex:Lfe,morphcolor_vertex:Ife,morphnormal_vertex:Pfe,morphtarget_pars_vertex:Hfe,morphtarget_vertex:Vfe,normal_fragment_begin:qfe,normal_fragment_maps:Gfe,normal_pars_fragment:kfe,normal_pars_vertex:Xfe,normal_vertex:jfe,normalmap_pars_fragment:Yfe,clearcoat_normal_fragment_begin:Wfe,clearcoat_normal_fragment_maps:$fe,clearcoat_pars_fragment:Zfe,iridescence_pars_fragment:Kfe,opaque_fragment:Qfe,packing:Jfe,premultiplied_alpha_fragment:ehe,project_vertex:the,dithering_fragment:nhe,dithering_pars_fragment:rhe,roughnessmap_fragment:ihe,roughnessmap_pars_fragment:ahe,shadowmap_pars_fragment:she,shadowmap_pars_vertex:ohe,shadowmap_vertex:lhe,shadowmask_pars_fragment:uhe,skinbase_vertex:che,skinning_pars_vertex:fhe,skinning_vertex:hhe,skinnormal_vertex:dhe,specularmap_fragment:phe,specularmap_pars_fragment:mhe,tonemapping_fragment:vhe,tonemapping_pars_fragment:ghe,transmission_fragment:yhe,transmission_pars_fragment:xhe,uv_pars_fragment:bhe,uv_pars_vertex:_he,uv_vertex:She,worldpos_vertex:Mhe,background_vert:Ehe,background_frag:Ahe,backgroundCube_vert:whe,backgroundCube_frag:The,cube_vert:Nhe,cube_frag:Dhe,depth_vert:Che,depth_frag:Rhe,distanceRGBA_vert:Ohe,distanceRGBA_frag:Bhe,equirect_vert:Uhe,equirect_frag:zhe,linedashed_vert:Fhe,linedashed_frag:Lhe,meshbasic_vert:Ihe,meshbasic_frag:Phe,meshlambert_vert:Hhe,meshlambert_frag:Vhe,meshmatcap_vert:qhe,meshmatcap_frag:Ghe,meshnormal_vert:khe,meshnormal_frag:Xhe,meshphong_vert:jhe,meshphong_frag:Yhe,meshphysical_vert:Whe,meshphysical_frag:$he,meshtoon_vert:Zhe,meshtoon_frag:Khe,points_vert:Qhe,points_frag:Jhe,shadow_vert:ede,shadow_frag:tde,sprite_vert:nde,sprite_frag:rde},Ct={common:{diffuse:{value:new zt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Bn},alphaMap:{value:null},alphaMapTransform:{value:new Bn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Bn}},envmap:{envMap:{value:null},envMapRotation:{value:new Bn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Bn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Bn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Bn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Bn},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Bn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Bn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Bn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Bn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Bn},alphaTest:{value:0},uvTransform:{value:new Bn}},sprite:{diffuse:{value:new zt(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Bn},alphaMap:{value:null},alphaMapTransform:{value:new Bn},alphaTest:{value:0}}},su={basic:{uniforms:Xs([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:Vn.meshbasic_vert,fragmentShader:Vn.meshbasic_frag},lambert:{uniforms:Xs([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new zt(0)}}]),vertexShader:Vn.meshlambert_vert,fragmentShader:Vn.meshlambert_frag},phong:{uniforms:Xs([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new zt(0)},specular:{value:new zt(1118481)},shininess:{value:30}}]),vertexShader:Vn.meshphong_vert,fragmentShader:Vn.meshphong_frag},standard:{uniforms:Xs([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Vn.meshphysical_vert,fragmentShader:Vn.meshphysical_frag},toon:{uniforms:Xs([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new zt(0)}}]),vertexShader:Vn.meshtoon_vert,fragmentShader:Vn.meshtoon_frag},matcap:{uniforms:Xs([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:Vn.meshmatcap_vert,fragmentShader:Vn.meshmatcap_frag},points:{uniforms:Xs([Ct.points,Ct.fog]),vertexShader:Vn.points_vert,fragmentShader:Vn.points_frag},dashed:{uniforms:Xs([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Vn.linedashed_vert,fragmentShader:Vn.linedashed_frag},depth:{uniforms:Xs([Ct.common,Ct.displacementmap]),vertexShader:Vn.depth_vert,fragmentShader:Vn.depth_frag},normal:{uniforms:Xs([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:Vn.meshnormal_vert,fragmentShader:Vn.meshnormal_frag},sprite:{uniforms:Xs([Ct.sprite,Ct.fog]),vertexShader:Vn.sprite_vert,fragmentShader:Vn.sprite_frag},background:{uniforms:{uvTransform:{value:new Bn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Vn.background_vert,fragmentShader:Vn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Bn}},vertexShader:Vn.backgroundCube_vert,fragmentShader:Vn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Vn.cube_vert,fragmentShader:Vn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Vn.equirect_vert,fragmentShader:Vn.equirect_frag},distanceRGBA:{uniforms:Xs([Ct.common,Ct.displacementmap,{referencePosition:{value:new xe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Vn.distanceRGBA_vert,fragmentShader:Vn.distanceRGBA_frag},shadow:{uniforms:Xs([Ct.lights,Ct.fog,{color:{value:new zt(0)},opacity:{value:1}}]),vertexShader:Vn.shadow_vert,fragmentShader:Vn.shadow_frag}};su.physical={uniforms:Xs([su.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Bn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Bn},clearcoatNormalScale:{value:new gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Bn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Bn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Bn},sheen:{value:0},sheenColor:{value:new zt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Bn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Bn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Bn},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Bn},attenuationDistance:{value:0},attenuationColor:{value:new zt(0)},specularColor:{value:new zt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Bn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Bn},anisotropyVector:{value:new gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Bn}}]),vertexShader:Vn.meshphysical_vert,fragmentShader:Vn.meshphysical_frag};const _b={r:0,b:0,g:0},zd=new Go,ide=new pn;function ade(r,e,t,n,i,a,s){const o=new zt(0);let c=a===!0?0:1,u,h,d=null,m=0,v=null;function x(E){let A=E.isScene===!0?E.background:null;return A&&A.isTexture&&(A=(E.backgroundBlurriness>0?t:e).get(A)),A}function b(E){let A=!1;const D=x(E);D===null?_(o,c):D&&D.isColor&&(_(D,1),A=!0);const N=r.xr.getEnvironmentBlendMode();N==="additive"?n.buffers.color.setClear(0,0,0,1,s):N==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,s),(r.autoClear||A)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function M(E,A){const D=x(A);D&&(D.isCubeTexture||D.mapping===$v)?(h===void 0&&(h=new Vi(new _p(1,1,1),new ko({name:"BackgroundCubeMaterial",uniforms:Dv(su.backgroundCube.uniforms),vertexShader:su.backgroundCube.vertexShader,fragmentShader:su.backgroundCube.fragmentShader,side:gs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(N,O,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),zd.copy(A.backgroundRotation),zd.x*=-1,zd.y*=-1,zd.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(zd.y*=-1,zd.z*=-1),h.material.uniforms.envMap.value=D,h.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(ide.makeRotationFromEuler(zd)),h.material.toneMapped=pr.getTransfer(D.colorSpace)!==Lr,(d!==D||m!==D.version||v!==r.toneMapping)&&(h.material.needsUpdate=!0,d=D,m=D.version,v=r.toneMapping),h.layers.enableAll(),E.unshift(h,h.geometry,h.material,0,0,null)):D&&D.isTexture&&(u===void 0&&(u=new Vi(new Qv(2,2),new ko({name:"BackgroundMaterial",uniforms:Dv(su.background.uniforms),vertexShader:su.background.vertexShader,fragmentShader:su.background.fragmentShader,side:sf,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=D,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.toneMapped=pr.getTransfer(D.colorSpace)!==Lr,D.matrixAutoUpdate===!0&&D.updateMatrix(),u.material.uniforms.uvTransform.value.copy(D.matrix),(d!==D||m!==D.version||v!==r.toneMapping)&&(u.material.needsUpdate=!0,d=D,m=D.version,v=r.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null))}function _(E,A){E.getRGB(_b,v5(r)),n.buffers.color.setClear(_b.r,_b.g,_b.b,A,s)}function T(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(E,A=1){o.set(E),c=A,_(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(E){c=E,_(o,c)},render:b,addToRenderList:M,dispose:T}}function sde(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=m(null);let a=i,s=!1;function o(R,F,H,X,$){let Y=!1;const I=d(X,H,F);a!==I&&(a=I,u(a.object)),Y=v(R,X,H,$),Y&&x(R,X,H,$),$!==null&&e.update($,r.ELEMENT_ARRAY_BUFFER),(Y||s)&&(s=!1,A(R,F,H,X),$!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function c(){return r.createVertexArray()}function u(R){return r.bindVertexArray(R)}function h(R){return r.deleteVertexArray(R)}function d(R,F,H){const X=H.wireframe===!0;let $=n[R.id];$===void 0&&($={},n[R.id]=$);let Y=$[F.id];Y===void 0&&(Y={},$[F.id]=Y);let I=Y[X];return I===void 0&&(I=m(c()),Y[X]=I),I}function m(R){const F=[],H=[],X=[];for(let $=0;$<t;$++)F[$]=0,H[$]=0,X[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:H,attributeDivisors:X,object:R,attributes:{},index:null}}function v(R,F,H,X){const $=a.attributes,Y=F.attributes;let I=0;const Z=H.getAttributes();for(const W in Z)if(Z[W].location>=0){const le=$[W];let Q=Y[W];if(Q===void 0&&(W==="instanceMatrix"&&R.instanceMatrix&&(Q=R.instanceMatrix),W==="instanceColor"&&R.instanceColor&&(Q=R.instanceColor)),le===void 0||le.attribute!==Q||Q&&le.data!==Q.data)return!0;I++}return a.attributesNum!==I||a.index!==X}function x(R,F,H,X){const $={},Y=F.attributes;let I=0;const Z=H.getAttributes();for(const W in Z)if(Z[W].location>=0){let le=Y[W];le===void 0&&(W==="instanceMatrix"&&R.instanceMatrix&&(le=R.instanceMatrix),W==="instanceColor"&&R.instanceColor&&(le=R.instanceColor));const Q={};Q.attribute=le,le&&le.data&&(Q.data=le.data),$[W]=Q,I++}a.attributes=$,a.attributesNum=I,a.index=X}function b(){const R=a.newAttributes;for(let F=0,H=R.length;F<H;F++)R[F]=0}function M(R){_(R,0)}function _(R,F){const H=a.newAttributes,X=a.enabledAttributes,$=a.attributeDivisors;H[R]=1,X[R]===0&&(r.enableVertexAttribArray(R),X[R]=1),$[R]!==F&&(r.vertexAttribDivisor(R,F),$[R]=F)}function T(){const R=a.newAttributes,F=a.enabledAttributes;for(let H=0,X=F.length;H<X;H++)F[H]!==R[H]&&(r.disableVertexAttribArray(H),F[H]=0)}function E(R,F,H,X,$,Y,I){I===!0?r.vertexAttribIPointer(R,F,H,$,Y):r.vertexAttribPointer(R,F,H,X,$,Y)}function A(R,F,H,X){b();const $=X.attributes,Y=H.getAttributes(),I=F.defaultAttributeValues;for(const Z in Y){const W=Y[Z];if(W.location>=0){let te=$[Z];if(te===void 0&&(Z==="instanceMatrix"&&R.instanceMatrix&&(te=R.instanceMatrix),Z==="instanceColor"&&R.instanceColor&&(te=R.instanceColor)),te!==void 0){const le=te.normalized,Q=te.itemSize,k=e.get(te);if(k===void 0)continue;const ae=k.buffer,J=k.type,De=k.bytesPerElement,pe=J===r.INT||J===r.UNSIGNED_INT||te.gpuType===VS;if(te.isInterleavedBufferAttribute){const _e=te.data,ne=_e.stride,ue=te.offset;if(_e.isInstancedInterleavedBuffer){for(let ge=0;ge<W.locationSize;ge++)_(W.location+ge,_e.meshPerAttribute);R.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let ge=0;ge<W.locationSize;ge++)M(W.location+ge);r.bindBuffer(r.ARRAY_BUFFER,ae);for(let ge=0;ge<W.locationSize;ge++)E(W.location+ge,Q/W.locationSize,J,le,ne*De,(ue+Q/W.locationSize*ge)*De,pe)}else{if(te.isInstancedBufferAttribute){for(let _e=0;_e<W.locationSize;_e++)_(W.location+_e,te.meshPerAttribute);R.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let _e=0;_e<W.locationSize;_e++)M(W.location+_e);r.bindBuffer(r.ARRAY_BUFFER,ae);for(let _e=0;_e<W.locationSize;_e++)E(W.location+_e,Q/W.locationSize,J,le,Q*De,Q/W.locationSize*_e*De,pe)}}else if(I!==void 0){const le=I[Z];if(le!==void 0)switch(le.length){case 2:r.vertexAttrib2fv(W.location,le);break;case 3:r.vertexAttrib3fv(W.location,le);break;case 4:r.vertexAttrib4fv(W.location,le);break;default:r.vertexAttrib1fv(W.location,le)}}}}T()}function D(){z();for(const R in n){const F=n[R];for(const H in F){const X=F[H];for(const $ in X)h(X[$].object),delete X[$];delete F[H]}delete n[R]}}function N(R){if(n[R.id]===void 0)return;const F=n[R.id];for(const H in F){const X=F[H];for(const $ in X)h(X[$].object),delete X[$];delete F[H]}delete n[R.id]}function O(R){for(const F in n){const H=n[F];if(H[R.id]===void 0)continue;const X=H[R.id];for(const $ in X)h(X[$].object),delete X[$];delete H[R.id]}}function z(){C(),s=!0,a!==i&&(a=i,u(a.object))}function C(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:z,resetDefaultState:C,dispose:D,releaseStatesOfGeometry:N,releaseStatesOfProgram:O,initAttributes:b,enableAttribute:M,disableUnusedAttributes:T}}function ode(r,e,t){let n;function i(u){n=u}function a(u,h){r.drawArrays(n,u,h),t.update(h,n,1)}function s(u,h,d){d!==0&&(r.drawArraysInstanced(n,u,h,d),t.update(h,n,d))}function o(u,h,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,h,0,d);let v=0;for(let x=0;x<d;x++)v+=h[x];t.update(v,n,1)}function c(u,h,d,m){if(d===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let x=0;x<u.length;x++)s(u[x],h[x],m[x]);else{v.multiDrawArraysInstancedWEBGL(n,u,0,h,0,m,0,d);let x=0;for(let b=0;b<d;b++)x+=h[b]*m[b];t.update(x,n,1)}}this.setMode=i,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function lde(r,e,t,n){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(O){return!(O!==ms&&n.convert(O)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(O){const z=O===Zv&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(O!==Sl&&n.convert(O)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&O!==po&&!z)}function c(O){if(O==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const h=c(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const d=t.logarithmicDepthBuffer===!0,m=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),v=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),x=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=r.getParameter(r.MAX_TEXTURE_SIZE),M=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),_=r.getParameter(r.MAX_VERTEX_ATTRIBS),T=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),E=r.getParameter(r.MAX_VARYING_VECTORS),A=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),D=x>0,N=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:d,reversedDepthBuffer:m,maxTextures:v,maxVertexTextures:x,maxTextureSize:b,maxCubemapSize:M,maxAttributes:_,maxVertexUniforms:T,maxVaryings:E,maxFragmentUniforms:A,vertexTextures:D,maxSamples:N}}function ude(r){const e=this;let t=null,n=0,i=!1,a=!1;const s=new Zu,o=new Bn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,m){const v=d.length!==0||m||n!==0||i;return i=m,n=d.length,v},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(d,m){t=h(d,m,0)},this.setState=function(d,m,v){const x=d.clippingPlanes,b=d.clipIntersection,M=d.clipShadows,_=r.get(d);if(!i||x===null||x.length===0||a&&!M)a?h(null):u();else{const T=a?0:n,E=T*4;let A=_.clippingState||null;c.value=A,A=h(x,m,E,v);for(let D=0;D!==E;++D)A[D]=t[D];_.clippingState=A,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=T}};function u(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(d,m,v,x){const b=d!==null?d.length:0;let M=null;if(b!==0){if(M=c.value,x!==!0||M===null){const _=v+b*4,T=m.matrixWorldInverse;o.getNormalMatrix(T),(M===null||M.length<_)&&(M=new Float32Array(_));for(let E=0,A=v;E!==b;++E,A+=4)s.copy(d[E]).applyMatrix4(T,o),s.normal.toArray(M,A),M[A+3]=s.constant}c.value=M,c.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,M}}function cde(r){let e=new WeakMap;function t(s,o){return o===uy?s.mapping=of:o===cy&&(s.mapping=yh),s}function n(s){if(s&&s.isTexture){const o=s.mapping;if(o===uy||o===cy)if(e.has(s)){const c=e.get(s).texture;return t(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const u=new y5(c.height);return u.fromEquirectangularTexture(r,s),e.set(s,u),s.addEventListener("dispose",i),t(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}const sv=4,d4=[.125,.215,.35,.446,.526,.582],kd=20,oA=new dh,p4=new zt;let lA=null,uA=0,cA=0,fA=!1;const qd=(1+Math.sqrt(5))/2,Zm=1/qd,m4=[new xe(-qd,Zm,0),new xe(qd,Zm,0),new xe(-Zm,0,qd),new xe(Zm,0,qd),new xe(0,qd,-Zm),new xe(0,qd,Zm),new xe(-1,1,-1),new xe(1,1,-1),new xe(-1,1,1),new xe(1,1,1)],fde=new xe;class b2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100,a={}){const{size:s=256,position:o=fde}=a;lA=this._renderer.getRenderTarget(),uA=this._renderer.getActiveCubeFace(),cA=this._renderer.getActiveMipmapLevel(),fA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,n,i,c,o),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=y4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=g4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(lA,uA,cA),this._renderer.xr.enabled=fA,e.scissorTest=!1,Sb(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===of||e.mapping===yh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),lA=this._renderer.getRenderTarget(),uA=this._renderer.getActiveCubeFace(),cA=this._renderer.getActiveMipmapLevel(),fA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:sa,minFilter:sa,generateMipmaps:!1,type:Zv,format:ms,colorSpace:xh,depthBuffer:!1},i=v4(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=v4(e,t,n);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=hde(a)),this._blurMaterial=dde(a,e,t)}return i}_compileMaterial(e){const t=new Vi(this._lodPlanes[0],e);this._renderer.compile(t,oA)}_sceneToCubeUV(e,t,n,i,a){const c=new Hi(90,1,t,n),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],d=this._renderer,m=d.autoClear,v=d.toneMapping;d.getClearColor(p4),d.toneMapping=nc,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(i),d.clearDepth(),d.setRenderTarget(null));const b=new Oh({name:"PMREM.Background",side:gs,depthWrite:!1,depthTest:!1}),M=new Vi(new _p,b);let _=!1;const T=e.background;T?T.isColor&&(b.color.copy(T),e.background=null,_=!0):(b.color.copy(p4),_=!0);for(let E=0;E<6;E++){const A=E%3;A===0?(c.up.set(0,u[E],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+h[E],a.y,a.z)):A===1?(c.up.set(0,0,u[E]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+h[E],a.z)):(c.up.set(0,u[E],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+h[E]));const D=this._cubeSize;Sb(i,A*D,E>2?D:0,D,D),d.setRenderTarget(i),_&&d.render(M,c),d.render(e,c)}M.geometry.dispose(),M.material.dispose(),d.toneMapping=v,d.autoClear=m,e.background=T}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===of||e.mapping===yh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=y4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=g4());const a=i?this._cubemapMaterial:this._equirectMaterial,s=new Vi(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const c=this._cubeSize;Sb(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(s,oA)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let a=1;a<i;a++){const s=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),o=m4[(i-a-1)%m4.length];this._blur(e,a-1,a,s,o)}t.autoClear=n}_blur(e,t,n,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,i,"latitudinal",a),this._halfBlur(s,e,n,n,i,"longitudinal",a)}_halfBlur(e,t,n,i,a,s,o){const c=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new Vi(this._lodPlanes[i],u),m=u.uniforms,v=this._sizeLods[n]-1,x=isFinite(a)?Math.PI/(2*v):2*Math.PI/(2*kd-1),b=a/x,M=isFinite(a)?1+Math.floor(h*b):kd;M>kd&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${kd}`);const _=[];let T=0;for(let O=0;O<kd;++O){const z=O/b,C=Math.exp(-z*z/2);_.push(C),O===0?T+=C:O<M&&(T+=2*C)}for(let O=0;O<_.length;O++)_[O]=_[O]/T;m.envMap.value=e.texture,m.samples.value=M,m.weights.value=_,m.latitudinal.value=s==="latitudinal",o&&(m.poleAxis.value=o);const{_lodMax:E}=this;m.dTheta.value=x,m.mipInt.value=E-n;const A=this._sizeLods[i],D=3*A*(i>E-sv?i-E+sv:0),N=4*(this._cubeSize-A);Sb(t,D,N,3*A,2*A),c.setRenderTarget(t),c.render(d,oA)}}function hde(r){const e=[],t=[],n=[];let i=r;const a=r-sv+1+d4.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);t.push(o);let c=1/o;s>r-sv?c=d4[s-r+sv-1]:s===0&&(c=0),n.push(c);const u=1/(o-2),h=-u,d=1+u,m=[h,h,d,h,d,d,h,h,d,d,h,d],v=6,x=6,b=3,M=2,_=1,T=new Float32Array(b*x*v),E=new Float32Array(M*x*v),A=new Float32Array(_*x*v);for(let N=0;N<v;N++){const O=N%3*2/3-1,z=N>2?0:-1,C=[O,z,0,O+2/3,z,0,O+2/3,z+1,0,O,z,0,O+2/3,z+1,0,O,z+1,0];T.set(C,b*x*N),E.set(m,M*x*N);const R=[N,N,N,N,N,N];A.set(R,_*x*N)}const D=new In;D.setAttribute("position",new Wr(T,b)),D.setAttribute("uv",new Wr(E,M)),D.setAttribute("faceIndex",new Wr(A,_)),e.push(D),i>sv&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function v4(r,e,t){const n=new ac(r,e,t);return n.texture.mapping=$v,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Sb(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function dde(r,e,t){const n=new Float32Array(kd),i=new xe(0,1,0);return new ko({name:"SphericalGaussianBlur",defines:{n:kd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:sT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:tf,depthTest:!1,depthWrite:!1})}function g4(){return new ko({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:sT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:tf,depthTest:!1,depthWrite:!1})}function y4(){return new ko({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:sT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:tf,depthTest:!1,depthWrite:!1})}function sT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function pde(r){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const c=o.mapping,u=c===uy||c===cy,h=c===of||c===yh;if(u||h){let d=e.get(o);const m=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==m)return t===null&&(t=new b2(r)),d=u?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const v=o.image;return u&&v&&v.height>0||h&&v&&i(v)?(t===null&&(t=new b2(r)),d=u?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",a),d.texture):null}}}return o}function i(o){let c=0;const u=6;for(let h=0;h<u;h++)o[h]!==void 0&&c++;return c===u}function a(o){const c=o.target;c.removeEventListener("dispose",a);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:s}}function mde(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&yy("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function vde(r,e,t,n){const i={},a=new WeakMap;function s(d){const m=d.target;m.index!==null&&e.remove(m.index);for(const x in m.attributes)e.remove(m.attributes[x]);m.removeEventListener("dispose",s),delete i[m.id];const v=a.get(m);v&&(e.remove(v),a.delete(m)),n.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function o(d,m){return i[m.id]===!0||(m.addEventListener("dispose",s),i[m.id]=!0,t.memory.geometries++),m}function c(d){const m=d.attributes;for(const v in m)e.update(m[v],r.ARRAY_BUFFER)}function u(d){const m=[],v=d.index,x=d.attributes.position;let b=0;if(v!==null){const T=v.array;b=v.version;for(let E=0,A=T.length;E<A;E+=3){const D=T[E+0],N=T[E+1],O=T[E+2];m.push(D,N,N,O,O,D)}}else if(x!==void 0){const T=x.array;b=x.version;for(let E=0,A=T.length/3-1;E<A;E+=3){const D=E+0,N=E+1,O=E+2;m.push(D,N,N,O,O,D)}}else return;const M=new(h5(m)?Bw:Ow)(m,1);M.version=b;const _=a.get(d);_&&e.remove(_),a.set(d,M)}function h(d){const m=a.get(d);if(m){const v=d.index;v!==null&&m.version<v.version&&u(d)}else u(d);return a.get(d)}return{get:o,update:c,getWireframeAttribute:h}}function gde(r,e,t){let n;function i(m){n=m}let a,s;function o(m){a=m.type,s=m.bytesPerElement}function c(m,v){r.drawElements(n,v,a,m*s),t.update(v,n,1)}function u(m,v,x){x!==0&&(r.drawElementsInstanced(n,v,a,m*s,x),t.update(v,n,x))}function h(m,v,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,v,0,a,m,0,x);let M=0;for(let _=0;_<x;_++)M+=v[_];t.update(M,n,1)}function d(m,v,x,b){if(x===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let _=0;_<m.length;_++)u(m[_]/s,v[_],b[_]);else{M.multiDrawElementsInstancedWEBGL(n,v,0,a,m,0,b,0,x);let _=0;for(let T=0;T<x;T++)_+=v[T]*b[T];t.update(_,n,1)}}this.setMode=i,this.setIndex=o,this.render=c,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function yde(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,s,o){switch(t.calls++,s){case r.TRIANGLES:t.triangles+=o*(a/3);break;case r.LINES:t.lines+=o*(a/2);break;case r.LINE_STRIP:t.lines+=o*(a-1);break;case r.LINE_LOOP:t.lines+=o*a;break;case r.POINTS:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function xde(r,e,t){const n=new WeakMap,i=new Xn;function a(s,o,c){const u=s.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=h!==void 0?h.length:0;let m=n.get(o);if(m===void 0||m.count!==d){let R=function(){z.dispose(),n.delete(o),o.removeEventListener("dispose",R)};var v=R;m!==void 0&&m.texture.dispose();const x=o.morphAttributes.position!==void 0,b=o.morphAttributes.normal!==void 0,M=o.morphAttributes.color!==void 0,_=o.morphAttributes.position||[],T=o.morphAttributes.normal||[],E=o.morphAttributes.color||[];let A=0;x===!0&&(A=1),b===!0&&(A=2),M===!0&&(A=3);let D=o.attributes.position.count*A,N=1;D>e.maxTextureSize&&(N=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const O=new Float32Array(D*N*4*d),z=new WS(O,D,N,d);z.type=po,z.needsUpdate=!0;const C=A*4;for(let F=0;F<d;F++){const H=_[F],X=T[F],$=E[F],Y=D*N*4*F;for(let I=0;I<H.count;I++){const Z=I*C;x===!0&&(i.fromBufferAttribute(H,I),O[Y+Z+0]=i.x,O[Y+Z+1]=i.y,O[Y+Z+2]=i.z,O[Y+Z+3]=0),b===!0&&(i.fromBufferAttribute(X,I),O[Y+Z+4]=i.x,O[Y+Z+5]=i.y,O[Y+Z+6]=i.z,O[Y+Z+7]=0),M===!0&&(i.fromBufferAttribute($,I),O[Y+Z+8]=i.x,O[Y+Z+9]=i.y,O[Y+Z+10]=i.z,O[Y+Z+11]=$.itemSize===4?i.w:1)}}m={count:d,texture:z,size:new gt(D,N)},n.set(o,m),o.addEventListener("dispose",R)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(r,"morphTexture",s.morphTexture,t);else{let x=0;for(let M=0;M<u.length;M++)x+=u[M];const b=o.morphTargetsRelative?1:1-x;c.getUniforms().setValue(r,"morphTargetBaseInfluence",b),c.getUniforms().setValue(r,"morphTargetInfluences",u)}c.getUniforms().setValue(r,"morphTargetsTexture",m.texture,t),c.getUniforms().setValue(r,"morphTargetsTextureSize",m.size)}return{update:a}}function bde(r,e,t,n){let i=new WeakMap;function a(c){const u=n.render.frame,h=c.geometry,d=e.get(c,h);if(i.get(d)!==u&&(e.update(d),i.set(d,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),i.get(c)!==u&&(t.update(c.instanceMatrix,r.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,r.ARRAY_BUFFER),i.set(c,u))),c.isSkinnedMesh){const m=c.skeleton;i.get(m)!==u&&(m.update(),i.set(m,u))}return d}function s(){i=new WeakMap}function o(c){const u=c.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:s}}const gL=new Ni,x4=new Lw(1,1),yL=new WS,xL=new $S,bL=new qy,b4=[],_4=[],S4=new Float32Array(16),M4=new Float32Array(9),E4=new Float32Array(4);function Jv(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let a=b4[i];if(a===void 0&&(a=new Float32Array(i),b4[i]=a),e!==0){n.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,r[s].toArray(a,o)}return a}function ua(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function ca(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function xM(r,e){let t=_4[e];t===void 0&&(t=new Int32Array(e),_4[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function _de(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function Sde(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ua(t,e))return;r.uniform2fv(this.addr,e),ca(t,e)}}function Mde(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ua(t,e))return;r.uniform3fv(this.addr,e),ca(t,e)}}function Ede(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ua(t,e))return;r.uniform4fv(this.addr,e),ca(t,e)}}function Ade(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ua(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),ca(t,e)}else{if(ua(t,n))return;E4.set(n),r.uniformMatrix2fv(this.addr,!1,E4),ca(t,n)}}function wde(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ua(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),ca(t,e)}else{if(ua(t,n))return;M4.set(n),r.uniformMatrix3fv(this.addr,!1,M4),ca(t,n)}}function Tde(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ua(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),ca(t,e)}else{if(ua(t,n))return;S4.set(n),r.uniformMatrix4fv(this.addr,!1,S4),ca(t,n)}}function Nde(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function Dde(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ua(t,e))return;r.uniform2iv(this.addr,e),ca(t,e)}}function Cde(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ua(t,e))return;r.uniform3iv(this.addr,e),ca(t,e)}}function Rde(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ua(t,e))return;r.uniform4iv(this.addr,e),ca(t,e)}}function Ode(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function Bde(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ua(t,e))return;r.uniform2uiv(this.addr,e),ca(t,e)}}function Ude(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ua(t,e))return;r.uniform3uiv(this.addr,e),ca(t,e)}}function zde(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ua(t,e))return;r.uniform4uiv(this.addr,e),ca(t,e)}}function Fde(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let a;this.type===r.SAMPLER_2D_SHADOW?(x4.compareFunction=Dw,a=x4):a=gL,t.setTexture2D(e||a,i)}function Lde(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||xL,i)}function Ide(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||bL,i)}function Pde(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||yL,i)}function Hde(r){switch(r){case 5126:return _de;case 35664:return Sde;case 35665:return Mde;case 35666:return Ede;case 35674:return Ade;case 35675:return wde;case 35676:return Tde;case 5124:case 35670:return Nde;case 35667:case 35671:return Dde;case 35668:case 35672:return Cde;case 35669:case 35673:return Rde;case 5125:return Ode;case 36294:return Bde;case 36295:return Ude;case 36296:return zde;case 35678:case 36198:case 36298:case 36306:case 35682:return Fde;case 35679:case 36299:case 36307:return Lde;case 35680:case 36300:case 36308:case 36293:return Ide;case 36289:case 36303:case 36311:case 36292:return Pde}}function Vde(r,e){r.uniform1fv(this.addr,e)}function qde(r,e){const t=Jv(e,this.size,2);r.uniform2fv(this.addr,t)}function Gde(r,e){const t=Jv(e,this.size,3);r.uniform3fv(this.addr,t)}function kde(r,e){const t=Jv(e,this.size,4);r.uniform4fv(this.addr,t)}function Xde(r,e){const t=Jv(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function jde(r,e){const t=Jv(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function Yde(r,e){const t=Jv(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function Wde(r,e){r.uniform1iv(this.addr,e)}function $de(r,e){r.uniform2iv(this.addr,e)}function Zde(r,e){r.uniform3iv(this.addr,e)}function Kde(r,e){r.uniform4iv(this.addr,e)}function Qde(r,e){r.uniform1uiv(this.addr,e)}function Jde(r,e){r.uniform2uiv(this.addr,e)}function epe(r,e){r.uniform3uiv(this.addr,e)}function tpe(r,e){r.uniform4uiv(this.addr,e)}function npe(r,e,t){const n=this.cache,i=e.length,a=xM(t,i);ua(n,a)||(r.uniform1iv(this.addr,a),ca(n,a));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||gL,a[s])}function rpe(r,e,t){const n=this.cache,i=e.length,a=xM(t,i);ua(n,a)||(r.uniform1iv(this.addr,a),ca(n,a));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||xL,a[s])}function ipe(r,e,t){const n=this.cache,i=e.length,a=xM(t,i);ua(n,a)||(r.uniform1iv(this.addr,a),ca(n,a));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||bL,a[s])}function ape(r,e,t){const n=this.cache,i=e.length,a=xM(t,i);ua(n,a)||(r.uniform1iv(this.addr,a),ca(n,a));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||yL,a[s])}function spe(r){switch(r){case 5126:return Vde;case 35664:return qde;case 35665:return Gde;case 35666:return kde;case 35674:return Xde;case 35675:return jde;case 35676:return Yde;case 5124:case 35670:return Wde;case 35667:case 35671:return $de;case 35668:case 35672:return Zde;case 35669:case 35673:return Kde;case 5125:return Qde;case 36294:return Jde;case 36295:return epe;case 36296:return tpe;case 35678:case 36198:case 36298:case 36306:case 35682:return npe;case 35679:case 36299:case 36307:return rpe;case 35680:case 36300:case 36308:case 36293:return ipe;case 36289:case 36303:case 36311:case 36292:return ape}}class ope{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Hde(t.type)}}class lpe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=spe(t.type)}}class upe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,t[o.id],n)}}}const hA=/(\w+)(\])?(\[|\.)?/g;function A4(r,e){r.seq.push(e),r.map[e.id]=e}function cpe(r,e,t){const n=r.name,i=n.length;for(hA.lastIndex=0;;){const a=hA.exec(n),s=hA.lastIndex;let o=a[1];const c=a[2]==="]",u=a[3];if(c&&(o=o|0),u===void 0||u==="["&&s+2===i){A4(t,u===void 0?new ope(o,r,e):new lpe(o,r,e));break}else{let d=t.map[o];d===void 0&&(d=new upe(o),A4(t,d)),t=d}}}class qb{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const a=e.getActiveUniform(t,i),s=e.getUniformLocation(t,a.name);cpe(a,s,this)}}setValue(e,t,n,i){const a=this.map[t];a!==void 0&&a.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let a=0,s=t.length;a!==s;++a){const o=t[a],c=n[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in t&&n.push(s)}return n}}function w4(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const fpe=37297;let hpe=0;function dpe(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=i;s<a;s++){const o=s+1;n.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return n.join(`
`)}const T4=new Bn;function ppe(r){pr._getMatrix(T4,pr.workingColorSpace,r);const e=`mat3( ${T4.elements.map(t=>t.toFixed(4))} )`;switch(pr.getTransfer(r)){case my:return[e,"LinearTransferOETF"];case Lr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function N4(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),a=(r.getShaderInfoLog(e)||"").trim();if(n&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+a+`

`+dpe(r.getShaderSource(e),o)}else return a}function mpe(r,e){const t=ppe(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function vpe(r,e){let t;switch(e){case jF:t="Linear";break;case YF:t="Reinhard";break;case WF:t="Cineon";break;case xw:t="ACESFilmic";break;case ZF:t="AgX";break;case KF:t="Neutral";break;case $F:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Mb=new xe;function gpe(){pr.getLuminanceCoefficients(Mb);const r=Mb.x.toFixed(4),e=Mb.y.toFixed(4),t=Mb.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function ype(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(G0).join(`
`)}function xpe(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function bpe(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const a=r.getActiveAttrib(e,i),s=a.name;let o=1;a.type===r.FLOAT_MAT2&&(o=2),a.type===r.FLOAT_MAT3&&(o=3),a.type===r.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:r.getAttribLocation(e,s),locationSize:o}}return t}function G0(r){return r!==""}function D4(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function C4(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const _pe=/^[ \t]*#include +<([\w\d./]+)>/gm;function _2(r){return r.replace(_pe,Mpe)}const Spe=new Map;function Mpe(r,e){let t=Vn[e];if(t===void 0){const n=Spe.get(e);if(n!==void 0)t=Vn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return _2(t)}const Epe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function R4(r){return r.replace(Epe,Ape)}function Ape(r,e,t,n){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function O4(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function wpe(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===PS?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Y0?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===iu&&(e="SHADOWMAP_TYPE_VSM"),e}function Tpe(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case of:case yh:e="ENVMAP_TYPE_CUBE";break;case $v:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Npe(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case yh:e="ENVMAP_MODE_REFRACTION";break}return e}function Dpe(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case Hy:e="ENVMAP_BLENDING_MULTIPLY";break;case kF:e="ENVMAP_BLENDING_MIX";break;case XF:e="ENVMAP_BLENDING_ADD";break}return e}function Cpe(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function Rpe(r,e,t,n){const i=r.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const c=wpe(t),u=Tpe(t),h=Npe(t),d=Dpe(t),m=Cpe(t),v=ype(t),x=xpe(a),b=i.createProgram();let M,_,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(G0).join(`
`),M.length>0&&(M+=`
`),_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(G0).join(`
`),_.length>0&&(_+=`
`)):(M=[O4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(G0).join(`
`),_=[O4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==nc?"#define TONE_MAPPING":"",t.toneMapping!==nc?Vn.tonemapping_pars_fragment:"",t.toneMapping!==nc?vpe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Vn.colorspace_pars_fragment,mpe("linearToOutputTexel",t.outputColorSpace),gpe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(G0).join(`
`)),s=_2(s),s=D4(s,t),s=C4(s,t),o=_2(o),o=D4(o,t),o=C4(o,t),s=R4(s),o=R4(o),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,M=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,_=["#define varying in",t.glslVersion===f2?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===f2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const E=T+M+s,A=T+_+o,D=w4(i,i.VERTEX_SHADER,E),N=w4(i,i.FRAGMENT_SHADER,A);i.attachShader(b,D),i.attachShader(b,N),t.index0AttributeName!==void 0?i.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(b,0,"position"),i.linkProgram(b);function O(F){if(r.debug.checkShaderErrors){const H=i.getProgramInfoLog(b)||"",X=i.getShaderInfoLog(D)||"",$=i.getShaderInfoLog(N)||"",Y=H.trim(),I=X.trim(),Z=$.trim();let W=!0,te=!0;if(i.getProgramParameter(b,i.LINK_STATUS)===!1)if(W=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,b,D,N);else{const le=N4(i,D,"vertex"),Q=N4(i,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(b,i.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+Y+`
`+le+`
`+Q)}else Y!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Y):(I===""||Z==="")&&(te=!1);te&&(F.diagnostics={runnable:W,programLog:Y,vertexShader:{log:I,prefix:M},fragmentShader:{log:Z,prefix:_}})}i.deleteShader(D),i.deleteShader(N),z=new qb(i,b),C=bpe(i,b)}let z;this.getUniforms=function(){return z===void 0&&O(this),z};let C;this.getAttributes=function(){return C===void 0&&O(this),C};let R=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=i.getProgramParameter(b,fpe)),R},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=hpe++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=D,this.fragmentShader=N,this}let Ope=0;class Bpe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Upe(e),t.set(e,n)),n}}class Upe{constructor(e){this.id=Ope++,this.code=e,this.usedTimes=0}}function zpe(r,e,t,n,i,a,s){const o=new Nv,c=new Bpe,u=new Set,h=[],d=i.logarithmicDepthBuffer,m=i.vertexTextures;let v=i.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(C){return u.add(C),C===0?"uv":`uv${C}`}function M(C,R,F,H,X){const $=H.fog,Y=X.geometry,I=C.isMeshStandardMaterial?H.environment:null,Z=(C.isMeshStandardMaterial?t:e).get(C.envMap||I),W=Z&&Z.mapping===$v?Z.image.height:null,te=x[C.type];C.precision!==null&&(v=i.getMaxPrecision(C.precision),v!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",v,"instead."));const le=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,Q=le!==void 0?le.length:0;let k=0;Y.morphAttributes.position!==void 0&&(k=1),Y.morphAttributes.normal!==void 0&&(k=2),Y.morphAttributes.color!==void 0&&(k=3);let ae,J,De,pe;if(te){const on=su[te];ae=on.vertexShader,J=on.fragmentShader}else ae=C.vertexShader,J=C.fragmentShader,c.update(C),De=c.getVertexShaderID(C),pe=c.getFragmentShaderID(C);const _e=r.getRenderTarget(),ne=r.state.buffers.depth.getReversed(),ue=X.isInstancedMesh===!0,ge=X.isBatchedMesh===!0,Ae=!!C.map,Te=!!C.matcap,se=!!Z,Me=!!C.aoMap,Be=!!C.lightMap,Le=!!C.bumpMap,Pe=!!C.normalMap,Ye=!!C.displacementMap,Ze=!!C.emissiveMap,re=!!C.metalnessMap,be=!!C.roughnessMap,Ce=C.anisotropy>0,q=C.clearcoat>0,V=C.dispersion>0,ie=C.iridescence>0,fe=C.sheen>0,Se=C.transmission>0,ve=Ce&&!!C.anisotropyMap,qe=q&&!!C.clearcoatMap,Fe=q&&!!C.clearcoatNormalMap,We=q&&!!C.clearcoatRoughnessMap,Ge=ie&&!!C.iridescenceMap,rt=ie&&!!C.iridescenceThicknessMap,ot=fe&&!!C.sheenColorMap,St=fe&&!!C.sheenRoughnessMap,ye=!!C.specularMap,Ve=!!C.specularColorMap,G=!!C.specularIntensityMap,ee=Se&&!!C.transmissionMap,Ee=Se&&!!C.thicknessMap,ze=!!C.gradientMap,ft=!!C.alphaMap,it=C.alphaTest>0,ct=!!C.alphaHash,Nt=!!C.extensions;let It=nc;C.toneMapped&&(_e===null||_e.isXRRenderTarget===!0)&&(It=r.toneMapping);const yn={shaderID:te,shaderType:C.type,shaderName:C.name,vertexShader:ae,fragmentShader:J,defines:C.defines,customVertexShaderID:De,customFragmentShaderID:pe,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:v,batching:ge,batchingColor:ge&&X._colorsTexture!==null,instancing:ue,instancingColor:ue&&X.instanceColor!==null,instancingMorph:ue&&X.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:_e===null?r.outputColorSpace:_e.isXRRenderTarget===!0?_e.texture.colorSpace:xh,alphaToCoverage:!!C.alphaToCoverage,map:Ae,matcap:Te,envMap:se,envMapMode:se&&Z.mapping,envMapCubeUVHeight:W,aoMap:Me,lightMap:Be,bumpMap:Le,normalMap:Pe,displacementMap:m&&Ye,emissiveMap:Ze,normalMapObjectSpace:Pe&&C.normalMapType===i5,normalMapTangentSpace:Pe&&C.normalMapType===Rh,metalnessMap:re,roughnessMap:be,anisotropy:Ce,anisotropyMap:ve,clearcoat:q,clearcoatMap:qe,clearcoatNormalMap:Fe,clearcoatRoughnessMap:We,dispersion:V,iridescence:ie,iridescenceMap:Ge,iridescenceThicknessMap:rt,sheen:fe,sheenColorMap:ot,sheenRoughnessMap:St,specularMap:ye,specularColorMap:Ve,specularIntensityMap:G,transmission:Se,transmissionMap:ee,thicknessMap:Ee,gradientMap:ze,opaque:C.transparent===!1&&C.blending===Kd&&C.alphaToCoverage===!1,alphaMap:ft,alphaTest:it,alphaHash:ct,combine:C.combine,mapUv:Ae&&b(C.map.channel),aoMapUv:Me&&b(C.aoMap.channel),lightMapUv:Be&&b(C.lightMap.channel),bumpMapUv:Le&&b(C.bumpMap.channel),normalMapUv:Pe&&b(C.normalMap.channel),displacementMapUv:Ye&&b(C.displacementMap.channel),emissiveMapUv:Ze&&b(C.emissiveMap.channel),metalnessMapUv:re&&b(C.metalnessMap.channel),roughnessMapUv:be&&b(C.roughnessMap.channel),anisotropyMapUv:ve&&b(C.anisotropyMap.channel),clearcoatMapUv:qe&&b(C.clearcoatMap.channel),clearcoatNormalMapUv:Fe&&b(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:We&&b(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Ge&&b(C.iridescenceMap.channel),iridescenceThicknessMapUv:rt&&b(C.iridescenceThicknessMap.channel),sheenColorMapUv:ot&&b(C.sheenColorMap.channel),sheenRoughnessMapUv:St&&b(C.sheenRoughnessMap.channel),specularMapUv:ye&&b(C.specularMap.channel),specularColorMapUv:Ve&&b(C.specularColorMap.channel),specularIntensityMapUv:G&&b(C.specularIntensityMap.channel),transmissionMapUv:ee&&b(C.transmissionMap.channel),thicknessMapUv:Ee&&b(C.thicknessMap.channel),alphaMapUv:ft&&b(C.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&(Pe||Ce),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,pointsUvs:X.isPoints===!0&&!!Y.attributes.uv&&(Ae||ft),fog:!!$,useFog:C.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:C.flatShading===!0&&C.wireframe===!1,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:ne,skinning:X.isSkinnedMesh===!0,morphTargets:Y.morphAttributes.position!==void 0,morphNormals:Y.morphAttributes.normal!==void 0,morphColors:Y.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:k,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:C.dithering,shadowMapEnabled:r.shadowMap.enabled&&F.length>0,shadowMapType:r.shadowMap.type,toneMapping:It,decodeVideoTexture:Ae&&C.map.isVideoTexture===!0&&pr.getTransfer(C.map.colorSpace)===Lr,decodeVideoTextureEmissive:Ze&&C.emissiveMap.isVideoTexture===!0&&pr.getTransfer(C.emissiveMap.colorSpace)===Lr,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Io,flipSided:C.side===gs,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:Nt&&C.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Nt&&C.extensions.multiDraw===!0||ge)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return yn.vertexUv1s=u.has(1),yn.vertexUv2s=u.has(2),yn.vertexUv3s=u.has(3),u.clear(),yn}function _(C){const R=[];if(C.shaderID?R.push(C.shaderID):(R.push(C.customVertexShaderID),R.push(C.customFragmentShaderID)),C.defines!==void 0)for(const F in C.defines)R.push(F),R.push(C.defines[F]);return C.isRawShaderMaterial===!1&&(T(R,C),E(R,C),R.push(r.outputColorSpace)),R.push(C.customProgramCacheKey),R.join()}function T(C,R){C.push(R.precision),C.push(R.outputColorSpace),C.push(R.envMapMode),C.push(R.envMapCubeUVHeight),C.push(R.mapUv),C.push(R.alphaMapUv),C.push(R.lightMapUv),C.push(R.aoMapUv),C.push(R.bumpMapUv),C.push(R.normalMapUv),C.push(R.displacementMapUv),C.push(R.emissiveMapUv),C.push(R.metalnessMapUv),C.push(R.roughnessMapUv),C.push(R.anisotropyMapUv),C.push(R.clearcoatMapUv),C.push(R.clearcoatNormalMapUv),C.push(R.clearcoatRoughnessMapUv),C.push(R.iridescenceMapUv),C.push(R.iridescenceThicknessMapUv),C.push(R.sheenColorMapUv),C.push(R.sheenRoughnessMapUv),C.push(R.specularMapUv),C.push(R.specularColorMapUv),C.push(R.specularIntensityMapUv),C.push(R.transmissionMapUv),C.push(R.thicknessMapUv),C.push(R.combine),C.push(R.fogExp2),C.push(R.sizeAttenuation),C.push(R.morphTargetsCount),C.push(R.morphAttributeCount),C.push(R.numDirLights),C.push(R.numPointLights),C.push(R.numSpotLights),C.push(R.numSpotLightMaps),C.push(R.numHemiLights),C.push(R.numRectAreaLights),C.push(R.numDirLightShadows),C.push(R.numPointLightShadows),C.push(R.numSpotLightShadows),C.push(R.numSpotLightShadowsWithMaps),C.push(R.numLightProbes),C.push(R.shadowMapType),C.push(R.toneMapping),C.push(R.numClippingPlanes),C.push(R.numClipIntersection),C.push(R.depthPacking)}function E(C,R){o.disableAll(),R.supportsVertexTextures&&o.enable(0),R.instancing&&o.enable(1),R.instancingColor&&o.enable(2),R.instancingMorph&&o.enable(3),R.matcap&&o.enable(4),R.envMap&&o.enable(5),R.normalMapObjectSpace&&o.enable(6),R.normalMapTangentSpace&&o.enable(7),R.clearcoat&&o.enable(8),R.iridescence&&o.enable(9),R.alphaTest&&o.enable(10),R.vertexColors&&o.enable(11),R.vertexAlphas&&o.enable(12),R.vertexUv1s&&o.enable(13),R.vertexUv2s&&o.enable(14),R.vertexUv3s&&o.enable(15),R.vertexTangents&&o.enable(16),R.anisotropy&&o.enable(17),R.alphaHash&&o.enable(18),R.batching&&o.enable(19),R.dispersion&&o.enable(20),R.batchingColor&&o.enable(21),R.gradientMap&&o.enable(22),C.push(o.mask),o.disableAll(),R.fog&&o.enable(0),R.useFog&&o.enable(1),R.flatShading&&o.enable(2),R.logarithmicDepthBuffer&&o.enable(3),R.reversedDepthBuffer&&o.enable(4),R.skinning&&o.enable(5),R.morphTargets&&o.enable(6),R.morphNormals&&o.enable(7),R.morphColors&&o.enable(8),R.premultipliedAlpha&&o.enable(9),R.shadowMapEnabled&&o.enable(10),R.doubleSided&&o.enable(11),R.flipSided&&o.enable(12),R.useDepthPacking&&o.enable(13),R.dithering&&o.enable(14),R.transmission&&o.enable(15),R.sheen&&o.enable(16),R.opaque&&o.enable(17),R.pointsUvs&&o.enable(18),R.decodeVideoTexture&&o.enable(19),R.decodeVideoTextureEmissive&&o.enable(20),R.alphaToCoverage&&o.enable(21),C.push(o.mask)}function A(C){const R=x[C.type];let F;if(R){const H=su[R];F=xy.clone(H.uniforms)}else F=C.uniforms;return F}function D(C,R){let F;for(let H=0,X=h.length;H<X;H++){const $=h[H];if($.cacheKey===R){F=$,++F.usedTimes;break}}return F===void 0&&(F=new Rpe(r,R,C,a),h.push(F)),F}function N(C){if(--C.usedTimes===0){const R=h.indexOf(C);h[R]=h[h.length-1],h.pop(),C.destroy()}}function O(C){c.remove(C)}function z(){c.dispose()}return{getParameters:M,getProgramCacheKey:_,getUniforms:A,acquireProgram:D,releaseProgram:N,releaseShaderCache:O,programs:h,dispose:z}}function Fpe(){let r=new WeakMap;function e(s){return r.has(s)}function t(s){let o=r.get(s);return o===void 0&&(o={},r.set(s,o)),o}function n(s){r.delete(s)}function i(s,o,c){r.get(s)[o]=c}function a(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:a}}function Lpe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function B4(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function U4(){const r=[];let e=0;const t=[],n=[],i=[];function a(){e=0,t.length=0,n.length=0,i.length=0}function s(d,m,v,x,b,M){let _=r[e];return _===void 0?(_={id:d.id,object:d,geometry:m,material:v,groupOrder:x,renderOrder:d.renderOrder,z:b,group:M},r[e]=_):(_.id=d.id,_.object=d,_.geometry=m,_.material=v,_.groupOrder=x,_.renderOrder=d.renderOrder,_.z=b,_.group=M),e++,_}function o(d,m,v,x,b,M){const _=s(d,m,v,x,b,M);v.transmission>0?n.push(_):v.transparent===!0?i.push(_):t.push(_)}function c(d,m,v,x,b,M){const _=s(d,m,v,x,b,M);v.transmission>0?n.unshift(_):v.transparent===!0?i.unshift(_):t.unshift(_)}function u(d,m){t.length>1&&t.sort(d||Lpe),n.length>1&&n.sort(m||B4),i.length>1&&i.sort(m||B4)}function h(){for(let d=e,m=r.length;d<m;d++){const v=r[d];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:n,transparent:i,init:a,push:o,unshift:c,finish:h,sort:u}}function Ipe(){let r=new WeakMap;function e(n,i){const a=r.get(n);let s;return a===void 0?(s=new U4,r.set(n,[s])):i>=a.length?(s=new U4,a.push(s)):s=a[i],s}function t(){r=new WeakMap}return{get:e,dispose:t}}function Ppe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new xe,color:new zt};break;case"SpotLight":t={position:new xe,direction:new xe,color:new zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new xe,color:new zt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new xe,skyColor:new zt,groundColor:new zt};break;case"RectAreaLight":t={color:new zt,position:new xe,halfWidth:new xe,halfHeight:new xe};break}return r[e.id]=t,t}}}function Hpe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let Vpe=0;function qpe(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function Gpe(r){const e=new Ppe,t=Hpe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new xe);const i=new xe,a=new pn,s=new pn;function o(u){let h=0,d=0,m=0;for(let C=0;C<9;C++)n.probe[C].set(0,0,0);let v=0,x=0,b=0,M=0,_=0,T=0,E=0,A=0,D=0,N=0,O=0;u.sort(qpe);for(let C=0,R=u.length;C<R;C++){const F=u[C],H=F.color,X=F.intensity,$=F.distance,Y=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)h+=H.r*X,d+=H.g*X,m+=H.b*X;else if(F.isLightProbe){for(let I=0;I<9;I++)n.probe[I].addScaledVector(F.sh.coefficients[I],X);O++}else if(F.isDirectionalLight){const I=e.get(F);if(I.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const Z=F.shadow,W=t.get(F);W.shadowIntensity=Z.intensity,W.shadowBias=Z.bias,W.shadowNormalBias=Z.normalBias,W.shadowRadius=Z.radius,W.shadowMapSize=Z.mapSize,n.directionalShadow[v]=W,n.directionalShadowMap[v]=Y,n.directionalShadowMatrix[v]=F.shadow.matrix,T++}n.directional[v]=I,v++}else if(F.isSpotLight){const I=e.get(F);I.position.setFromMatrixPosition(F.matrixWorld),I.color.copy(H).multiplyScalar(X),I.distance=$,I.coneCos=Math.cos(F.angle),I.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),I.decay=F.decay,n.spot[b]=I;const Z=F.shadow;if(F.map&&(n.spotLightMap[D]=F.map,D++,Z.updateMatrices(F),F.castShadow&&N++),n.spotLightMatrix[b]=Z.matrix,F.castShadow){const W=t.get(F);W.shadowIntensity=Z.intensity,W.shadowBias=Z.bias,W.shadowNormalBias=Z.normalBias,W.shadowRadius=Z.radius,W.shadowMapSize=Z.mapSize,n.spotShadow[b]=W,n.spotShadowMap[b]=Y,A++}b++}else if(F.isRectAreaLight){const I=e.get(F);I.color.copy(H).multiplyScalar(X),I.halfWidth.set(F.width*.5,0,0),I.halfHeight.set(0,F.height*.5,0),n.rectArea[M]=I,M++}else if(F.isPointLight){const I=e.get(F);if(I.color.copy(F.color).multiplyScalar(F.intensity),I.distance=F.distance,I.decay=F.decay,F.castShadow){const Z=F.shadow,W=t.get(F);W.shadowIntensity=Z.intensity,W.shadowBias=Z.bias,W.shadowNormalBias=Z.normalBias,W.shadowRadius=Z.radius,W.shadowMapSize=Z.mapSize,W.shadowCameraNear=Z.camera.near,W.shadowCameraFar=Z.camera.far,n.pointShadow[x]=W,n.pointShadowMap[x]=Y,n.pointShadowMatrix[x]=F.shadow.matrix,E++}n.point[x]=I,x++}else if(F.isHemisphereLight){const I=e.get(F);I.skyColor.copy(F.color).multiplyScalar(X),I.groundColor.copy(F.groundColor).multiplyScalar(X),n.hemi[_]=I,_++}}M>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ct.LTC_FLOAT_1,n.rectAreaLTC2=Ct.LTC_FLOAT_2):(n.rectAreaLTC1=Ct.LTC_HALF_1,n.rectAreaLTC2=Ct.LTC_HALF_2)),n.ambient[0]=h,n.ambient[1]=d,n.ambient[2]=m;const z=n.hash;(z.directionalLength!==v||z.pointLength!==x||z.spotLength!==b||z.rectAreaLength!==M||z.hemiLength!==_||z.numDirectionalShadows!==T||z.numPointShadows!==E||z.numSpotShadows!==A||z.numSpotMaps!==D||z.numLightProbes!==O)&&(n.directional.length=v,n.spot.length=b,n.rectArea.length=M,n.point.length=x,n.hemi.length=_,n.directionalShadow.length=T,n.directionalShadowMap.length=T,n.pointShadow.length=E,n.pointShadowMap.length=E,n.spotShadow.length=A,n.spotShadowMap.length=A,n.directionalShadowMatrix.length=T,n.pointShadowMatrix.length=E,n.spotLightMatrix.length=A+D-N,n.spotLightMap.length=D,n.numSpotLightShadowsWithMaps=N,n.numLightProbes=O,z.directionalLength=v,z.pointLength=x,z.spotLength=b,z.rectAreaLength=M,z.hemiLength=_,z.numDirectionalShadows=T,z.numPointShadows=E,z.numSpotShadows=A,z.numSpotMaps=D,z.numLightProbes=O,n.version=Vpe++)}function c(u,h){let d=0,m=0,v=0,x=0,b=0;const M=h.matrixWorldInverse;for(let _=0,T=u.length;_<T;_++){const E=u[_];if(E.isDirectionalLight){const A=n.directional[d];A.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(M),d++}else if(E.isSpotLight){const A=n.spot[v];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(M),A.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),A.direction.sub(i),A.direction.transformDirection(M),v++}else if(E.isRectAreaLight){const A=n.rectArea[x];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(M),s.identity(),a.copy(E.matrixWorld),a.premultiply(M),s.extractRotation(a),A.halfWidth.set(E.width*.5,0,0),A.halfHeight.set(0,E.height*.5,0),A.halfWidth.applyMatrix4(s),A.halfHeight.applyMatrix4(s),x++}else if(E.isPointLight){const A=n.point[m];A.position.setFromMatrixPosition(E.matrixWorld),A.position.applyMatrix4(M),m++}else if(E.isHemisphereLight){const A=n.hemi[b];A.direction.setFromMatrixPosition(E.matrixWorld),A.direction.transformDirection(M),b++}}}return{setup:o,setupView:c,state:n}}function z4(r){const e=new Gpe(r),t=[],n=[];function i(h){u.camera=h,t.length=0,n.length=0}function a(h){t.push(h)}function s(h){n.push(h)}function o(){e.setup(t)}function c(h){e.setupView(t,h)}const u={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:c,pushLight:a,pushShadow:s}}function kpe(r){let e=new WeakMap;function t(i,a=0){const s=e.get(i);let o;return s===void 0?(o=new z4(r),e.set(i,[o])):a>=s.length?(o=new z4(r),s.push(o)):o=s[a],o}function n(){e=new WeakMap}return{get:t,dispose:n}}const Xpe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,jpe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ype(r,e,t){let n=new Kv;const i=new gt,a=new gt,s=new Xn,o=new Yw({depthPacking:r5}),c=new Ww,u={},h=t.maxTextureSize,d={[sf]:gs,[gs]:sf,[Io]:Io},m=new ko({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:Xpe,fragmentShader:jpe}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const x=new In;x.setAttribute("position",new Wr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Vi(x,m),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PS;let _=this.type;this.render=function(N,O,z){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||N.length===0)return;const C=r.getRenderTarget(),R=r.getActiveCubeFace(),F=r.getActiveMipmapLevel(),H=r.state;H.setBlending(tf),H.buffers.depth.getReversed()===!0?H.buffers.color.setClear(0,0,0,0):H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const X=_!==iu&&this.type===iu,$=_===iu&&this.type!==iu;for(let Y=0,I=N.length;Y<I;Y++){const Z=N[Y],W=Z.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",Z,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;i.copy(W.mapSize);const te=W.getFrameExtents();if(i.multiply(te),a.copy(W.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(a.x=Math.floor(h/te.x),i.x=a.x*te.x,W.mapSize.x=a.x),i.y>h&&(a.y=Math.floor(h/te.y),i.y=a.y*te.y,W.mapSize.y=a.y)),W.map===null||X===!0||$===!0){const Q=this.type!==iu?{minFilter:ja,magFilter:ja}:{};W.map!==null&&W.map.dispose(),W.map=new ac(i.x,i.y,Q),W.map.texture.name=Z.name+".shadowMap",W.camera.updateProjectionMatrix()}r.setRenderTarget(W.map),r.clear();const le=W.getViewportCount();for(let Q=0;Q<le;Q++){const k=W.getViewport(Q);s.set(a.x*k.x,a.y*k.y,a.x*k.z,a.y*k.w),H.viewport(s),W.updateMatrices(Z,Q),n=W.getFrustum(),A(O,z,W.camera,Z,this.type)}W.isPointLightShadow!==!0&&this.type===iu&&T(W,z),W.needsUpdate=!1}_=this.type,M.needsUpdate=!1,r.setRenderTarget(C,R,F)};function T(N,O){const z=e.update(b);m.defines.VSM_SAMPLES!==N.blurSamples&&(m.defines.VSM_SAMPLES=N.blurSamples,v.defines.VSM_SAMPLES=N.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new ac(i.x,i.y)),m.uniforms.shadow_pass.value=N.map.texture,m.uniforms.resolution.value=N.mapSize,m.uniforms.radius.value=N.radius,r.setRenderTarget(N.mapPass),r.clear(),r.renderBufferDirect(O,null,z,m,b,null),v.uniforms.shadow_pass.value=N.mapPass.texture,v.uniforms.resolution.value=N.mapSize,v.uniforms.radius.value=N.radius,r.setRenderTarget(N.map),r.clear(),r.renderBufferDirect(O,null,z,v,b,null)}function E(N,O,z,C){let R=null;const F=z.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(F!==void 0)R=F;else if(R=z.isPointLight===!0?c:o,r.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0||O.alphaToCoverage===!0){const H=R.uuid,X=O.uuid;let $=u[H];$===void 0&&($={},u[H]=$);let Y=$[X];Y===void 0&&(Y=R.clone(),$[X]=Y,O.addEventListener("dispose",D)),R=Y}if(R.visible=O.visible,R.wireframe=O.wireframe,C===iu?R.side=O.shadowSide!==null?O.shadowSide:O.side:R.side=O.shadowSide!==null?O.shadowSide:d[O.side],R.alphaMap=O.alphaMap,R.alphaTest=O.alphaToCoverage===!0?.5:O.alphaTest,R.map=O.map,R.clipShadows=O.clipShadows,R.clippingPlanes=O.clippingPlanes,R.clipIntersection=O.clipIntersection,R.displacementMap=O.displacementMap,R.displacementScale=O.displacementScale,R.displacementBias=O.displacementBias,R.wireframeLinewidth=O.wireframeLinewidth,R.linewidth=O.linewidth,z.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const H=r.properties.get(R);H.light=z}return R}function A(N,O,z,C,R){if(N.visible===!1)return;if(N.layers.test(O.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&R===iu)&&(!N.frustumCulled||n.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,N.matrixWorld);const X=e.update(N),$=N.material;if(Array.isArray($)){const Y=X.groups;for(let I=0,Z=Y.length;I<Z;I++){const W=Y[I],te=$[W.materialIndex];if(te&&te.visible){const le=E(N,te,C,R);N.onBeforeShadow(r,N,O,z,X,le,W),r.renderBufferDirect(z,null,X,le,N,W),N.onAfterShadow(r,N,O,z,X,le,W)}}}else if($.visible){const Y=E(N,$,C,R);N.onBeforeShadow(r,N,O,z,X,Y,null),r.renderBufferDirect(z,null,X,Y,N,null),N.onAfterShadow(r,N,O,z,X,Y,null)}}const H=N.children;for(let X=0,$=H.length;X<$;X++)A(H[X],O,z,C,R)}function D(N){N.target.removeEventListener("dispose",D);for(const z in u){const C=u[z],R=N.target.uuid;R in C&&(C[R].dispose(),delete C[R])}}}const Wpe={[M_]:E_,[A_]:N_,[w_]:D_,[ap]:T_,[E_]:M_,[N_]:A_,[D_]:w_,[T_]:ap};function $pe(r,e){function t(){let ee=!1;const Ee=new Xn;let ze=null;const ft=new Xn(0,0,0,0);return{setMask:function(it){ze!==it&&!ee&&(r.colorMask(it,it,it,it),ze=it)},setLocked:function(it){ee=it},setClear:function(it,ct,Nt,It,yn){yn===!0&&(it*=It,ct*=It,Nt*=It),Ee.set(it,ct,Nt,It),ft.equals(Ee)===!1&&(r.clearColor(it,ct,Nt,It),ft.copy(Ee))},reset:function(){ee=!1,ze=null,ft.set(-1,0,0,0)}}}function n(){let ee=!1,Ee=!1,ze=null,ft=null,it=null;return{setReversed:function(ct){if(Ee!==ct){const Nt=e.get("EXT_clip_control");ct?Nt.clipControlEXT(Nt.LOWER_LEFT_EXT,Nt.ZERO_TO_ONE_EXT):Nt.clipControlEXT(Nt.LOWER_LEFT_EXT,Nt.NEGATIVE_ONE_TO_ONE_EXT),Ee=ct;const It=it;it=null,this.setClear(It)}},getReversed:function(){return Ee},setTest:function(ct){ct?_e(r.DEPTH_TEST):ne(r.DEPTH_TEST)},setMask:function(ct){ze!==ct&&!ee&&(r.depthMask(ct),ze=ct)},setFunc:function(ct){if(Ee&&(ct=Wpe[ct]),ft!==ct){switch(ct){case M_:r.depthFunc(r.NEVER);break;case E_:r.depthFunc(r.ALWAYS);break;case A_:r.depthFunc(r.LESS);break;case ap:r.depthFunc(r.LEQUAL);break;case w_:r.depthFunc(r.EQUAL);break;case T_:r.depthFunc(r.GEQUAL);break;case N_:r.depthFunc(r.GREATER);break;case D_:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}ft=ct}},setLocked:function(ct){ee=ct},setClear:function(ct){it!==ct&&(Ee&&(ct=1-ct),r.clearDepth(ct),it=ct)},reset:function(){ee=!1,ze=null,ft=null,it=null,Ee=!1}}}function i(){let ee=!1,Ee=null,ze=null,ft=null,it=null,ct=null,Nt=null,It=null,yn=null;return{setTest:function(on){ee||(on?_e(r.STENCIL_TEST):ne(r.STENCIL_TEST))},setMask:function(on){Ee!==on&&!ee&&(r.stencilMask(on),Ee=on)},setFunc:function(on,Dr,ni){(ze!==on||ft!==Dr||it!==ni)&&(r.stencilFunc(on,Dr,ni),ze=on,ft=Dr,it=ni)},setOp:function(on,Dr,ni){(ct!==on||Nt!==Dr||It!==ni)&&(r.stencilOp(on,Dr,ni),ct=on,Nt=Dr,It=ni)},setLocked:function(on){ee=on},setClear:function(on){yn!==on&&(r.clearStencil(on),yn=on)},reset:function(){ee=!1,Ee=null,ze=null,ft=null,it=null,ct=null,Nt=null,It=null,yn=null}}}const a=new t,s=new n,o=new i,c=new WeakMap,u=new WeakMap;let h={},d={},m=new WeakMap,v=[],x=null,b=!1,M=null,_=null,T=null,E=null,A=null,D=null,N=null,O=new zt(0,0,0),z=0,C=!1,R=null,F=null,H=null,X=null,$=null;const Y=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let I=!1,Z=0;const W=r.getParameter(r.VERSION);W.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(W)[1]),I=Z>=1):W.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),I=Z>=2);let te=null,le={};const Q=r.getParameter(r.SCISSOR_BOX),k=r.getParameter(r.VIEWPORT),ae=new Xn().fromArray(Q),J=new Xn().fromArray(k);function De(ee,Ee,ze,ft){const it=new Uint8Array(4),ct=r.createTexture();r.bindTexture(ee,ct),r.texParameteri(ee,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(ee,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let Nt=0;Nt<ze;Nt++)ee===r.TEXTURE_3D||ee===r.TEXTURE_2D_ARRAY?r.texImage3D(Ee,0,r.RGBA,1,1,ft,0,r.RGBA,r.UNSIGNED_BYTE,it):r.texImage2D(Ee+Nt,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,it);return ct}const pe={};pe[r.TEXTURE_2D]=De(r.TEXTURE_2D,r.TEXTURE_2D,1),pe[r.TEXTURE_CUBE_MAP]=De(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),pe[r.TEXTURE_2D_ARRAY]=De(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),pe[r.TEXTURE_3D]=De(r.TEXTURE_3D,r.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),_e(r.DEPTH_TEST),s.setFunc(ap),Le(!1),Pe(s2),_e(r.CULL_FACE),Me(tf);function _e(ee){h[ee]!==!0&&(r.enable(ee),h[ee]=!0)}function ne(ee){h[ee]!==!1&&(r.disable(ee),h[ee]=!1)}function ue(ee,Ee){return d[ee]!==Ee?(r.bindFramebuffer(ee,Ee),d[ee]=Ee,ee===r.DRAW_FRAMEBUFFER&&(d[r.FRAMEBUFFER]=Ee),ee===r.FRAMEBUFFER&&(d[r.DRAW_FRAMEBUFFER]=Ee),!0):!1}function ge(ee,Ee){let ze=v,ft=!1;if(ee){ze=m.get(Ee),ze===void 0&&(ze=[],m.set(Ee,ze));const it=ee.textures;if(ze.length!==it.length||ze[0]!==r.COLOR_ATTACHMENT0){for(let ct=0,Nt=it.length;ct<Nt;ct++)ze[ct]=r.COLOR_ATTACHMENT0+ct;ze.length=it.length,ft=!0}}else ze[0]!==r.BACK&&(ze[0]=r.BACK,ft=!0);ft&&r.drawBuffers(ze)}function Ae(ee){return x!==ee?(r.useProgram(ee),x=ee,!0):!1}const Te={[oh]:r.FUNC_ADD,[TF]:r.FUNC_SUBTRACT,[NF]:r.FUNC_REVERSE_SUBTRACT};Te[DF]=r.MIN,Te[CF]=r.MAX;const se={[RF]:r.ZERO,[OF]:r.ONE,[BF]:r.SRC_COLOR,[__]:r.SRC_ALPHA,[PF]:r.SRC_ALPHA_SATURATE,[LF]:r.DST_COLOR,[zF]:r.DST_ALPHA,[UF]:r.ONE_MINUS_SRC_COLOR,[S_]:r.ONE_MINUS_SRC_ALPHA,[IF]:r.ONE_MINUS_DST_COLOR,[FF]:r.ONE_MINUS_DST_ALPHA,[HF]:r.CONSTANT_COLOR,[VF]:r.ONE_MINUS_CONSTANT_COLOR,[qF]:r.CONSTANT_ALPHA,[GF]:r.ONE_MINUS_CONSTANT_ALPHA};function Me(ee,Ee,ze,ft,it,ct,Nt,It,yn,on){if(ee===tf){b===!0&&(ne(r.BLEND),b=!1);return}if(b===!1&&(_e(r.BLEND),b=!0),ee!==wF){if(ee!==M||on!==C){if((_!==oh||A!==oh)&&(r.blendEquation(r.FUNC_ADD),_=oh,A=oh),on)switch(ee){case Kd:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case ly:r.blendFunc(r.ONE,r.ONE);break;case o2:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case l2:r.blendFuncSeparate(r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ZERO,r.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}else switch(ee){case Kd:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case ly:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE,r.ONE,r.ONE);break;case o2:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case l2:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}T=null,E=null,D=null,N=null,O.set(0,0,0),z=0,M=ee,C=on}return}it=it||Ee,ct=ct||ze,Nt=Nt||ft,(Ee!==_||it!==A)&&(r.blendEquationSeparate(Te[Ee],Te[it]),_=Ee,A=it),(ze!==T||ft!==E||ct!==D||Nt!==N)&&(r.blendFuncSeparate(se[ze],se[ft],se[ct],se[Nt]),T=ze,E=ft,D=ct,N=Nt),(It.equals(O)===!1||yn!==z)&&(r.blendColor(It.r,It.g,It.b,yn),O.copy(It),z=yn),M=ee,C=!1}function Be(ee,Ee){ee.side===Io?ne(r.CULL_FACE):_e(r.CULL_FACE);let ze=ee.side===gs;Ee&&(ze=!ze),Le(ze),ee.blending===Kd&&ee.transparent===!1?Me(tf):Me(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.blendColor,ee.blendAlpha,ee.premultipliedAlpha),s.setFunc(ee.depthFunc),s.setTest(ee.depthTest),s.setMask(ee.depthWrite),a.setMask(ee.colorWrite);const ft=ee.stencilWrite;o.setTest(ft),ft&&(o.setMask(ee.stencilWriteMask),o.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),o.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),Ze(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?_e(r.SAMPLE_ALPHA_TO_COVERAGE):ne(r.SAMPLE_ALPHA_TO_COVERAGE)}function Le(ee){R!==ee&&(ee?r.frontFace(r.CW):r.frontFace(r.CCW),R=ee)}function Pe(ee){ee!==MF?(_e(r.CULL_FACE),ee!==F&&(ee===s2?r.cullFace(r.BACK):ee===EF?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):ne(r.CULL_FACE),F=ee}function Ye(ee){ee!==H&&(I&&r.lineWidth(ee),H=ee)}function Ze(ee,Ee,ze){ee?(_e(r.POLYGON_OFFSET_FILL),(X!==Ee||$!==ze)&&(r.polygonOffset(Ee,ze),X=Ee,$=ze)):ne(r.POLYGON_OFFSET_FILL)}function re(ee){ee?_e(r.SCISSOR_TEST):ne(r.SCISSOR_TEST)}function be(ee){ee===void 0&&(ee=r.TEXTURE0+Y-1),te!==ee&&(r.activeTexture(ee),te=ee)}function Ce(ee,Ee,ze){ze===void 0&&(te===null?ze=r.TEXTURE0+Y-1:ze=te);let ft=le[ze];ft===void 0&&(ft={type:void 0,texture:void 0},le[ze]=ft),(ft.type!==ee||ft.texture!==Ee)&&(te!==ze&&(r.activeTexture(ze),te=ze),r.bindTexture(ee,Ee||pe[ee]),ft.type=ee,ft.texture=Ee)}function q(){const ee=le[te];ee!==void 0&&ee.type!==void 0&&(r.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function V(){try{r.compressedTexImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ie(){try{r.compressedTexImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function fe(){try{r.texSubImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Se(){try{r.texSubImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ve(){try{r.compressedTexSubImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function qe(){try{r.compressedTexSubImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Fe(){try{r.texStorage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function We(){try{r.texStorage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ge(){try{r.texImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function rt(){try{r.texImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ot(ee){ae.equals(ee)===!1&&(r.scissor(ee.x,ee.y,ee.z,ee.w),ae.copy(ee))}function St(ee){J.equals(ee)===!1&&(r.viewport(ee.x,ee.y,ee.z,ee.w),J.copy(ee))}function ye(ee,Ee){let ze=u.get(Ee);ze===void 0&&(ze=new WeakMap,u.set(Ee,ze));let ft=ze.get(ee);ft===void 0&&(ft=r.getUniformBlockIndex(Ee,ee.name),ze.set(ee,ft))}function Ve(ee,Ee){const ft=u.get(Ee).get(ee);c.get(Ee)!==ft&&(r.uniformBlockBinding(Ee,ft,ee.__bindingPointIndex),c.set(Ee,ft))}function G(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),s.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),h={},te=null,le={},d={},m=new WeakMap,v=[],x=null,b=!1,M=null,_=null,T=null,E=null,A=null,D=null,N=null,O=new zt(0,0,0),z=0,C=!1,R=null,F=null,H=null,X=null,$=null,ae.set(0,0,r.canvas.width,r.canvas.height),J.set(0,0,r.canvas.width,r.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:_e,disable:ne,bindFramebuffer:ue,drawBuffers:ge,useProgram:Ae,setBlending:Me,setMaterial:Be,setFlipSided:Le,setCullFace:Pe,setLineWidth:Ye,setPolygonOffset:Ze,setScissorTest:re,activeTexture:be,bindTexture:Ce,unbindTexture:q,compressedTexImage2D:V,compressedTexImage3D:ie,texImage2D:Ge,texImage3D:rt,updateUBOMapping:ye,uniformBlockBinding:Ve,texStorage2D:Fe,texStorage3D:We,texSubImage2D:fe,texSubImage3D:Se,compressedTexSubImage2D:ve,compressedTexSubImage3D:qe,scissor:ot,viewport:St,reset:G}}function Zpe(r,e,t,n,i,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new gt,h=new WeakMap;let d;const m=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(q,V){return v?new OffscreenCanvas(q,V):gy("canvas")}function b(q,V,ie){let fe=1;const Se=Ce(q);if((Se.width>ie||Se.height>ie)&&(fe=ie/Math.max(Se.width,Se.height)),fe<1)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap||typeof VideoFrame<"u"&&q instanceof VideoFrame){const ve=Math.floor(fe*Se.width),qe=Math.floor(fe*Se.height);d===void 0&&(d=x(ve,qe));const Fe=V?x(ve,qe):d;return Fe.width=ve,Fe.height=qe,Fe.getContext("2d").drawImage(q,0,0,ve,qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Se.width+"x"+Se.height+") to ("+ve+"x"+qe+")."),Fe}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Se.width+"x"+Se.height+")."),q;return q}function M(q){return q.generateMipmaps}function _(q){r.generateMipmap(q)}function T(q){return q.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:q.isWebGL3DRenderTarget?r.TEXTURE_3D:q.isWebGLArrayRenderTarget||q.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function E(q,V,ie,fe,Se=!1){if(q!==null){if(r[q]!==void 0)return r[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let ve=V;if(V===r.RED&&(ie===r.FLOAT&&(ve=r.R32F),ie===r.HALF_FLOAT&&(ve=r.R16F),ie===r.UNSIGNED_BYTE&&(ve=r.R8)),V===r.RED_INTEGER&&(ie===r.UNSIGNED_BYTE&&(ve=r.R8UI),ie===r.UNSIGNED_SHORT&&(ve=r.R16UI),ie===r.UNSIGNED_INT&&(ve=r.R32UI),ie===r.BYTE&&(ve=r.R8I),ie===r.SHORT&&(ve=r.R16I),ie===r.INT&&(ve=r.R32I)),V===r.RG&&(ie===r.FLOAT&&(ve=r.RG32F),ie===r.HALF_FLOAT&&(ve=r.RG16F),ie===r.UNSIGNED_BYTE&&(ve=r.RG8)),V===r.RG_INTEGER&&(ie===r.UNSIGNED_BYTE&&(ve=r.RG8UI),ie===r.UNSIGNED_SHORT&&(ve=r.RG16UI),ie===r.UNSIGNED_INT&&(ve=r.RG32UI),ie===r.BYTE&&(ve=r.RG8I),ie===r.SHORT&&(ve=r.RG16I),ie===r.INT&&(ve=r.RG32I)),V===r.RGB_INTEGER&&(ie===r.UNSIGNED_BYTE&&(ve=r.RGB8UI),ie===r.UNSIGNED_SHORT&&(ve=r.RGB16UI),ie===r.UNSIGNED_INT&&(ve=r.RGB32UI),ie===r.BYTE&&(ve=r.RGB8I),ie===r.SHORT&&(ve=r.RGB16I),ie===r.INT&&(ve=r.RGB32I)),V===r.RGBA_INTEGER&&(ie===r.UNSIGNED_BYTE&&(ve=r.RGBA8UI),ie===r.UNSIGNED_SHORT&&(ve=r.RGBA16UI),ie===r.UNSIGNED_INT&&(ve=r.RGBA32UI),ie===r.BYTE&&(ve=r.RGBA8I),ie===r.SHORT&&(ve=r.RGBA16I),ie===r.INT&&(ve=r.RGBA32I)),V===r.RGB&&(ie===r.UNSIGNED_INT_5_9_9_9_REV&&(ve=r.RGB9_E5),ie===r.UNSIGNED_INT_10F_11F_11F_REV&&(ve=r.R11F_G11F_B10F)),V===r.RGBA){const qe=Se?my:pr.getTransfer(fe);ie===r.FLOAT&&(ve=r.RGBA32F),ie===r.HALF_FLOAT&&(ve=r.RGBA16F),ie===r.UNSIGNED_BYTE&&(ve=qe===Lr?r.SRGB8_ALPHA8:r.RGBA8),ie===r.UNSIGNED_SHORT_4_4_4_4&&(ve=r.RGBA4),ie===r.UNSIGNED_SHORT_5_5_5_1&&(ve=r.RGB5_A1)}return(ve===r.R16F||ve===r.R32F||ve===r.RG16F||ve===r.RG32F||ve===r.RGBA16F||ve===r.RGBA32F)&&e.get("EXT_color_buffer_float"),ve}function A(q,V){let ie;return q?V===null||V===lf||V===Mv?ie=r.DEPTH24_STENCIL8:V===po?ie=r.DEPTH32F_STENCIL8:V===Sv&&(ie=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===lf||V===Mv?ie=r.DEPTH_COMPONENT24:V===po?ie=r.DEPTH_COMPONENT32F:V===Sv&&(ie=r.DEPTH_COMPONENT16),ie}function D(q,V){return M(q)===!0||q.isFramebufferTexture&&q.minFilter!==ja&&q.minFilter!==sa?Math.log2(Math.max(V.width,V.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?V.mipmaps.length:1}function N(q){const V=q.target;V.removeEventListener("dispose",N),z(V),V.isVideoTexture&&h.delete(V)}function O(q){const V=q.target;V.removeEventListener("dispose",O),R(V)}function z(q){const V=n.get(q);if(V.__webglInit===void 0)return;const ie=q.source,fe=m.get(ie);if(fe){const Se=fe[V.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&C(q),Object.keys(fe).length===0&&m.delete(ie)}n.remove(q)}function C(q){const V=n.get(q);r.deleteTexture(V.__webglTexture);const ie=q.source,fe=m.get(ie);delete fe[V.__cacheKey],s.memory.textures--}function R(q){const V=n.get(q);if(q.depthTexture&&(q.depthTexture.dispose(),n.remove(q.depthTexture)),q.isWebGLCubeRenderTarget)for(let fe=0;fe<6;fe++){if(Array.isArray(V.__webglFramebuffer[fe]))for(let Se=0;Se<V.__webglFramebuffer[fe].length;Se++)r.deleteFramebuffer(V.__webglFramebuffer[fe][Se]);else r.deleteFramebuffer(V.__webglFramebuffer[fe]);V.__webglDepthbuffer&&r.deleteRenderbuffer(V.__webglDepthbuffer[fe])}else{if(Array.isArray(V.__webglFramebuffer))for(let fe=0;fe<V.__webglFramebuffer.length;fe++)r.deleteFramebuffer(V.__webglFramebuffer[fe]);else r.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&r.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&r.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let fe=0;fe<V.__webglColorRenderbuffer.length;fe++)V.__webglColorRenderbuffer[fe]&&r.deleteRenderbuffer(V.__webglColorRenderbuffer[fe]);V.__webglDepthRenderbuffer&&r.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const ie=q.textures;for(let fe=0,Se=ie.length;fe<Se;fe++){const ve=n.get(ie[fe]);ve.__webglTexture&&(r.deleteTexture(ve.__webglTexture),s.memory.textures--),n.remove(ie[fe])}n.remove(q)}let F=0;function H(){F=0}function X(){const q=F;return q>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+i.maxTextures),F+=1,q}function $(q){const V=[];return V.push(q.wrapS),V.push(q.wrapT),V.push(q.wrapR||0),V.push(q.magFilter),V.push(q.minFilter),V.push(q.anisotropy),V.push(q.internalFormat),V.push(q.format),V.push(q.type),V.push(q.generateMipmaps),V.push(q.premultiplyAlpha),V.push(q.flipY),V.push(q.unpackAlignment),V.push(q.colorSpace),V.join()}function Y(q,V){const ie=n.get(q);if(q.isVideoTexture&&re(q),q.isRenderTargetTexture===!1&&q.isExternalTexture!==!0&&q.version>0&&ie.__version!==q.version){const fe=q.image;if(fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{pe(ie,q,V);return}}else q.isExternalTexture&&(ie.__webglTexture=q.sourceTexture?q.sourceTexture:null);t.bindTexture(r.TEXTURE_2D,ie.__webglTexture,r.TEXTURE0+V)}function I(q,V){const ie=n.get(q);if(q.isRenderTargetTexture===!1&&q.version>0&&ie.__version!==q.version){pe(ie,q,V);return}t.bindTexture(r.TEXTURE_2D_ARRAY,ie.__webglTexture,r.TEXTURE0+V)}function Z(q,V){const ie=n.get(q);if(q.isRenderTargetTexture===!1&&q.version>0&&ie.__version!==q.version){pe(ie,q,V);return}t.bindTexture(r.TEXTURE_3D,ie.__webglTexture,r.TEXTURE0+V)}function W(q,V){const ie=n.get(q);if(q.version>0&&ie.__version!==q.version){_e(ie,q,V);return}t.bindTexture(r.TEXTURE_CUBE_MAP,ie.__webglTexture,r.TEXTURE0+V)}const te={[fy]:r.REPEAT,[xl]:r.CLAMP_TO_EDGE,[hy]:r.MIRRORED_REPEAT},le={[ja]:r.NEAREST,[bw]:r.NEAREST_MIPMAP_NEAREST,[rv]:r.NEAREST_MIPMAP_LINEAR,[sa]:r.LINEAR,[W0]:r.LINEAR_MIPMAP_NEAREST,[ec]:r.LINEAR_MIPMAP_LINEAR},Q={[a5]:r.NEVER,[f5]:r.ALWAYS,[s5]:r.LESS,[Dw]:r.LEQUAL,[o5]:r.EQUAL,[c5]:r.GEQUAL,[l5]:r.GREATER,[u5]:r.NOTEQUAL};function k(q,V){if(V.type===po&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===sa||V.magFilter===W0||V.magFilter===rv||V.magFilter===ec||V.minFilter===sa||V.minFilter===W0||V.minFilter===rv||V.minFilter===ec)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(q,r.TEXTURE_WRAP_S,te[V.wrapS]),r.texParameteri(q,r.TEXTURE_WRAP_T,te[V.wrapT]),(q===r.TEXTURE_3D||q===r.TEXTURE_2D_ARRAY)&&r.texParameteri(q,r.TEXTURE_WRAP_R,te[V.wrapR]),r.texParameteri(q,r.TEXTURE_MAG_FILTER,le[V.magFilter]),r.texParameteri(q,r.TEXTURE_MIN_FILTER,le[V.minFilter]),V.compareFunction&&(r.texParameteri(q,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(q,r.TEXTURE_COMPARE_FUNC,Q[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===ja||V.minFilter!==rv&&V.minFilter!==ec||V.type===po&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||n.get(V).__currentAnisotropy){const ie=e.get("EXT_texture_filter_anisotropic");r.texParameterf(q,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,i.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy}}}function ae(q,V){let ie=!1;q.__webglInit===void 0&&(q.__webglInit=!0,V.addEventListener("dispose",N));const fe=V.source;let Se=m.get(fe);Se===void 0&&(Se={},m.set(fe,Se));const ve=$(V);if(ve!==q.__cacheKey){Se[ve]===void 0&&(Se[ve]={texture:r.createTexture(),usedTimes:0},s.memory.textures++,ie=!0),Se[ve].usedTimes++;const qe=Se[q.__cacheKey];qe!==void 0&&(Se[q.__cacheKey].usedTimes--,qe.usedTimes===0&&C(V)),q.__cacheKey=ve,q.__webglTexture=Se[ve].texture}return ie}function J(q,V,ie){return Math.floor(Math.floor(q/ie)/V)}function De(q,V,ie,fe){const ve=q.updateRanges;if(ve.length===0)t.texSubImage2D(r.TEXTURE_2D,0,0,0,V.width,V.height,ie,fe,V.data);else{ve.sort((rt,ot)=>rt.start-ot.start);let qe=0;for(let rt=1;rt<ve.length;rt++){const ot=ve[qe],St=ve[rt],ye=ot.start+ot.count,Ve=J(St.start,V.width,4),G=J(ot.start,V.width,4);St.start<=ye+1&&Ve===G&&J(St.start+St.count-1,V.width,4)===Ve?ot.count=Math.max(ot.count,St.start+St.count-ot.start):(++qe,ve[qe]=St)}ve.length=qe+1;const Fe=r.getParameter(r.UNPACK_ROW_LENGTH),We=r.getParameter(r.UNPACK_SKIP_PIXELS),Ge=r.getParameter(r.UNPACK_SKIP_ROWS);r.pixelStorei(r.UNPACK_ROW_LENGTH,V.width);for(let rt=0,ot=ve.length;rt<ot;rt++){const St=ve[rt],ye=Math.floor(St.start/4),Ve=Math.ceil(St.count/4),G=ye%V.width,ee=Math.floor(ye/V.width),Ee=Ve,ze=1;r.pixelStorei(r.UNPACK_SKIP_PIXELS,G),r.pixelStorei(r.UNPACK_SKIP_ROWS,ee),t.texSubImage2D(r.TEXTURE_2D,0,G,ee,Ee,ze,ie,fe,V.data)}q.clearUpdateRanges(),r.pixelStorei(r.UNPACK_ROW_LENGTH,Fe),r.pixelStorei(r.UNPACK_SKIP_PIXELS,We),r.pixelStorei(r.UNPACK_SKIP_ROWS,Ge)}}function pe(q,V,ie){let fe=r.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(fe=r.TEXTURE_2D_ARRAY),V.isData3DTexture&&(fe=r.TEXTURE_3D);const Se=ae(q,V),ve=V.source;t.bindTexture(fe,q.__webglTexture,r.TEXTURE0+ie);const qe=n.get(ve);if(ve.version!==qe.__version||Se===!0){t.activeTexture(r.TEXTURE0+ie);const Fe=pr.getPrimaries(pr.workingColorSpace),We=V.colorSpace===$c?null:pr.getPrimaries(V.colorSpace),Ge=V.colorSpace===$c||Fe===We?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,V.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,V.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ge);let rt=b(V.image,!1,i.maxTextureSize);rt=be(V,rt);const ot=a.convert(V.format,V.colorSpace),St=a.convert(V.type);let ye=E(V.internalFormat,ot,St,V.colorSpace,V.isVideoTexture);k(fe,V);let Ve;const G=V.mipmaps,ee=V.isVideoTexture!==!0,Ee=qe.__version===void 0||Se===!0,ze=ve.dataReady,ft=D(V,rt);if(V.isDepthTexture)ye=A(V.format===Av,V.type),Ee&&(ee?t.texStorage2D(r.TEXTURE_2D,1,ye,rt.width,rt.height):t.texImage2D(r.TEXTURE_2D,0,ye,rt.width,rt.height,0,ot,St,null));else if(V.isDataTexture)if(G.length>0){ee&&Ee&&t.texStorage2D(r.TEXTURE_2D,ft,ye,G[0].width,G[0].height);for(let it=0,ct=G.length;it<ct;it++)Ve=G[it],ee?ze&&t.texSubImage2D(r.TEXTURE_2D,it,0,0,Ve.width,Ve.height,ot,St,Ve.data):t.texImage2D(r.TEXTURE_2D,it,ye,Ve.width,Ve.height,0,ot,St,Ve.data);V.generateMipmaps=!1}else ee?(Ee&&t.texStorage2D(r.TEXTURE_2D,ft,ye,rt.width,rt.height),ze&&De(V,rt,ot,St)):t.texImage2D(r.TEXTURE_2D,0,ye,rt.width,rt.height,0,ot,St,rt.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){ee&&Ee&&t.texStorage3D(r.TEXTURE_2D_ARRAY,ft,ye,G[0].width,G[0].height,rt.depth);for(let it=0,ct=G.length;it<ct;it++)if(Ve=G[it],V.format!==ms)if(ot!==null)if(ee){if(ze)if(V.layerUpdates.size>0){const Nt=x2(Ve.width,Ve.height,V.format,V.type);for(const It of V.layerUpdates){const yn=Ve.data.subarray(It*Nt/Ve.data.BYTES_PER_ELEMENT,(It+1)*Nt/Ve.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,it,0,0,It,Ve.width,Ve.height,1,ot,yn)}V.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,it,0,0,0,Ve.width,Ve.height,rt.depth,ot,Ve.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,it,ye,Ve.width,Ve.height,rt.depth,0,Ve.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ee?ze&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,it,0,0,0,Ve.width,Ve.height,rt.depth,ot,St,Ve.data):t.texImage3D(r.TEXTURE_2D_ARRAY,it,ye,Ve.width,Ve.height,rt.depth,0,ot,St,Ve.data)}else{ee&&Ee&&t.texStorage2D(r.TEXTURE_2D,ft,ye,G[0].width,G[0].height);for(let it=0,ct=G.length;it<ct;it++)Ve=G[it],V.format!==ms?ot!==null?ee?ze&&t.compressedTexSubImage2D(r.TEXTURE_2D,it,0,0,Ve.width,Ve.height,ot,Ve.data):t.compressedTexImage2D(r.TEXTURE_2D,it,ye,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ee?ze&&t.texSubImage2D(r.TEXTURE_2D,it,0,0,Ve.width,Ve.height,ot,St,Ve.data):t.texImage2D(r.TEXTURE_2D,it,ye,Ve.width,Ve.height,0,ot,St,Ve.data)}else if(V.isDataArrayTexture)if(ee){if(Ee&&t.texStorage3D(r.TEXTURE_2D_ARRAY,ft,ye,rt.width,rt.height,rt.depth),ze)if(V.layerUpdates.size>0){const it=x2(rt.width,rt.height,V.format,V.type);for(const ct of V.layerUpdates){const Nt=rt.data.subarray(ct*it/rt.data.BYTES_PER_ELEMENT,(ct+1)*it/rt.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,ct,rt.width,rt.height,1,ot,St,Nt)}V.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,rt.width,rt.height,rt.depth,ot,St,rt.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,ye,rt.width,rt.height,rt.depth,0,ot,St,rt.data);else if(V.isData3DTexture)ee?(Ee&&t.texStorage3D(r.TEXTURE_3D,ft,ye,rt.width,rt.height,rt.depth),ze&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,rt.width,rt.height,rt.depth,ot,St,rt.data)):t.texImage3D(r.TEXTURE_3D,0,ye,rt.width,rt.height,rt.depth,0,ot,St,rt.data);else if(V.isFramebufferTexture){if(Ee)if(ee)t.texStorage2D(r.TEXTURE_2D,ft,ye,rt.width,rt.height);else{let it=rt.width,ct=rt.height;for(let Nt=0;Nt<ft;Nt++)t.texImage2D(r.TEXTURE_2D,Nt,ye,it,ct,0,ot,St,null),it>>=1,ct>>=1}}else if(G.length>0){if(ee&&Ee){const it=Ce(G[0]);t.texStorage2D(r.TEXTURE_2D,ft,ye,it.width,it.height)}for(let it=0,ct=G.length;it<ct;it++)Ve=G[it],ee?ze&&t.texSubImage2D(r.TEXTURE_2D,it,0,0,ot,St,Ve):t.texImage2D(r.TEXTURE_2D,it,ye,ot,St,Ve);V.generateMipmaps=!1}else if(ee){if(Ee){const it=Ce(rt);t.texStorage2D(r.TEXTURE_2D,ft,ye,it.width,it.height)}ze&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,ot,St,rt)}else t.texImage2D(r.TEXTURE_2D,0,ye,ot,St,rt);M(V)&&_(fe),qe.__version=ve.version,V.onUpdate&&V.onUpdate(V)}q.__version=V.version}function _e(q,V,ie){if(V.image.length!==6)return;const fe=ae(q,V),Se=V.source;t.bindTexture(r.TEXTURE_CUBE_MAP,q.__webglTexture,r.TEXTURE0+ie);const ve=n.get(Se);if(Se.version!==ve.__version||fe===!0){t.activeTexture(r.TEXTURE0+ie);const qe=pr.getPrimaries(pr.workingColorSpace),Fe=V.colorSpace===$c?null:pr.getPrimaries(V.colorSpace),We=V.colorSpace===$c||qe===Fe?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,V.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,V.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,We);const Ge=V.isCompressedTexture||V.image[0].isCompressedTexture,rt=V.image[0]&&V.image[0].isDataTexture,ot=[];for(let ct=0;ct<6;ct++)!Ge&&!rt?ot[ct]=b(V.image[ct],!0,i.maxCubemapSize):ot[ct]=rt?V.image[ct].image:V.image[ct],ot[ct]=be(V,ot[ct]);const St=ot[0],ye=a.convert(V.format,V.colorSpace),Ve=a.convert(V.type),G=E(V.internalFormat,ye,Ve,V.colorSpace),ee=V.isVideoTexture!==!0,Ee=ve.__version===void 0||fe===!0,ze=Se.dataReady;let ft=D(V,St);k(r.TEXTURE_CUBE_MAP,V);let it;if(Ge){ee&&Ee&&t.texStorage2D(r.TEXTURE_CUBE_MAP,ft,G,St.width,St.height);for(let ct=0;ct<6;ct++){it=ot[ct].mipmaps;for(let Nt=0;Nt<it.length;Nt++){const It=it[Nt];V.format!==ms?ye!==null?ee?ze&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Nt,0,0,It.width,It.height,ye,It.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Nt,G,It.width,It.height,0,It.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ee?ze&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Nt,0,0,It.width,It.height,ye,Ve,It.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Nt,G,It.width,It.height,0,ye,Ve,It.data)}}}else{if(it=V.mipmaps,ee&&Ee){it.length>0&&ft++;const ct=Ce(ot[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,ft,G,ct.width,ct.height)}for(let ct=0;ct<6;ct++)if(rt){ee?ze&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,0,0,ot[ct].width,ot[ct].height,ye,Ve,ot[ct].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,G,ot[ct].width,ot[ct].height,0,ye,Ve,ot[ct].data);for(let Nt=0;Nt<it.length;Nt++){const yn=it[Nt].image[ct].image;ee?ze&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Nt+1,0,0,yn.width,yn.height,ye,Ve,yn.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Nt+1,G,yn.width,yn.height,0,ye,Ve,yn.data)}}else{ee?ze&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,0,0,ye,Ve,ot[ct]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,0,G,ye,Ve,ot[ct]);for(let Nt=0;Nt<it.length;Nt++){const It=it[Nt];ee?ze&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Nt+1,0,0,ye,Ve,It.image[ct]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+ct,Nt+1,G,ye,Ve,It.image[ct])}}}M(V)&&_(r.TEXTURE_CUBE_MAP),ve.__version=Se.version,V.onUpdate&&V.onUpdate(V)}q.__version=V.version}function ne(q,V,ie,fe,Se,ve){const qe=a.convert(ie.format,ie.colorSpace),Fe=a.convert(ie.type),We=E(ie.internalFormat,qe,Fe,ie.colorSpace),Ge=n.get(V),rt=n.get(ie);if(rt.__renderTarget=V,!Ge.__hasExternalTextures){const ot=Math.max(1,V.width>>ve),St=Math.max(1,V.height>>ve);Se===r.TEXTURE_3D||Se===r.TEXTURE_2D_ARRAY?t.texImage3D(Se,ve,We,ot,St,V.depth,0,qe,Fe,null):t.texImage2D(Se,ve,We,ot,St,0,qe,Fe,null)}t.bindFramebuffer(r.FRAMEBUFFER,q),Ze(V)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,fe,Se,rt.__webglTexture,0,Ye(V)):(Se===r.TEXTURE_2D||Se>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,fe,Se,rt.__webglTexture,ve),t.bindFramebuffer(r.FRAMEBUFFER,null)}function ue(q,V,ie){if(r.bindRenderbuffer(r.RENDERBUFFER,q),V.depthBuffer){const fe=V.depthTexture,Se=fe&&fe.isDepthTexture?fe.type:null,ve=A(V.stencilBuffer,Se),qe=V.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Fe=Ye(V);Ze(V)?o.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Fe,ve,V.width,V.height):ie?r.renderbufferStorageMultisample(r.RENDERBUFFER,Fe,ve,V.width,V.height):r.renderbufferStorage(r.RENDERBUFFER,ve,V.width,V.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,qe,r.RENDERBUFFER,q)}else{const fe=V.textures;for(let Se=0;Se<fe.length;Se++){const ve=fe[Se],qe=a.convert(ve.format,ve.colorSpace),Fe=a.convert(ve.type),We=E(ve.internalFormat,qe,Fe,ve.colorSpace),Ge=Ye(V);ie&&Ze(V)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ge,We,V.width,V.height):Ze(V)?o.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ge,We,V.width,V.height):r.renderbufferStorage(r.RENDERBUFFER,We,V.width,V.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function ge(q,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,q),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const fe=n.get(V.depthTexture);fe.__renderTarget=V,(!fe.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),Y(V.depthTexture,0);const Se=fe.__webglTexture,ve=Ye(V);if(V.depthTexture.format===Ev)Ze(V)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Se,0,ve):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Se,0);else if(V.depthTexture.format===Av)Ze(V)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Se,0,ve):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function Ae(q){const V=n.get(q),ie=q.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==q.depthTexture){const fe=q.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),fe){const Se=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,fe.removeEventListener("dispose",Se)};fe.addEventListener("dispose",Se),V.__depthDisposeCallback=Se}V.__boundDepthTexture=fe}if(q.depthTexture&&!V.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");const fe=q.texture.mipmaps;fe&&fe.length>0?ge(V.__webglFramebuffer[0],q):ge(V.__webglFramebuffer,q)}else if(ie){V.__webglDepthbuffer=[];for(let fe=0;fe<6;fe++)if(t.bindFramebuffer(r.FRAMEBUFFER,V.__webglFramebuffer[fe]),V.__webglDepthbuffer[fe]===void 0)V.__webglDepthbuffer[fe]=r.createRenderbuffer(),ue(V.__webglDepthbuffer[fe],q,!1);else{const Se=q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,ve=V.__webglDepthbuffer[fe];r.bindRenderbuffer(r.RENDERBUFFER,ve),r.framebufferRenderbuffer(r.FRAMEBUFFER,Se,r.RENDERBUFFER,ve)}}else{const fe=q.texture.mipmaps;if(fe&&fe.length>0?t.bindFramebuffer(r.FRAMEBUFFER,V.__webglFramebuffer[0]):t.bindFramebuffer(r.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=r.createRenderbuffer(),ue(V.__webglDepthbuffer,q,!1);else{const Se=q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,ve=V.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,ve),r.framebufferRenderbuffer(r.FRAMEBUFFER,Se,r.RENDERBUFFER,ve)}}t.bindFramebuffer(r.FRAMEBUFFER,null)}function Te(q,V,ie){const fe=n.get(q);V!==void 0&&ne(fe.__webglFramebuffer,q,q.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),ie!==void 0&&Ae(q)}function se(q){const V=q.texture,ie=n.get(q),fe=n.get(V);q.addEventListener("dispose",O);const Se=q.textures,ve=q.isWebGLCubeRenderTarget===!0,qe=Se.length>1;if(qe||(fe.__webglTexture===void 0&&(fe.__webglTexture=r.createTexture()),fe.__version=V.version,s.memory.textures++),ve){ie.__webglFramebuffer=[];for(let Fe=0;Fe<6;Fe++)if(V.mipmaps&&V.mipmaps.length>0){ie.__webglFramebuffer[Fe]=[];for(let We=0;We<V.mipmaps.length;We++)ie.__webglFramebuffer[Fe][We]=r.createFramebuffer()}else ie.__webglFramebuffer[Fe]=r.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){ie.__webglFramebuffer=[];for(let Fe=0;Fe<V.mipmaps.length;Fe++)ie.__webglFramebuffer[Fe]=r.createFramebuffer()}else ie.__webglFramebuffer=r.createFramebuffer();if(qe)for(let Fe=0,We=Se.length;Fe<We;Fe++){const Ge=n.get(Se[Fe]);Ge.__webglTexture===void 0&&(Ge.__webglTexture=r.createTexture(),s.memory.textures++)}if(q.samples>0&&Ze(q)===!1){ie.__webglMultisampledFramebuffer=r.createFramebuffer(),ie.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let Fe=0;Fe<Se.length;Fe++){const We=Se[Fe];ie.__webglColorRenderbuffer[Fe]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ie.__webglColorRenderbuffer[Fe]);const Ge=a.convert(We.format,We.colorSpace),rt=a.convert(We.type),ot=E(We.internalFormat,Ge,rt,We.colorSpace,q.isXRRenderTarget===!0),St=Ye(q);r.renderbufferStorageMultisample(r.RENDERBUFFER,St,ot,q.width,q.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Fe,r.RENDERBUFFER,ie.__webglColorRenderbuffer[Fe])}r.bindRenderbuffer(r.RENDERBUFFER,null),q.depthBuffer&&(ie.__webglDepthRenderbuffer=r.createRenderbuffer(),ue(ie.__webglDepthRenderbuffer,q,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(ve){t.bindTexture(r.TEXTURE_CUBE_MAP,fe.__webglTexture),k(r.TEXTURE_CUBE_MAP,V);for(let Fe=0;Fe<6;Fe++)if(V.mipmaps&&V.mipmaps.length>0)for(let We=0;We<V.mipmaps.length;We++)ne(ie.__webglFramebuffer[Fe][We],q,V,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,We);else ne(ie.__webglFramebuffer[Fe],q,V,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Fe,0);M(V)&&_(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(qe){for(let Fe=0,We=Se.length;Fe<We;Fe++){const Ge=Se[Fe],rt=n.get(Ge);let ot=r.TEXTURE_2D;(q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(ot=q.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(ot,rt.__webglTexture),k(ot,Ge),ne(ie.__webglFramebuffer,q,Ge,r.COLOR_ATTACHMENT0+Fe,ot,0),M(Ge)&&_(ot)}t.unbindTexture()}else{let Fe=r.TEXTURE_2D;if((q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(Fe=q.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(Fe,fe.__webglTexture),k(Fe,V),V.mipmaps&&V.mipmaps.length>0)for(let We=0;We<V.mipmaps.length;We++)ne(ie.__webglFramebuffer[We],q,V,r.COLOR_ATTACHMENT0,Fe,We);else ne(ie.__webglFramebuffer,q,V,r.COLOR_ATTACHMENT0,Fe,0);M(V)&&_(Fe),t.unbindTexture()}q.depthBuffer&&Ae(q)}function Me(q){const V=q.textures;for(let ie=0,fe=V.length;ie<fe;ie++){const Se=V[ie];if(M(Se)){const ve=T(q),qe=n.get(Se).__webglTexture;t.bindTexture(ve,qe),_(ve),t.unbindTexture()}}}const Be=[],Le=[];function Pe(q){if(q.samples>0){if(Ze(q)===!1){const V=q.textures,ie=q.width,fe=q.height;let Se=r.COLOR_BUFFER_BIT;const ve=q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,qe=n.get(q),Fe=V.length>1;if(Fe)for(let Ge=0;Ge<V.length;Ge++)t.bindFramebuffer(r.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ge,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,qe.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ge,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,qe.__webglMultisampledFramebuffer);const We=q.texture.mipmaps;We&&We.length>0?t.bindFramebuffer(r.DRAW_FRAMEBUFFER,qe.__webglFramebuffer[0]):t.bindFramebuffer(r.DRAW_FRAMEBUFFER,qe.__webglFramebuffer);for(let Ge=0;Ge<V.length;Ge++){if(q.resolveDepthBuffer&&(q.depthBuffer&&(Se|=r.DEPTH_BUFFER_BIT),q.stencilBuffer&&q.resolveStencilBuffer&&(Se|=r.STENCIL_BUFFER_BIT)),Fe){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,qe.__webglColorRenderbuffer[Ge]);const rt=n.get(V[Ge]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,rt,0)}r.blitFramebuffer(0,0,ie,fe,0,0,ie,fe,Se,r.NEAREST),c===!0&&(Be.length=0,Le.length=0,Be.push(r.COLOR_ATTACHMENT0+Ge),q.depthBuffer&&q.resolveDepthBuffer===!1&&(Be.push(ve),Le.push(ve),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,Le)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Be))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Fe)for(let Ge=0;Ge<V.length;Ge++){t.bindFramebuffer(r.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ge,r.RENDERBUFFER,qe.__webglColorRenderbuffer[Ge]);const rt=n.get(V[Ge]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,qe.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ge,r.TEXTURE_2D,rt,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,qe.__webglMultisampledFramebuffer)}else if(q.depthBuffer&&q.resolveDepthBuffer===!1&&c){const V=q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[V])}}}function Ye(q){return Math.min(i.maxSamples,q.samples)}function Ze(q){const V=n.get(q);return q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function re(q){const V=s.render.frame;h.get(q)!==V&&(h.set(q,V),q.update())}function be(q,V){const ie=q.colorSpace,fe=q.format,Se=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||ie!==xh&&ie!==$c&&(pr.getTransfer(ie)===Lr?(fe!==ms||Se!==Sl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ie)),V}function Ce(q){return typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement?(u.width=q.naturalWidth||q.width,u.height=q.naturalHeight||q.height):typeof VideoFrame<"u"&&q instanceof VideoFrame?(u.width=q.displayWidth,u.height=q.displayHeight):(u.width=q.width,u.height=q.height),u}this.allocateTextureUnit=X,this.resetTextureUnits=H,this.setTexture2D=Y,this.setTexture2DArray=I,this.setTexture3D=Z,this.setTextureCube=W,this.rebindTextures=Te,this.setupRenderTarget=se,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=Pe,this.setupDepthRenderbuffer=Ae,this.setupFrameBufferTexture=ne,this.useMultisampledRTT=Ze}function _L(r,e){function t(n,i=$c){let a;const s=pr.getTransfer(i);if(n===Sl)return r.UNSIGNED_BYTE;if(n===qS)return r.UNSIGNED_SHORT_4_4_4_4;if(n===GS)return r.UNSIGNED_SHORT_5_5_5_1;if(n===Mw)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===Ew)return r.UNSIGNED_INT_10F_11F_11F_REV;if(n===_w)return r.BYTE;if(n===Sw)return r.SHORT;if(n===Sv)return r.UNSIGNED_SHORT;if(n===VS)return r.INT;if(n===lf)return r.UNSIGNED_INT;if(n===po)return r.FLOAT;if(n===Zv)return r.HALF_FLOAT;if(n===Aw)return r.ALPHA;if(n===ww)return r.RGB;if(n===ms)return r.RGBA;if(n===Ev)return r.DEPTH_COMPONENT;if(n===Av)return r.DEPTH_STENCIL;if(n===kS)return r.RED;if(n===Vy)return r.RED_INTEGER;if(n===Tw)return r.RG;if(n===XS)return r.RG_INTEGER;if(n===jS)return r.RGBA_INTEGER;if(n===$0||n===Z0||n===K0||n===Q0)if(s===Lr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(n===$0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Z0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===K0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Q0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(n===$0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Z0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===K0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Q0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===C_||n===R_||n===O_||n===B_)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(n===C_)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===R_)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===O_)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===B_)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===U_||n===z_||n===F_)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(n===U_||n===z_)return s===Lr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===F_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===L_||n===I_||n===P_||n===H_||n===V_||n===q_||n===G_||n===k_||n===X_||n===j_||n===Y_||n===W_||n===$_||n===Z_)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(n===L_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===I_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===P_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===H_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===V_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===q_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===G_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===k_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===X_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===j_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Y_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===W_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===$_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Z_)return s===Lr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===K_||n===Q_||n===J_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(n===K_)return s===Lr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Q_)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===J_)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===eS||n===tS||n===nS||n===rS)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(n===eS)return a.COMPRESSED_RED_RGTC1_EXT;if(n===tS)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===nS)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===rS)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Mv?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}const Kpe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Qpe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Jpe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new Iw(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new ko({vertexShader:Kpe,fragmentShader:Qpe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Vi(new Qv(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class eme extends uc{constructor(e,t){super();const n=this;let i=null,a=1,s=null,o="local-floor",c=1,u=null,h=null,d=null,m=null,v=null,x=null;const b=typeof XRWebGLBinding<"u",M=new Jpe,_={},T=t.getContextAttributes();let E=null,A=null;const D=[],N=[],O=new gt;let z=null;const C=new Hi;C.viewport=new Xn;const R=new Hi;R.viewport=new Xn;const F=[C,R],H=new lL;let X=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(pe){let _e=D[pe];return _e===void 0&&(_e=new Vb,D[pe]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(pe){let _e=D[pe];return _e===void 0&&(_e=new Vb,D[pe]=_e),_e.getGripSpace()},this.getHand=function(pe){let _e=D[pe];return _e===void 0&&(_e=new Vb,D[pe]=_e),_e.getHandSpace()};function Y(pe){const _e=N.indexOf(pe.inputSource);if(_e===-1)return;const ne=D[_e];ne!==void 0&&(ne.update(pe.inputSource,pe.frame,u||s),ne.dispatchEvent({type:pe.type,data:pe.inputSource}))}function I(){i.removeEventListener("select",Y),i.removeEventListener("selectstart",Y),i.removeEventListener("selectend",Y),i.removeEventListener("squeeze",Y),i.removeEventListener("squeezestart",Y),i.removeEventListener("squeezeend",Y),i.removeEventListener("end",I),i.removeEventListener("inputsourceschange",Z);for(let pe=0;pe<D.length;pe++){const _e=N[pe];_e!==null&&(N[pe]=null,D[pe].disconnect(_e))}X=null,$=null,M.reset();for(const pe in _)delete _[pe];e.setRenderTarget(E),v=null,m=null,d=null,i=null,A=null,De.stop(),n.isPresenting=!1,e.setPixelRatio(z),e.setSize(O.width,O.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(pe){a=pe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(pe){o=pe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(pe){u=pe},this.getBaseLayer=function(){return m!==null?m:v},this.getBinding=function(){return d===null&&b&&(d=new XRWebGLBinding(i,t)),d},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(pe){if(i=pe,i!==null){if(E=e.getRenderTarget(),i.addEventListener("select",Y),i.addEventListener("selectstart",Y),i.addEventListener("selectend",Y),i.addEventListener("squeeze",Y),i.addEventListener("squeezestart",Y),i.addEventListener("squeezeend",Y),i.addEventListener("end",I),i.addEventListener("inputsourceschange",Z),T.xrCompatible!==!0&&await t.makeXRCompatible(),z=e.getPixelRatio(),e.getSize(O),b&&"createProjectionLayer"in XRWebGLBinding.prototype){let ne=null,ue=null,ge=null;T.depth&&(ge=T.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ne=T.stencil?Av:Ev,ue=T.stencil?Mv:lf);const Ae={colorFormat:t.RGBA8,depthFormat:ge,scaleFactor:a};d=this.getBinding(),m=d.createProjectionLayer(Ae),i.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),A=new ac(m.textureWidth,m.textureHeight,{format:ms,type:Sl,depthTexture:new Lw(m.textureWidth,m.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,ne),stencilBuffer:T.stencil,colorSpace:e.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const ne={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:a};v=new XRWebGLLayer(i,t,ne),i.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),A=new ac(v.framebufferWidth,v.framebufferHeight,{format:ms,type:Sl,colorSpace:e.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(c),u=null,s=await i.requestReferenceSpace(o),De.setContext(i),De.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function Z(pe){for(let _e=0;_e<pe.removed.length;_e++){const ne=pe.removed[_e],ue=N.indexOf(ne);ue>=0&&(N[ue]=null,D[ue].disconnect(ne))}for(let _e=0;_e<pe.added.length;_e++){const ne=pe.added[_e];let ue=N.indexOf(ne);if(ue===-1){for(let Ae=0;Ae<D.length;Ae++)if(Ae>=N.length){N.push(ne),ue=Ae;break}else if(N[Ae]===null){N[Ae]=ne,ue=Ae;break}if(ue===-1)break}const ge=D[ue];ge&&ge.connect(ne)}}const W=new xe,te=new xe;function le(pe,_e,ne){W.setFromMatrixPosition(_e.matrixWorld),te.setFromMatrixPosition(ne.matrixWorld);const ue=W.distanceTo(te),ge=_e.projectionMatrix.elements,Ae=ne.projectionMatrix.elements,Te=ge[14]/(ge[10]-1),se=ge[14]/(ge[10]+1),Me=(ge[9]+1)/ge[5],Be=(ge[9]-1)/ge[5],Le=(ge[8]-1)/ge[0],Pe=(Ae[8]+1)/Ae[0],Ye=Te*Le,Ze=Te*Pe,re=ue/(-Le+Pe),be=re*-Le;if(_e.matrixWorld.decompose(pe.position,pe.quaternion,pe.scale),pe.translateX(be),pe.translateZ(re),pe.matrixWorld.compose(pe.position,pe.quaternion,pe.scale),pe.matrixWorldInverse.copy(pe.matrixWorld).invert(),ge[10]===-1)pe.projectionMatrix.copy(_e.projectionMatrix),pe.projectionMatrixInverse.copy(_e.projectionMatrixInverse);else{const Ce=Te+re,q=se+re,V=Ye-be,ie=Ze+(ue-be),fe=Me*se/q*Ce,Se=Be*se/q*Ce;pe.projectionMatrix.makePerspective(V,ie,fe,Se,Ce,q),pe.projectionMatrixInverse.copy(pe.projectionMatrix).invert()}}function Q(pe,_e){_e===null?pe.matrixWorld.copy(pe.matrix):pe.matrixWorld.multiplyMatrices(_e.matrixWorld,pe.matrix),pe.matrixWorldInverse.copy(pe.matrixWorld).invert()}this.updateCamera=function(pe){if(i===null)return;let _e=pe.near,ne=pe.far;M.texture!==null&&(M.depthNear>0&&(_e=M.depthNear),M.depthFar>0&&(ne=M.depthFar)),H.near=R.near=C.near=_e,H.far=R.far=C.far=ne,(X!==H.near||$!==H.far)&&(i.updateRenderState({depthNear:H.near,depthFar:H.far}),X=H.near,$=H.far),H.layers.mask=pe.layers.mask|6,C.layers.mask=H.layers.mask&3,R.layers.mask=H.layers.mask&5;const ue=pe.parent,ge=H.cameras;Q(H,ue);for(let Ae=0;Ae<ge.length;Ae++)Q(ge[Ae],ue);ge.length===2?le(H,C,R):H.projectionMatrix.copy(C.projectionMatrix),k(pe,H,ue)};function k(pe,_e,ne){ne===null?pe.matrix.copy(_e.matrixWorld):(pe.matrix.copy(ne.matrixWorld),pe.matrix.invert(),pe.matrix.multiply(_e.matrixWorld)),pe.matrix.decompose(pe.position,pe.quaternion,pe.scale),pe.updateMatrixWorld(!0),pe.projectionMatrix.copy(_e.projectionMatrix),pe.projectionMatrixInverse.copy(_e.projectionMatrixInverse),pe.isPerspectiveCamera&&(pe.fov=Tv*2*Math.atan(1/pe.projectionMatrix.elements[5]),pe.zoom=1)}this.getCamera=function(){return H},this.getFoveation=function(){if(!(m===null&&v===null))return c},this.setFoveation=function(pe){c=pe,m!==null&&(m.fixedFoveation=pe),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=pe)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(H)},this.getCameraTexture=function(pe){return _[pe]};let ae=null;function J(pe,_e){if(h=_e.getViewerPose(u||s),x=_e,h!==null){const ne=h.views;v!==null&&(e.setRenderTargetFramebuffer(A,v.framebuffer),e.setRenderTarget(A));let ue=!1;ne.length!==H.cameras.length&&(H.cameras.length=0,ue=!0);for(let se=0;se<ne.length;se++){const Me=ne[se];let Be=null;if(v!==null)Be=v.getViewport(Me);else{const Pe=d.getViewSubImage(m,Me);Be=Pe.viewport,se===0&&(e.setRenderTargetTextures(A,Pe.colorTexture,Pe.depthStencilTexture),e.setRenderTarget(A))}let Le=F[se];Le===void 0&&(Le=new Hi,Le.layers.enable(se),Le.viewport=new Xn,F[se]=Le),Le.matrix.fromArray(Me.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(Me.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(Be.x,Be.y,Be.width,Be.height),se===0&&(H.matrix.copy(Le.matrix),H.matrix.decompose(H.position,H.quaternion,H.scale)),ue===!0&&H.cameras.push(Le)}const ge=i.enabledFeatures;if(ge&&ge.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&b){d=n.getBinding();const se=d.getDepthInformation(ne[0]);se&&se.isValid&&se.texture&&M.init(se,i.renderState)}if(ge&&ge.includes("camera-access")&&b){e.state.unbindTexture(),d=n.getBinding();for(let se=0;se<ne.length;se++){const Me=ne[se].camera;if(Me){let Be=_[Me];Be||(Be=new Iw,_[Me]=Be);const Le=d.getCameraImage(Me);Be.sourceTexture=Le}}}}for(let ne=0;ne<D.length;ne++){const ue=N[ne],ge=D[ne];ue!==null&&ge!==void 0&&ge.update(ue,_e,u||s)}ae&&ae(pe,_e),_e.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:_e}),x=null}const De=new vL;De.setAnimationLoop(J),this.setAnimationLoop=function(pe){ae=pe},this.dispose=function(){}}}const Fd=new Go,tme=new pn;function nme(r,e){function t(M,_){M.matrixAutoUpdate===!0&&M.updateMatrix(),_.value.copy(M.matrix)}function n(M,_){_.color.getRGB(M.fogColor.value,v5(r)),_.isFog?(M.fogNear.value=_.near,M.fogFar.value=_.far):_.isFogExp2&&(M.fogDensity.value=_.density)}function i(M,_,T,E,A){_.isMeshBasicMaterial||_.isMeshLambertMaterial?a(M,_):_.isMeshToonMaterial?(a(M,_),d(M,_)):_.isMeshPhongMaterial?(a(M,_),h(M,_)):_.isMeshStandardMaterial?(a(M,_),m(M,_),_.isMeshPhysicalMaterial&&v(M,_,A)):_.isMeshMatcapMaterial?(a(M,_),x(M,_)):_.isMeshDepthMaterial?a(M,_):_.isMeshDistanceMaterial?(a(M,_),b(M,_)):_.isMeshNormalMaterial?a(M,_):_.isLineBasicMaterial?(s(M,_),_.isLineDashedMaterial&&o(M,_)):_.isPointsMaterial?c(M,_,T,E):_.isSpriteMaterial?u(M,_):_.isShadowMaterial?(M.color.value.copy(_.color),M.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function a(M,_){M.opacity.value=_.opacity,_.color&&M.diffuse.value.copy(_.color),_.emissive&&M.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(M.map.value=_.map,t(_.map,M.mapTransform)),_.alphaMap&&(M.alphaMap.value=_.alphaMap,t(_.alphaMap,M.alphaMapTransform)),_.bumpMap&&(M.bumpMap.value=_.bumpMap,t(_.bumpMap,M.bumpMapTransform),M.bumpScale.value=_.bumpScale,_.side===gs&&(M.bumpScale.value*=-1)),_.normalMap&&(M.normalMap.value=_.normalMap,t(_.normalMap,M.normalMapTransform),M.normalScale.value.copy(_.normalScale),_.side===gs&&M.normalScale.value.negate()),_.displacementMap&&(M.displacementMap.value=_.displacementMap,t(_.displacementMap,M.displacementMapTransform),M.displacementScale.value=_.displacementScale,M.displacementBias.value=_.displacementBias),_.emissiveMap&&(M.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,M.emissiveMapTransform)),_.specularMap&&(M.specularMap.value=_.specularMap,t(_.specularMap,M.specularMapTransform)),_.alphaTest>0&&(M.alphaTest.value=_.alphaTest);const T=e.get(_),E=T.envMap,A=T.envMapRotation;E&&(M.envMap.value=E,Fd.copy(A),Fd.x*=-1,Fd.y*=-1,Fd.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Fd.y*=-1,Fd.z*=-1),M.envMapRotation.value.setFromMatrix4(tme.makeRotationFromEuler(Fd)),M.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=_.reflectivity,M.ior.value=_.ior,M.refractionRatio.value=_.refractionRatio),_.lightMap&&(M.lightMap.value=_.lightMap,M.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,M.lightMapTransform)),_.aoMap&&(M.aoMap.value=_.aoMap,M.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,M.aoMapTransform))}function s(M,_){M.diffuse.value.copy(_.color),M.opacity.value=_.opacity,_.map&&(M.map.value=_.map,t(_.map,M.mapTransform))}function o(M,_){M.dashSize.value=_.dashSize,M.totalSize.value=_.dashSize+_.gapSize,M.scale.value=_.scale}function c(M,_,T,E){M.diffuse.value.copy(_.color),M.opacity.value=_.opacity,M.size.value=_.size*T,M.scale.value=E*.5,_.map&&(M.map.value=_.map,t(_.map,M.uvTransform)),_.alphaMap&&(M.alphaMap.value=_.alphaMap,t(_.alphaMap,M.alphaMapTransform)),_.alphaTest>0&&(M.alphaTest.value=_.alphaTest)}function u(M,_){M.diffuse.value.copy(_.color),M.opacity.value=_.opacity,M.rotation.value=_.rotation,_.map&&(M.map.value=_.map,t(_.map,M.mapTransform)),_.alphaMap&&(M.alphaMap.value=_.alphaMap,t(_.alphaMap,M.alphaMapTransform)),_.alphaTest>0&&(M.alphaTest.value=_.alphaTest)}function h(M,_){M.specular.value.copy(_.specular),M.shininess.value=Math.max(_.shininess,1e-4)}function d(M,_){_.gradientMap&&(M.gradientMap.value=_.gradientMap)}function m(M,_){M.metalness.value=_.metalness,_.metalnessMap&&(M.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,M.metalnessMapTransform)),M.roughness.value=_.roughness,_.roughnessMap&&(M.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,M.roughnessMapTransform)),_.envMap&&(M.envMapIntensity.value=_.envMapIntensity)}function v(M,_,T){M.ior.value=_.ior,_.sheen>0&&(M.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),M.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(M.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,M.sheenColorMapTransform)),_.sheenRoughnessMap&&(M.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,M.sheenRoughnessMapTransform))),_.clearcoat>0&&(M.clearcoat.value=_.clearcoat,M.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(M.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,M.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(M.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===gs&&M.clearcoatNormalScale.value.negate())),_.dispersion>0&&(M.dispersion.value=_.dispersion),_.iridescence>0&&(M.iridescence.value=_.iridescence,M.iridescenceIOR.value=_.iridescenceIOR,M.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(M.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,M.iridescenceMapTransform)),_.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),_.transmission>0&&(M.transmission.value=_.transmission,M.transmissionSamplerMap.value=T.texture,M.transmissionSamplerSize.value.set(T.width,T.height),_.transmissionMap&&(M.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,M.transmissionMapTransform)),M.thickness.value=_.thickness,_.thicknessMap&&(M.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=_.attenuationDistance,M.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(M.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(M.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=_.specularIntensity,M.specularColor.value.copy(_.specularColor),_.specularColorMap&&(M.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,M.specularColorMapTransform)),_.specularIntensityMap&&(M.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,M.specularIntensityMapTransform))}function x(M,_){_.matcap&&(M.matcap.value=_.matcap)}function b(M,_){const T=e.get(_).light;M.referencePosition.value.setFromMatrixPosition(T.matrixWorld),M.nearDistance.value=T.shadow.camera.near,M.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function rme(r,e,t,n){let i={},a={},s=[];const o=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function c(T,E){const A=E.program;n.uniformBlockBinding(T,A)}function u(T,E){let A=i[T.id];A===void 0&&(x(T),A=h(T),i[T.id]=A,T.addEventListener("dispose",M));const D=E.program;n.updateUBOMapping(T,D);const N=e.render.frame;a[T.id]!==N&&(m(T),a[T.id]=N)}function h(T){const E=d();T.__bindingPointIndex=E;const A=r.createBuffer(),D=T.__size,N=T.usage;return r.bindBuffer(r.UNIFORM_BUFFER,A),r.bufferData(r.UNIFORM_BUFFER,D,N),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,E,A),A}function d(){for(let T=0;T<o;T++)if(s.indexOf(T)===-1)return s.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(T){const E=i[T.id],A=T.uniforms,D=T.__cache;r.bindBuffer(r.UNIFORM_BUFFER,E);for(let N=0,O=A.length;N<O;N++){const z=Array.isArray(A[N])?A[N]:[A[N]];for(let C=0,R=z.length;C<R;C++){const F=z[C];if(v(F,N,C,D)===!0){const H=F.__offset,X=Array.isArray(F.value)?F.value:[F.value];let $=0;for(let Y=0;Y<X.length;Y++){const I=X[Y],Z=b(I);typeof I=="number"||typeof I=="boolean"?(F.__data[0]=I,r.bufferSubData(r.UNIFORM_BUFFER,H+$,F.__data)):I.isMatrix3?(F.__data[0]=I.elements[0],F.__data[1]=I.elements[1],F.__data[2]=I.elements[2],F.__data[3]=0,F.__data[4]=I.elements[3],F.__data[5]=I.elements[4],F.__data[6]=I.elements[5],F.__data[7]=0,F.__data[8]=I.elements[6],F.__data[9]=I.elements[7],F.__data[10]=I.elements[8],F.__data[11]=0):(I.toArray(F.__data,$),$+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,H,F.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function v(T,E,A,D){const N=T.value,O=E+"_"+A;if(D[O]===void 0)return typeof N=="number"||typeof N=="boolean"?D[O]=N:D[O]=N.clone(),!0;{const z=D[O];if(typeof N=="number"||typeof N=="boolean"){if(z!==N)return D[O]=N,!0}else if(z.equals(N)===!1)return z.copy(N),!0}return!1}function x(T){const E=T.uniforms;let A=0;const D=16;for(let O=0,z=E.length;O<z;O++){const C=Array.isArray(E[O])?E[O]:[E[O]];for(let R=0,F=C.length;R<F;R++){const H=C[R],X=Array.isArray(H.value)?H.value:[H.value];for(let $=0,Y=X.length;$<Y;$++){const I=X[$],Z=b(I),W=A%D,te=W%Z.boundary,le=W+te;A+=te,le!==0&&D-le<Z.storage&&(A+=D-le),H.__data=new Float32Array(Z.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=A,A+=Z.storage}}}const N=A%D;return N>0&&(A+=D-N),T.__size=A,T.__cache={},this}function b(T){const E={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(E.boundary=4,E.storage=4):T.isVector2?(E.boundary=8,E.storage=8):T.isVector3||T.isColor?(E.boundary=16,E.storage=12):T.isVector4?(E.boundary=16,E.storage=16):T.isMatrix3?(E.boundary=48,E.storage=48):T.isMatrix4?(E.boundary=64,E.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),E}function M(T){const E=T.target;E.removeEventListener("dispose",M);const A=s.indexOf(E.__bindingPointIndex);s.splice(A,1),r.deleteBuffer(i[E.id]),delete i[E.id],delete a[E.id]}function _(){for(const T in i)r.deleteBuffer(i[T]);s=[],i={},a={}}return{bind:c,update:u,dispose:_}}class SL{constructor(e={}){const{canvas:t=d5(),context:n=null,depth:i=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let v;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=n.getContextAttributes().alpha}else v=s;const x=new Uint32Array(4),b=new Int32Array(4);let M=null,_=null;const T=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=nc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const A=this;let D=!1;this._outputColorSpace=ds;let N=0,O=0,z=null,C=-1,R=null;const F=new Xn,H=new Xn;let X=null;const $=new zt(0);let Y=0,I=t.width,Z=t.height,W=1,te=null,le=null;const Q=new Xn(0,0,I,Z),k=new Xn(0,0,I,Z);let ae=!1;const J=new Kv;let De=!1,pe=!1;const _e=new pn,ne=new xe,ue=new Xn,ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ae=!1;function Te(){return z===null?W:1}let se=n;function Me(he,He){return t.getContext(he,He)}try{const he={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Wv}`),t.addEventListener("webglcontextlost",ze,!1),t.addEventListener("webglcontextrestored",ft,!1),t.addEventListener("webglcontextcreationerror",it,!1),se===null){const He="webgl2";if(se=Me(He,he),se===null)throw Me(He)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(he){throw console.error("THREE.WebGLRenderer: "+he.message),he}let Be,Le,Pe,Ye,Ze,re,be,Ce,q,V,ie,fe,Se,ve,qe,Fe,We,Ge,rt,ot,St,ye,Ve,G;function ee(){Be=new mde(se),Be.init(),ye=new _L(se,Be),Le=new lde(se,Be,e,ye),Pe=new $pe(se,Be),Le.reversedDepthBuffer&&m&&Pe.buffers.depth.setReversed(!0),Ye=new yde(se),Ze=new Fpe,re=new Zpe(se,Be,Pe,Ze,Le,ye,Ye),be=new cde(A),Ce=new pde(A),q=new Ece(se),Ve=new sde(se,q),V=new vde(se,q,Ye,Ve),ie=new bde(se,V,q,Ye),rt=new xde(se,Le,re),Fe=new ude(Ze),fe=new zpe(A,be,Ce,Be,Le,Ve,Fe),Se=new nme(A,Ze),ve=new Ipe,qe=new kpe(Be),Ge=new ade(A,be,Ce,Pe,ie,v,c),We=new Ype(A,ie,Le),G=new rme(se,Ye,Le,Pe),ot=new ode(se,Be,Ye),St=new gde(se,Be,Ye),Ye.programs=fe.programs,A.capabilities=Le,A.extensions=Be,A.properties=Ze,A.renderLists=ve,A.shadowMap=We,A.state=Pe,A.info=Ye}ee();const Ee=new eme(A,se);this.xr=Ee,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const he=Be.get("WEBGL_lose_context");he&&he.loseContext()},this.forceContextRestore=function(){const he=Be.get("WEBGL_lose_context");he&&he.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(he){he!==void 0&&(W=he,this.setSize(I,Z,!1))},this.getSize=function(he){return he.set(I,Z)},this.setSize=function(he,He,$e=!0){if(Ee.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}I=he,Z=He,t.width=Math.floor(he*W),t.height=Math.floor(He*W),$e===!0&&(t.style.width=he+"px",t.style.height=He+"px"),this.setViewport(0,0,he,He)},this.getDrawingBufferSize=function(he){return he.set(I*W,Z*W).floor()},this.setDrawingBufferSize=function(he,He,$e){I=he,Z=He,W=$e,t.width=Math.floor(he*$e),t.height=Math.floor(He*$e),this.setViewport(0,0,he,He)},this.getCurrentViewport=function(he){return he.copy(F)},this.getViewport=function(he){return he.copy(Q)},this.setViewport=function(he,He,$e,Qe){he.isVector4?Q.set(he.x,he.y,he.z,he.w):Q.set(he,He,$e,Qe),Pe.viewport(F.copy(Q).multiplyScalar(W).round())},this.getScissor=function(he){return he.copy(k)},this.setScissor=function(he,He,$e,Qe){he.isVector4?k.set(he.x,he.y,he.z,he.w):k.set(he,He,$e,Qe),Pe.scissor(H.copy(k).multiplyScalar(W).round())},this.getScissorTest=function(){return ae},this.setScissorTest=function(he){Pe.setScissorTest(ae=he)},this.setOpaqueSort=function(he){te=he},this.setTransparentSort=function(he){le=he},this.getClearColor=function(he){return he.copy(Ge.getClearColor())},this.setClearColor=function(){Ge.setClearColor(...arguments)},this.getClearAlpha=function(){return Ge.getClearAlpha()},this.setClearAlpha=function(){Ge.setClearAlpha(...arguments)},this.clear=function(he=!0,He=!0,$e=!0){let Qe=0;if(he){let Ne=!1;if(z!==null){const ut=z.texture.format;Ne=ut===jS||ut===XS||ut===Vy}if(Ne){const ut=z.texture.type,wt=ut===Sl||ut===lf||ut===Sv||ut===Mv||ut===qS||ut===GS,Ot=Ge.getClearColor(),Tt=Ge.getClearAlpha(),Lt=Ot.r,Vt=Ot.g,qt=Ot.b;wt?(x[0]=Lt,x[1]=Vt,x[2]=qt,x[3]=Tt,se.clearBufferuiv(se.COLOR,0,x)):(b[0]=Lt,b[1]=Vt,b[2]=qt,b[3]=Tt,se.clearBufferiv(se.COLOR,0,b))}else Qe|=se.COLOR_BUFFER_BIT}He&&(Qe|=se.DEPTH_BUFFER_BIT),$e&&(Qe|=se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),se.clear(Qe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ze,!1),t.removeEventListener("webglcontextrestored",ft,!1),t.removeEventListener("webglcontextcreationerror",it,!1),Ge.dispose(),ve.dispose(),qe.dispose(),Ze.dispose(),be.dispose(),Ce.dispose(),ie.dispose(),Ve.dispose(),G.dispose(),fe.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",ni),Ee.removeEventListener("sessionend",Es),_i.stop()};function ze(he){he.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1;const he=Ye.autoReset,He=We.enabled,$e=We.autoUpdate,Qe=We.needsUpdate,Ne=We.type;ee(),Ye.autoReset=he,We.enabled=He,We.autoUpdate=$e,We.needsUpdate=Qe,We.type=Ne}function it(he){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",he.statusMessage)}function ct(he){const He=he.target;He.removeEventListener("dispose",ct),Nt(He)}function Nt(he){It(he),Ze.remove(he)}function It(he){const He=Ze.get(he).programs;He!==void 0&&(He.forEach(function($e){fe.releaseProgram($e)}),he.isShaderMaterial&&fe.releaseShaderCache(he))}this.renderBufferDirect=function(he,He,$e,Qe,Ne,ut){He===null&&(He=ge);const wt=Ne.isMesh&&Ne.matrixWorld.determinant()<0,Ot=$a(he,He,$e,Qe,Ne);Pe.setMaterial(Qe,wt);let Tt=$e.index,Lt=1;if(Qe.wireframe===!0){if(Tt=V.getWireframeAttribute($e),Tt===void 0)return;Lt=2}const Vt=$e.drawRange,qt=$e.attributes.position;let mn=Vt.start*Lt,Jn=(Vt.start+Vt.count)*Lt;ut!==null&&(mn=Math.max(mn,ut.start*Lt),Jn=Math.min(Jn,(ut.start+ut.count)*Lt)),Tt!==null?(mn=Math.max(mn,0),Jn=Math.min(Jn,Tt.count)):qt!=null&&(mn=Math.max(mn,0),Jn=Math.min(Jn,qt.count));const $n=Jn-mn;if($n<0||$n===1/0)return;Ve.setup(Ne,Qe,Ot,$e,Tt);let sr,Cn=ot;if(Tt!==null&&(sr=q.get(Tt),Cn=St,Cn.setIndex(sr)),Ne.isMesh)Qe.wireframe===!0?(Pe.setLineWidth(Qe.wireframeLinewidth*Te()),Cn.setMode(se.LINES)):Cn.setMode(se.TRIANGLES);else if(Ne.isLine){let Ut=Qe.linewidth;Ut===void 0&&(Ut=1),Pe.setLineWidth(Ut*Te()),Ne.isLineSegments?Cn.setMode(se.LINES):Ne.isLineLoop?Cn.setMode(se.LINE_LOOP):Cn.setMode(se.LINE_STRIP)}else Ne.isPoints?Cn.setMode(se.POINTS):Ne.isSprite&&Cn.setMode(se.TRIANGLES);if(Ne.isBatchedMesh)if(Ne._multiDrawInstances!==null)yy("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Cn.renderMultiDrawInstances(Ne._multiDrawStarts,Ne._multiDrawCounts,Ne._multiDrawCount,Ne._multiDrawInstances);else if(Be.get("WEBGL_multi_draw"))Cn.renderMultiDraw(Ne._multiDrawStarts,Ne._multiDrawCounts,Ne._multiDrawCount);else{const Ut=Ne._multiDrawStarts,Cr=Ne._multiDrawCounts,kn=Ne._multiDrawCount,wr=Tt?q.get(Tt).bytesPerElement:1,Ki=Ze.get(Qe).currentProgram.getUniforms();for(let ai=0;ai<kn;ai++)Ki.setValue(se,"_gl_DrawID",ai),Cn.render(Ut[ai]/wr,Cr[ai])}else if(Ne.isInstancedMesh)Cn.renderInstances(mn,$n,Ne.count);else if($e.isInstancedBufferGeometry){const Ut=$e._maxInstanceCount!==void 0?$e._maxInstanceCount:1/0,Cr=Math.min($e.instanceCount,Ut);Cn.renderInstances(mn,$n,Cr)}else Cn.render(mn,$n)};function yn(he,He,$e){he.transparent===!0&&he.side===Io&&he.forceSinglePass===!1?(he.side=gs,he.needsUpdate=!0,qr(he,He,$e),he.side=sf,he.needsUpdate=!0,qr(he,He,$e),he.side=Io):qr(he,He,$e)}this.compile=function(he,He,$e=null){$e===null&&($e=he),_=qe.get($e),_.init(He),E.push(_),$e.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(He.layers)&&(_.pushLight(Ne),Ne.castShadow&&_.pushShadow(Ne))}),he!==$e&&he.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(He.layers)&&(_.pushLight(Ne),Ne.castShadow&&_.pushShadow(Ne))}),_.setupLights();const Qe=new Set;return he.traverse(function(Ne){if(!(Ne.isMesh||Ne.isPoints||Ne.isLine||Ne.isSprite))return;const ut=Ne.material;if(ut)if(Array.isArray(ut))for(let wt=0;wt<ut.length;wt++){const Ot=ut[wt];yn(Ot,$e,Ne),Qe.add(Ot)}else yn(ut,$e,Ne),Qe.add(ut)}),_=E.pop(),Qe},this.compileAsync=function(he,He,$e=null){const Qe=this.compile(he,He,$e);return new Promise(Ne=>{function ut(){if(Qe.forEach(function(wt){Ze.get(wt).currentProgram.isReady()&&Qe.delete(wt)}),Qe.size===0){Ne(he);return}setTimeout(ut,10)}Be.get("KHR_parallel_shader_compile")!==null?ut():setTimeout(ut,10)})};let on=null;function Dr(he){on&&on(he)}function ni(){_i.stop()}function Es(){_i.start()}const _i=new vL;_i.setAnimationLoop(Dr),typeof self<"u"&&_i.setContext(self),this.setAnimationLoop=function(he){on=he,Ee.setAnimationLoop(he),he===null?_i.stop():_i.start()},Ee.addEventListener("sessionstart",ni),Ee.addEventListener("sessionend",Es),this.render=function(he,He){if(He!==void 0&&He.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(D===!0)return;if(he.matrixWorldAutoUpdate===!0&&he.updateMatrixWorld(),He.parent===null&&He.matrixWorldAutoUpdate===!0&&He.updateMatrixWorld(),Ee.enabled===!0&&Ee.isPresenting===!0&&(Ee.cameraAutoUpdate===!0&&Ee.updateCamera(He),He=Ee.getCamera()),he.isScene===!0&&he.onBeforeRender(A,he,He,z),_=qe.get(he,E.length),_.init(He),E.push(_),_e.multiplyMatrices(He.projectionMatrix,He.matrixWorldInverse),J.setFromProjectionMatrix(_e,Po,He.reversedDepth),pe=this.localClippingEnabled,De=Fe.init(this.clippingPlanes,pe),M=ve.get(he,T.length),M.init(),T.push(M),Ee.enabled===!0&&Ee.isPresenting===!0){const ut=A.xr.getDepthSensingMesh();ut!==null&&Ci(ut,He,-1/0,A.sortObjects)}Ci(he,He,0,A.sortObjects),M.finish(),A.sortObjects===!0&&M.sort(te,le),Ae=Ee.enabled===!1||Ee.isPresenting===!1||Ee.hasDepthSensing()===!1,Ae&&Ge.addToRenderList(M,he),this.info.render.frame++,De===!0&&Fe.beginShadows();const $e=_.state.shadowsArray;We.render($e,he,He),De===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset();const Qe=M.opaque,Ne=M.transmissive;if(_.setupLights(),He.isArrayCamera){const ut=He.cameras;if(Ne.length>0)for(let wt=0,Ot=ut.length;wt<Ot;wt++){const Tt=ut[wt];Wa(Qe,Ne,he,Tt)}Ae&&Ge.render(he);for(let wt=0,Ot=ut.length;wt<Ot;wt++){const Tt=ut[wt];Ri(M,he,Tt,Tt.viewport)}}else Ne.length>0&&Wa(Qe,Ne,he,He),Ae&&Ge.render(he),Ri(M,he,He);z!==null&&O===0&&(re.updateMultisampleRenderTarget(z),re.updateRenderTargetMipmap(z)),he.isScene===!0&&he.onAfterRender(A,he,He),Ve.resetDefaultState(),C=-1,R=null,E.pop(),E.length>0?(_=E[E.length-1],De===!0&&Fe.setGlobalState(A.clippingPlanes,_.state.camera)):_=null,T.pop(),T.length>0?M=T[T.length-1]:M=null};function Ci(he,He,$e,Qe){if(he.visible===!1)return;if(he.layers.test(He.layers)){if(he.isGroup)$e=he.renderOrder;else if(he.isLOD)he.autoUpdate===!0&&he.update(He);else if(he.isLight)_.pushLight(he),he.castShadow&&_.pushShadow(he);else if(he.isSprite){if(!he.frustumCulled||J.intersectsSprite(he)){Qe&&ue.setFromMatrixPosition(he.matrixWorld).applyMatrix4(_e);const wt=ie.update(he),Ot=he.material;Ot.visible&&M.push(he,wt,Ot,$e,ue.z,null)}}else if((he.isMesh||he.isLine||he.isPoints)&&(!he.frustumCulled||J.intersectsObject(he))){const wt=ie.update(he),Ot=he.material;if(Qe&&(he.boundingSphere!==void 0?(he.boundingSphere===null&&he.computeBoundingSphere(),ue.copy(he.boundingSphere.center)):(wt.boundingSphere===null&&wt.computeBoundingSphere(),ue.copy(wt.boundingSphere.center)),ue.applyMatrix4(he.matrixWorld).applyMatrix4(_e)),Array.isArray(Ot)){const Tt=wt.groups;for(let Lt=0,Vt=Tt.length;Lt<Vt;Lt++){const qt=Tt[Lt],mn=Ot[qt.materialIndex];mn&&mn.visible&&M.push(he,wt,mn,$e,ue.z,qt)}}else Ot.visible&&M.push(he,wt,Ot,$e,ue.z,null)}}const ut=he.children;for(let wt=0,Ot=ut.length;wt<Ot;wt++)Ci(ut[wt],He,$e,Qe)}function Ri(he,He,$e,Qe){const Ne=he.opaque,ut=he.transmissive,wt=he.transparent;_.setupLightsView($e),De===!0&&Fe.setGlobalState(A.clippingPlanes,$e),Qe&&Pe.viewport(F.copy(Qe)),Ne.length>0&&ht(Ne,He,$e),ut.length>0&&ht(ut,He,$e),wt.length>0&&ht(wt,He,$e),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function Wa(he,He,$e,Qe){if(($e.isScene===!0?$e.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[Qe.id]===void 0&&(_.state.transmissionRenderTarget[Qe.id]=new ac(1,1,{generateMipmaps:!0,type:Be.has("EXT_color_buffer_half_float")||Be.has("EXT_color_buffer_float")?Zv:Sl,minFilter:ec,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:pr.workingColorSpace}));const ut=_.state.transmissionRenderTarget[Qe.id],wt=Qe.viewport||F;ut.setSize(wt.z*A.transmissionResolutionScale,wt.w*A.transmissionResolutionScale);const Ot=A.getRenderTarget(),Tt=A.getActiveCubeFace(),Lt=A.getActiveMipmapLevel();A.setRenderTarget(ut),A.getClearColor($),Y=A.getClearAlpha(),Y<1&&A.setClearColor(16777215,.5),A.clear(),Ae&&Ge.render($e);const Vt=A.toneMapping;A.toneMapping=nc;const qt=Qe.viewport;if(Qe.viewport!==void 0&&(Qe.viewport=void 0),_.setupLightsView(Qe),De===!0&&Fe.setGlobalState(A.clippingPlanes,Qe),ht(he,$e,Qe),re.updateMultisampleRenderTarget(ut),re.updateRenderTargetMipmap(ut),Be.has("WEBGL_multisampled_render_to_texture")===!1){let mn=!1;for(let Jn=0,$n=He.length;Jn<$n;Jn++){const sr=He[Jn],Cn=sr.object,Ut=sr.geometry,Cr=sr.material,kn=sr.group;if(Cr.side===Io&&Cn.layers.test(Qe.layers)){const wr=Cr.side;Cr.side=gs,Cr.needsUpdate=!0,ln(Cn,$e,Qe,Ut,Cr,kn),Cr.side=wr,Cr.needsUpdate=!0,mn=!0}}mn===!0&&(re.updateMultisampleRenderTarget(ut),re.updateRenderTargetMipmap(ut))}A.setRenderTarget(Ot,Tt,Lt),A.setClearColor($,Y),qt!==void 0&&(Qe.viewport=qt),A.toneMapping=Vt}function ht(he,He,$e){const Qe=He.isScene===!0?He.overrideMaterial:null;for(let Ne=0,ut=he.length;Ne<ut;Ne++){const wt=he[Ne],Ot=wt.object,Tt=wt.geometry,Lt=wt.group;let Vt=wt.material;Vt.allowOverride===!0&&Qe!==null&&(Vt=Qe),Ot.layers.test($e.layers)&&ln(Ot,He,$e,Tt,Vt,Lt)}}function ln(he,He,$e,Qe,Ne,ut){he.onBeforeRender(A,He,$e,Qe,Ne,ut),he.modelViewMatrix.multiplyMatrices($e.matrixWorldInverse,he.matrixWorld),he.normalMatrix.getNormalMatrix(he.modelViewMatrix),Ne.onBeforeRender(A,He,$e,Qe,he,ut),Ne.transparent===!0&&Ne.side===Io&&Ne.forceSinglePass===!1?(Ne.side=gs,Ne.needsUpdate=!0,A.renderBufferDirect($e,He,Qe,Ne,he,ut),Ne.side=sf,Ne.needsUpdate=!0,A.renderBufferDirect($e,He,Qe,Ne,he,ut),Ne.side=Io):A.renderBufferDirect($e,He,Qe,Ne,he,ut),he.onAfterRender(A,He,$e,Qe,Ne,ut)}function qr(he,He,$e){He.isScene!==!0&&(He=ge);const Qe=Ze.get(he),Ne=_.state.lights,ut=_.state.shadowsArray,wt=Ne.state.version,Ot=fe.getParameters(he,Ne.state,ut,He,$e),Tt=fe.getProgramCacheKey(Ot);let Lt=Qe.programs;Qe.environment=he.isMeshStandardMaterial?He.environment:null,Qe.fog=He.fog,Qe.envMap=(he.isMeshStandardMaterial?Ce:be).get(he.envMap||Qe.environment),Qe.envMapRotation=Qe.environment!==null&&he.envMap===null?He.environmentRotation:he.envMapRotation,Lt===void 0&&(he.addEventListener("dispose",ct),Lt=new Map,Qe.programs=Lt);let Vt=Lt.get(Tt);if(Vt!==void 0){if(Qe.currentProgram===Vt&&Qe.lightsStateVersion===wt)return zr(he,Ot),Vt}else Ot.uniforms=fe.getUniforms(he),he.onBeforeCompile(Ot,A),Vt=fe.acquireProgram(Ot,Tt),Lt.set(Tt,Vt),Qe.uniforms=Ot.uniforms;const qt=Qe.uniforms;return(!he.isShaderMaterial&&!he.isRawShaderMaterial||he.clipping===!0)&&(qt.clippingPlanes=Fe.uniform),zr(he,Ot),Qe.needsLights=pu(he),Qe.lightsStateVersion=wt,Qe.needsLights&&(qt.ambientLightColor.value=Ne.state.ambient,qt.lightProbe.value=Ne.state.probe,qt.directionalLights.value=Ne.state.directional,qt.directionalLightShadows.value=Ne.state.directionalShadow,qt.spotLights.value=Ne.state.spot,qt.spotLightShadows.value=Ne.state.spotShadow,qt.rectAreaLights.value=Ne.state.rectArea,qt.ltc_1.value=Ne.state.rectAreaLTC1,qt.ltc_2.value=Ne.state.rectAreaLTC2,qt.pointLights.value=Ne.state.point,qt.pointLightShadows.value=Ne.state.pointShadow,qt.hemisphereLights.value=Ne.state.hemi,qt.directionalShadowMap.value=Ne.state.directionalShadowMap,qt.directionalShadowMatrix.value=Ne.state.directionalShadowMatrix,qt.spotShadowMap.value=Ne.state.spotShadowMap,qt.spotLightMatrix.value=Ne.state.spotLightMatrix,qt.spotLightMap.value=Ne.state.spotLightMap,qt.pointShadowMap.value=Ne.state.pointShadowMap,qt.pointShadowMatrix.value=Ne.state.pointShadowMatrix),Qe.currentProgram=Vt,Qe.uniformsList=null,Vt}function tn(he){if(he.uniformsList===null){const He=he.currentProgram.getUniforms();he.uniformsList=qb.seqWithValue(He.seq,he.uniforms)}return he.uniformsList}function zr(he,He){const $e=Ze.get(he);$e.outputColorSpace=He.outputColorSpace,$e.batching=He.batching,$e.batchingColor=He.batchingColor,$e.instancing=He.instancing,$e.instancingColor=He.instancingColor,$e.instancingMorph=He.instancingMorph,$e.skinning=He.skinning,$e.morphTargets=He.morphTargets,$e.morphNormals=He.morphNormals,$e.morphColors=He.morphColors,$e.morphTargetsCount=He.morphTargetsCount,$e.numClippingPlanes=He.numClippingPlanes,$e.numIntersection=He.numClipIntersection,$e.vertexAlphas=He.vertexAlphas,$e.vertexTangents=He.vertexTangents,$e.toneMapping=He.toneMapping}function $a(he,He,$e,Qe,Ne){He.isScene!==!0&&(He=ge),re.resetTextureUnits();const ut=He.fog,wt=Qe.isMeshStandardMaterial?He.environment:null,Ot=z===null?A.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:xh,Tt=(Qe.isMeshStandardMaterial?Ce:be).get(Qe.envMap||wt),Lt=Qe.vertexColors===!0&&!!$e.attributes.color&&$e.attributes.color.itemSize===4,Vt=!!$e.attributes.tangent&&(!!Qe.normalMap||Qe.anisotropy>0),qt=!!$e.morphAttributes.position,mn=!!$e.morphAttributes.normal,Jn=!!$e.morphAttributes.color;let $n=nc;Qe.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&($n=A.toneMapping);const sr=$e.morphAttributes.position||$e.morphAttributes.normal||$e.morphAttributes.color,Cn=sr!==void 0?sr.length:0,Ut=Ze.get(Qe),Cr=_.state.lights;if(De===!0&&(pe===!0||he!==R)){const nn=he===R&&Qe.id===C;Fe.setState(Qe,he,nn)}let kn=!1;Qe.version===Ut.__version?(Ut.needsLights&&Ut.lightsStateVersion!==Cr.state.version||Ut.outputColorSpace!==Ot||Ne.isBatchedMesh&&Ut.batching===!1||!Ne.isBatchedMesh&&Ut.batching===!0||Ne.isBatchedMesh&&Ut.batchingColor===!0&&Ne.colorTexture===null||Ne.isBatchedMesh&&Ut.batchingColor===!1&&Ne.colorTexture!==null||Ne.isInstancedMesh&&Ut.instancing===!1||!Ne.isInstancedMesh&&Ut.instancing===!0||Ne.isSkinnedMesh&&Ut.skinning===!1||!Ne.isSkinnedMesh&&Ut.skinning===!0||Ne.isInstancedMesh&&Ut.instancingColor===!0&&Ne.instanceColor===null||Ne.isInstancedMesh&&Ut.instancingColor===!1&&Ne.instanceColor!==null||Ne.isInstancedMesh&&Ut.instancingMorph===!0&&Ne.morphTexture===null||Ne.isInstancedMesh&&Ut.instancingMorph===!1&&Ne.morphTexture!==null||Ut.envMap!==Tt||Qe.fog===!0&&Ut.fog!==ut||Ut.numClippingPlanes!==void 0&&(Ut.numClippingPlanes!==Fe.numPlanes||Ut.numIntersection!==Fe.numIntersection)||Ut.vertexAlphas!==Lt||Ut.vertexTangents!==Vt||Ut.morphTargets!==qt||Ut.morphNormals!==mn||Ut.morphColors!==Jn||Ut.toneMapping!==$n||Ut.morphTargetsCount!==Cn)&&(kn=!0):(kn=!0,Ut.__version=Qe.version);let wr=Ut.currentProgram;kn===!0&&(wr=qr(Qe,He,Ne));let Ki=!1,ai=!1,at=!1;const tt=wr.getUniforms(),Dt=Ut.uniforms;if(Pe.useProgram(wr.program)&&(Ki=!0,ai=!0,at=!0),Qe.id!==C&&(C=Qe.id,ai=!0),Ki||R!==he){Pe.buffers.depth.getReversed()&&he.reversedDepth!==!0&&(he._reversedDepth=!0,he.updateProjectionMatrix()),tt.setValue(se,"projectionMatrix",he.projectionMatrix),tt.setValue(se,"viewMatrix",he.matrixWorldInverse);const An=tt.map.cameraPosition;An!==void 0&&An.setValue(se,ne.setFromMatrixPosition(he.matrixWorld)),Le.logarithmicDepthBuffer&&tt.setValue(se,"logDepthBufFC",2/(Math.log(he.far+1)/Math.LN2)),(Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshLambertMaterial||Qe.isMeshBasicMaterial||Qe.isMeshStandardMaterial||Qe.isShaderMaterial)&&tt.setValue(se,"isOrthographic",he.isOrthographicCamera===!0),R!==he&&(R=he,ai=!0,at=!0)}if(Ne.isSkinnedMesh){tt.setOptional(se,Ne,"bindMatrix"),tt.setOptional(se,Ne,"bindMatrixInverse");const nn=Ne.skeleton;nn&&(nn.boneTexture===null&&nn.computeBoneTexture(),tt.setValue(se,"boneTexture",nn.boneTexture,re))}Ne.isBatchedMesh&&(tt.setOptional(se,Ne,"batchingTexture"),tt.setValue(se,"batchingTexture",Ne._matricesTexture,re),tt.setOptional(se,Ne,"batchingIdTexture"),tt.setValue(se,"batchingIdTexture",Ne._indirectTexture,re),tt.setOptional(se,Ne,"batchingColorTexture"),Ne._colorsTexture!==null&&tt.setValue(se,"batchingColorTexture",Ne._colorsTexture,re));const Yt=$e.morphAttributes;if((Yt.position!==void 0||Yt.normal!==void 0||Yt.color!==void 0)&&rt.update(Ne,$e,wr),(ai||Ut.receiveShadow!==Ne.receiveShadow)&&(Ut.receiveShadow=Ne.receiveShadow,tt.setValue(se,"receiveShadow",Ne.receiveShadow)),Qe.isMeshGouraudMaterial&&Qe.envMap!==null&&(Dt.envMap.value=Tt,Dt.flipEnvMap.value=Tt.isCubeTexture&&Tt.isRenderTargetTexture===!1?-1:1),Qe.isMeshStandardMaterial&&Qe.envMap===null&&He.environment!==null&&(Dt.envMapIntensity.value=He.environmentIntensity),ai&&(tt.setValue(se,"toneMappingExposure",A.toneMappingExposure),Ut.needsLights&&Yo(Dt,at),ut&&Qe.fog===!0&&Se.refreshFogUniforms(Dt,ut),Se.refreshMaterialUniforms(Dt,Qe,W,Z,_.state.transmissionRenderTarget[he.id]),qb.upload(se,tn(Ut),Dt,re)),Qe.isShaderMaterial&&Qe.uniformsNeedUpdate===!0&&(qb.upload(se,tn(Ut),Dt,re),Qe.uniformsNeedUpdate=!1),Qe.isSpriteMaterial&&tt.setValue(se,"center",Ne.center),tt.setValue(se,"modelViewMatrix",Ne.modelViewMatrix),tt.setValue(se,"normalMatrix",Ne.normalMatrix),tt.setValue(se,"modelMatrix",Ne.matrixWorld),Qe.isShaderMaterial||Qe.isRawShaderMaterial){const nn=Qe.uniformsGroups;for(let An=0,Rr=nn.length;An<Rr;An++){const er=nn[An];G.update(er,wr),G.bind(er,wr)}}return wr}function Yo(he,He){he.ambientLightColor.needsUpdate=He,he.lightProbe.needsUpdate=He,he.directionalLights.needsUpdate=He,he.directionalLightShadows.needsUpdate=He,he.pointLights.needsUpdate=He,he.pointLightShadows.needsUpdate=He,he.spotLights.needsUpdate=He,he.spotLightShadows.needsUpdate=He,he.rectAreaLights.needsUpdate=He,he.hemisphereLights.needsUpdate=He}function pu(he){return he.isMeshLambertMaterial||he.isMeshToonMaterial||he.isMeshPhongMaterial||he.isMeshStandardMaterial||he.isShadowMaterial||he.isShaderMaterial&&he.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(he,He,$e){const Qe=Ze.get(he);Qe.__autoAllocateDepthBuffer=he.resolveDepthBuffer===!1,Qe.__autoAllocateDepthBuffer===!1&&(Qe.__useRenderToTexture=!1),Ze.get(he.texture).__webglTexture=He,Ze.get(he.depthTexture).__webglTexture=Qe.__autoAllocateDepthBuffer?void 0:$e,Qe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(he,He){const $e=Ze.get(he);$e.__webglFramebuffer=He,$e.__useDefaultFramebuffer=He===void 0};const Dl=se.createFramebuffer();this.setRenderTarget=function(he,He=0,$e=0){z=he,N=He,O=$e;let Qe=!0,Ne=null,ut=!1,wt=!1;if(he){const Tt=Ze.get(he);if(Tt.__useDefaultFramebuffer!==void 0)Pe.bindFramebuffer(se.FRAMEBUFFER,null),Qe=!1;else if(Tt.__webglFramebuffer===void 0)re.setupRenderTarget(he);else if(Tt.__hasExternalTextures)re.rebindTextures(he,Ze.get(he.texture).__webglTexture,Ze.get(he.depthTexture).__webglTexture);else if(he.depthBuffer){const qt=he.depthTexture;if(Tt.__boundDepthTexture!==qt){if(qt!==null&&Ze.has(qt)&&(he.width!==qt.image.width||he.height!==qt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");re.setupDepthRenderbuffer(he)}}const Lt=he.texture;(Lt.isData3DTexture||Lt.isDataArrayTexture||Lt.isCompressedArrayTexture)&&(wt=!0);const Vt=Ze.get(he).__webglFramebuffer;he.isWebGLCubeRenderTarget?(Array.isArray(Vt[He])?Ne=Vt[He][$e]:Ne=Vt[He],ut=!0):he.samples>0&&re.useMultisampledRTT(he)===!1?Ne=Ze.get(he).__webglMultisampledFramebuffer:Array.isArray(Vt)?Ne=Vt[$e]:Ne=Vt,F.copy(he.viewport),H.copy(he.scissor),X=he.scissorTest}else F.copy(Q).multiplyScalar(W).floor(),H.copy(k).multiplyScalar(W).floor(),X=ae;if($e!==0&&(Ne=Dl),Pe.bindFramebuffer(se.FRAMEBUFFER,Ne)&&Qe&&Pe.drawBuffers(he,Ne),Pe.viewport(F),Pe.scissor(H),Pe.setScissorTest(X),ut){const Tt=Ze.get(he.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_CUBE_MAP_POSITIVE_X+He,Tt.__webglTexture,$e)}else if(wt){const Tt=He;for(let Lt=0;Lt<he.textures.length;Lt++){const Vt=Ze.get(he.textures[Lt]);se.framebufferTextureLayer(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0+Lt,Vt.__webglTexture,$e,Tt)}}else if(he!==null&&$e!==0){const Tt=Ze.get(he.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,Tt.__webglTexture,$e)}C=-1},this.readRenderTargetPixels=function(he,He,$e,Qe,Ne,ut,wt,Ot=0){if(!(he&&he.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Tt=Ze.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&wt!==void 0&&(Tt=Tt[wt]),Tt){Pe.bindFramebuffer(se.FRAMEBUFFER,Tt);try{const Lt=he.textures[Ot],Vt=Lt.format,qt=Lt.type;if(!Le.textureFormatReadable(Vt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Le.textureTypeReadable(qt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}He>=0&&He<=he.width-Qe&&$e>=0&&$e<=he.height-Ne&&(he.textures.length>1&&se.readBuffer(se.COLOR_ATTACHMENT0+Ot),se.readPixels(He,$e,Qe,Ne,ye.convert(Vt),ye.convert(qt),ut))}finally{const Lt=z!==null?Ze.get(z).__webglFramebuffer:null;Pe.bindFramebuffer(se.FRAMEBUFFER,Lt)}}},this.readRenderTargetPixelsAsync=async function(he,He,$e,Qe,Ne,ut,wt,Ot=0){if(!(he&&he.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Tt=Ze.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&wt!==void 0&&(Tt=Tt[wt]),Tt)if(He>=0&&He<=he.width-Qe&&$e>=0&&$e<=he.height-Ne){Pe.bindFramebuffer(se.FRAMEBUFFER,Tt);const Lt=he.textures[Ot],Vt=Lt.format,qt=Lt.type;if(!Le.textureFormatReadable(Vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Le.textureTypeReadable(qt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const mn=se.createBuffer();se.bindBuffer(se.PIXEL_PACK_BUFFER,mn),se.bufferData(se.PIXEL_PACK_BUFFER,ut.byteLength,se.STREAM_READ),he.textures.length>1&&se.readBuffer(se.COLOR_ATTACHMENT0+Ot),se.readPixels(He,$e,Qe,Ne,ye.convert(Vt),ye.convert(qt),0);const Jn=z!==null?Ze.get(z).__webglFramebuffer:null;Pe.bindFramebuffer(se.FRAMEBUFFER,Jn);const $n=se.fenceSync(se.SYNC_GPU_COMMANDS_COMPLETE,0);return se.flush(),await Xoe(se,$n,4),se.bindBuffer(se.PIXEL_PACK_BUFFER,mn),se.getBufferSubData(se.PIXEL_PACK_BUFFER,0,ut),se.deleteBuffer(mn),se.deleteSync($n),ut}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(he,He=null,$e=0){const Qe=Math.pow(2,-$e),Ne=Math.floor(he.image.width*Qe),ut=Math.floor(he.image.height*Qe),wt=He!==null?He.x:0,Ot=He!==null?He.y:0;re.setTexture2D(he,0),se.copyTexSubImage2D(se.TEXTURE_2D,$e,0,0,wt,Ot,Ne,ut),Pe.unbindTexture()};const As=se.createFramebuffer(),Zi=se.createFramebuffer();this.copyTextureToTexture=function(he,He,$e=null,Qe=null,Ne=0,ut=null){ut===null&&(Ne!==0?(yy("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ut=Ne,Ne=0):ut=0);let wt,Ot,Tt,Lt,Vt,qt,mn,Jn,$n;const sr=he.isCompressedTexture?he.mipmaps[ut]:he.image;if($e!==null)wt=$e.max.x-$e.min.x,Ot=$e.max.y-$e.min.y,Tt=$e.isBox3?$e.max.z-$e.min.z:1,Lt=$e.min.x,Vt=$e.min.y,qt=$e.isBox3?$e.min.z:0;else{const Yt=Math.pow(2,-Ne);wt=Math.floor(sr.width*Yt),Ot=Math.floor(sr.height*Yt),he.isDataArrayTexture?Tt=sr.depth:he.isData3DTexture?Tt=Math.floor(sr.depth*Yt):Tt=1,Lt=0,Vt=0,qt=0}Qe!==null?(mn=Qe.x,Jn=Qe.y,$n=Qe.z):(mn=0,Jn=0,$n=0);const Cn=ye.convert(He.format),Ut=ye.convert(He.type);let Cr;He.isData3DTexture?(re.setTexture3D(He,0),Cr=se.TEXTURE_3D):He.isDataArrayTexture||He.isCompressedArrayTexture?(re.setTexture2DArray(He,0),Cr=se.TEXTURE_2D_ARRAY):(re.setTexture2D(He,0),Cr=se.TEXTURE_2D),se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,He.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,He.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,He.unpackAlignment);const kn=se.getParameter(se.UNPACK_ROW_LENGTH),wr=se.getParameter(se.UNPACK_IMAGE_HEIGHT),Ki=se.getParameter(se.UNPACK_SKIP_PIXELS),ai=se.getParameter(se.UNPACK_SKIP_ROWS),at=se.getParameter(se.UNPACK_SKIP_IMAGES);se.pixelStorei(se.UNPACK_ROW_LENGTH,sr.width),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,sr.height),se.pixelStorei(se.UNPACK_SKIP_PIXELS,Lt),se.pixelStorei(se.UNPACK_SKIP_ROWS,Vt),se.pixelStorei(se.UNPACK_SKIP_IMAGES,qt);const tt=he.isDataArrayTexture||he.isData3DTexture,Dt=He.isDataArrayTexture||He.isData3DTexture;if(he.isDepthTexture){const Yt=Ze.get(he),nn=Ze.get(He),An=Ze.get(Yt.__renderTarget),Rr=Ze.get(nn.__renderTarget);Pe.bindFramebuffer(se.READ_FRAMEBUFFER,An.__webglFramebuffer),Pe.bindFramebuffer(se.DRAW_FRAMEBUFFER,Rr.__webglFramebuffer);for(let er=0;er<Tt;er++)tt&&(se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Ze.get(he).__webglTexture,Ne,qt+er),se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Ze.get(He).__webglTexture,ut,$n+er)),se.blitFramebuffer(Lt,Vt,wt,Ot,mn,Jn,wt,Ot,se.DEPTH_BUFFER_BIT,se.NEAREST);Pe.bindFramebuffer(se.READ_FRAMEBUFFER,null),Pe.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else if(Ne!==0||he.isRenderTargetTexture||Ze.has(he)){const Yt=Ze.get(he),nn=Ze.get(He);Pe.bindFramebuffer(se.READ_FRAMEBUFFER,As),Pe.bindFramebuffer(se.DRAW_FRAMEBUFFER,Zi);for(let An=0;An<Tt;An++)tt?se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,Yt.__webglTexture,Ne,qt+An):se.framebufferTexture2D(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,Yt.__webglTexture,Ne),Dt?se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,nn.__webglTexture,ut,$n+An):se.framebufferTexture2D(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,nn.__webglTexture,ut),Ne!==0?se.blitFramebuffer(Lt,Vt,wt,Ot,mn,Jn,wt,Ot,se.COLOR_BUFFER_BIT,se.NEAREST):Dt?se.copyTexSubImage3D(Cr,ut,mn,Jn,$n+An,Lt,Vt,wt,Ot):se.copyTexSubImage2D(Cr,ut,mn,Jn,Lt,Vt,wt,Ot);Pe.bindFramebuffer(se.READ_FRAMEBUFFER,null),Pe.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else Dt?he.isDataTexture||he.isData3DTexture?se.texSubImage3D(Cr,ut,mn,Jn,$n,wt,Ot,Tt,Cn,Ut,sr.data):He.isCompressedArrayTexture?se.compressedTexSubImage3D(Cr,ut,mn,Jn,$n,wt,Ot,Tt,Cn,sr.data):se.texSubImage3D(Cr,ut,mn,Jn,$n,wt,Ot,Tt,Cn,Ut,sr):he.isDataTexture?se.texSubImage2D(se.TEXTURE_2D,ut,mn,Jn,wt,Ot,Cn,Ut,sr.data):he.isCompressedTexture?se.compressedTexSubImage2D(se.TEXTURE_2D,ut,mn,Jn,sr.width,sr.height,Cn,sr.data):se.texSubImage2D(se.TEXTURE_2D,ut,mn,Jn,wt,Ot,Cn,Ut,sr);se.pixelStorei(se.UNPACK_ROW_LENGTH,kn),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,wr),se.pixelStorei(se.UNPACK_SKIP_PIXELS,Ki),se.pixelStorei(se.UNPACK_SKIP_ROWS,ai),se.pixelStorei(se.UNPACK_SKIP_IMAGES,at),ut===0&&He.generateMipmaps&&se.generateMipmap(Cr),Pe.unbindTexture()},this.initRenderTarget=function(he){Ze.get(he).__webglFramebuffer===void 0&&re.setupRenderTarget(he)},this.initTexture=function(he){he.isCubeTexture?re.setTextureCube(he,0):he.isData3DTexture?re.setTexture3D(he,0):he.isDataArrayTexture||he.isCompressedArrayTexture?re.setTexture2DArray(he,0):re.setTexture2D(he,0),Pe.unbindTexture()},this.resetState=function(){N=0,O=0,z=null,Pe.reset(),Ve.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Po}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=pr._getDrawingBufferColorSpace(e),t.unpackColorSpace=pr._getUnpackColorSpace()}}const ime=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:xw,AddEquation:oh,AddOperation:XF,AdditiveAnimationBlendMode:Nw,AdditiveBlending:ly,AgXToneMapping:ZF,AlphaFormat:Aw,AlwaysCompare:f5,AlwaysDepth:E_,AlwaysStencilFunc:c2,AmbientLight:rL,AnimationAction:fL,AnimationClip:Ay,AnimationLoader:yue,AnimationMixer:Yue,AnimationObjectGroup:Xue,AnimationUtils:pue,ArcCurve:D5,ArrayCamera:lL,ArrowHelper:mL,AttachedBindMode:u2,Audio:uL,AudioAnalyser:zue,AudioContext:tT,AudioListener:Oue,AudioLoader:Due,AxesHelper:vce,BackSide:gs,BasicDepthPacking:n5,BasicShadowMap:AF,BatchedMesh:E5,Bone:Fw,BooleanKeyframeTrack:Sp,Box2:tce,Box3:oa,Box3Helper:pce,BoxGeometry:_p,BoxHelper:dce,BufferAttribute:Wr,BufferGeometry:In,BufferGeometryLoader:oL,ByteType:_w,Cache:tc,Camera:ZS,CameraHelper:hce,CanvasTexture:Lle,CapsuleGeometry:iM,CatmullRomCurve3:C5,CineonToneMapping:WF,CircleGeometry:aM,ClampToEdgeWrapping:xl,Clock:nT,Color:zt,ColorKeyframeTrack:Kw,ColorManagement:pr,CompressedArrayTexture:zle,CompressedCubeTexture:Fle,CompressedTexture:rM,CompressedTextureLoader:xue,ConeGeometry:ky,ConstantAlphaFactor:qF,ConstantColorFactor:HF,Controls:yce,CubeCamera:g5,CubeReflectionMapping:of,CubeRefractionMapping:yh,CubeTexture:qy,CubeTextureLoader:bue,CubeUVReflectionMapping:$v,CubicBezierCurve:Hw,CubicBezierCurve3:R5,CubicInterpolant:$5,CullFaceBack:s2,CullFaceFront:EF,CullFaceFrontBack:jse,CullFaceNone:MF,Curve:du,CurvePath:B5,CustomBlending:wF,CustomToneMapping:$F,CylinderGeometry:Gy,Cylindrical:ece,Data3DTexture:$S,DataArrayTexture:WS,DataTexture:rc,DataTextureLoader:_ue,DataUtils:sle,DecrementStencilOp:soe,DecrementWrapStencilOp:loe,DefaultLoadingManager:Q5,DepthFormat:Ev,DepthStencilFormat:Av,DepthTexture:Lw,DetachedBindMode:QF,DirectionalLight:nL,DirectionalLightHelper:fce,DiscreteInterpolant:Z5,DodecahedronGeometry:sM,DoubleSide:Io,DstAlphaFactor:zF,DstColorFactor:LF,DynamicCopyUsage:Soe,DynamicDrawUsage:Qd,DynamicReadUsage:xoe,EdgesGeometry:N5,EllipseCurve:oM,EqualCompare:o5,EqualDepth:w_,EqualStencilFunc:hoe,EquirectangularReflectionMapping:uy,EquirectangularRefractionMapping:cy,Euler:Go,EventDispatcher:uc,ExternalTexture:Iw,ExtrudeGeometry:lM,FileLoader:uf,Float16BufferAttribute:dle,Float32BufferAttribute:Ht,FloatType:po,Fog:QS,FogExp2:KS,FramebufferTexture:Ule,FrontSide:sf,Frustum:Kv,FrustumArray:tM,GLBufferAttribute:Kue,GLSL1:Eoe,GLSL3:f2,GreaterCompare:l5,GreaterDepth:N_,GreaterEqualCompare:c5,GreaterEqualDepth:T_,GreaterEqualStencilFunc:voe,GreaterStencilFunc:poe,GridHelper:uce,Group:av,HalfFloatType:Zv,HemisphereLight:J5,HemisphereLightHelper:lce,IcosahedronGeometry:uM,ImageBitmapLoader:Nue,ImageLoader:wy,ImageUtils:p5,IncrementStencilOp:aoe,IncrementWrapStencilOp:ooe,InstancedBufferAttribute:Cv,InstancedBufferGeometry:eT,InstancedInterleavedBuffer:uS,InstancedMesh:M5,Int16BufferAttribute:fle,Int32BufferAttribute:hle,Int8BufferAttribute:lle,IntType:VS,InterleavedBuffer:JS,InterleavedBufferAttribute:Ho,Interpolant:Yy,InterpolateDiscrete:dy,InterpolateLinear:iS,InterpolateSmooth:Hb,InterpolationSamplingMode:Toe,InterpolationSamplingType:woe,InvertStencilOp:uoe,KeepStencilOp:Vd,KeyframeTrack:Nl,LOD:_5,LatheGeometry:cM,Layers:Nv,LessCompare:s5,LessDepth:A_,LessEqualCompare:Dw,LessEqualDepth:ap,LessEqualStencilFunc:doe,LessStencilFunc:foe,Light:Uh,LightProbe:sL,Line:bh,Line3:dL,LineBasicMaterial:Js,LineCurve:Vw,LineCurve3:O5,LineDashedMaterial:j5,LineLoop:A5,LineSegments:cc,LinearFilter:sa,LinearInterpolant:Zw,LinearMipMapLinearFilter:Zse,LinearMipMapNearestFilter:$se,LinearMipmapLinearFilter:ec,LinearMipmapNearestFilter:W0,LinearSRGBColorSpace:xh,LinearToneMapping:jF,LinearTransfer:my,Loader:xo,LoaderUtils:v2,LoadingManager:Qw,LoopOnce:JF,LoopPingPong:t5,LoopRepeat:e5,MOUSE:Pd,Material:Ms,MaterialLoader:gM,MathUtils:Ku,Matrix2:aT,Matrix3:Bn,Matrix4:pn,MaxEquation:CF,Mesh:Vi,MeshBasicMaterial:Oh,MeshDepthMaterial:Yw,MeshDistanceMaterial:Ww,MeshLambertMaterial:k5,MeshMatcapMaterial:X5,MeshNormalMaterial:G5,MeshPhongMaterial:V5,MeshPhysicalMaterial:H5,MeshStandardMaterial:jw,MeshToonMaterial:q5,MinEquation:DF,MirroredRepeatWrapping:hy,MixOperation:kF,MultiplyBlending:l2,MultiplyOperation:Hy,NearestFilter:ja,NearestMipMapLinearFilter:Wse,NearestMipMapNearestFilter:Yse,NearestMipmapLinearFilter:rv,NearestMipmapNearestFilter:bw,NeutralToneMapping:KF,NeverCompare:a5,NeverDepth:M_,NeverStencilFunc:coe,NoBlending:tf,NoColorSpace:$c,NoToneMapping:nc,NormalAnimationBlendMode:YS,NormalBlending:Kd,NotEqualCompare:u5,NotEqualDepth:D_,NotEqualStencilFunc:moe,NumberKeyframeTrack:My,Object3D:xr,ObjectLoader:wue,ObjectSpaceNormalMap:i5,OctahedronGeometry:Xy,OneFactor:OF,OneMinusConstantAlphaFactor:GF,OneMinusConstantColorFactor:VF,OneMinusDstAlphaFactor:FF,OneMinusDstColorFactor:IF,OneMinusSrcAlphaFactor:S_,OneMinusSrcColorFactor:UF,OrthographicCamera:dh,PCFShadowMap:PS,PCFSoftShadowMap:Y0,PMREMGenerator:b2,Path:lS,PerspectiveCamera:Hi,Plane:Zu,PlaneGeometry:Qv,PlaneHelper:mce,PointLight:tL,PointLightHelper:sce,Points:w5,PointsMaterial:nM,PolarGridHelper:cce,PolyhedronGeometry:Bh,PositionalAudio:Uue,PropertyBinding:yr,PropertyMixer:cL,QuadraticBezierCurve:qw,QuadraticBezierCurve3:Gw,Quaternion:ys,QuaternionKeyframeTrack:Wy,QuaternionLinearInterpolant:K5,RED_GREEN_RGTC2_Format:nS,RED_RGTC1_Format:eS,REVISION:Wv,RGBADepthPacking:r5,RGBAFormat:ms,RGBAIntegerFormat:jS,RGBA_ASTC_10x10_Format:W_,RGBA_ASTC_10x5_Format:X_,RGBA_ASTC_10x6_Format:j_,RGBA_ASTC_10x8_Format:Y_,RGBA_ASTC_12x10_Format:$_,RGBA_ASTC_12x12_Format:Z_,RGBA_ASTC_4x4_Format:L_,RGBA_ASTC_5x4_Format:I_,RGBA_ASTC_5x5_Format:P_,RGBA_ASTC_6x5_Format:H_,RGBA_ASTC_6x6_Format:V_,RGBA_ASTC_8x5_Format:q_,RGBA_ASTC_8x6_Format:G_,RGBA_ASTC_8x8_Format:k_,RGBA_BPTC_Format:K_,RGBA_ETC2_EAC_Format:F_,RGBA_PVRTC_2BPPV1_Format:B_,RGBA_PVRTC_4BPPV1_Format:O_,RGBA_S3TC_DXT1_Format:Z0,RGBA_S3TC_DXT3_Format:K0,RGBA_S3TC_DXT5_Format:Q0,RGBDepthPacking:toe,RGBFormat:ww,RGBIntegerFormat:Kse,RGB_BPTC_SIGNED_Format:Q_,RGB_BPTC_UNSIGNED_Format:J_,RGB_ETC1_Format:U_,RGB_ETC2_Format:z_,RGB_PVRTC_2BPPV1_Format:R_,RGB_PVRTC_4BPPV1_Format:C_,RGB_S3TC_DXT1_Format:$0,RGDepthPacking:noe,RGFormat:Tw,RGIntegerFormat:XS,RawShaderMaterial:P5,Ray:bp,Raycaster:hL,RectAreaLight:iL,RedFormat:kS,RedIntegerFormat:Vy,ReinhardToneMapping:YF,RenderTarget:Rw,RenderTarget3D:Wue,RepeatWrapping:fy,ReplaceStencilOp:ioe,ReverseSubtractEquation:NF,RingGeometry:fM,SIGNED_RED_GREEN_RGTC2_Format:rS,SIGNED_RED_RGTC1_Format:tS,SRGBColorSpace:ds,SRGBTransfer:Lr,Scene:Uw,ShaderChunk:Vn,ShaderLib:su,ShaderMaterial:ko,ShadowMaterial:I5,Shape:ep,ShapeGeometry:hM,ShapePath:gce,ShapeUtils:ou,ShortType:Sw,Skeleton:eM,SkeletonHelper:ace,SkinnedMesh:S5,Source:fh,Sphere:la,SphereGeometry:jy,Spherical:y2,SphericalHarmonics3:aL,SplineCurve:kw,SpotLight:eL,SpotLightHelper:ice,Sprite:b5,SpriteMaterial:zw,SrcAlphaFactor:__,SrcAlphaSaturateFactor:PF,SrcColorFactor:BF,StaticCopyUsage:_oe,StaticDrawUsage:vy,StaticReadUsage:yoe,StereoCamera:Cue,StreamCopyUsage:Moe,StreamDrawUsage:goe,StreamReadUsage:boe,StringKeyframeTrack:Mp,SubtractEquation:TF,SubtractiveBlending:o2,TOUCH:Hd,TangentSpaceNormalMap:Rh,TetrahedronGeometry:dM,Texture:Ni,TextureLoader:Sue,TextureUtils:Mce,Timer:Que,TimestampQuery:Aoe,TorusGeometry:pM,TorusKnotGeometry:mM,Triangle:ho,TriangleFanDrawMode:eoe,TriangleStripDrawMode:Jse,TrianglesDrawMode:Qse,TubeGeometry:vM,UVMapping:HS,Uint16BufferAttribute:Ow,Uint32BufferAttribute:Bw,Uint8BufferAttribute:ule,Uint8ClampedBufferAttribute:cle,Uniform:yM,UniformsGroup:Zue,UniformsLib:Ct,UniformsUtils:xy,UnsignedByteType:Sl,UnsignedInt101111Type:Ew,UnsignedInt248Type:Mv,UnsignedInt5999Type:Mw,UnsignedIntType:lf,UnsignedShort4444Type:qS,UnsignedShort5551Type:GS,UnsignedShortType:Sv,VSMShadowMap:iu,Vector2:gt,Vector3:xe,Vector4:Xn,VectorKeyframeTrack:Ey,VideoFrameTexture:Ble,VideoTexture:T5,WebGL3DRenderTarget:Zoe,WebGLArrayRenderTarget:$oe,WebGLCoordinateSystem:Po,WebGLCubeRenderTarget:y5,WebGLRenderTarget:ac,WebGLRenderer:SL,WebGLUtils:_L,WebGPUCoordinateSystem:wv,WebXRController:Vb,WireframeGeometry:Xw,WrapAroundEnding:py,ZeroCurvatureEnding:Yd,ZeroFactor:RF,ZeroSlopeEnding:Wd,ZeroStencilOp:roe,createCanvasElement:d5},Symbol.toStringTag,{value:"Module"}));var dA={exports:{}},kc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F4;function ame(){return F4||(F4=1,kc.ConcurrentRoot=1,kc.ContinuousEventPriority=8,kc.DefaultEventPriority=32,kc.DiscreteEventPriority=2,kc.IdleEventPriority=268435456,kc.LegacyRoot=0,kc.NoEventPriority=0),kc}var L4;function sme(){return L4||(L4=1,dA.exports=ame()),dA.exports}var Gb=sme(),pA={exports:{}},mA={},vA={exports:{}},gA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I4;function ome(){if(I4)return gA;I4=1;var r=Uv();function e(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,i=r.useEffect,a=r.useLayoutEffect,s=r.useDebugValue;function o(d,m){var v=m(),x=n({inst:{value:v,getSnapshot:m}}),b=x[0].inst,M=x[1];return a(function(){b.value=v,b.getSnapshot=m,c(b)&&M({inst:b})},[d,v,m]),i(function(){return c(b)&&M({inst:b}),d(function(){c(b)&&M({inst:b})})},[d]),s(v),v}function c(d){var m=d.getSnapshot;d=d.value;try{var v=m();return!t(d,v)}catch{return!0}}function u(d,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return gA.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:h,gA}var P4;function lme(){return P4||(P4=1,vA.exports=ome()),vA.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H4;function ume(){if(H4)return mA;H4=1;var r=Uv(),e=lme();function t(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=r.useRef,s=r.useEffect,o=r.useMemo,c=r.useDebugValue;return mA.useSyncExternalStoreWithSelector=function(u,h,d,m,v){var x=a(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=o(function(){function _(N){if(!T){if(T=!0,E=N,N=m(N),v!==void 0&&b.hasValue){var O=b.value;if(v(O,N))return A=O}return A=N}if(O=A,n(E,N))return O;var z=m(N);return v!==void 0&&v(O,z)?(E=N,O):(E=N,A=z)}var T=!1,E,A,D=d===void 0?null:d;return[function(){return _(h())},D===null?void 0:function(){return _(D())}]},[h,d,m,v]);var M=i(u,x[0],x[1]);return s(function(){b.hasValue=!0,b.value=M},[M]),c(M),M},mA}var V4;function cme(){return V4||(V4=1,pA.exports=ume()),pA.exports}var fme=cme();const hme=up(fme),q4=r=>{let e;const t=new Set,n=(u,h)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const m=e;e=h??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(v=>v(e,m))}},i=()=>e,o={setState:n,getState:i,getInitialState:()=>c,subscribe:u=>(t.add(u),()=>t.delete(u))},c=e=r(n,i,o);return o},dme=(r=>r?q4(r):q4),{useSyncExternalStoreWithSelector:pme}=hme,mme=r=>r;function vme(r,e=mme,t){const n=pme(r.subscribe,r.getState,r.getInitialState,e,t);return Wb.useDebugValue(n),n}const G4=(r,e)=>{const t=dme(r),n=(i,a=e)=>vme(t,i,a);return Object.assign(n,t),n},gme=((r,e)=>r?G4(r,e):G4);var yA={exports:{}},xA={exports:{}},bA={exports:{}},_A={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k4;function yme(){return k4||(k4=1,(function(r){function e(I,Z){var W=I.length;I.push(Z);e:for(;0<W;){var te=W-1>>>1,le=I[te];if(0<i(le,Z))I[te]=Z,I[W]=le,W=te;else break e}}function t(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var Z=I[0],W=I.pop();if(W!==Z){I[0]=W;e:for(var te=0,le=I.length,Q=le>>>1;te<Q;){var k=2*(te+1)-1,ae=I[k],J=k+1,De=I[J];if(0>i(ae,W))J<le&&0>i(De,ae)?(I[te]=De,I[J]=W,te=J):(I[te]=ae,I[k]=W,te=k);else if(J<le&&0>i(De,W))I[te]=De,I[J]=W,te=J;else break e}}return Z}function i(I,Z){var W=I.sortIndex-Z.sortIndex;return W!==0?W:I.id-Z.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();r.unstable_now=function(){return s.now()-o}}var c=[],u=[],h=1,d=null,m=3,v=!1,x=!1,b=!1,M=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function E(I){for(var Z=t(u);Z!==null;){if(Z.callback===null)n(u);else if(Z.startTime<=I)n(u),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(u)}}function A(I){if(b=!1,E(I),!x)if(t(c)!==null)x=!0,$();else{var Z=t(u);Z!==null&&Y(A,Z.startTime-I)}}var D=!1,N=-1,O=5,z=-1;function C(){return!(r.unstable_now()-z<O)}function R(){if(D){var I=r.unstable_now();z=I;var Z=!0;try{e:{x=!1,b&&(b=!1,_(N),N=-1),v=!0;var W=m;try{t:{for(E(I),d=t(c);d!==null&&!(d.expirationTime>I&&C());){var te=d.callback;if(typeof te=="function"){d.callback=null,m=d.priorityLevel;var le=te(d.expirationTime<=I);if(I=r.unstable_now(),typeof le=="function"){d.callback=le,E(I),Z=!0;break t}d===t(c)&&n(c),E(I)}else n(c);d=t(c)}if(d!==null)Z=!0;else{var Q=t(u);Q!==null&&Y(A,Q.startTime-I),Z=!1}}break e}finally{d=null,m=W,v=!1}Z=void 0}}finally{Z?F():D=!1}}}var F;if(typeof T=="function")F=function(){T(R)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,X=H.port2;H.port1.onmessage=R,F=function(){X.postMessage(null)}}else F=function(){M(R,0)};function $(){D||(D=!0,F())}function Y(I,Z){N=M(function(){I(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(I){I.callback=null},r.unstable_continueExecution=function(){x||v||(x=!0,$())},r.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<I?Math.floor(1e3/I):5},r.unstable_getCurrentPriorityLevel=function(){return m},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(I){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var W=m;m=Z;try{return I()}finally{m=W}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(I,Z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var W=m;m=I;try{return Z()}finally{m=W}},r.unstable_scheduleCallback=function(I,Z,W){var te=r.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?te+W:te):W=te,I){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=W+le,I={id:h++,callback:Z,priorityLevel:I,startTime:W,expirationTime:le,sortIndex:-1},W>te?(I.sortIndex=W,e(u,I),t(c)===null&&I===t(u)&&(b?(_(N),N=-1):b=!0,Y(A,W-te))):(I.sortIndex=le,e(c,I),x||v||(x=!0,$())),I},r.unstable_shouldYield=C,r.unstable_wrapCallback=function(I){var Z=m;return function(){var W=m;m=Z;try{return I.apply(this,arguments)}finally{m=W}}}})(_A)),_A}var X4;function ML(){return X4||(X4=1,bA.exports=yme()),bA.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j4;function xme(){return j4||(j4=1,(function(r){r.exports=function(e){function t(p,g,w,U){return new Sg(p,g,w,U)}function n(){}function i(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(p){return p===null||typeof p!="object"?null:(p=Dg&&p[Dg]||p["@@iterator"],typeof p=="function"?p:null)}function s(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===_c?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case Nf:return"Fragment";case To:return"Portal";case Ng:return"Profiler";case Tg:return"StrictMode";case kp:return"Suspense";case Ru:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case tl:return(p.displayName||"Context")+".Provider";case Cu:return(p._context.displayName||"Context")+".Consumer";case Df:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case Jh:return g=p.displayName||null,g!==null?g:s(p.type)||"Memo";case No:g=p._payload,p=p._init;try{return s(p(g))}catch{}}return null}function o(p){if(Xp===void 0)try{throw Error()}catch(w){var g=w.stack.trim().match(/\n( *(at )?)/);Xp=g&&g[1]||"",Cg=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xp+p+Cg}function c(p,g){if(!p||Ou)return"";Ou=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var U={DetermineComponentFrameRoot:function(){try{if(g){var Bt=function(){throw Error()};if(Object.defineProperty(Bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Bt,[])}catch(xn){var Ft=xn}Reflect.construct(p,[],Bt)}else{try{Bt.call()}catch(xn){Ft=xn}p.call(Bt.prototype)}}else{try{throw Error()}catch(xn){Ft=xn}(Bt=p())&&typeof Bt.catch=="function"&&Bt.catch(function(){})}}catch(xn){if(xn&&Ft&&typeof xn.stack=="string")return[xn.stack,Ft.stack]}return[null,null]}};U.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(U.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(U.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=U.DetermineComponentFrameRoot(),me=j[0],Re=j[1];if(me&&Re){var je=me.split(`
`),vt=Re.split(`
`);for(P=U=0;U<je.length&&!je[U].includes("DetermineComponentFrameRoot");)U++;for(;P<vt.length&&!vt[P].includes("DetermineComponentFrameRoot");)P++;if(U===je.length||P===vt.length)for(U=je.length-1,P=vt.length-1;1<=U&&0<=P&&je[U]!==vt[P];)P--;for(;1<=U&&0<=P;U--,P--)if(je[U]!==vt[P]){if(U!==1||P!==1)do if(U--,P--,0>P||je[U]!==vt[P]){var At=`
`+je[U].replace(" at new "," at ");return p.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",p.displayName)),At}while(1<=U&&0<=P);break}}}finally{Ou=!1,Error.prepareStackTrace=w}return(w=p?p.displayName||p.name:"")?o(w):""}function u(p){switch(p.tag){case 26:case 27:case 5:return o(p.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return p=c(p.type,!1),p;case 11:return p=c(p.type.render,!1),p;case 1:return p=c(p.type,!0),p;default:return""}}function h(p){try{var g="";do g+=u(p),p=p.return;while(p);return g}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function d(p){var g=p,w=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,(g.flags&4098)!==0&&(w=g.return),p=g.return;while(p)}return g.tag===3?w:null}function m(p){if(d(p)!==p)throw Error(i(188))}function v(p){var g=p.alternate;if(!g){if(g=d(p),g===null)throw Error(i(188));return g!==p?null:p}for(var w=p,U=g;;){var P=w.return;if(P===null)break;var j=P.alternate;if(j===null){if(U=P.return,U!==null){w=U;continue}break}if(P.child===j.child){for(j=P.child;j;){if(j===w)return m(P),p;if(j===U)return m(P),g;j=j.sibling}throw Error(i(188))}if(w.return!==U.return)w=P,U=j;else{for(var me=!1,Re=P.child;Re;){if(Re===w){me=!0,w=P,U=j;break}if(Re===U){me=!0,U=P,w=j;break}Re=Re.sibling}if(!me){for(Re=j.child;Re;){if(Re===w){me=!0,w=j,U=P;break}if(Re===U){me=!0,U=j,w=P;break}Re=Re.sibling}if(!me)throw Error(i(189))}}if(w.alternate!==U)throw Error(i(190))}if(w.tag!==3)throw Error(i(188));return w.stateNode.current===w?p:g}function x(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(g=x(p),g!==null)return g;p=p.sibling}return null}function b(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(p.tag!==4&&(g=b(p),g!==null))return g;p=p.sibling}return null}function M(p){return{current:p}}function _(p){0>Xl||(p.current=ld[Xl],ld[Xl]=null,Xl--)}function T(p,g){Xl++,ld[Xl]=p.current,p.current=g}function E(p){return p>>>=0,p===0?32:31-(ud(p)/V1|0)|0}function A(p){var g=p&42;if(g!==0)return g;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function D(p,g){var w=p.pendingLanes;if(w===0)return 0;var U=0,P=p.suspendedLanes,j=p.pingedLanes,me=p.warmLanes;p=p.finishedLanes!==0;var Re=w&134217727;return Re!==0?(w=Re&~P,w!==0?U=A(w):(j&=Re,j!==0?U=A(j):p||(me=Re&~me,me!==0&&(U=A(me))))):(Re=w&~P,Re!==0?U=A(Re):j!==0?U=A(j):p||(me=w&~me,me!==0&&(U=A(me)))),U===0?0:g!==0&&g!==U&&(g&P)===0&&(P=U&-U,me=g&-g,P>=me||P===32&&(me&4194176)!==0)?g:U}function N(p,g){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&g)===0}function O(p,g){switch(p){case 1:case 2:case 4:case 8:return g+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z(){var p=Bf;return Bf<<=1,(Bf&4194176)===0&&(Bf=128),p}function C(){var p=cd;return cd<<=1,(cd&62914560)===0&&(cd=4194304),p}function R(p){for(var g=[],w=0;31>w;w++)g.push(p);return g}function F(p,g){p.pendingLanes|=g,g!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function H(p,g,w,U,P,j){var me=p.pendingLanes;p.pendingLanes=w,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=w,p.entangledLanes&=w,p.errorRecoveryDisabledLanes&=w,p.shellSuspendCounter=0;var Re=p.entanglements,je=p.expirationTimes,vt=p.hiddenUpdates;for(w=me&~w;0<w;){var At=31-ts(w),Bt=1<<At;Re[At]=0,je[At]=-1;var Ft=vt[At];if(Ft!==null)for(vt[At]=null,At=0;At<Ft.length;At++){var xn=Ft[At];xn!==null&&(xn.lane&=-536870913)}w&=~Bt}U!==0&&X(p,U,0),j!==0&&P===0&&p.tag!==0&&(p.suspendedLanes|=j&~(me&~g))}function X(p,g,w){p.pendingLanes|=g,p.suspendedLanes&=~g;var U=31-ts(g);p.entangledLanes|=g,p.entanglements[U]=p.entanglements[U]|1073741824|w&4194218}function $(p,g){var w=p.entangledLanes|=g;for(p=p.entanglements;w;){var U=31-ts(w),P=1<<U;P&g|p[U]&g&&(p[U]|=g),w&=~P}}function Y(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function I(p){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(zf,p,void 0,(p.current.flags&128)===128)}catch{}}function Z(p){if(typeof X1=="function"&&o0(p),ns&&typeof ns.setStrictMode=="function")try{ns.setStrictMode(zf,p)}catch{}}function W(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}function te(p,g){if(typeof p=="object"&&p!==null){var w=lm.get(p);return w!==void 0?w:(g={value:p,source:g,stack:h(g)},lm.set(p,g),g)}return{value:p,source:g,stack:h(g)}}function le(p,g){Jr[li++]=dd,Jr[li++]=hd,hd=p,dd=g}function Q(p,g,w){Us[zs++]=sl,Us[zs++]=no,Us[zs++]=Do,Do=p;var U=sl;p=no;var P=32-ts(U)-1;U&=~(1<<P),w+=1;var j=32-ts(g)+P;if(30<j){var me=P-P%5;j=(U&(1<<me)-1).toString(32),U>>=me,P-=me,sl=1<<32-ts(g)+P|w<<P|U,no=j+p}else sl=1<<j|w<<P|U,no=p}function k(p){p.return!==null&&(le(p,1),Q(p,1,0))}function ae(p){for(;p===hd;)hd=Jr[--li],Jr[li]=null,dd=Jr[--li],Jr[li]=null;for(;p===Do;)Do=Us[--zs],Us[zs]=null,no=Us[--zs],Us[zs]=null,sl=Us[--zs],Us[zs]=null}function J(p,g){T(Co,g),T(pd,p),T(Yi,null),p=Sc(g),_(Yi),T(Yi,p)}function De(){_(Yi),_(pd),_(Co)}function pe(p){p.memoizedState!==null&&T(Ff,p);var g=Yi.current,w=b1(g,p.type);g!==w&&(T(pd,p),T(Yi,w))}function _e(p){pd.current===p&&(_(Yi),_(pd)),Ff.current===p&&(_(Ff),rl?hn._currentValue=es:hn._currentValue2=es)}function ne(p){var g=Error(i(418,""));throw se(te(g,p)),md}function ue(p,g){if(!Fa)throw Error(i(175));TM(p.stateNode,p.type,p.memoizedProps,g,p)||ne(p)}function ge(p){for(ba=p.return;ba;)switch(ba.tag){case 3:case 27:ro=!0;return;case 5:case 13:ro=!1;return;default:ba=ba.return}}function Ae(p){if(!Fa||p!==ba)return!1;if(!ur)return ge(p),ur=!0,!1;var g=!1;if(na?p.tag!==3&&p.tag!==27&&(p.tag!==5||F1(p.type)&&!zu(p.type,p.memoizedProps))&&(g=!0):p.tag!==3&&(p.tag!==5||F1(p.type)&&!zu(p.type,p.memoizedProps))&&(g=!0),g&&ia&&ne(p),ge(p),p.tag===13){if(!Fa)throw Error(i(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));ia=U1(p)}else ia=ba?Wg(p.stateNode):null;return!0}function Te(){Fa&&(ia=ba=null,ur=!1)}function se(p){Fs===null?Fs=[p]:Fs.push(p)}function Me(){for(var p=Lu,g=Lf=Lu=0;g<p;){var w=Ls[g];Ls[g++]=null;var U=Ls[g];Ls[g++]=null;var P=Ls[g];Ls[g++]=null;var j=Ls[g];if(Ls[g++]=null,U!==null&&P!==null){var me=U.pending;me===null?P.next=P:(P.next=me.next,me.next=P),U.pending=P}j!==0&&Ye(w,P,j)}}function Be(p,g,w,U){Ls[Lu++]=p,Ls[Lu++]=g,Ls[Lu++]=w,Ls[Lu++]=U,Lf|=U,p.lanes|=U,p=p.alternate,p!==null&&(p.lanes|=U)}function Le(p,g,w,U){return Be(p,g,w,U),Ze(p)}function Pe(p,g){return Be(p,null,null,g),Ze(p)}function Ye(p,g,w){p.lanes|=w;var U=p.alternate;U!==null&&(U.lanes|=w);for(var P=!1,j=p.return;j!==null;)j.childLanes|=w,U=j.alternate,U!==null&&(U.childLanes|=w),j.tag===22&&(p=j.stateNode,p===null||p._visibility&1||(P=!0)),p=j,j=j.return;P&&g!==null&&p.tag===3&&(j=p.stateNode,P=31-ts(w),j=j.hiddenUpdates,p=j[P],p===null?j[P]=[g]:p.push(g),g.lane=w|536870912)}function Ze(p){if(50<Bc)throw Bc=0,Pa=null,Error(i(185));for(var g=p.return;g!==null;)p=g,g=p.return;return p.tag===3?p.stateNode:null}function re(p){p!==wc&&p.next===null&&(wc===null?If=wc=p:wc=wc.next=p),gd=!0,vd||(vd=!0,fe(Ce))}function be(p,g){if(!Ro&&gd){Ro=!0;do for(var w=!1,U=If;U!==null;){if(p!==0){var P=U.pendingLanes;if(P===0)var j=0;else{var me=U.suspendedLanes,Re=U.pingedLanes;j=(1<<31-ts(42|p)+1)-1,j&=P&~(me&~Re),j=j&201326677?j&201326677|1:j?j|2:0}j!==0&&(w=!0,ie(U,j))}else j=Pn,j=D(U,U===qn?j:0),(j&3)===0||N(U,j)||(w=!0,ie(U,j));U=U.next}while(w);Ro=!1}}function Ce(){gd=vd=!1;var p=0;Iu!==0&&(Fu()&&(p=Iu),Iu=0);for(var g=ra(),w=null,U=If;U!==null;){var P=U.next,j=q(U,g);j===0?(U.next=null,w===null?If=P:w.next=P,P===null&&(wc=w)):(w=U,(p!==0||(j&3)!==0)&&(gd=!0)),U=P}be(p)}function q(p,g){for(var w=p.suspendedLanes,U=p.pingedLanes,P=p.expirationTimes,j=p.pendingLanes&-62914561;0<j;){var me=31-ts(j),Re=1<<me,je=P[me];je===-1?((Re&w)===0||(Re&U)!==0)&&(P[me]=O(Re,g)):je<=g&&(p.expiredLanes|=Re),j&=~Re}if(g=qn,w=Pn,w=D(p,p===g?w:0),U=p.callbackNode,w===0||p===g&&Br===2||p.cancelPendingCommit!==null)return U!==null&&U!==null&&fd(U),p.callbackNode=null,p.callbackPriority=0;if((w&3)===0||N(p,w)){if(g=w&-w,g===p.callbackPriority)return g;switch(U!==null&&fd(U),Y(w)){case 2:case 8:w=k1;break;case 32:w=sm;break;case 268435456:w=om;break;default:w=sm}return U=V.bind(null,p),w=Uf(w,U),p.callbackPriority=g,p.callbackNode=w,g}return U!==null&&U!==null&&fd(U),p.callbackPriority=2,p.callbackNode=null,2}function V(p,g){var w=p.callbackNode;if(Xi()&&p.callbackNode!==w)return null;var U=Pn;return U=D(p,p===qn?U:0),U===0?null:(Wh(p,U,g),q(p,ra()),p.callbackNode!=null&&p.callbackNode===w?V.bind(null,p):null)}function ie(p,g){if(Xi())return null;Wh(p,g,!0)}function fe(p){Mi?$p(function(){(Kt&6)!==0?Uf(s0,p):p()}):Uf(s0,p)}function Se(){return Iu===0&&(Iu=z()),Iu}function ve(p,g){if(yd===null){var w=yd=[];um=0,rs=Se(),Pu={status:"pending",value:void 0,then:function(U){w.push(U)}}}return um++,g.then(qe,qe),g}function qe(){if(--um===0&&yd!==null){Pu!==null&&(Pu.status="fulfilled");var p=yd;yd=null,rs=0,Pu=null;for(var g=0;g<p.length;g++)(0,p[g])()}}function Fe(p,g){var w=[],U={status:"pending",value:null,reason:null,then:function(P){w.push(P)}};return p.then(function(){U.status="fulfilled",U.value=g;for(var P=0;P<w.length;P++)(0,w[P])(g)},function(P){for(U.status="rejected",U.reason=P,P=0;P<w.length;P++)(0,w[P])(void 0)}),U}function We(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ge(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function rt(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function ot(p,g,w){var U=p.updateQueue;if(U===null)return null;if(U=U.shared,(Kt&2)!==0){var P=U.pending;return P===null?g.next=g:(g.next=P.next,P.next=g),U.pending=g,g=Ze(p),Ye(p,null,w),g}return Be(p,U,g,w),Ze(p)}function St(p,g,w){if(g=g.updateQueue,g!==null&&(g=g.shared,(w&4194176)!==0)){var U=g.lanes;U&=p.pendingLanes,w|=U,g.lanes=w,$(p,w)}}function ye(p,g){var w=p.updateQueue,U=p.alternate;if(U!==null&&(U=U.updateQueue,w===U)){var P=null,j=null;if(w=w.firstBaseUpdate,w!==null){do{var me={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};j===null?P=j=me:j=j.next=me,w=w.next}while(w!==null);j===null?P=j=g:j=j.next=g}else P=j=g;w={baseState:U.baseState,firstBaseUpdate:P,lastBaseUpdate:j,shared:U.shared,callbacks:U.callbacks},p.updateQueue=w;return}p=w.lastBaseUpdate,p===null?w.firstBaseUpdate=g:p.next=g,w.lastBaseUpdate=g}function Ve(){if(Pf){var p=Pu;if(p!==null)throw p}}function G(p,g,w,U){Pf=!1;var P=p.updateQueue;jl=!1;var j=P.firstBaseUpdate,me=P.lastBaseUpdate,Re=P.shared.pending;if(Re!==null){P.shared.pending=null;var je=Re,vt=je.next;je.next=null,me===null?j=vt:me.next=vt,me=je;var At=p.alternate;At!==null&&(At=At.updateQueue,Re=At.lastBaseUpdate,Re!==me&&(Re===null?At.firstBaseUpdate=vt:Re.next=vt,At.lastBaseUpdate=je))}if(j!==null){var Bt=P.baseState;me=0,At=vt=je=null,Re=j;do{var Ft=Re.lane&-536870913,xn=Ft!==Re.lane;if(xn?(Pn&Ft)===Ft:(U&Ft)===Ft){Ft!==0&&Ft===rs&&(Pf=!0),At!==null&&(At=At.next={lane:0,tag:Re.tag,payload:Re.payload,callback:null,next:null});e:{var os=p,Sd=Re;Ft=g;var Uc=w;switch(Sd.tag){case 1:if(os=Sd.payload,typeof os=="function"){Bt=os.call(Uc,Bt,Ft);break e}Bt=os;break e;case 3:os.flags=os.flags&-65537|128;case 0:if(os=Sd.payload,Ft=typeof os=="function"?os.call(Uc,Bt,Ft):os,Ft==null)break e;Bt=bc({},Bt,Ft);break e;case 2:jl=!0}}Ft=Re.callback,Ft!==null&&(p.flags|=64,xn&&(p.flags|=8192),xn=P.callbacks,xn===null?P.callbacks=[Ft]:xn.push(Ft))}else xn={lane:Ft,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null},At===null?(vt=At=xn,je=Bt):At=At.next=xn,me|=Ft;if(Re=Re.next,Re===null){if(Re=P.shared.pending,Re===null)break;xn=Re,Re=xn.next,xn.next=null,P.lastBaseUpdate=xn,P.shared.pending=null}}while(!0);At===null&&(je=Bt),P.baseState=je,P.firstBaseUpdate=vt,P.lastBaseUpdate=At,j===null&&(P.shared.lanes=0),Vs|=me,p.lanes=me,p.memoizedState=Bt}}function ee(p,g){if(typeof p!="function")throw Error(i(191,p));p.call(g)}function Ee(p,g){var w=p.callbacks;if(w!==null)for(p.callbacks=null,p=0;p<w.length;p++)ee(w[p],g)}function ze(p,g){if(Bs(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var w=Object.keys(p),U=Object.keys(g);if(w.length!==U.length)return!1;for(U=0;U<w.length;U++){var P=w[U];if(!xd.call(g,P)||!Bs(p[P],g[P]))return!1}return!0}function ft(p){return p=p.status,p==="fulfilled"||p==="rejected"}function it(){}function ct(p,g,w){switch(w=p[w],w===void 0?p.push(g):w!==g&&(g.then(it,it),g=w),g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,p===Nr?Error(i(483)):p;default:if(typeof g.status=="string")g.then(it,it);else{if(p=qn,p!==null&&100<p.shellSuspendCounter)throw Error(i(482));p=g,p.status="pending",p.then(function(U){if(g.status==="pending"){var P=g;P.status="fulfilled",P.value=U}},function(U){if(g.status==="pending"){var P=g;P.status="rejected",P.reason=U}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,p===Nr?Error(i(483)):p}throw Tc=g,Nr}}function Nt(){if(Tc===null)throw Error(i(459));var p=Tc;return Tc=null,p}function It(p){var g=io;return io+=1,ol===null&&(ol=[]),ct(ol,p,g)}function yn(p,g){g=g.props.ref,p.ref=g!==void 0?g:null}function on(p,g){throw g.$$typeof===wg?Error(i(525)):(p=Object.prototype.toString.call(g),Error(i(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p)))}function Dr(p){var g=p._init;return g(p._payload)}function ni(p){function g(et,ke){if(p){var st=et.deletions;st===null?(et.deletions=[ke],et.flags|=16):st.push(ke)}}function w(et,ke){if(!p)return null;for(;ke!==null;)g(et,ke),ke=ke.sibling;return null}function U(et){for(var ke=new Map;et!==null;)et.key!==null?ke.set(et.key,et):ke.set(et.index,et),et=et.sibling;return ke}function P(et,ke){return et=ya(et,ke),et.index=0,et.sibling=null,et}function j(et,ke,st){return et.index=st,p?(st=et.alternate,st!==null?(st=st.index,st<ke?(et.flags|=33554434,ke):st):(et.flags|=33554434,ke)):(et.flags|=1048576,ke)}function me(et){return p&&et.alternate===null&&(et.flags|=33554434),et}function Re(et,ke,st,Mt){return ke===null||ke.tag!==6?(ke=Du(st,et.mode,Mt),ke.return=et,ke):(ke=P(ke,st),ke.return=et,ke)}function je(et,ke,st,Mt){var Wt=st.type;return Wt===Nf?At(et,ke,st.props.children,Mt,st.key):ke!==null&&(ke.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===No&&Dr(Wt)===ke.type)?(ke=P(ke,st.props),yn(ke,st),ke.return=et,ke):(ke=eo(st.type,st.key,st.props,null,et.mode,Mt),yn(ke,st),ke.return=et,ke)}function vt(et,ke,st,Mt){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==st.containerInfo||ke.stateNode.implementation!==st.implementation?(ke=Tf(st,et.mode,Mt),ke.return=et,ke):(ke=P(ke,st.children||[]),ke.return=et,ke)}function At(et,ke,st,Mt,Wt){return ke===null||ke.tag!==7?(ke=Hl(st,et.mode,Mt,Wt),ke.return=et,ke):(ke=P(ke,st),ke.return=et,ke)}function Bt(et,ke,st){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return ke=Du(""+ke,et.mode,st),ke.return=et,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case Vl:return st=eo(ke.type,ke.key,ke.props,null,et.mode,st),yn(st,ke),st.return=et,st;case To:return ke=Tf(ke,et.mode,st),ke.return=et,ke;case No:var Mt=ke._init;return ke=Mt(ke._payload),Bt(et,ke,st)}if(Bu(ke)||a(ke))return ke=Hl(ke,et.mode,st,null),ke.return=et,ke;if(typeof ke.then=="function")return Bt(et,It(ke),st);if(ke.$$typeof===tl)return Bt(et,Gh(et,ke),st);on(et,ke)}return null}function Ft(et,ke,st,Mt){var Wt=ke!==null?ke.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Wt!==null?null:Re(et,ke,""+st,Mt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case Vl:return st.key===Wt?je(et,ke,st,Mt):null;case To:return st.key===Wt?vt(et,ke,st,Mt):null;case No:return Wt=st._init,st=Wt(st._payload),Ft(et,ke,st,Mt)}if(Bu(st)||a(st))return Wt!==null?null:At(et,ke,st,Mt,null);if(typeof st.then=="function")return Ft(et,ke,It(st),Mt);if(st.$$typeof===tl)return Ft(et,ke,Gh(et,st),Mt);on(et,st)}return null}function xn(et,ke,st,Mt,Wt){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return et=et.get(st)||null,Re(ke,et,""+Mt,Wt);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case Vl:return et=et.get(Mt.key===null?st:Mt.key)||null,je(ke,et,Mt,Wt);case To:return et=et.get(Mt.key===null?st:Mt.key)||null,vt(ke,et,Mt,Wt);case No:var kr=Mt._init;return Mt=kr(Mt._payload),xn(et,ke,st,Mt,Wt)}if(Bu(Mt)||a(Mt))return et=et.get(st)||null,At(ke,et,Mt,Wt,null);if(typeof Mt.then=="function")return xn(et,ke,st,It(Mt),Wt);if(Mt.$$typeof===tl)return xn(et,ke,st,Gh(ke,Mt),Wt);on(ke,Mt)}return null}function os(et,ke,st,Mt){for(var Wt=null,kr=null,dn=ke,fr=ke=0,Li=null;dn!==null&&fr<st.length;fr++){dn.index>fr?(Li=dn,dn=null):Li=dn.sibling;var hr=Ft(et,dn,st[fr],Mt);if(hr===null){dn===null&&(dn=Li);break}p&&dn&&hr.alternate===null&&g(et,dn),ke=j(hr,ke,fr),kr===null?Wt=hr:kr.sibling=hr,kr=hr,dn=Li}if(fr===st.length)return w(et,dn),ur&&le(et,fr),Wt;if(dn===null){for(;fr<st.length;fr++)dn=Bt(et,st[fr],Mt),dn!==null&&(ke=j(dn,ke,fr),kr===null?Wt=dn:kr.sibling=dn,kr=dn);return ur&&le(et,fr),Wt}for(dn=U(dn);fr<st.length;fr++)Li=xn(dn,et,fr,st[fr],Mt),Li!==null&&(p&&Li.alternate!==null&&dn.delete(Li.key===null?fr:Li.key),ke=j(Li,ke,fr),kr===null?Wt=Li:kr.sibling=Li,kr=Li);return p&&dn.forEach(function(Jl){return g(et,Jl)}),ur&&le(et,fr),Wt}function Sd(et,ke,st,Mt){if(st==null)throw Error(i(151));for(var Wt=null,kr=null,dn=ke,fr=ke=0,Li=null,hr=st.next();dn!==null&&!hr.done;fr++,hr=st.next()){dn.index>fr?(Li=dn,dn=null):Li=dn.sibling;var Jl=Ft(et,dn,hr.value,Mt);if(Jl===null){dn===null&&(dn=Li);break}p&&dn&&Jl.alternate===null&&g(et,dn),ke=j(Jl,ke,fr),kr===null?Wt=Jl:kr.sibling=Jl,kr=Jl,dn=Li}if(hr.done)return w(et,dn),ur&&le(et,fr),Wt;if(dn===null){for(;!hr.done;fr++,hr=st.next())hr=Bt(et,hr.value,Mt),hr!==null&&(ke=j(hr,ke,fr),kr===null?Wt=hr:kr.sibling=hr,kr=hr);return ur&&le(et,fr),Wt}for(dn=U(dn);!hr.done;fr++,hr=st.next())hr=xn(dn,et,fr,hr.value,Mt),hr!==null&&(p&&hr.alternate!==null&&dn.delete(hr.key===null?fr:hr.key),ke=j(hr,ke,fr),kr===null?Wt=hr:kr.sibling=hr,kr=hr);return p&&dn.forEach(function(ym){return g(et,ym)}),ur&&le(et,fr),Wt}function Uc(et,ke,st,Mt){if(typeof st=="object"&&st!==null&&st.type===Nf&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case Vl:e:{for(var Wt=st.key;ke!==null;){if(ke.key===Wt){if(Wt=st.type,Wt===Nf){if(ke.tag===7){w(et,ke.sibling),Mt=P(ke,st.props.children),Mt.return=et,et=Mt;break e}}else if(ke.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===No&&Dr(Wt)===ke.type){w(et,ke.sibling),Mt=P(ke,st.props),yn(Mt,st),Mt.return=et,et=Mt;break e}w(et,ke);break}else g(et,ke);ke=ke.sibling}st.type===Nf?(Mt=Hl(st.props.children,et.mode,Mt,st.key),Mt.return=et,et=Mt):(Mt=eo(st.type,st.key,st.props,null,et.mode,Mt),yn(Mt,st),Mt.return=et,et=Mt)}return me(et);case To:e:{for(Wt=st.key;ke!==null;){if(ke.key===Wt)if(ke.tag===4&&ke.stateNode.containerInfo===st.containerInfo&&ke.stateNode.implementation===st.implementation){w(et,ke.sibling),Mt=P(ke,st.children||[]),Mt.return=et,et=Mt;break e}else{w(et,ke);break}else g(et,ke);ke=ke.sibling}Mt=Tf(st,et.mode,Mt),Mt.return=et,et=Mt}return me(et);case No:return Wt=st._init,st=Wt(st._payload),Uc(et,ke,st,Mt)}if(Bu(st))return os(et,ke,st,Mt);if(a(st)){if(Wt=a(st),typeof Wt!="function")throw Error(i(150));return st=Wt.call(st),Sd(et,ke,st,Mt)}if(typeof st.then=="function")return Uc(et,ke,It(st),Mt);if(st.$$typeof===tl)return Uc(et,ke,Gh(et,st),Mt);on(et,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,ke!==null&&ke.tag===6?(w(et,ke.sibling),Mt=P(ke,st),Mt.return=et,et=Mt):(w(et,ke),Mt=Du(st,et.mode,Mt),Mt.return=et,et=Mt),me(et)):w(et,ke)}return function(et,ke,st,Mt){try{io=0;var Wt=Uc(et,ke,st,Mt);return ol=null,Wt}catch(dn){if(dn===Nr)throw dn;var kr=t(29,dn,null,et.mode);return kr.lanes=Mt,kr.return=et,kr}finally{}}}function Es(p,g){p=Oo,T(Is,p),T(ll,g),Oo=p|g.baseLanes}function _i(){T(Is,Oo),T(ll,ll.current)}function Ci(){Oo=Is.current,_(ll),_(Is)}function Ri(p){var g=p.alternate;T(Ei,Ei.current&1),T(Ps,p),ao===null&&(g===null||ll.current!==null||g.memoizedState!==null)&&(ao=p)}function Wa(p){if(p.tag===22){if(T(Ei,Ei.current),T(Ps,p),ao===null){var g=p.alternate;g!==null&&g.memoizedState!==null&&(ao=p)}}else ht()}function ht(){T(Ei,Ei.current),T(Ps,Ps.current)}function ln(p){_(Ps),ao===p&&(ao=null),_(Ei)}function qr(p){for(var g=p;g!==null;){if(g.tag===13){var w=g.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||em(w)||od(w)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function tn(){throw Error(i(321))}function zr(p,g){if(g===null)return!1;for(var w=0;w<g.length&&w<p.length;w++)if(!Bs(p[w],g[w]))return!1;return!0}function $a(p,g,w,U,P,j){return ul=j,Rn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,an.H=p===null||p.memoizedState===null?Ai:_a,Yl=!1,j=w(U,P),Yl=!1,ei&&(j=pu(g,w,U,P)),Yo(p),j}function Yo(p){an.H=cr;var g=gr!==null&&gr.next!==null;if(ul=0,mi=gr=Rn=null,so=!1,ui=0,Hf=null,g)throw Error(i(300));p===null||vi||(p=p.dependencies,p!==null&&yu(p)&&(vi=!0))}function pu(p,g,w,U){Rn=p;var P=0;do{if(ei&&(Hf=null),ui=0,ei=!1,25<=P)throw Error(i(301));if(P+=1,mi=gr=null,p.updateQueue!=null){var j=p.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}an.H=Vu,j=g(w,U)}while(ei);return j}function Dl(){var p=an.H,g=p.useState()[0];return g=typeof g.then=="function"?Qe(g):g,p=p.useState()[0],(gr!==null?gr.memoizedState:null)!==p&&(Rn.flags|=1024),g}function As(){var p=bd!==0;return bd=0,p}function Zi(p,g,w){g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~w}function he(p){if(so){for(p=p.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}so=!1}ul=0,mi=gr=Rn=null,ei=!1,ui=bd=0,Hf=null}function He(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?Rn.memoizedState=mi=p:mi=mi.next=p,mi}function $e(){if(gr===null){var p=Rn.alternate;p=p!==null?p.memoizedState:null}else p=gr.next;var g=mi===null?Rn.memoizedState:mi.next;if(g!==null)mi=g,gr=p;else{if(p===null)throw Rn.alternate===null?Error(i(467)):Error(i(310));gr=p,p={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},mi===null?Rn.memoizedState=mi=p:mi=mi.next=p}return mi}function Qe(p){var g=ui;return ui+=1,Hf===null&&(Hf=[]),p=ct(Hf,p,g),g=Rn,(mi===null?g.memoizedState:mi.next)===null&&(g=g.alternate,an.H=g===null||g.memoizedState===null?Ai:_a),p}function Ne(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Qe(p);if(p.$$typeof===tl)return Ji(p)}throw Error(i(438,String(p)))}function ut(p){var g=null,w=Rn.updateQueue;if(w!==null&&(g=w.memoCache),g==null){var U=Rn.alternate;U!==null&&(U=U.updateQueue,U!==null&&(U=U.memoCache,U!=null&&(g={data:U.data.map(function(P){return P.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),w===null&&(w=fm(),Rn.updateQueue=w),w.memoCache=g,w=g.data[g.index],w===void 0)for(w=g.data[g.index]=Array(p),U=0;U<p;U++)w[U]=x1;return g.index++,w}function wt(p,g){return typeof g=="function"?g(p):g}function Ot(p){var g=$e();return Tt(g,gr,p)}function Tt(p,g,w){var U=p.queue;if(U===null)throw Error(i(311));U.lastRenderedReducer=w;var P=p.baseQueue,j=U.pending;if(j!==null){if(P!==null){var me=P.next;P.next=j.next,j.next=me}g.baseQueue=P=j,U.pending=null}if(j=p.baseState,P===null)p.memoizedState=j;else{g=P.next;var Re=me=null,je=null,vt=g,At=!1;do{var Bt=vt.lane&-536870913;if(Bt!==vt.lane?(Pn&Bt)===Bt:(ul&Bt)===Bt){var Ft=vt.revertLane;if(Ft===0)je!==null&&(je=je.next={lane:0,revertLane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),Bt===rs&&(At=!0);else if((ul&Ft)===Ft){vt=vt.next,Ft===rs&&(At=!0);continue}else Bt={lane:0,revertLane:vt.revertLane,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},je===null?(Re=je=Bt,me=j):je=je.next=Bt,Rn.lanes|=Ft,Vs|=Ft;Bt=vt.action,Yl&&w(j,Bt),j=vt.hasEagerState?vt.eagerState:w(j,Bt)}else Ft={lane:Bt,revertLane:vt.revertLane,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null},je===null?(Re=je=Ft,me=j):je=je.next=Ft,Rn.lanes|=Bt,Vs|=Bt;vt=vt.next}while(vt!==null&&vt!==g);if(je===null?me=j:je.next=Re,!Bs(j,p.memoizedState)&&(vi=!0,At&&(w=Pu,w!==null)))throw w;p.memoizedState=j,p.baseState=me,p.baseQueue=je,U.lastRenderedState=j}return P===null&&(U.lanes=0),[p.memoizedState,U.dispatch]}function Lt(p){var g=$e(),w=g.queue;if(w===null)throw Error(i(311));w.lastRenderedReducer=p;var U=w.dispatch,P=w.pending,j=g.memoizedState;if(P!==null){w.pending=null;var me=P=P.next;do j=p(j,me.action),me=me.next;while(me!==P);Bs(j,g.memoizedState)||(vi=!0),g.memoizedState=j,g.baseQueue===null&&(g.baseState=j),w.lastRenderedState=j}return[j,U]}function Vt(p,g,w){var U=Rn,P=$e(),j=ur;if(j){if(w===void 0)throw Error(i(407));w=w()}else w=g();var me=!Bs((gr||P).memoizedState,w);if(me&&(P.memoizedState=w,vi=!0),P=P.queue,Oi(Jn.bind(null,U,P,p),[p]),P.getSnapshot!==g||me||mi!==null&&mi.memoizedState.tag&1){if(U.flags|=2048,er(9,mn.bind(null,U,P,w,g),{destroy:void 0},null),qn===null)throw Error(i(349));j||(ul&60)!==0||qt(U,g,w)}return w}function qt(p,g,w){p.flags|=16384,p={getSnapshot:g,value:w},g=Rn.updateQueue,g===null?(g=fm(),Rn.updateQueue=g,g.stores=[p]):(w=g.stores,w===null?g.stores=[p]:w.push(p))}function mn(p,g,w,U){g.value=w,g.getSnapshot=U,$n(g)&&sr(p)}function Jn(p,g,w){return w(function(){$n(g)&&sr(p)})}function $n(p){var g=p.getSnapshot;p=p.value;try{var w=g();return!Bs(p,w)}catch{return!0}}function sr(p){var g=Pe(p,2);g!==null&&ga(g,p,2)}function Cn(p){var g=He();if(typeof p=="function"){var w=p;if(p=w(),Yl){Z(!0);try{w()}finally{Z(!1)}}}return g.memoizedState=g.baseState=p,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wt,lastRenderedState:p},g}function Ut(p,g,w,U){return p.baseState=w,Tt(p,gr,typeof U=="function"?U:wt)}function Cr(p,g,w,U,P){if(mu(p))throw Error(i(485));if(p=g.action,p!==null){var j={payload:P,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(me){j.listeners.push(me)}};an.T!==null?w(!0):j.isTransition=!1,U(j),w=g.pending,w===null?(j.next=g.pending=j,kn(g,j)):(j.next=w.next,g.pending=w.next=j)}}function kn(p,g){var w=g.action,U=g.payload,P=p.state;if(g.isTransition){var j=an.T,me={};an.T=me;try{var Re=w(P,U),je=an.S;je!==null&&je(me,Re),wr(p,g,Re)}catch(vt){ai(p,g,vt)}finally{an.T=j}}else try{j=w(P,U),wr(p,g,j)}catch(vt){ai(p,g,vt)}}function wr(p,g,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(U){Ki(p,g,U)},function(U){return ai(p,g,U)}):Ki(p,g,w)}function Ki(p,g,w){g.status="fulfilled",g.value=w,at(g),p.state=w,g=p.pending,g!==null&&(w=g.next,w===g?p.pending=null:(w=w.next,g.next=w,kn(p,w)))}function ai(p,g,w){var U=p.pending;if(p.pending=null,U!==null){U=U.next;do g.status="rejected",g.reason=w,at(g),g=g.next;while(g!==U)}p.action=null}function at(p){p=p.listeners;for(var g=0;g<p.length;g++)(0,p[g])()}function tt(p,g){return g}function Dt(p,g){if(ur){var w=qn.formState;if(w!==null){e:{var U=Rn;if(ur){if(ia){var P=w1(ia,ro);if(P){ia=Wg(P),U=T1(P);break e}}ne(U)}U=!1}U&&(g=w[0])}}w=He(),w.memoizedState=w.baseState=g,U={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tt,lastRenderedState:g},w.queue=U,w=Fh.bind(null,Rn,U),U.dispatch=w,U=Cn(!1);var j=Lh.bind(null,Rn,!1,U.queue);return U=He(),P={state:g,dispatch:null,action:p,pending:null},U.queue=P,w=Cr.bind(null,Rn,P,j,w),P.dispatch=w,U.memoizedState=p,[g,w,!1]}function Yt(p){var g=$e();return nn(g,gr,p)}function nn(p,g,w){g=Tt(p,g,tt)[0],p=Ot(wt)[0],g=typeof g=="object"&&g!==null&&typeof g.then=="function"?Qe(g):g;var U=$e(),P=U.queue,j=P.dispatch;return w!==U.memoizedState&&(Rn.flags|=2048,er(9,An.bind(null,P,w),{destroy:void 0},null)),[g,j,p]}function An(p,g){p.action=g}function Rr(p){var g=$e(),w=gr;if(w!==null)return nn(g,w,p);$e(),g=g.memoizedState,w=$e();var U=w.queue.dispatch;return w.memoizedState=p,[g,U,!1]}function er(p,g,w,U){return p={tag:p,create:g,inst:w,deps:U,next:null},g=Rn.updateQueue,g===null&&(g=fm(),Rn.updateQueue=g),w=g.lastEffect,w===null?g.lastEffect=p.next=p:(U=w.next,w.next=p,p.next=U,g.lastEffect=p),p}function Gt(){return $e().memoizedState}function or(p,g,w,U){var P=He();Rn.flags|=p,P.memoizedState=er(1|g,w,{destroy:void 0},U===void 0?null:U)}function vn(p,g,w,U){var P=$e();U=U===void 0?null:U;var j=P.memoizedState.inst;gr!==null&&U!==null&&zr(U,gr.memoizedState.deps)?P.memoizedState=er(g,w,j,U):(Rn.flags|=p,P.memoizedState=er(1|g,w,j,U))}function Za(p,g){or(8390656,8,p,g)}function Oi(p,g){vn(2048,8,p,g)}function tr(p,g){return vn(4,2,p,g)}function Bi(p,g){return vn(4,4,p,g)}function Tr(p,g){if(typeof g=="function"){p=p();var w=g(p);return function(){typeof w=="function"?w():g(null)}}if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function lr(p,g,w){w=w!=null?w.concat([p]):null,vn(4,4,Tr.bind(null,g,p),w)}function ws(){}function bo(p,g){var w=$e();g=g===void 0?null:g;var U=w.memoizedState;return g!==null&&zr(g,U[1])?U[0]:(w.memoizedState=[p,g],p)}function Ra(p,g){var w=$e();g=g===void 0?null:g;var U=w.memoizedState;if(g!==null&&zr(g,U[1]))return U[0];if(U=p(),Yl){Z(!0);try{p()}finally{Z(!1)}}return w.memoizedState=[U,g],U}function _o(p,g,w){return w===void 0||(ul&1073741824)!==0?p.memoizedState=g:(p.memoizedState=w,p=Ko(),Rn.lanes|=p,Vs|=p,w)}function hf(p,g,w,U){return Bs(w,g)?w:ll.current!==null?(p=_o(p,w,U),Bs(p,g)||(vi=!0),p):(ul&42)===0?(vi=!0,p.memoizedState=w):(p=Ko(),Rn.lanes|=p,Vs|=p,g)}function Oa(p,g,w,U,P){var j=zi();xa(j!==0&&8>j?j:8);var me=an.T,Re={};an.T=Re,Lh(p,!1,g,w);try{var je=P(),vt=an.S;if(vt!==null&&vt(Re,je),je!==null&&typeof je=="object"&&typeof je.then=="function"){var At=Fe(je,U);Mo(p,g,At,za(p))}else Mo(p,g,U,za(p))}catch(Bt){Mo(p,g,{then:function(){},status:"rejected",reason:Bt},za())}finally{xa(j),an.T=me}}function Wo(p){var g=p.memoizedState;if(g!==null)return g;g={memoizedState:es,baseState:es,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wt,lastRenderedState:es},next:null};var w={};return g.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wt,lastRenderedState:w},next:null},p.memoizedState=g,p=p.alternate,p!==null&&(p.memoizedState=g),g}function Cl(){return Ji(hn)}function Zr(){return $e().memoizedState}function Si(){return $e().memoizedState}function $o(p){for(var g=p.return;g!==null;){switch(g.tag){case 24:case 3:var w=za();p=rt(w);var U=ot(g,p,w);U!==null&&(ga(U,g,w),St(U,g,w)),g={cache:Np()},p.payload=g;return}g=g.return}}function So(p,g,w){var U=za();w={lane:U,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null},mu(p)?ma(g,w):(w=Le(p,g,w,U),w!==null&&(ga(w,p,U),Rl(w,g,U)))}function Fh(p,g,w){var U=za();Mo(p,g,w,U)}function Mo(p,g,w,U){var P={lane:U,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null};if(mu(p))ma(g,P);else{var j=p.alternate;if(p.lanes===0&&(j===null||j.lanes===0)&&(j=g.lastRenderedReducer,j!==null))try{var me=g.lastRenderedState,Re=j(me,w);if(P.hasEagerState=!0,P.eagerState=Re,Bs(Re,me))return Be(p,g,P,0),qn===null&&Me(),!1}catch{}finally{}if(w=Le(p,g,P,U),w!==null)return ga(w,p,U),Rl(w,g,U),!0}return!1}function Lh(p,g,w,U){if(U={lane:2,revertLane:Se(),action:U,hasEagerState:!1,eagerState:null,next:null},mu(p)){if(g)throw Error(i(479))}else g=Le(p,w,U,2),g!==null&&ga(g,p,2)}function mu(p){var g=p.alternate;return p===Rn||g!==null&&g===Rn}function ma(p,g){ei=so=!0;var w=p.pending;w===null?g.next=g:(g.next=w.next,w.next=g),p.pending=g}function Rl(p,g,w){if((w&4194176)!==0){var U=g.lanes;U&=p.pendingLanes,w|=U,g.lanes=w,$(p,w)}}function Ui(p,g,w,U){g=p.memoizedState,w=w(U,g),w=w==null?g:bc({},g,w),p.memoizedState=w,p.lanes===0&&(p.updateQueue.baseState=w)}function vu(p,g,w,U,P,j,me){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(U,j,me):g.prototype&&g.prototype.isPureReactComponent?!ze(w,U)||!ze(P,j):!0}function Ih(p,g,w,U){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(w,U),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(w,U),g.state!==p&&hm.enqueueReplaceState(g,g.state,null)}function Eo(p,g){var w=g;if("ref"in g){w={};for(var U in g)U!=="ref"&&(w[U]=g[U])}if(p=p.defaultProps){w===g&&(w=bc({},w));for(var P in p)w[P]===void 0&&(w[P]=p[P])}return w}function Ep(p,g){try{var w=p.onUncaughtError;w(g.value,{componentStack:g.stack})}catch(U){setTimeout(function(){throw U})}}function Ap(p,g,w){try{var U=p.onCaughtError;U(w.value,{componentStack:w.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function Ph(p,g,w){return w=rt(w),w.tag=3,w.payload={element:null},w.callback=function(){Ep(p,g)},w}function df(p){return p=rt(p),p.tag=3,p}function Hh(p,g,w,U){var P=w.type.getDerivedStateFromError;if(typeof P=="function"){var j=U.value;p.payload=function(){return P(j)},p.callback=function(){Ap(g,w,U)}}var me=w.stateNode;me!==null&&typeof me.componentDidCatch=="function"&&(p.callback=function(){Ap(g,w,U),typeof P!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var Re=U.stack;this.componentDidCatch(U.value,{componentStack:Re!==null?Re:""})})}function Zy(p,g,w,U,P){if(w.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){if(g=w.alternate,g!==null&&fc(g,w,P,!0),w=Ps.current,w!==null){switch(w.tag){case 13:return ao===null?Ja():w.alternate===null&&rr===0&&(rr=3),w.flags&=-257,w.flags|=65536,w.lanes=P,U===cm?w.flags|=16384:(g=w.updateQueue,g===null?w.updateQueue=new Set([U]):g.add(U),qp(p,U,P)),!1;case 22:return w.flags|=65536,U===cm?w.flags|=16384:(g=w.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([U])},w.updateQueue=g):(w=g.retryQueue,w===null?g.retryQueue=new Set([U]):w.add(U)),qp(p,U,P)),!1}throw Error(i(435,w.tag))}return qp(p,U,P),Ja(),!1}if(ur)return g=Ps.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=P,U!==md&&(p=Error(i(422),{cause:U}),se(te(p,w)))):(U!==md&&(g=Error(i(423),{cause:U}),se(te(g,w))),p=p.current.alternate,p.flags|=65536,P&=-P,p.lanes|=P,U=te(U,w),P=Ph(p.stateNode,U,P),ye(p,P),rr!==4&&(rr=2)),!1;var j=Error(i(520),{cause:U});if(j=te(j,w),qf===null?qf=[j]:qf.push(j),rr!==4&&(rr=2),g===null)return!0;U=te(U,w),w=g;do{switch(w.tag){case 3:return w.flags|=65536,p=P&-P,w.lanes|=p,p=Ph(w.stateNode,U,p),ye(w,p),!1;case 1:if(g=w.type,j=w.stateNode,(w.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Gs===null||!Gs.has(j))))return w.flags|=65536,P&=-P,w.lanes|=P,P=df(P),Hh(P,p,w,U),ye(w,P),!1}w=w.return}while(w!==null);return!1}function Qi(p,g,w,U){g.child=p===null?u0(g,null,w,U):Hu(g,p.child,w,U)}function Ky(p,g,w,U,P){w=w.render;var j=g.ref;if("ref"in U){var me={};for(var Re in U)Re!=="ref"&&(me[Re]=U[Re])}else me=U;return hc(g),U=$a(p,g,w,me,j,P),Re=As(),p!==null&&!vi?(Zi(p,g,P),Ol(p,g,P)):(ur&&Re&&k(g),g.flags|=1,Qi(p,g,U,P),g.child)}function Qy(p,g,w,U,P){if(p===null){var j=w.type;return typeof j=="function"&&!Il(j)&&j.defaultProps===void 0&&w.compare===null?(g.tag=15,g.type=j,wp(p,g,j,U,P)):(p=eo(w.type,null,U,g,g.mode,P),p.ref=g.ref,p.return=g,g.child=p)}if(j=p.child,!og(p,P)){var me=j.memoizedProps;if(w=w.compare,w=w!==null?w:ze,w(me,U)&&p.ref===g.ref)return Ol(p,g,P)}return g.flags|=1,p=ya(j,U),p.ref=g.ref,p.return=g,g.child=p}function wp(p,g,w,U,P){if(p!==null){var j=p.memoizedProps;if(ze(j,U)&&p.ref===g.ref)if(vi=!1,g.pendingProps=U=j,og(p,P))(p.flags&131072)!==0&&(vi=!0);else return g.lanes=p.lanes,Ol(p,g,P)}return tg(p,g,w,U,P)}function Jy(p,g,w){var U=g.pendingProps,P=U.children,j=(g.stateNode._pendingVisibility&2)!==0,me=p!==null?p.memoizedState:null;if(Vh(p,g),U.mode==="hidden"||j){if((g.flags&128)!==0){if(U=me!==null?me.baseLanes|w:w,p!==null){for(P=g.child=p.child,j=0;P!==null;)j=j|P.lanes|P.childLanes,P=P.sibling;g.childLanes=j&~U}else g.childLanes=0,g.child=null;return e1(p,g,U,w)}if((w&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},p!==null&&Dp(g,me!==null?me.cachePool:null),me!==null?Es(g,me):_i(),Wa(g);else return g.lanes=g.childLanes=536870912,e1(p,g,me!==null?me.baseLanes|w:w,w)}else me!==null?(Dp(g,me.cachePool),Es(g,me),ht(),g.memoizedState=null):(p!==null&&Dp(g,null),_i(),ht());return Qi(p,g,P,w),g.child}function e1(p,g,w,U){var P=xu();return P=P===null?null:{parent:rl?br._currentValue:br._currentValue2,pool:P},g.memoizedState={baseLanes:w,cachePool:P},p!==null&&Dp(g,null),_i(),Wa(g),p!==null&&fc(p,g,U,!0),null}function Vh(p,g){var w=g.ref;if(w===null)p!==null&&p.ref!==null&&(g.flags|=2097664);else{if(typeof w!="function"&&typeof w!="object")throw Error(i(284));(p===null||p.ref!==w)&&(g.flags|=2097664)}}function tg(p,g,w,U,P){return hc(g),w=$a(p,g,w,U,void 0,P),U=As(),p!==null&&!vi?(Zi(p,g,P),Ol(p,g,P)):(ur&&U&&k(g),g.flags|=1,Qi(p,g,w,P),g.child)}function t1(p,g,w,U,P,j){return hc(g),g.updateQueue=null,w=pu(g,U,w,P),Yo(p),U=As(),p!==null&&!vi?(Zi(p,g,j),Ol(p,g,j)):(ur&&U&&k(g),g.flags|=1,Qi(p,g,w,j),g.child)}function ng(p,g,w,U,P){if(hc(g),g.stateNode===null){var j=Ac,me=w.contextType;typeof me=="object"&&me!==null&&(j=Ji(me)),j=new w(U,j),g.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=hm,g.stateNode=j,j._reactInternals=g,j=g.stateNode,j.props=U,j.state=g.memoizedState,j.refs={},We(g),me=w.contextType,j.context=typeof me=="object"&&me!==null?Ji(me):Ac,j.state=g.memoizedState,me=w.getDerivedStateFromProps,typeof me=="function"&&(Ui(g,w,me,U),j.state=g.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(me=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),me!==j.state&&hm.enqueueReplaceState(j,j.state,null),G(g,U,j,P),Ve(),j.state=g.memoizedState),typeof j.componentDidMount=="function"&&(g.flags|=4194308),U=!0}else if(p===null){j=g.stateNode;var Re=g.memoizedProps,je=Eo(w,Re);j.props=je;var vt=j.context,At=w.contextType;me=Ac,typeof At=="object"&&At!==null&&(me=Ji(At));var Bt=w.getDerivedStateFromProps;At=typeof Bt=="function"||typeof j.getSnapshotBeforeUpdate=="function",Re=g.pendingProps!==Re,At||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(Re||vt!==me)&&Ih(g,j,U,me),jl=!1;var Ft=g.memoizedState;j.state=Ft,G(g,U,j,P),Ve(),vt=g.memoizedState,Re||Ft!==vt||jl?(typeof Bt=="function"&&(Ui(g,w,Bt,U),vt=g.memoizedState),(je=jl||vu(g,w,je,U,Ft,vt,me))?(At||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(g.flags|=4194308)):(typeof j.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=U,g.memoizedState=vt),j.props=U,j.state=vt,j.context=me,U=je):(typeof j.componentDidMount=="function"&&(g.flags|=4194308),U=!1)}else{j=g.stateNode,Ge(p,g),me=g.memoizedProps,At=Eo(w,me),j.props=At,Bt=g.pendingProps,Ft=j.context,vt=w.contextType,je=Ac,typeof vt=="object"&&vt!==null&&(je=Ji(vt)),Re=w.getDerivedStateFromProps,(vt=typeof Re=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(me!==Bt||Ft!==je)&&Ih(g,j,U,je),jl=!1,Ft=g.memoizedState,j.state=Ft,G(g,U,j,P),Ve();var xn=g.memoizedState;me!==Bt||Ft!==xn||jl||p!==null&&p.dependencies!==null&&yu(p.dependencies)?(typeof Re=="function"&&(Ui(g,w,Re,U),xn=g.memoizedState),(At=jl||vu(g,w,At,U,Ft,xn,je)||p!==null&&p.dependencies!==null&&yu(p.dependencies))?(vt||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(U,xn,je),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(U,xn,je)),typeof j.componentDidUpdate=="function"&&(g.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof j.componentDidUpdate!="function"||me===p.memoizedProps&&Ft===p.memoizedState||(g.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||me===p.memoizedProps&&Ft===p.memoizedState||(g.flags|=1024),g.memoizedProps=U,g.memoizedState=xn),j.props=U,j.state=xn,j.context=je,U=At):(typeof j.componentDidUpdate!="function"||me===p.memoizedProps&&Ft===p.memoizedState||(g.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||me===p.memoizedProps&&Ft===p.memoizedState||(g.flags|=1024),U=!1)}return j=U,Vh(p,g),U=(g.flags&128)!==0,j||U?(j=g.stateNode,w=U&&typeof w.getDerivedStateFromError!="function"?null:j.render(),g.flags|=1,p!==null&&U?(g.child=Hu(g,p.child,null,P),g.child=Hu(g,null,w,P)):Qi(p,g,w,P),g.memoizedState=j.state,p=g.child):p=Ol(p,g,P),p}function n1(p,g,w,U){return Te(),g.flags|=256,Qi(p,g,w,U),g.child}function rg(p){return{baseLanes:p,cachePool:o1()}}function ig(p,g,w){return p=p!==null?p.childLanes&~w:0,g&&(p|=ss),p}function r1(p,g,w){var U=g.pendingProps,P=!1,j=(g.flags&128)!==0,me;if((me=j)||(me=p!==null&&p.memoizedState===null?!1:(Ei.current&2)!==0),me&&(P=!0,g.flags&=-129),me=(g.flags&32)!==0,g.flags&=-33,p===null){if(ur){if(P?Ri(g):ht(),ur){var Re=ia,je;(je=Re)&&(Re=O1(Re,ro),Re!==null?(g.memoizedState={dehydrated:Re,treeContext:Do!==null?{id:sl,overflow:no}:null,retryLane:536870912},je=t(18,null,null,0),je.stateNode=Re,je.return=g,g.child=je,ba=g,ia=null,je=!0):je=!1),je||ne(g)}if(Re=g.memoizedState,Re!==null&&(Re=Re.dehydrated,Re!==null))return od(Re)?g.lanes=16:g.lanes=536870912,null;ln(g)}return Re=U.children,U=U.fallback,P?(ht(),P=g.mode,Re=ag({mode:"hidden",children:Re},P),U=Hl(U,P,w,null),Re.return=g,U.return=g,Re.sibling=U,g.child=Re,P=g.child,P.memoizedState=rg(w),P.childLanes=ig(p,me,w),g.memoizedState=Sa,U):(Ri(g),qh(g,Re))}if(je=p.memoizedState,je!==null&&(Re=je.dehydrated,Re!==null)){if(j)g.flags&256?(Ri(g),g.flags&=-257,g=sg(p,g,w)):g.memoizedState!==null?(ht(),g.child=p.child,g.flags|=128,g=null):(ht(),P=U.fallback,Re=g.mode,U=ag({mode:"visible",children:U.children},Re),P=Hl(P,Re,w,null),P.flags|=2,U.return=g,P.return=g,U.sibling=P,g.child=U,Hu(g,p.child,null,w),U=g.child,U.memoizedState=rg(w),U.childLanes=ig(p,me,w),g.memoizedState=Sa,g=P);else if(Ri(g),od(Re))me=A1(Re).digest,U=Error(i(419)),U.stack="",U.digest=me,se({value:U,source:null,stack:null}),g=sg(p,g,w);else if(vi||fc(p,g,w,!1),me=(w&p.childLanes)!==0,vi||me){if(me=qn,me!==null){if(U=w&-w,(U&42)!==0)U=1;else switch(U){case 2:U=1;break;case 8:U=4;break;case 32:U=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:U=64;break;case 268435456:U=134217728;break;default:U=0}if(U=(U&(me.suspendedLanes|w))!==0?0:U,U!==0&&U!==je.retryLane)throw je.retryLane=U,Pe(p,U),ga(me,p,U),Y1}em(Re)||Ja(),g=sg(p,g,w)}else em(Re)?(g.flags|=128,g.child=p.child,g=yc.bind(null,p),wM(Re,g),g=null):(p=je.treeContext,Fa&&(ia=D1(Re),ba=g,ur=!0,Fs=null,ro=!1,p!==null&&(Us[zs++]=sl,Us[zs++]=no,Us[zs++]=Do,sl=p.id,no=p.overflow,Do=g)),g=qh(g,U.children),g.flags|=4096);return g}return P?(ht(),P=U.fallback,Re=g.mode,je=p.child,j=je.sibling,U=ya(je,{mode:"hidden",children:U.children}),U.subtreeFlags=je.subtreeFlags&31457280,j!==null?P=ya(j,P):(P=Hl(P,Re,w,null),P.flags|=2),P.return=g,U.return=g,U.sibling=P,g.child=U,U=P,P=g.child,Re=p.child.memoizedState,Re===null?Re=rg(w):(je=Re.cachePool,je!==null?(j=rl?br._currentValue:br._currentValue2,je=je.parent!==j?{parent:j,pool:j}:je):je=o1(),Re={baseLanes:Re.baseLanes|w,cachePool:je}),P.memoizedState=Re,P.childLanes=ig(p,me,w),g.memoizedState=Sa,U):(Ri(g),w=p.child,p=w.sibling,w=ya(w,{mode:"visible",children:U.children}),w.return=g,w.sibling=null,p!==null&&(me=g.deletions,me===null?(g.deletions=[p],g.flags|=16):me.push(p)),g.child=w,g.memoizedState=null,w)}function qh(p,g){return g=ag({mode:"visible",children:g},p.mode),g.return=p,p.child=g}function ag(p,g){return Gp(p,g,0,null)}function sg(p,g,w){return Hu(g,p.child,null,w),p=qh(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function i1(p,g,w){p.lanes|=g;var U=p.alternate;U!==null&&(U.lanes|=g),lg(p.return,g,w)}function Tp(p,g,w,U,P){var j=p.memoizedState;j===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:U,tail:w,tailMode:P}:(j.isBackwards=g,j.rendering=null,j.renderingStartTime=0,j.last=U,j.tail=w,j.tailMode=P)}function a1(p,g,w){var U=g.pendingProps,P=U.revealOrder,j=U.tail;if(Qi(p,g,U.children,w),U=Ei.current,(U&2)!==0)U=U&1|2,g.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&i1(p,w,g);else if(p.tag===19)i1(p,w,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}U&=1}switch(T(Ei,U),P){case"forwards":for(w=g.child,P=null;w!==null;)p=w.alternate,p!==null&&qr(p)===null&&(P=w),w=w.sibling;w=P,w===null?(P=g.child,g.child=null):(P=w.sibling,w.sibling=null),Tp(g,!1,P,w,j);break;case"backwards":for(w=null,P=g.child,g.child=null;P!==null;){if(p=P.alternate,p!==null&&qr(p)===null){g.child=P;break}p=P.sibling,P.sibling=w,w=P,P=p}Tp(g,!0,w,null,j);break;case"together":Tp(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Ol(p,g,w){if(p!==null&&(g.dependencies=p.dependencies),Vs|=g.lanes,(w&g.childLanes)===0)if(p!==null){if(fc(p,g,w,!1),(w&g.childLanes)===0)return null}else return null;if(p!==null&&g.child!==p.child)throw Error(i(153));if(g.child!==null){for(p=g.child,w=ya(p,p.pendingProps),g.child=w,w.return=g;p.sibling!==null;)p=p.sibling,w=w.sibling=ya(p,p.pendingProps),w.return=g;w.sibling=null}return g.child}function og(p,g){return(p.lanes&g)!==0?!0:(p=p.dependencies,!!(p!==null&&yu(p)))}function MM(p,g,w){switch(g.tag){case 3:J(g,g.stateNode.containerInfo),gu(g,br,p.memoizedState.cache),Te();break;case 27:case 5:pe(g);break;case 4:J(g,g.stateNode.containerInfo);break;case 10:gu(g,g.type,g.memoizedProps.value);break;case 13:var U=g.memoizedState;if(U!==null)return U.dehydrated!==null?(Ri(g),g.flags|=128,null):(w&g.child.childLanes)!==0?r1(p,g,w):(Ri(g),p=Ol(p,g,w),p!==null?p.sibling:null);Ri(g);break;case 19:var P=(p.flags&128)!==0;if(U=(w&g.childLanes)!==0,U||(fc(p,g,w,!1),U=(w&g.childLanes)!==0),P){if(U)return a1(p,g,w);g.flags|=128}if(P=g.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),T(Ei,Ei.current),U)break;return null;case 22:case 23:return g.lanes=0,Jy(p,g,w);case 24:gu(g,br,p.memoizedState.cache)}return Ol(p,g,w)}function s1(p,g,w){if(p!==null)if(p.memoizedProps!==g.pendingProps)vi=!0;else{if(!og(p,w)&&(g.flags&128)===0)return vi=!1,MM(p,g,w);vi=(p.flags&131072)!==0}else vi=!1,ur&&(g.flags&1048576)!==0&&Q(g,dd,g.index);switch(g.lanes=0,g.tag){case 16:e:{p=g.pendingProps;var U=g.elementType,P=U._init;if(U=P(U._payload),g.type=U,typeof U=="function")Il(U)?(p=Eo(U,p),g.tag=1,g=ng(null,g,U,p,w)):(g.tag=0,g=tg(null,g,U,p,w));else{if(U!=null){if(P=U.$$typeof,P===Df){g.tag=11,g=Ky(null,g,U,p,w);break e}else if(P===Jh){g.tag=14,g=Qy(null,g,U,p,w);break e}}throw g=s(U)||U,Error(i(306,g,""))}}return g;case 0:return tg(p,g,g.type,g.pendingProps,w);case 1:return U=g.type,P=Eo(U,g.pendingProps),ng(p,g,U,P,w);case 3:e:{if(J(g,g.stateNode.containerInfo),p===null)throw Error(i(387));var j=g.pendingProps;P=g.memoizedState,U=P.element,Ge(p,g),G(g,j,null,w);var me=g.memoizedState;if(j=me.cache,gu(g,br,j),j!==P.cache&&ug(g,[br],w,!0),Ve(),j=me.element,Fa&&P.isDehydrated)if(P={element:j,isDehydrated:!1,cache:me.cache},g.updateQueue.baseState=P,g.memoizedState=P,g.flags&256){g=n1(p,g,j,w);break e}else if(j!==U){U=te(Error(i(424)),g),se(U),g=n1(p,g,j,w);break e}else for(Fa&&(ia=N1(g.stateNode.containerInfo),ba=g,ur=!0,Fs=null,ro=!0),w=u0(g,null,j,w),g.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Te(),j===U){g=Ol(p,g,w);break e}Qi(p,g,j,w)}g=g.child}return g;case 26:if(Os)return Vh(p,g),p===null?(w=am(g.type,null,g.pendingProps,null))?g.memoizedState=w:ur||(g.stateNode=NM(g.type,g.pendingProps,Co.current,g)):g.memoizedState=am(g.type,p.memoizedProps,g.pendingProps,p.memoizedState),null;case 27:if(na)return pe(g),p===null&&na&&ur&&(U=g.stateNode=a0(g.type,g.pendingProps,Co.current,Yi.current,!1),ba=g,ro=!0,ia=tm(U)),U=g.pendingProps.children,p!==null||ur?Qi(p,g,U,w):g.child=Hu(g,null,U,w),Vh(p,g),g.child;case 5:return p===null&&ur&&(L1(g.type,g.pendingProps,Yi.current),(P=U=ia)&&(U=C1(U,g.type,g.pendingProps,ro),U!==null?(g.stateNode=U,ba=g,ia=tm(U),ro=!1,P=!0):P=!1),P||ne(g)),pe(g),P=g.type,j=g.pendingProps,me=p!==null?p.memoizedProps:null,U=j.children,zu(P,j)?U=null:me!==null&&zu(P,me)&&(g.flags|=32),g.memoizedState!==null&&(P=$a(p,g,Dl,null,null,w),rl?hn._currentValue=P:hn._currentValue2=P),Vh(p,g),Qi(p,g,U,w),g.child;case 6:return p===null&&ur&&(I1(g.pendingProps,Yi.current),(p=w=ia)&&(w=R1(w,g.pendingProps,ro),w!==null?(g.stateNode=w,ba=g,ia=null,p=!0):p=!1),p||ne(g)),null;case 13:return r1(p,g,w);case 4:return J(g,g.stateNode.containerInfo),U=g.pendingProps,p===null?g.child=Hu(g,null,U,w):Qi(p,g,U,w),g.child;case 11:return Ky(p,g,g.type,g.pendingProps,w);case 7:return Qi(p,g,g.pendingProps,w),g.child;case 8:return Qi(p,g,g.pendingProps.children,w),g.child;case 12:return Qi(p,g,g.pendingProps.children,w),g.child;case 10:return U=g.pendingProps,gu(g,g.type,U.value),Qi(p,g,U.children,w),g.child;case 9:return P=g.type._context,U=g.pendingProps.children,hc(g),P=Ji(P),U=U(P),g.flags|=1,Qi(p,g,U,w),g.child;case 14:return Qy(p,g,g.type,g.pendingProps,w);case 15:return wp(p,g,g.type,g.pendingProps,w);case 19:return a1(p,g,w);case 22:return Jy(p,g,w);case 24:return hc(g),U=Ji(br),p===null?(P=xu(),P===null&&(P=qn,j=Np(),P.pooledCache=j,j.refCount++,j!==null&&(P.pooledCacheLanes|=w),P=j),g.memoizedState={parent:U,cache:P},We(g),gu(g,br,P)):((p.lanes&w)!==0&&(Ge(p,g),G(g,null,null,w),Ve()),P=p.memoizedState,j=g.memoizedState,P.parent!==U?(P={parent:U,cache:U},g.memoizedState=P,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=P),gu(g,br,U)):(U=j.cache,gu(g,br,U),U!==P.cache&&ug(g,[br],w,!0))),Qi(p,g,g.pendingProps.children,w),g.child;case 29:throw g.pendingProps}throw Error(i(156,g.tag))}function gu(p,g,w){rl?(T(is,g._currentValue),g._currentValue=w):(T(is,g._currentValue2),g._currentValue2=w)}function Bl(p){var g=is.current;rl?p._currentValue=g:p._currentValue2=g,_(is)}function lg(p,g,w){for(;p!==null;){var U=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,U!==null&&(U.childLanes|=g)):U!==null&&(U.childLanes&g)!==g&&(U.childLanes|=g),p===w)break;p=p.return}}function ug(p,g,w,U){var P=p.child;for(P!==null&&(P.return=p);P!==null;){var j=P.dependencies;if(j!==null){var me=P.child;j=j.firstContext;e:for(;j!==null;){var Re=j;j=P;for(var je=0;je<g.length;je++)if(Re.context===g[je]){j.lanes|=w,Re=j.alternate,Re!==null&&(Re.lanes|=w),lg(j.return,w,p),U||(me=null);break e}j=Re.next}}else if(P.tag===18){if(me=P.return,me===null)throw Error(i(341));me.lanes|=w,j=me.alternate,j!==null&&(j.lanes|=w),lg(me,w,p),me=null}else me=P.child;if(me!==null)me.return=P;else for(me=P;me!==null;){if(me===p){me=null;break}if(P=me.sibling,P!==null){P.return=me.return,me=P;break}me=me.return}P=me}}function fc(p,g,w,U){p=null;for(var P=g,j=!1;P!==null;){if(!j){if((P.flags&524288)!==0)j=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var me=P.alternate;if(me===null)throw Error(i(387));if(me=me.memoizedProps,me!==null){var Re=P.type;Bs(P.pendingProps.value,me.value)||(p!==null?p.push(Re):p=[Re])}}else if(P===Ff.current){if(me=P.alternate,me===null)throw Error(i(387));me.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(p!==null?p.push(hn):p=[hn])}P=P.return}p!==null&&ug(g,p,w,U),g.flags|=262144}function yu(p){for(p=p.firstContext;p!==null;){var g=p.context;if(!Bs(rl?g._currentValue:g._currentValue2,p.memoizedValue))return!0;p=p.next}return!1}function hc(p){qu=p,ci=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Ji(p){return cg(qu,p)}function Gh(p,g){return qu===null&&hc(p),cg(p,g)}function cg(p,g){var w=rl?g._currentValue:g._currentValue2;if(g={context:g,memoizedValue:w,next:null},ci===null){if(p===null)throw Error(i(308));ci=g,p.dependencies={lanes:0,firstContext:g},p.flags|=524288}else ci=ci.next=g;return w}function Np(){return{controller:new W1,data:new Map,refCount:0}}function pf(p){p.refCount--,p.refCount===0&&Wl(Nc,function(){p.controller.abort()})}function xu(){var p=$l.current;return p!==null?p:qn.pooledCache}function Dp(p,g){g===null?T($l,$l.current):T($l,g.pool)}function o1(){var p=xu();return p===null?null:{parent:rl?br._currentValue:br._currentValue2,pool:p}}function Ts(p){p.flags|=4}function fg(p,g){if(p!==null&&p.child===g.child)return!1;if((g.flags&16)!==0)return!0;for(p=g.child;p!==null;){if((p.flags&13878)!==0||(p.subtreeFlags&13878)!==0)return!0;p=p.sibling}return!1}function Cp(p,g,w,U){if(ta)for(w=g.child;w!==null;){if(w.tag===5||w.tag===6)nl(p,w.stateNode);else if(!(w.tag===4||na&&w.tag===27)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else if(Cs)for(var P=g.child;P!==null;){if(P.tag===5){var j=P.stateNode;w&&U&&(j=jg(j,P.type,P.memoizedProps)),nl(p,j)}else if(P.tag===6)j=P.stateNode,w&&U&&(j=Yg(j,P.memoizedProps)),nl(p,j);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)j=P.child,j!==null&&(j.return=P),Cp(p,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===g)break;for(;P.sibling===null;){if(P.return===null||P.return===g)return;P=P.return}P.sibling.return=P.return,P=P.sibling}}function mf(p,g,w,U){if(Cs)for(var P=g.child;P!==null;){if(P.tag===5){var j=P.stateNode;w&&U&&(j=jg(j,P.type,P.memoizedProps)),kg(p,j)}else if(P.tag===6)j=P.stateNode,w&&U&&(j=Yg(j,P.memoizedProps)),kg(p,j);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)j=P.child,j!==null&&(j.return=P),mf(p,P,!(P.memoizedProps!==null&&P.memoizedProps.mode==="manual"),!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===g)break;for(;P.sibling===null;){if(P.return===null||P.return===g)return;P=P.return}P.sibling.return=P.return,P=P.sibling}}function vf(p,g){if(Cs&&fg(p,g)){p=g.stateNode;var w=p.containerInfo,U=Jp();mf(U,g,!1,!1),p.pendingChildren=U,Ts(g),E1(w,U)}}function hg(p,g,w,U){if(ta)p.memoizedProps!==U&&Ts(g);else if(Cs){var P=p.stateNode,j=p.memoizedProps;if((p=fg(p,g))||j!==U){var me=Yi.current;j=Gg(P,w,j,U,!p,null),j===P?g.stateNode=P:(ql(j,w,U,me)&&Ts(g),g.stateNode=j,p?Cp(j,g,!1,!1):Ts(g))}else g.stateNode=P}}function gf(p,g,w){if(_1(g,w)){if(p.flags|=16777216,!Gl(g,w))if($h())p.flags|=8192;else throw Tc=cm,l0}else p.flags&=-16777217}function dg(p,g){if(P1(g)){if(p.flags|=16777216,!r0(g))if($h())p.flags|=8192;else throw Tc=cm,l0}else p.flags&=-16777217}function kh(p,g){g!==null&&(p.flags|=4),p.flags&16384&&(g=p.tag!==22?C():536870912,p.lanes|=g,Kl|=g)}function dc(p,g){if(!ur)switch(p.tailMode){case"hidden":g=p.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?p.tail=null:w.sibling=null;break;case"collapsed":w=p.tail;for(var U=null;w!==null;)w.alternate!==null&&(U=w),w=w.sibling;U===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:U.sibling=null}}function Kr(p){var g=p.alternate!==null&&p.alternate.child===p.child,w=0,U=0;if(g)for(var P=p.child;P!==null;)w|=P.lanes|P.childLanes,U|=P.subtreeFlags&31457280,U|=P.flags&31457280,P.return=p,P=P.sibling;else for(P=p.child;P!==null;)w|=P.lanes|P.childLanes,U|=P.subtreeFlags,U|=P.flags,P.return=p,P=P.sibling;return p.subtreeFlags|=U,p.childLanes=w,g}function l1(p,g,w){var U=g.pendingProps;switch(ae(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(g),null;case 1:return Kr(g),null;case 3:return w=g.stateNode,U=null,p!==null&&(U=p.memoizedState.cache),g.memoizedState.cache!==U&&(g.flags|=2048),Bl(br),De(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(p===null||p.child===null)&&(Ae(g)?Ts(g):p===null||p.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Fs!==null&&(zl(Fs),Fs=null))),vf(p,g),Kr(g),null;case 26:if(Os){w=g.type;var P=g.memoizedState;return p===null?(Ts(g),P!==null?(Kr(g),dg(g,P)):(Kr(g),gf(g,w,U))):P?P!==p.memoizedState?(Ts(g),Kr(g),dg(g,P)):(Kr(g),g.flags&=-16777217):(ta?p.memoizedProps!==U&&Ts(g):hg(p,g,w,U),Kr(g),gf(g,w,U)),null}case 27:if(na){if(_e(g),w=Co.current,P=g.type,p!==null&&g.stateNode!=null)ta?p.memoizedProps!==U&&Ts(g):hg(p,g,P,U);else{if(!U){if(g.stateNode===null)throw Error(i(166));return Kr(g),null}p=Yi.current,Ae(g)?ue(g,p):(p=a0(P,U,w,p,!0),g.stateNode=p,Ts(g))}return Kr(g),null}case 5:if(_e(g),w=g.type,p!==null&&g.stateNode!=null)hg(p,g,w,U);else{if(!U){if(g.stateNode===null)throw Error(i(166));return Kr(g),null}p=Yi.current,Ae(g)?ue(g,p):(P=Og(w,U,Co.current,p,g),Cp(P,g,!1,!1),g.stateNode=P,ql(P,w,U,p)&&Ts(g))}return Kr(g),gf(g,g.type,g.pendingProps),null;case 6:if(p&&g.stateNode!=null)w=p.memoizedProps,ta?w!==U&&Ts(g):Cs&&(w!==U?(g.stateNode=Yp(U,Co.current,Yi.current,g),Ts(g)):g.stateNode=p.stateNode);else{if(typeof U!="string"&&g.stateNode===null)throw Error(i(166));if(p=Co.current,w=Yi.current,Ae(g)){if(!Fa)throw Error(i(176));if(p=g.stateNode,w=g.memoizedProps,U=null,P=ba,P!==null)switch(P.tag){case 27:case 5:U=P.memoizedProps}B1(p,w,g,U)||ne(g)}else g.stateNode=Yp(U,p,w,g)}return Kr(g),null;case 13:if(U=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(P=Ae(g),U!==null&&U.dehydrated!==null){if(p===null){if(!P)throw Error(i(318));if(!Fa)throw Error(i(344));if(P=g.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(i(317));Rf(P,g)}else Te(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Kr(g),P=!1}else Fs!==null&&(zl(Fs),Fs=null),P=!0;if(!P)return g.flags&256?(ln(g),g):(ln(g),null)}if(ln(g),(g.flags&128)!==0)return g.lanes=w,g;if(w=U!==null,p=p!==null&&p.memoizedState!==null,w){U=g.child,P=null,U.alternate!==null&&U.alternate.memoizedState!==null&&U.alternate.memoizedState.cachePool!==null&&(P=U.alternate.memoizedState.cachePool.pool);var j=null;U.memoizedState!==null&&U.memoizedState.cachePool!==null&&(j=U.memoizedState.cachePool.pool),j!==P&&(U.flags|=2048)}return w!==p&&w&&(g.child.flags|=8192),kh(g,g.updateQueue),Kr(g),null;case 4:return De(),vf(p,g),p===null&&zg(g.stateNode.containerInfo),Kr(g),null;case 10:return Bl(g.type),Kr(g),null;case 19:if(_(Ei),P=g.memoizedState,P===null)return Kr(g),null;if(U=(g.flags&128)!==0,j=P.rendering,j===null)if(U)dc(P,!1);else{if(rr!==0||p!==null&&(p.flags&128)!==0)for(p=g.child;p!==null;){if(j=qr(p),j!==null){for(g.flags|=128,dc(P,!1),p=j.updateQueue,g.updateQueue=p,kh(g,p),g.subtreeFlags=0,p=w,w=g.child;w!==null;)Pl(w,p),w=w.sibling;return T(Ei,Ei.current&1|2),g.child}p=p.sibling}P.tail!==null&&ra()>ii&&(g.flags|=128,U=!0,dc(P,!1),g.lanes=4194304)}else{if(!U)if(p=qr(j),p!==null){if(g.flags|=128,U=!0,p=p.updateQueue,g.updateQueue=p,kh(g,p),dc(P,!0),P.tail===null&&P.tailMode==="hidden"&&!j.alternate&&!ur)return Kr(g),null}else 2*ra()-P.renderingStartTime>ii&&w!==536870912&&(g.flags|=128,U=!0,dc(P,!1),g.lanes=4194304);P.isBackwards?(j.sibling=g.child,g.child=j):(p=P.last,p!==null?p.sibling=j:g.child=j,P.last=j)}return P.tail!==null?(g=P.tail,P.rendering=g,P.tail=g.sibling,P.renderingStartTime=ra(),g.sibling=null,p=Ei.current,T(Ei,U?p&1|2:p&1),g):(Kr(g),null);case 22:case 23:return ln(g),Ci(),U=g.memoizedState!==null,p!==null?p.memoizedState!==null!==U&&(g.flags|=8192):U&&(g.flags|=8192),U?(w&536870912)!==0&&(g.flags&128)===0&&(Kr(g),g.subtreeFlags&6&&(g.flags|=8192)):Kr(g),w=g.updateQueue,w!==null&&kh(g,w.retryQueue),w=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),U=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(U=g.memoizedState.cachePool.pool),U!==w&&(g.flags|=2048),p!==null&&_($l),null;case 24:return w=null,p!==null&&(w=p.memoizedState.cache),g.memoizedState.cache!==w&&(g.flags|=2048),Bl(br),Kr(g),null;case 25:return null}throw Error(i(156,g.tag))}function u1(p,g){switch(ae(g),g.tag){case 1:return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return Bl(br),De(),p=g.flags,(p&65536)!==0&&(p&128)===0?(g.flags=p&-65537|128,g):null;case 26:case 27:case 5:return _e(g),null;case 13:if(ln(g),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(i(340));Te()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return _(Ei),null;case 4:return De(),null;case 10:return Bl(g.type),null;case 22:case 23:return ln(g),Ci(),p!==null&&_($l),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 24:return Bl(br),null;case 25:return null;default:return null}}function pg(p,g){switch(ae(g),g.tag){case 3:Bl(br),De();break;case 26:case 27:case 5:_e(g);break;case 4:De();break;case 13:ln(g);break;case 19:_(Ei);break;case 10:Bl(g.type);break;case 22:case 23:ln(g),Ci(),p!==null&&_($l);break;case 24:Bl(br)}}function Xh(p,g){try{var w=g.updateQueue,U=w!==null?w.lastEffect:null;if(U!==null){var P=U.next;w=P;do{if((w.tag&p)===p){U=void 0;var j=w.create,me=w.inst;U=j(),me.destroy=U}w=w.next}while(w!==P)}}catch(Re){jn(g,g.return,Re)}}function bu(p,g,w){try{var U=g.updateQueue,P=U!==null?U.lastEffect:null;if(P!==null){var j=P.next;U=j;do{if((U.tag&p)===p){var me=U.inst,Re=me.destroy;if(Re!==void 0){me.destroy=void 0,P=g;var je=w;try{Re()}catch(vt){jn(P,je,vt)}}}U=U.next}while(U!==j)}}catch(vt){jn(g,g.return,vt)}}function c1(p){var g=p.updateQueue;if(g!==null){var w=p.stateNode;try{Ee(g,w)}catch(U){jn(p,p.return,U)}}}function f1(p,g,w){w.props=Eo(p.type,p.memoizedProps),w.state=p.memoizedState;try{w.componentWillUnmount()}catch(U){jn(p,g,U)}}function pc(p,g){try{var w=p.ref;if(w!==null){var U=p.stateNode;switch(p.tag){case 26:case 27:case 5:var P=Cf(U);break;default:P=U}typeof w=="function"?p.refCleanup=w(P):w.current=P}}catch(j){jn(p,g,j)}}function Qr(p,g){var w=p.ref,U=p.refCleanup;if(w!==null)if(typeof U=="function")try{U()}catch(P){jn(p,g,P)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(P){jn(p,g,P)}else w.current=null}function yf(p){var g=p.type,w=p.memoizedProps,U=p.stateNode;try{AM(U,g,w,p)}catch(P){jn(p,p.return,P)}}function mg(p,g,w){try{Pg(p.stateNode,p.type,w,g,p)}catch(U){jn(p,p.return,U)}}function vg(p){return p.tag===5||p.tag===3||(Os?p.tag===26:!1)||(na?p.tag===27:!1)||p.tag===4}function Rp(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||vg(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&(!na||p.tag!==27)&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function Op(p,g,w){var U=p.tag;if(U===5||U===6)p=p.stateNode,g?Vg(w,p,g):S1(w,p);else if(!(U===4||na&&U===27)&&(p=p.child,p!==null))for(Op(p,g,w),p=p.sibling;p!==null;)Op(p,g,w),p=p.sibling}function xf(p,g,w){var U=p.tag;if(U===5||U===6)p=p.stateNode,g?Hg(w,p,g):Ig(w,p);else if(!(U===4||na&&U===27)&&(p=p.child,p!==null))for(xf(p,g,w),p=p.sibling;p!==null;)xf(p,g,w),p=p.sibling}function h1(p,g,w){p=p.containerInfo;try{Xg(p,w)}catch(U){jn(g,g.return,U)}}function bf(p,g){for(Uu(p.containerInfo),fi=g;fi!==null;)if(p=fi,g=p.child,(p.subtreeFlags&1028)!==0&&g!==null)g.return=p,fi=g;else for(;fi!==null;){p=fi;var w=p.alternate;switch(g=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((g&1024)!==0&&w!==null){g=void 0;var U=p,P=w.memoizedProps;w=w.memoizedState;var j=U.stateNode;try{var me=Eo(U.type,P,U.elementType===U.type);g=j.getSnapshotBeforeUpdate(me,w),j.__reactInternalSnapshotBeforeUpdate=g}catch(Re){jn(U,U.return,Re)}}break;case 3:(g&1024)!==0&&ta&&Qp(p.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(i(163))}if(g=p.sibling,g!==null){g.return=p.return,fi=g;break}fi=p.return}return me=Dc,Dc=!1,me}function Bp(p,g,w){var U=w.flags;switch(w.tag){case 0:case 11:case 15:Zo(p,w),U&4&&Xh(5,w);break;case 1:if(Zo(p,w),U&4)if(p=w.stateNode,g===null)try{p.componentDidMount()}catch(Re){jn(w,w.return,Re)}else{var P=Eo(w.type,g.memoizedProps);g=g.memoizedState;try{p.componentDidUpdate(P,g,p.__reactInternalSnapshotBeforeUpdate)}catch(Re){jn(w,w.return,Re)}}U&64&&c1(w),U&512&&pc(w,w.return);break;case 3:if(Zo(p,w),U&64&&(U=w.updateQueue,U!==null)){if(p=null,w.child!==null)switch(w.child.tag){case 27:case 5:p=Cf(w.child.stateNode);break;case 1:p=w.child.stateNode}try{Ee(U,p)}catch(Re){jn(w,w.return,Re)}}break;case 26:if(Os){Zo(p,w),U&512&&pc(w,w.return);break}case 27:case 5:Zo(p,w),g===null&&U&4&&yf(w),U&512&&pc(w,w.return);break;case 12:Zo(p,w);break;case 13:Zo(p,w),U&4&&_u(p,w);break;case 22:if(P=w.memoizedState!==null||Fi,!P){g=g!==null&&g.memoizedState!==null||ri;var j=Fi,me=ri;Fi=P,(ri=g)&&!me?Mu(p,w,(w.subtreeFlags&8772)!==0):Zo(p,w),Fi=j,ri=me}U&512&&(w.memoizedProps.mode==="manual"?pc(w,w.return):Qr(w,w.return));break;default:Zo(p,w)}}function _f(p){var g=p.alternate;g!==null&&(p.alternate=null,_f(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&Fg(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Ns(p,g,w){for(w=w.child;w!==null;)Up(p,g,w),w=w.sibling}function Up(p,g,w){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(zf,w)}catch{}switch(w.tag){case 26:if(Os){ri||Qr(w,g),Ns(p,g,w),w.memoizedState?Qg(w.memoizedState):w.stateNode&&t0(w.stateNode);break}case 27:if(na){ri||Qr(w,g);var U=gi,P=as;gi=w.stateNode,Ns(p,g,w),H1(w.stateNode),gi=U,as=P;break}case 5:ri||Qr(w,g);case 6:if(ta){if(U=gi,P=as,gi=null,Ns(p,g,w),gi=U,as=P,gi!==null)if(as)try{pi(gi,w.stateNode)}catch(j){jn(w,g,j)}else try{La(gi,w.stateNode)}catch(j){jn(w,g,j)}}else Ns(p,g,w);break;case 18:ta&&gi!==null&&(as?$g(gi,w.stateNode):z1(gi,w.stateNode));break;case 4:ta?(U=gi,P=as,gi=w.stateNode.containerInfo,as=!0,Ns(p,g,w),gi=U,as=P):(Cs&&h1(w.stateNode,w,Jp()),Ns(p,g,w));break;case 0:case 11:case 14:case 15:ri||bu(2,w,g),ri||bu(4,w,g),Ns(p,g,w);break;case 1:ri||(Qr(w,g),U=w.stateNode,typeof U.componentWillUnmount=="function"&&f1(w,g,U)),Ns(p,g,w);break;case 21:Ns(p,g,w);break;case 22:ri||Qr(w,g),ri=(U=ri)||w.memoizedState!==null,Ns(p,g,w),ri=U;break;default:Ns(p,g,w)}}function _u(p,g){if(Fa&&g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{rm(p)}catch(w){jn(g,g.return,w)}}function Sf(p){switch(p.tag){case 13:case 19:var g=p.stateNode;return g===null&&(g=p.stateNode=new Vf),g;case 22:return p=p.stateNode,g=p._retryCache,g===null&&(g=p._retryCache=new Vf),g;default:throw Error(i(435,p.tag))}}function jh(p,g){var w=Sf(p);g.forEach(function(U){var P=_g.bind(null,p,U);w.has(U)||(w.add(U),U.then(P,P))})}function Ba(p,g){var w=g.deletions;if(w!==null)for(var U=0;U<w.length;U++){var P=w[U],j=p,me=g;if(ta){var Re=me;e:for(;Re!==null;){switch(Re.tag){case 27:case 5:gi=Re.stateNode,as=!1;break e;case 3:gi=Re.stateNode.containerInfo,as=!0;break e;case 4:gi=Re.stateNode.containerInfo,as=!0;break e}Re=Re.return}if(gi===null)throw Error(i(160));Up(j,me,P),gi=null,as=!1}else Up(j,me,P);j=P.alternate,j!==null&&(j.return=null),P.return=null}if(g.subtreeFlags&13878)for(g=g.child;g!==null;)Su(g,p),g=g.sibling}function Su(p,g){var w=p.alternate,U=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Ba(g,p),Ka(p),U&4&&(bu(3,p,p.return),Xh(3,p),bu(5,p,p.return));break;case 1:Ba(g,p),Ka(p),U&512&&(ri||w===null||Qr(w,w.return)),U&64&&Fi&&(p=p.updateQueue,p!==null&&(U=p.callbacks,U!==null&&(w=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=w===null?U:w.concat(U))));break;case 26:if(Os){var P=Ia;Ba(g,p),Ka(p),U&512&&(ri||w===null||Qr(w,w.return)),U&4&&(U=w!==null?w.memoizedState:null,g=p.memoizedState,w===null?g===null?p.stateNode===null?p.stateNode=Jg(P,p.type,p.memoizedProps,p):e0(P,p.type,p.stateNode):p.stateNode=Kg(P,g,p.memoizedProps):U!==g?(U===null?w.stateNode!==null&&t0(w.stateNode):Qg(U),g===null?e0(P,p.type,p.stateNode):Kg(P,g,p.memoizedProps)):g===null&&p.stateNode!==null&&mg(p,p.memoizedProps,w.memoizedProps));break}case 27:if(na&&U&4&&p.alternate===null){P=p.stateNode;var j=p.memoizedProps;try{DM(P),CM(p.type,j,P,p)}catch(At){jn(p,p.return,At)}}case 5:if(Ba(g,p),Ka(p),U&512&&(ri||w===null||Qr(w,w.return)),ta){if(p.flags&32){g=p.stateNode;try{ad(g)}catch(At){jn(p,p.return,At)}}U&4&&p.stateNode!=null&&(g=p.memoizedProps,mg(p,g,w!==null?w.memoizedProps:g)),U&1024&&(Gu=!0)}break;case 6:if(Ba(g,p),Ka(p),U&4&&ta){if(p.stateNode===null)throw Error(i(162));U=p.memoizedProps,w=w!==null?w.memoizedProps:U,g=p.stateNode;try{M1(g,w,U)}catch(At){jn(p,p.return,At)}}break;case 3:if(Os?(n0(),P=Ia,Ia=im(g.containerInfo),Ba(g,p),Ia=P):Ba(g,p),Ka(p),U&4){if(ta&&Fa&&w!==null&&w.memoizedState.isDehydrated)try{nm(g.containerInfo)}catch(At){jn(p,p.return,At)}if(Cs){U=g.containerInfo,w=g.pendingChildren;try{Xg(U,w)}catch(At){jn(p,p.return,At)}}}Gu&&(Gu=!1,gg(p));break;case 4:Os?(w=Ia,Ia=im(p.stateNode.containerInfo),Ba(g,p),Ka(p),Ia=w):(Ba(g,p),Ka(p)),U&4&&Cs&&h1(p.stateNode,p,p.stateNode.pendingChildren);break;case 12:Ba(g,p),Ka(p);break;case 13:Ba(g,p),Ka(p),p.child.flags&8192&&p.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(cl=ra()),U&4&&(U=p.updateQueue,U!==null&&(p.updateQueue=null,jh(p,U)));break;case 22:U&512&&(ri||w===null||Qr(w,w.return)),P=p.memoizedState!==null;var me=w!==null&&w.memoizedState!==null,Re=Fi,je=ri;if(Fi=Re||P,ri=je||me,Ba(g,p),ri=je,Fi=Re,Ka(p),g=p.stateNode,g._current=p,g._visibility&=-3,g._visibility|=g._pendingVisibility&2,U&8192&&(g._visibility=P?g._visibility&-2:g._visibility|1,P&&(g=Fi||ri,w===null||me||g||Mf(p)),ta&&(p.memoizedProps===null||p.memoizedProps.mode!=="manual"))){e:if(w=null,ta)for(g=p;;){if(g.tag===5||Os&&g.tag===26||na&&g.tag===27){if(w===null){me=w=g;try{j=me.stateNode,P?sd(j):qg(me.stateNode,me.memoizedProps)}catch(At){jn(me,me.return,At)}}}else if(g.tag===6){if(w===null){me=g;try{var vt=me.stateNode;P?Kp(vt):kl(vt,me.memoizedProps)}catch(At){jn(me,me.return,At)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===p)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;w===g&&(w=null),g=g.return}w===g&&(w=null),g.sibling.return=g.return,g=g.sibling}}U&4&&(U=p.updateQueue,U!==null&&(w=U.retryQueue,w!==null&&(U.retryQueue=null,jh(p,w))));break;case 19:Ba(g,p),Ka(p),U&4&&(U=p.updateQueue,U!==null&&(p.updateQueue=null,jh(p,U)));break;case 21:break;default:Ba(g,p),Ka(p)}}function Ka(p){var g=p.flags;if(g&2){try{if(ta&&(!na||p.tag!==27)){e:{for(var w=p.return;w!==null;){if(vg(w)){var U=w;break e}w=w.return}throw Error(i(160))}switch(U.tag){case 27:if(na){var P=U.stateNode,j=Rp(p);xf(p,j,P);break}case 5:var me=U.stateNode;U.flags&32&&(ad(me),U.flags&=-33);var Re=Rp(p);xf(p,Re,me);break;case 3:case 4:var je=U.stateNode.containerInfo,vt=Rp(p);Op(p,vt,je);break;default:throw Error(i(161))}}}catch(At){jn(p,p.return,At)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function gg(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var g=p;gg(g),g.tag===5&&g.flags&1024&&Or(g.stateNode),p=p.sibling}}function Zo(p,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)Bp(p,g.alternate,g),g=g.sibling}function Mf(p){for(p=p.child;p!==null;){var g=p;switch(g.tag){case 0:case 11:case 14:case 15:bu(4,g,g.return),Mf(g);break;case 1:Qr(g,g.return);var w=g.stateNode;typeof w.componentWillUnmount=="function"&&f1(g,g.return,w),Mf(g);break;case 26:case 27:case 5:Qr(g,g.return),Mf(g);break;case 22:Qr(g,g.return),g.memoizedState===null&&Mf(g);break;default:Mf(g)}p=p.sibling}}function Mu(p,g,w){for(w=w&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var U=g.alternate,P=p,j=g,me=j.flags;switch(j.tag){case 0:case 11:case 15:Mu(P,j,w),Xh(4,j);break;case 1:if(Mu(P,j,w),U=j,P=U.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(vt){jn(U,U.return,vt)}if(U=j,P=U.updateQueue,P!==null){var Re=U.stateNode;try{var je=P.shared.hiddenCallbacks;if(je!==null)for(P.shared.hiddenCallbacks=null,P=0;P<je.length;P++)ee(je[P],Re)}catch(vt){jn(U,U.return,vt)}}w&&me&64&&c1(j),pc(j,j.return);break;case 26:case 27:case 5:Mu(P,j,w),w&&U===null&&me&4&&yf(j),pc(j,j.return);break;case 12:Mu(P,j,w);break;case 13:Mu(P,j,w),w&&me&4&&_u(P,j);break;case 22:j.memoizedState===null&&Mu(P,j,w),pc(j,j.return);break;default:Mu(P,j,w)}g=g.sibling}}function yg(p,g){var w=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),p=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(p=g.memoizedState.cachePool.pool),p!==w&&(p!=null&&p.refCount++,w!=null&&pf(w))}function zp(p,g){p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&pf(p))}function Ul(p,g,w,U){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)Fp(p,g,w,U),g=g.sibling}function Fp(p,g,w,U){var P=g.flags;switch(g.tag){case 0:case 11:case 15:Ul(p,g,w,U),P&2048&&Xh(9,g);break;case 3:Ul(p,g,w,U),P&2048&&(p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&pf(p)));break;case 12:if(P&2048){Ul(p,g,w,U),p=g.stateNode;try{var j=g.memoizedProps,me=j.id,Re=j.onPostCommit;typeof Re=="function"&&Re(me,g.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(je){jn(g,g.return,je)}}else Ul(p,g,w,U);break;case 23:break;case 22:j=g.stateNode,g.memoizedState!==null?j._visibility&4?Ul(p,g,w,U):Eu(p,g):j._visibility&4?Ul(p,g,w,U):(j._visibility|=4,va(p,g,w,U,(g.subtreeFlags&10256)!==0)),P&2048&&yg(g.alternate,g);break;case 24:Ul(p,g,w,U),P&2048&&zp(g.alternate,g);break;default:Ul(p,g,w,U)}}function va(p,g,w,U,P){for(P=P&&(g.subtreeFlags&10256)!==0,g=g.child;g!==null;){var j=p,me=g,Re=w,je=U,vt=me.flags;switch(me.tag){case 0:case 11:case 15:va(j,me,Re,je,P),Xh(8,me);break;case 23:break;case 22:var At=me.stateNode;me.memoizedState!==null?At._visibility&4?va(j,me,Re,je,P):Eu(j,me):(At._visibility|=4,va(j,me,Re,je,P)),P&&vt&2048&&yg(me.alternate,me);break;case 24:va(j,me,Re,je,P),P&&vt&2048&&zp(me.alternate,me);break;default:va(j,me,Re,je,P)}g=g.sibling}}function Eu(p,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var w=p,U=g,P=U.flags;switch(U.tag){case 22:Eu(w,U),P&2048&&yg(U.alternate,U);break;case 24:Eu(w,U),P&2048&&zp(U.alternate,U);break;default:Eu(w,U)}g=g.sibling}}function Gi(p){if(p.subtreeFlags&Cc)for(p=p.child;p!==null;)mc(p),p=p.sibling}function mc(p){switch(p.tag){case 26:Gi(p),p.flags&Cc&&(p.memoizedState!==null?i0(Ia,p.memoizedState,p.memoizedProps):si(p.type,p.memoizedProps));break;case 5:Gi(p),p.flags&Cc&&si(p.type,p.memoizedProps);break;case 3:case 4:if(Os){var g=Ia;Ia=im(p.stateNode.containerInfo),Gi(p),Ia=g}else Gi(p);break;case 22:p.memoizedState===null&&(g=p.alternate,g!==null&&g.memoizedState!==null?(g=Cc,Cc=16777216,Gi(p),Cc=g):Gi(p));break;default:Gi(p)}}function Lp(p){var g=p.alternate;if(g!==null&&(p=g.child,p!==null)){g.child=null;do g=p.sibling,p.sibling=null,p=g;while(p!==null)}}function Au(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var w=0;w<g.length;w++){var U=g[w];fi=U,wu(U,p)}Lp(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Yh(p),p=p.sibling}function Yh(p){switch(p.tag){case 0:case 11:case 15:Au(p),p.flags&2048&&bu(9,p,p.return);break;case 3:Au(p);break;case 12:Au(p);break;case 22:var g=p.stateNode;p.memoizedState!==null&&g._visibility&4&&(p.return===null||p.return.tag!==13)?(g._visibility&=-5,Ef(p)):Au(p);break;default:Au(p)}}function Ef(p){var g=p.deletions;if((p.flags&16)!==0){if(g!==null)for(var w=0;w<g.length;w++){var U=g[w];fi=U,wu(U,p)}Lp(p)}for(p=p.child;p!==null;){switch(g=p,g.tag){case 0:case 11:case 15:bu(8,g,g.return),Ef(g);break;case 22:w=g.stateNode,w._visibility&4&&(w._visibility&=-5,Ef(g));break;default:Ef(g)}p=p.sibling}}function wu(p,g){for(;fi!==null;){var w=fi;switch(w.tag){case 0:case 11:case 15:bu(8,w,g);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var U=w.memoizedState.cachePool.pool;U!=null&&U.refCount++}break;case 24:pf(w.memoizedState.cache)}if(U=w.child,U!==null)U.return=w,fi=U;else e:for(w=p;fi!==null;){U=fi;var P=U.sibling,j=U.return;if(_f(U),U===w){fi=null;break e}if(P!==null){P.return=j,fi=P;break e}fi=j}}}function Ip(p){var g=Ug(p);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(i(364));return g}if(p=Ec(p),p===null)throw Error(i(362));return p.stateNode.current}function Af(p,g){var w=p.tag;switch(g.$$typeof){case _d:if(p.type===g.value)return!0;break;case mm:e:{for(g=g.value,p=[p,0],w=0;w<p.length;){var U=p[w++],P=U.tag,j=p[w++],me=g[j];if(P!==5&&P!==26&&P!==27||!al(U)){for(;me!=null&&Af(U,me);)j++,me=g[j];if(j===g.length){g=!0;break e}else for(U=U.child;U!==null;)p.push(U,j),U=U.sibling}}g=!1}return g;case vm:if((w===5||w===26||w===27)&&EM(p.stateNode,g.value))return!0;break;case _r:if((w===5||w===6||w===26||w===27)&&(p=id(p),p!==null&&0<=p.indexOf(g.value)))return!0;break;case nr:if((w===5||w===26||w===27)&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Tu(p){switch(p.$$typeof){case _d:return"<"+(s(p.value)||"Unknown")+">";case mm:return":has("+(Tu(p)||"")+")";case vm:return'[role="'+p.value+'"]';case _r:return'"'+p.value+'"';case nr:return'[data-testname="'+p.value+'"]';default:throw Error(i(365))}}function d1(p,g){var w=[];p=[p,0];for(var U=0;U<p.length;){var P=p[U++],j=P.tag,me=p[U++],Re=g[me];if(j!==5&&j!==26&&j!==27||!al(P)){for(;Re!=null&&Af(P,Re);)me++,Re=g[me];if(me===g.length)w.push(P);else for(P=P.child;P!==null;)p.push(P,me),P=P.sibling}}return w}function Ua(p,g){if(!il)throw Error(i(363));p=Ip(p),p=d1(p,g),g=[],p=Array.from(p);for(var w=0;w<p.length;){var U=p[w++],P=U.tag;if(P===5||P===26||P===27)al(U)||g.push(U.stateNode);else for(U=U.child;U!==null;)p.push(U),U=U.sibling}return g}function za(){if((Kt&2)!==0&&Pn!==0)return Pn&-Pn;if(an.T!==null){var p=rs;return p!==0?p:Se()}return to()}function Ko(){ss===0&&(ss=(Pn&536870912)===0||ur?z():536870912);var p=Ps.current;return p!==null&&(p.flags|=32),ss}function ga(p,g,w){(p===qn&&Br===2||p.cancelPendingCommit!==null)&&(wo(p,0),Ao(p,Pn,ss,!1)),F(p,w),((Kt&2)===0||p!==qn)&&(p===qn&&((Kt&2)===0&&(Bo|=w),rr===4&&Ao(p,Pn,ss,!1)),re(p))}function Wh(p,g,w){if((Kt&6)!==0)throw Error(i(327));var U=!w&&(g&60)===0&&(g&p.expiredLanes)===0||N(p,g),P=U?el(p,g):Qo(p,g,!0),j=U;do{if(P===0){Hs&&!U&&Ao(p,g,0,!1);break}else if(P===6)Ao(p,g,0,!Sr);else{if(w=p.current.alternate,j&&!p1(w)){P=Qo(p,g,!1),j=!1;continue}if(P===2){if(j=g,p.errorRecoveryDisabledLanes&j)var me=0;else me=p.pendingLanes&-536870913,me=me!==0?me:me&536870912?536870912:0;if(me!==0){g=me;e:{var Re=p;P=qf;var je=Fa&&Re.current.memoizedState.isDehydrated;if(je&&(wo(Re,me).flags|=256),me=Qo(Re,me,!1),me!==2){if(Zl&&!je){Re.errorRecoveryDisabledLanes|=j,Bo|=j,P=4;break e}j=qs,qs=P,j!==null&&zl(j)}P=me}if(j=!1,P!==2)continue}}if(P===1){wo(p,0),Ao(p,g,0,!0);break}e:{switch(U=p,P){case 0:case 1:throw Error(i(345));case 4:if((g&4194176)===g){Ao(U,g,ss,!Sr);break e}break;case 2:qs=null;break;case 3:case 5:break;default:throw Error(i(329))}if(U.finishedWork=w,U.finishedLanes=g,(g&62914560)===g&&(j=cl+300-ra(),10<j)){if(Ao(U,g,ss,!Sr),D(U,0)!==0)break e;U.timeoutHandle=Bg(Pp.bind(null,U,w,qs,Uo,Gf,g,ss,Bo,Kl,Sr,2,-0,0),j);break e}Pp(U,w,qs,Uo,Gf,g,ss,Bo,Kl,Sr,0,-0,0)}}break}while(!0);re(p)}function zl(p){qs===null?qs=p:qs.push.apply(qs,p)}function Pp(p,g,w,U,P,j,me,Re,je,vt,At,Bt,Ft){var xn=g.subtreeFlags;if((xn&8192||(xn&16785408)===16785408)&&(Rs(),mc(g),g=Wp(),g!==null)){p.cancelPendingCommit=g(Gr.bind(null,p,w,U,P,me,Re,je,1,Bt,Ft)),Ao(p,j,me,!vt);return}Gr(p,w,U,P,me,Re,je,At,Bt,Ft)}function p1(p){for(var g=p;;){var w=g.tag;if((w===0||w===11||w===15)&&g.flags&16384&&(w=g.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var U=0;U<w.length;U++){var P=w[U],j=P.getSnapshot;P=P.value;try{if(!Bs(j(),P))return!1}catch{return!1}}if(w=g.child,g.subtreeFlags&16384&&w!==null)w.return=g,g=w;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ao(p,g,w,U){g&=~Ma,g&=~Bo,p.suspendedLanes|=g,p.pingedLanes&=~g,U&&(p.warmLanes|=g),U=p.expirationTimes;for(var P=g;0<P;){var j=31-ts(P),me=1<<j;U[j]=-1,P&=~me}w!==0&&X(p,w,g)}function xg(){return(Kt&6)===0?(be(0),!1):!0}function Qa(){if(Mn!==null){if(Br===0)var p=Mn.return;else p=Mn,ci=qu=null,he(p),ol=null,io=0,p=Mn;for(;p!==null;)pg(p.alternate,p),p=p.return;Mn=null}}function wo(p,g){p.finishedWork=null,p.finishedLanes=0;var w=p.timeoutHandle;w!==Mc&&(p.timeoutHandle=Mc,rd(w)),w=p.cancelPendingCommit,w!==null&&(p.cancelPendingCommit=null,w()),Qa(),qn=p,Mn=w=ya(p.current,null),Pn=g,Br=0,yi=null,Sr=!1,Hs=N(p,g),Zl=!1,Kl=ss=Ma=Bo=Vs=rr=0,qs=qf=null,Gf=!1,(g&8)!==0&&(g|=g&32);var U=p.entangledLanes;if(U!==0)for(p=p.entanglements,U&=g;0<U;){var P=31-ts(U),j=1<<P;g|=p[P],U&=~j}return Oo=g,Me(),w}function vc(p,g){Rn=null,an.H=cr,g===Nr?(g=Nt(),Br=3):g===l0?(g=Nt(),Br=4):Br=g===Y1?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,yi=g,Mn===null&&(rr=1,Ep(p,te(g,p.current)))}function $h(){var p=Ps.current;return p===null?!0:(Pn&4194176)===Pn?ao===null:(Pn&62914560)===Pn||(Pn&536870912)!==0?p===ao:!1}function wf(){var p=an.H;return an.H=cr,p===null?cr:p}function Ds(){var p=an.A;return an.A=pm,p}function Ja(){rr=4,Sr||(Pn&4194176)!==Pn&&Ps.current!==null||(Hs=!0),(Vs&134217727)===0&&(Bo&134217727)===0||qn===null||Ao(qn,Pn,ss,!1)}function Qo(p,g,w){var U=Kt;Kt|=2;var P=wf(),j=Ds();(qn!==p||Pn!==g)&&(Uo=null,wo(p,g)),g=!1;var me=rr;e:do try{if(Br!==0&&Mn!==null){var Re=Mn,je=yi;switch(Br){case 8:Qa(),me=6;break e;case 3:case 2:case 6:Ps.current===null&&(g=!0);var vt=Br;if(Br=0,yi=null,Nu(p,Re,je,vt),w&&Hs){me=0;break e}break;default:vt=Br,Br=0,yi=null,Nu(p,Re,je,vt)}}Jo(),me=rr;break}catch(At){vc(p,At)}while(!0);return g&&p.shellSuspendCounter++,ci=qu=null,Kt=U,an.H=P,an.A=j,Mn===null&&(qn=null,Pn=0,Me()),me}function Jo(){for(;Mn!==null;)bg(Mn)}function el(p,g){var w=Kt;Kt|=2;var U=wf(),P=Ds();qn!==p||Pn!==g?(Uo=null,ii=ra()+500,wo(p,g)):Hs=N(p,g);e:do try{if(Br!==0&&Mn!==null){g=Mn;var j=yi;t:switch(Br){case 1:Br=0,yi=null,Nu(p,g,j,1);break;case 2:if(ft(j)){Br=0,yi=null,Hp(g);break}g=function(){Br===2&&qn===p&&(Br=7),re(p)},j.then(g,g);break e;case 3:Br=7;break e;case 4:Br=5;break e;case 7:ft(j)?(Br=0,yi=null,Hp(g)):(Br=0,yi=null,Nu(p,g,j,7));break;case 5:var me=null;switch(Mn.tag){case 26:me=Mn.memoizedState;case 5:case 27:var Re=Mn,je=Re.type,vt=Re.pendingProps;if(me?r0(me):Gl(je,vt)){Br=0,yi=null;var At=Re.sibling;if(At!==null)Mn=At;else{var Bt=Re.return;Bt!==null?(Mn=Bt,Zh(Bt)):Mn=null}break t}}Br=0,yi=null,Nu(p,g,j,5);break;case 6:Br=0,yi=null,Nu(p,g,j,6);break;case 8:Qa(),rr=6;break e;default:throw Error(i(462))}}Fl();break}catch(Ft){vc(p,Ft)}while(!0);return ci=qu=null,an.H=U,an.A=P,Kt=w,Mn!==null?0:(qn=null,Pn=0,Me(),rr)}function Fl(){for(;Mn!==null&&!q1();)bg(Mn)}function bg(p){var g=s1(p.alternate,p,Oo);p.memoizedProps=p.pendingProps,g===null?Zh(p):Mn=g}function Hp(p){var g=p,w=g.alternate;switch(g.tag){case 15:case 0:g=t1(w,g,g.pendingProps,g.type,void 0,Pn);break;case 11:g=t1(w,g,g.pendingProps,g.type.render,g.ref,Pn);break;case 5:he(g);default:pg(w,g),g=Mn=Pl(g,Oo),g=s1(w,g,Oo)}p.memoizedProps=p.pendingProps,g===null?Zh(p):Mn=g}function Nu(p,g,w,U){ci=qu=null,he(g),ol=null,io=0;var P=g.return;try{if(Zy(p,P,g,w,Pn)){rr=1,Ep(p,te(w,p.current)),Mn=null;return}}catch(j){if(P!==null)throw Mn=P,j;rr=1,Ep(p,te(w,p.current)),Mn=null;return}g.flags&32768?(ur||U===1?p=!0:Hs||(Pn&536870912)!==0?p=!1:(Sr=p=!0,(U===2||U===3||U===6)&&(U=Ps.current,U!==null&&U.tag===13&&(U.flags|=16384))),ki(g,p)):Zh(g)}function Zh(p){var g=p;do{if((g.flags&32768)!==0){ki(g,Sr);return}p=g.return;var w=l1(g.alternate,g,Oo);if(w!==null){Mn=w;return}if(g=g.sibling,g!==null){Mn=g;return}Mn=g=p}while(g!==null);rr===0&&(rr=5)}function ki(p,g){do{var w=u1(p.alternate,p);if(w!==null){w.flags&=32767,Mn=w;return}if(w=p.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!g&&(p=p.sibling,p!==null)){Mn=p;return}Mn=p=w}while(p!==null);rr=6,Mn=null}function Gr(p,g,w,U,P,j,me,Re,je,vt){var At=an.T,Bt=zi();try{xa(2),an.T=null,Zn(p,g,w,U,Bt,P,j,me,Re,je,vt)}finally{an.T=At,xa(Bt)}}function Zn(p,g,w,U,P,j,me,Re){do Xi();while(Ql!==null);if((Kt&6)!==0)throw Error(i(327));var je=p.finishedWork;if(U=p.finishedLanes,je===null)return null;if(p.finishedWork=null,p.finishedLanes=0,je===p.current)throw Error(i(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var vt=je.lanes|je.childLanes;if(vt|=Lf,H(p,U,vt,j,me,Re),p===qn&&(Mn=qn=null,Pn=0),(je.subtreeFlags&10256)===0&&(je.flags&10256)===0||oo||(oo=!0,gm=vt,Oc=w,Kh(sm,function(){return Xi(),null})),w=(je.flags&15990)!==0,(je.subtreeFlags&15990)!==0||w?(w=an.T,an.T=null,j=zi(),xa(2),me=Kt,Kt|=4,bf(p,je),Su(je,p),Rg(p.containerInfo),p.current=je,Bp(p,je.alternate,je),G1(),Kt=me,xa(j),an.T=w):p.current=je,oo?(oo=!1,Ql=p,Rc=U):Ll(p,vt),vt=p.pendingLanes,vt===0&&(Gs=null),I(je.stateNode),re(p),g!==null)for(P=p.onRecoverableError,je=0;je<g.length;je++)vt=g[je],P(vt.value,{componentStack:vt.stack});return(Rc&3)!==0&&Xi(),vt=p.pendingLanes,(U&4194218)!==0&&(vt&42)!==0?p===Pa?Bc++:(Bc=0,Pa=p):Bc=0,be(0),null}function Ll(p,g){(p.pooledCacheLanes&=g)===0&&(g=p.pooledCache,g!=null&&(p.pooledCache=null,pf(g)))}function Xi(){if(Ql!==null){var p=Ql,g=gm;gm=0;var w=Y(Rc),U=32>w?32:w;w=an.T;var P=zi();try{if(xa(U),an.T=null,Ql===null)var j=!1;else{U=Oc,Oc=null;var me=Ql,Re=Rc;if(Ql=null,Rc=0,(Kt&6)!==0)throw Error(i(331));var je=Kt;if(Kt|=4,Yh(me.current),Fp(me,me.current,Re,U),Kt=je,be(0,!1),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(zf,me)}catch{}j=!0}return j}finally{xa(P),an.T=w,Ll(p,g)}}return!1}function Vp(p,g,w){g=te(w,g),g=Ph(p.stateNode,g,2),p=ot(p,g,2),p!==null&&(F(p,2),re(p))}function jn(p,g,w){if(p.tag===3)Vp(p,p,w);else for(;g!==null;){if(g.tag===3){Vp(g,p,w);break}else if(g.tag===1){var U=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof U.componentDidCatch=="function"&&(Gs===null||!Gs.has(U))){p=te(w,p),w=df(2),U=ot(g,w,2),U!==null&&(Hh(w,U,g,p),F(U,2),re(U));break}}g=g.return}}function qp(p,g,w){var U=p.pingCache;if(U===null){U=p.pingCache=new Yn;var P=new Set;U.set(g,P)}else P=U.get(g),P===void 0&&(P=new Set,U.set(g,P));P.has(w)||(Zl=!0,P.add(w),p=m1.bind(null,p,g,w),g.then(p,p))}function m1(p,g,w){var U=p.pingCache;U!==null&&U.delete(g),p.pingedLanes|=p.suspendedLanes&w,p.warmLanes&=~w,qn===p&&(Pn&w)===w&&(rr===4||rr===3&&(Pn&62914560)===Pn&&300>ra()-cl?(Kt&2)===0&&wo(p,0):Ma|=w,Kl===Pn&&(Kl=0)),re(p)}function gc(p,g){g===0&&(g=C()),p=Pe(p,g),p!==null&&(F(p,g),re(p))}function yc(p){var g=p.memoizedState,w=0;g!==null&&(w=g.retryLane),gc(p,w)}function _g(p,g){var w=0;switch(p.tag){case 13:var U=p.stateNode,P=p.memoizedState;P!==null&&(w=P.retryLane);break;case 19:U=p.stateNode;break;case 22:U=p.stateNode._retryCache;break;default:throw Error(i(314))}U!==null&&U.delete(g),gc(p,w)}function Kh(p,g){return Uf(p,g)}function Sg(p,g,w,U){this.tag=p,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Il(p){return p=p.prototype,!(!p||!p.isReactComponent)}function ya(p,g){var w=p.alternate;return w===null?(w=t(p.tag,g,p.key,p.mode),w.elementType=p.elementType,w.type=p.type,w.stateNode=p.stateNode,w.alternate=p,p.alternate=w):(w.pendingProps=g,w.type=p.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=p.flags&31457280,w.childLanes=p.childLanes,w.lanes=p.lanes,w.child=p.child,w.memoizedProps=p.memoizedProps,w.memoizedState=p.memoizedState,w.updateQueue=p.updateQueue,g=p.dependencies,w.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},w.sibling=p.sibling,w.index=p.index,w.ref=p.ref,w.refCleanup=p.refCleanup,w}function Pl(p,g){p.flags&=31457282;var w=p.alternate;return w===null?(p.childLanes=0,p.lanes=g,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,g=w.dependencies,p.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),p}function eo(p,g,w,U,P,j){var me=0;if(U=p,typeof p=="function")Il(p)&&(me=1);else if(typeof p=="string")me=Os&&na?Zg(p,w,Yi.current)?26:Of(p)?27:5:Os?Zg(p,w,Yi.current)?26:5:na&&Of(p)?27:5;else e:switch(p){case Nf:return Hl(w.children,P,j,g);case Tg:me=8,P|=24;break;case Ng:return p=t(12,w,g,P|2),p.elementType=Ng,p.lanes=j,p;case kp:return p=t(13,w,g,P),p.elementType=kp,p.lanes=j,p;case Ru:return p=t(19,w,g,P),p.elementType=Ru,p.lanes=j,p;case ed:return Gp(w,P,j,g);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case y1:case tl:me=10;break e;case Cu:me=9;break e;case Df:me=11;break e;case Jh:me=14;break e;case No:me=16,U=null;break e}me=29,w=Error(i(130,p===null?"null":typeof p,"")),U=null}return g=t(me,w,g,P),g.elementType=p,g.type=U,g.lanes=j,g}function Hl(p,g,w,U){return p=t(7,p,U,g),p.lanes=w,p}function Gp(p,g,w,U){p=t(22,p,U,g),p.elementType=ed,p.lanes=w;var P={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var j=P._current;if(j===null)throw Error(i(456));if((P._pendingVisibility&2)===0){var me=Pe(j,2);me!==null&&(P._pendingVisibility|=2,ga(me,j,2))}},attach:function(){var j=P._current;if(j===null)throw Error(i(456));if((P._pendingVisibility&2)!==0){var me=Pe(j,2);me!==null&&(P._pendingVisibility&=-3,ga(me,j,2))}}};return p.stateNode=P,p}function Du(p,g,w){return p=t(6,p,null,g),p.lanes=w,p}function Tf(p,g,w){return g=t(4,p.children!==null?p.children:[],p.key,g),g.lanes=w,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function xc(p,g,w,U,P,j,me,Re){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Mc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=R(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=R(0),this.hiddenUpdates=R(null),this.identifierPrefix=U,this.onUncaughtError=P,this.onCaughtError=j,this.onRecoverableError=me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Re,this.incompleteTransitions=new Map}function ji(p,g,w,U,P,j,me,Re,je,vt,At,Bt){return p=new xc(p,g,w,me,Re,je,vt,Bt),g=1,j===!0&&(g|=24),j=t(3,null,null,g),p.current=j,j.stateNode=p,g=Np(),g.refCount++,p.pooledCache=g,g.refCount++,j.memoizedState={element:U,isDehydrated:w,cache:g},We(j),p}function Qh(p){return p?(p=Ac,p):Ac}function Mg(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(i(188)):(p=Object.keys(p).join(","),Error(i(268,p)));return p=v(g),p=p!==null?x(p):null,p===null?null:Cf(p.stateNode)}function v1(p,g,w,U,P,j){P=Qh(P),U.context===null?U.context=P:U.pendingContext=P,U=rt(g),U.payload={element:w},j=j===void 0?null:j,j!==null&&(U.callback=j),w=ot(p,U,g),w!==null&&(ga(w,p,g),St(w,p,g))}function g1(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var w=p.retryLane;p.retryLane=w!==0&&w<g?w:g}}function Eg(p,g){g1(p,g),(p=p.alternate)&&g1(p,g)}var Zt={},Ag=Uv(),ea=ML(),bc=Object.assign,wg=Symbol.for("react.element"),Vl=Symbol.for("react.transitional.element"),To=Symbol.for("react.portal"),Nf=Symbol.for("react.fragment"),Tg=Symbol.for("react.strict_mode"),Ng=Symbol.for("react.profiler"),y1=Symbol.for("react.provider"),Cu=Symbol.for("react.consumer"),tl=Symbol.for("react.context"),Df=Symbol.for("react.forward_ref"),kp=Symbol.for("react.suspense"),Ru=Symbol.for("react.suspense_list"),Jh=Symbol.for("react.memo"),No=Symbol.for("react.lazy"),ed=Symbol.for("react.offscreen"),x1=Symbol.for("react.memo_cache_sentinel"),Dg=Symbol.iterator,_c=Symbol.for("react.client.reference"),an=Ag.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Xp,Cg,Ou=!1,Bu=Array.isArray,jp=e.rendererVersion,td=e.rendererPackageName,nd=e.extraDevToolsConfig,Cf=e.getPublicInstance,Sc=e.getRootHostContext,b1=e.getChildHostContext,Uu=e.prepareForCommit,Rg=e.resetAfterCommit,Og=e.createInstance,nl=e.appendInitialChild,ql=e.finalizeInitialChildren,zu=e.shouldSetTextContent,Yp=e.createTextInstance,Bg=e.scheduleTimeout,rd=e.cancelTimeout,Mc=e.noTimeout,rl=e.isPrimaryRenderer;e.warnsIfNotActing;var ta=e.supportsMutation,Cs=e.supportsPersistence,Fa=e.supportsHydration,Ug=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var zg=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var xa=e.setCurrentUpdatePriority,zi=e.getCurrentUpdatePriority,to=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Fu=e.shouldAttemptEagerTransition,Fg=e.detachDeletedInstance;e.requestPostPaintCallback;var _1=e.maySuspendCommit,Gl=e.preloadInstance,Rs=e.startSuspendingCommit,si=e.suspendInstance,Wp=e.waitForCommitToBeReady,es=e.NotPendingTransition,hn=e.HostTransitionContext,Or=e.resetFormInstance;e.bindToConsole;var Mi=e.supportsMicrotasks,$p=e.scheduleMicrotask,il=e.supportsTestSelectors,Ec=e.findFiberRoot,Zp=e.getBoundingRect,id=e.getTextContent,al=e.isHiddenSubtree,EM=e.matchAccessibilityRole,oi=e.setFocusIfFocusable,Lg=e.setupIntersectionObserver,Ig=e.appendChild,S1=e.appendChildToContainer,M1=e.commitTextUpdate,AM=e.commitMount,Pg=e.commitUpdate,Hg=e.insertBefore,Vg=e.insertInContainerBefore,La=e.removeChild,pi=e.removeChildFromContainer,ad=e.resetTextContent,sd=e.hideInstance,Kp=e.hideTextInstance,qg=e.unhideInstance,kl=e.unhideTextInstance,Qp=e.clearContainer,Gg=e.cloneInstance,Jp=e.createContainerChildSet,kg=e.appendChildToContainerChildSet,E1=e.finalizeContainerChildren,Xg=e.replaceContainerChildren,jg=e.cloneHiddenInstance,Yg=e.cloneHiddenTextInstance,em=e.isSuspenseInstancePending,od=e.isSuspenseInstanceFallback,A1=e.getSuspenseInstanceFallbackErrorDetails,wM=e.registerSuspenseInstanceRetry,w1=e.canHydrateFormStateMarker,T1=e.isFormStateMarkerMatching,Wg=e.getNextHydratableSibling,tm=e.getFirstHydratableChild,N1=e.getFirstHydratableChildWithinContainer,D1=e.getFirstHydratableChildWithinSuspenseInstance,C1=e.canHydrateInstance,R1=e.canHydrateTextInstance,O1=e.canHydrateSuspenseInstance,TM=e.hydrateInstance,B1=e.hydrateTextInstance,Rf=e.hydrateSuspenseInstance,U1=e.getNextHydratableInstanceAfterSuspenseInstance,nm=e.commitHydratedContainer,rm=e.commitHydratedSuspenseInstance,z1=e.clearSuspenseBoundary,$g=e.clearSuspenseBoundaryFromContainer,F1=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var L1=e.validateHydratableInstance,I1=e.validateHydratableTextInstance,Os=e.supportsResources,Zg=e.isHostHoistableType,im=e.getHoistableRoot,am=e.getResource,Kg=e.acquireResource,Qg=e.releaseResource,Jg=e.hydrateHoistable,e0=e.mountHoistable,t0=e.unmountHoistable,NM=e.createHoistableInstance,n0=e.prepareToCommitHoistables,P1=e.mayResourceSuspendCommit,r0=e.preloadResource,i0=e.suspendResource,na=e.supportsSingletons,a0=e.resolveSingletonInstance,DM=e.clearSingleton,CM=e.acquireSingletonInstance,H1=e.releaseSingletonInstance,Of=e.isHostSingletonType,ld=[],Xl=-1,Ac={},ts=Math.clz32?Math.clz32:E,ud=Math.log,V1=Math.LN2,Bf=128,cd=4194304,Uf=ea.unstable_scheduleCallback,fd=ea.unstable_cancelCallback,q1=ea.unstable_shouldYield,G1=ea.unstable_requestPaint,ra=ea.unstable_now,s0=ea.unstable_ImmediatePriority,k1=ea.unstable_UserBlockingPriority,sm=ea.unstable_NormalPriority,om=ea.unstable_IdlePriority,X1=ea.log,o0=ea.unstable_setDisableYieldValue,zf=null,ns=null,Bs=typeof Object.is=="function"?Object.is:W,lm=new WeakMap,Jr=[],li=0,hd=null,dd=0,Us=[],zs=0,Do=null,sl=1,no="",Yi=M(null),pd=M(null),Co=M(null),Ff=M(null),ba=null,ia=null,ur=!1,Fs=null,ro=!1,md=Error(i(519)),Ls=[],Lu=0,Lf=0,If=null,wc=null,vd=!1,gd=!1,Ro=!1,Iu=0,yd=null,um=0,rs=0,Pu=null,jl=!1,Pf=!1,xd=Object.prototype.hasOwnProperty,Nr=Error(i(460)),l0=Error(i(474)),cm={then:function(){}},Tc=null,ol=null,io=0,Hu=ni(!0),u0=ni(!1),ll=M(null),Is=M(0),Ps=M(null),ao=null,Ei=M(0),ul=0,Rn=null,gr=null,mi=null,so=!1,ei=!1,Yl=!1,bd=0,ui=0,Hf=null,j1=0,fm=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},cr={readContext:Ji,use:Ne,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn};cr.useCacheRefresh=tn,cr.useMemoCache=tn,cr.useHostTransitionStatus=tn,cr.useFormState=tn,cr.useActionState=tn,cr.useOptimistic=tn;var Ai={readContext:Ji,use:Ne,useCallback:function(p,g){return He().memoizedState=[p,g===void 0?null:g],p},useContext:Ji,useEffect:Za,useImperativeHandle:function(p,g,w){w=w!=null?w.concat([p]):null,or(4194308,4,Tr.bind(null,g,p),w)},useLayoutEffect:function(p,g){return or(4194308,4,p,g)},useInsertionEffect:function(p,g){or(4,2,p,g)},useMemo:function(p,g){var w=He();g=g===void 0?null:g;var U=p();if(Yl){Z(!0);try{p()}finally{Z(!1)}}return w.memoizedState=[U,g],U},useReducer:function(p,g,w){var U=He();if(w!==void 0){var P=w(g);if(Yl){Z(!0);try{w(g)}finally{Z(!1)}}}else P=g;return U.memoizedState=U.baseState=P,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:P},U.queue=p,p=p.dispatch=So.bind(null,Rn,p),[U.memoizedState,p]},useRef:function(p){var g=He();return p={current:p},g.memoizedState=p},useState:function(p){p=Cn(p);var g=p.queue,w=Fh.bind(null,Rn,g);return g.dispatch=w,[p.memoizedState,w]},useDebugValue:ws,useDeferredValue:function(p,g){var w=He();return _o(w,p,g)},useTransition:function(){var p=Cn(!1);return p=Oa.bind(null,Rn,p.queue,!0,!1),He().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,g,w){var U=Rn,P=He();if(ur){if(w===void 0)throw Error(i(407));w=w()}else{if(w=g(),qn===null)throw Error(i(349));(Pn&60)!==0||qt(U,g,w)}P.memoizedState=w;var j={value:w,getSnapshot:g};return P.queue=j,Za(Jn.bind(null,U,j,p),[p]),U.flags|=2048,er(9,mn.bind(null,U,j,w,g),{destroy:void 0},null),w},useId:function(){var p=He(),g=qn.identifierPrefix;if(ur){var w=no,U=sl;w=(U&~(1<<32-ts(U)-1)).toString(32)+w,g=":"+g+"R"+w,w=bd++,0<w&&(g+="H"+w.toString(32)),g+=":"}else w=j1++,g=":"+g+"r"+w.toString(32)+":";return p.memoizedState=g},useCacheRefresh:function(){return He().memoizedState=$o.bind(null,Rn)}};Ai.useMemoCache=ut,Ai.useHostTransitionStatus=Cl,Ai.useFormState=Dt,Ai.useActionState=Dt,Ai.useOptimistic=function(p){var g=He();g.memoizedState=g.baseState=p;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=w,g=Lh.bind(null,Rn,!0,w),w.dispatch=g,[p,g]};var _a={readContext:Ji,use:Ne,useCallback:bo,useContext:Ji,useEffect:Oi,useImperativeHandle:lr,useInsertionEffect:tr,useLayoutEffect:Bi,useMemo:Ra,useReducer:Ot,useRef:Gt,useState:function(){return Ot(wt)},useDebugValue:ws,useDeferredValue:function(p,g){var w=$e();return hf(w,gr.memoizedState,p,g)},useTransition:function(){var p=Ot(wt)[0],g=$e().memoizedState;return[typeof p=="boolean"?p:Qe(p),g]},useSyncExternalStore:Vt,useId:Zr};_a.useCacheRefresh=Si,_a.useMemoCache=ut,_a.useHostTransitionStatus=Cl,_a.useFormState=Yt,_a.useActionState=Yt,_a.useOptimistic=function(p,g){var w=$e();return Ut(w,gr,p,g)};var Vu={readContext:Ji,use:Ne,useCallback:bo,useContext:Ji,useEffect:Oi,useImperativeHandle:lr,useInsertionEffect:tr,useLayoutEffect:Bi,useMemo:Ra,useReducer:Lt,useRef:Gt,useState:function(){return Lt(wt)},useDebugValue:ws,useDeferredValue:function(p,g){var w=$e();return gr===null?_o(w,p,g):hf(w,gr.memoizedState,p,g)},useTransition:function(){var p=Lt(wt)[0],g=$e().memoizedState;return[typeof p=="boolean"?p:Qe(p),g]},useSyncExternalStore:Vt,useId:Zr};Vu.useCacheRefresh=Si,Vu.useMemoCache=ut,Vu.useHostTransitionStatus=Cl,Vu.useFormState=Rr,Vu.useActionState=Rr,Vu.useOptimistic=function(p,g){var w=$e();return gr!==null?Ut(w,gr,p,g):(w.baseState=p,[p,w.queue.dispatch])};var hm={isMounted:function(p){return(p=p._reactInternals)?d(p)===p:!1},enqueueSetState:function(p,g,w){p=p._reactInternals;var U=za(),P=rt(U);P.payload=g,w!=null&&(P.callback=w),g=ot(p,P,U),g!==null&&(ga(g,p,U),St(g,p,U))},enqueueReplaceState:function(p,g,w){p=p._reactInternals;var U=za(),P=rt(U);P.tag=1,P.payload=g,w!=null&&(P.callback=w),g=ot(p,P,U),g!==null&&(ga(g,p,U),St(g,p,U))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var w=za(),U=rt(w);U.tag=2,g!=null&&(U.callback=g),g=ot(p,U,w),g!==null&&(ga(g,p,w),St(g,p,w))}},c0=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},Y1=Error(i(461)),vi=!1,Sa={dehydrated:null,treeContext:null,retryLane:0},is=M(null),qu=null,ci=null,W1=typeof AbortController<"u"?AbortController:function(){var p=[],g=this.signal={aborted:!1,addEventListener:function(w,U){p.push(U)}};this.abort=function(){g.aborted=!0,p.forEach(function(w){return w()})}},Wl=ea.unstable_scheduleCallback,Nc=ea.unstable_NormalPriority,br={$$typeof:tl,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},dm=an.S;an.S=function(p,g){typeof g=="object"&&g!==null&&typeof g.then=="function"&&ve(p,g),dm!==null&&dm(p,g)};var $l=M(null),Fi=!1,ri=!1,Gu=!1,Vf=typeof WeakSet=="function"?WeakSet:Set,fi=null,Dc=!1,gi=null,as=!1,Ia=null,Cc=8192,pm={getCacheForType:function(p){var g=Ji(br),w=g.data.get(p);return w===void 0&&(w=p(),g.data.set(p,w)),w}},_d=0,mm=1,vm=2,nr=3,_r=4;if(typeof Symbol=="function"&&Symbol.for){var On=Symbol.for;_d=On("selector.component"),mm=On("selector.has_pseudo_class"),vm=On("selector.role"),nr=On("selector.test_id"),_r=On("selector.text")}var Yn=typeof WeakMap=="function"?WeakMap:Map,Kt=0,qn=null,Mn=null,Pn=0,Br=0,yi=null,Sr=!1,Hs=!1,Zl=!1,Oo=0,rr=0,Vs=0,Bo=0,Ma=0,ss=0,Kl=0,qf=null,qs=null,Gf=!1,cl=0,ii=1/0,Uo=null,Gs=null,oo=!1,Ql=null,Rc=0,gm=0,Oc=null,Bc=0,Pa=null;return Zt.attemptContinuousHydration=function(p){if(p.tag===13){var g=Pe(p,67108864);g!==null&&ga(g,p,67108864),Eg(p,67108864)}},Zt.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var g=za(),w=Pe(p,g);w!==null&&ga(w,p,g),Eg(p,g)}},Zt.attemptSynchronousHydration=function(p){switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var g=A(p.pendingLanes);if(g!==0){for(p.pendingLanes|=2,p.entangledLanes|=2;g;){var w=1<<31-ts(g);p.entanglements[1]|=w,g&=~w}re(p),(Kt&6)===0&&(ii=ra()+500,be(0))}}break;case 13:g=Pe(p,2),g!==null&&ga(g,p,2),xg(),Eg(p,2)}},Zt.batchedUpdates=function(p,g){return p(g)},Zt.createComponentSelector=function(p){return{$$typeof:_d,value:p}},Zt.createContainer=function(p,g,w,U,P,j,me,Re,je,vt){return ji(p,g,!1,null,w,U,j,me,Re,je,vt,null)},Zt.createHasPseudoClassSelector=function(p){return{$$typeof:mm,value:p}},Zt.createHydrationContainer=function(p,g,w,U,P,j,me,Re,je,vt,At,Bt,Ft){return p=ji(w,U,!0,p,P,j,Re,je,vt,At,Bt,Ft),p.context=Qh(null),w=p.current,U=za(),P=rt(U),P.callback=g??null,ot(w,P,U),p.current.lanes=U,F(p,U),re(p),p},Zt.createPortal=function(p,g,w){var U=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:To,key:U==null?null:""+U,children:p,containerInfo:g,implementation:w}},Zt.createRoleSelector=function(p){return{$$typeof:vm,value:p}},Zt.createTestNameSelector=function(p){return{$$typeof:nr,value:p}},Zt.createTextSelector=function(p){return{$$typeof:_r,value:p}},Zt.defaultOnCaughtError=function(p){console.error(p)},Zt.defaultOnRecoverableError=function(p){c0(p)},Zt.defaultOnUncaughtError=function(p){c0(p)},Zt.deferredUpdates=function(p){var g=an.T,w=zi();try{return xa(32),an.T=null,p()}finally{xa(w),an.T=g}},Zt.discreteUpdates=function(p,g,w,U,P){var j=an.T,me=zi();try{return xa(2),an.T=null,p(g,w,U,P)}finally{xa(me),an.T=j,Kt===0&&(ii=ra()+500)}},Zt.findAllNodes=Ua,Zt.findBoundingRects=function(p,g){if(!il)throw Error(i(363));g=Ua(p,g),p=[];for(var w=0;w<g.length;w++)p.push(Zp(g[w]));for(g=p.length-1;0<g;g--){w=p[g];for(var U=w.x,P=U+w.width,j=w.y,me=j+w.height,Re=g-1;0<=Re;Re--)if(g!==Re){var je=p[Re],vt=je.x,At=vt+je.width,Bt=je.y,Ft=Bt+je.height;if(U>=vt&&j>=Bt&&P<=At&&me<=Ft){p.splice(g,1);break}else if(U!==vt||w.width!==je.width||Ft<j||Bt>me){if(!(j!==Bt||w.height!==je.height||At<U||vt>P)){vt>U&&(je.width+=vt-U,je.x=U),At<P&&(je.width=P-vt),p.splice(g,1);break}}else{Bt>j&&(je.height+=Bt-j,je.y=j),Ft<me&&(je.height=me-Bt),p.splice(g,1);break}}}return p},Zt.findHostInstance=Mg,Zt.findHostInstanceWithNoPortals=function(p){return p=v(p),p=p!==null?b(p):null,p===null?null:Cf(p.stateNode)},Zt.findHostInstanceWithWarning=function(p){return Mg(p)},Zt.flushPassiveEffects=Xi,Zt.flushSyncFromReconciler=function(p){var g=Kt;Kt|=1;var w=an.T,U=zi();try{if(xa(2),an.T=null,p)return p()}finally{xa(U),an.T=w,Kt=g,(Kt&6)===0&&be(0)}},Zt.flushSyncWork=xg,Zt.focusWithin=function(p,g){if(!il)throw Error(i(363));for(p=Ip(p),g=d1(p,g),g=Array.from(g),p=0;p<g.length;){var w=g[p++],U=w.tag;if(!al(w)){if((U===5||U===26||U===27)&&oi(w.stateNode))return!0;for(w=w.child;w!==null;)g.push(w),w=w.sibling}}return!1},Zt.getFindAllNodesFailureDescription=function(p,g){if(!il)throw Error(i(363));var w=0,U=[];p=[Ip(p),0];for(var P=0;P<p.length;){var j=p[P++],me=j.tag,Re=p[P++],je=g[Re];if((me!==5&&me!==26&&me!==27||!al(j))&&(Af(j,je)&&(U.push(Tu(je)),Re++,Re>w&&(w=Re)),Re<g.length))for(j=j.child;j!==null;)p.push(j,Re),j=j.sibling}if(w<g.length){for(p=[];w<g.length;w++)p.push(Tu(g[w]));return`findAllNodes was able to match part of the selector:
  `+(U.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},Zt.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 27:case 5:return Cf(p.child.stateNode);default:return p.child.stateNode}},Zt.injectIntoDevTools=function(){var p={bundleType:0,version:jp,rendererPackageName:td,currentDispatcherRef:an,findFiberByHostInstance:Ug,reconcilerVersion:"19.0.0"};if(nd!==null&&(p.rendererConfig=nd),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)p=!0;else{try{zf=g.inject(p),ns=g}catch{}p=!!g.checkDCE}}return p},Zt.isAlreadyRendering=function(){return!1},Zt.observeVisibleRects=function(p,g,w,U){if(!il)throw Error(i(363));p=Ua(p,g);var P=Lg(p,w,U).disconnect;return{disconnect:function(){P()}}},Zt.shouldError=function(){return null},Zt.shouldSuspend=function(){return!1},Zt.startHostTransition=function(p,g,w,U){if(p.tag!==5)throw Error(i(476));var P=Wo(p).queue;Oa(p,P,g,es,w===null?n:function(){var j=Wo(p).next.queue;return Mo(p,j,{},za()),w(U)})},Zt.updateContainer=function(p,g,w,U){var P=g.current,j=za();return v1(P,j,p,g,w,U),j},Zt.updateContainerSync=function(p,g,w,U){return g.tag===0&&Xi(),v1(g.current,2,p,g,w,U),2},Zt},r.exports.default=r.exports,Object.defineProperty(r.exports,"__esModule",{value:!0})})(xA)),xA.exports}var Y4;function bme(){return Y4||(Y4=1,yA.exports=xme()),yA.exports}var _me=bme();const Sme=up(_me);var W4=ML();function oT(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=e?r.return:r.child;for(;n;){const i=oT(n,e,t);if(i)return i;n=e?null:n.sibling}}function EL(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const lT=EL(Ue.createContext(null));class AL extends Ue.Component{render(){return Ue.createElement(lT.Provider,{value:this._reactInternals},this.props.children)}}function wL(){const r=Ue.useContext(lT);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Ue.useId();return Ue.useMemo(()=>{for(const t of[r,r==null?void 0:r.alternate]){if(!t)continue;const n=oT(t,!1,i=>{let a=i.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(n)return n}},[r,e])}const Mme=Symbol.for("react.context"),Eme=r=>r!==null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===Mme;function Ame(){const r=wL(),[e]=Ue.useState(()=>new Map);e.clear();let t=r;for(;t;){const n=t.type;Eme(n)&&n!==lT&&!e.has(n)&&e.set(n,Ue.use(EL(n))),t=t.return}return e}function wme(){const r=Ame();return Ue.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>Ue.createElement(e,null,Ue.createElement(t.Provider,{...n,value:r.get(t)})),e=>Ue.createElement(AL,{...e})),[r])}function TL(r){let e=r.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const NL=r=>r&&r.isOrthographicCamera,Tme=r=>r&&r.hasOwnProperty("current"),Nme=r=>r!=null&&(typeof r=="string"||typeof r=="number"||r.isColor),$y=((r,e)=>typeof window<"u"&&(((r=window.document)==null?void 0:r.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?Ue.useLayoutEffect:Ue.useEffect;function DL(r){const e=Ue.useRef(r);return $y(()=>void(e.current=r),[r]),e}function Dme(){const r=wL(),e=wme();return Ue.useMemo(()=>({children:t})=>{const i=!!oT(r,!0,a=>a.type===Ue.StrictMode)?Ue.StrictMode:Ue.Fragment;return oe.jsx(i,{children:oe.jsx(e,{children:t})})},[r,e])}function Cme({set:r}){return $y(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}const Rme=(r=>(r=class extends Ue.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},r.getDerivedStateFromError=()=>({error:!0}),r))();function CL(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}function Km(r){var e;return(e=r.__r3f)==null?void 0:e.root.getState()}const xi={obj:r=>r===Object(r)&&!xi.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,nul:r=>r===null,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(xi.str(r)||xi.num(r)||xi.boo(r))return r===e;const a=xi.obj(r);if(a&&n==="reference")return r===e;const s=xi.arr(r);if(s&&t==="reference")return r===e;if((s||a)&&r===e)return!0;let o;for(o in r)if(!(o in e))return!1;if(a&&t==="shallow"&&n==="shallow"){for(o in i?e:r)if(!xi.equ(r[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:r)if(r[o]!==e[o])return!1;if(xi.und(o)){if(s&&r.length===0&&e.length===0||a&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function Ome(r){r.type!=="Scene"&&(r.dispose==null||r.dispose());for(const e in r){const t=r[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const RL=["children","key","ref"];function Bme(r){const e={};for(const t in r)RL.includes(t)||(e[t]=r[t]);return e}function cS(r,e,t,n){const i=r;let a=i==null?void 0:i.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:Bme(n),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=a)),a}function Ty(r,e){if(!e.includes("-"))return{root:r,key:e,target:r[e]};if(e in r)return{root:r,key:e,target:r[e]};let t=r;const n=e.split("-");for(const i of n){if(typeof t!="object"||t===null){if(t!==void 0){const a=n.slice(n.indexOf(i)).join("-");return{root:t,key:a,target:void 0}}return{root:r,key:e,target:void 0}}e=i,r=t,t=t[e]}return{root:r,key:e,target:t}}const $4=/-\d+$/;function fS(r,e){if(xi.str(e.props.attach)){if($4.test(e.props.attach)){const i=e.props.attach.replace($4,""),{root:a,key:s}=Ty(r.object,i);Array.isArray(a[s])||(a[s]=[])}const{root:t,key:n}=Ty(r.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else xi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(r.object,e.object))}function hS(r,e){if(xi.str(e.props.attach)){const{root:t,key:n}=Ty(r.object,e.props.attach),i=e.previousAttach;i===void 0?delete t[n]:t[n]=i}else e.previousAttach==null||e.previousAttach(r.object,e.object);delete e.previousAttach}const S2=[...RL,"args","dispose","attach","object","onUpdate","dispose"],Z4=new Map;function Ume(r){let e=Z4.get(r.constructor);try{e||(e=new r.constructor,Z4.set(r.constructor,e))}catch{}return e}function zme(r,e){const t={};for(const n in e)if(!S2.includes(n)&&!xi.equ(e[n],r.props[n])){t[n]=e[n];for(const i in e)i.startsWith(`${n}-`)&&(t[i]=e[i])}for(const n in r.props){if(S2.includes(n)||e.hasOwnProperty(n))continue;const{root:i,key:a}=Ty(r.object,n);if(i.constructor&&i.constructor.length===0){const s=Ume(i);xi.und(s)||(t[a]=s[a])}else t[a]=0}return t}const Fme=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Lme=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function lh(r,e){var t;const n=r.__r3f,i=n&&TL(n).getState(),a=n==null?void 0:n.eventCount;for(const o in e){let c=e[o];if(S2.includes(o))continue;if(n&&Lme.test(o)){typeof c=="function"?n.handlers[o]=c:delete n.handlers[o],n.eventCount=Object.keys(n.handlers).length;continue}if(c===void 0)continue;let{root:u,key:h,target:d}=Ty(r,o);if(d===void 0&&(typeof u!="object"||u===null))throw Error(`R3F: Cannot set "${o}". Ensure it is an object before setting "${h}".`);if(d instanceof Nv&&c instanceof Nv)d.mask=c.mask;else if(d instanceof zt&&Nme(c))d.set(c);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof d.copy=="function"&&c!=null&&c.constructor&&d.constructor===c.constructor)d.copy(c);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&Array.isArray(c))typeof d.fromArray=="function"?d.fromArray(c):d.set(...c);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof c=="number")typeof d.setScalar=="function"?d.setScalar(c):d.set(c);else{var s;u[h]=c,i&&!i.linear&&Fme.includes(h)&&(s=u[h])!=null&&s.isTexture&&u[h].format===ms&&u[h].type===Sl&&(u[h].colorSpace=ds)}}if(n!=null&&n.parent&&i!=null&&i.internal&&(t=n.object)!=null&&t.isObject3D&&a!==n.eventCount){const o=n.object,c=i.internal.interaction.indexOf(o);c>-1&&i.internal.interaction.splice(c,1),n.eventCount&&o.raycast!==null&&i.internal.interaction.push(o)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&eg(n),r}function eg(r){var e;if(!r.parent)return;r.props.onUpdate==null||r.props.onUpdate(r.object);const t=(e=r.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Ime(r,e){r.manual||(NL(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix())}const co=r=>r==null?void 0:r.isObject3D;function Eb(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function OL(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function Pme(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{OL(t.capturedMap,e,n,i)})}function Hme(r){function e(c){const{internal:u}=r.getState(),h=c.offsetX-u.initialClick[0],d=c.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(c){return c.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function n(c,u){const h=r.getState(),d=new Set,m=[],v=u?u(h.internal.interaction):h.internal.interaction;for(let _=0;_<v.length;_++){const T=Km(v[_]);T&&(T.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(c,h);function x(_){const T=Km(_);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var E;T.events.compute==null||T.events.compute(c,T,(E=T.previousRoot)==null?void 0:E.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(_,!0):[]}let b=v.flatMap(x).sort((_,T)=>{const E=Km(_.object),A=Km(T.object);return!E||!A?_.distance-T.distance:A.events.priority-E.events.priority||_.distance-T.distance}).filter(_=>{const T=Eb(_);return d.has(T)?!1:(d.add(T),!0)});h.events.filter&&(b=h.events.filter(b,h));for(const _ of b){let T=_.object;for(;T;){var M;(M=T.__r3f)!=null&&M.eventCount&&m.push({..._,eventObject:T}),T=T.parent}}if("pointerId"in c&&h.internal.capturedMap.has(c.pointerId))for(let _ of h.internal.capturedMap.get(c.pointerId).values())d.has(Eb(_.intersection))||m.push(_.intersection);return m}function i(c,u,h,d){if(c.length){const m={stopped:!1};for(const v of c){let x=Km(v.object);if(x||v.object.traverseAncestors(b=>{const M=Km(b);if(M)return x=M,!1}),x){const{raycaster:b,pointer:M,camera:_,internal:T}=x,E=new xe(M.x,M.y,0).unproject(_),A=C=>{var R,F;return(R=(F=T.capturedMap.get(C))==null?void 0:F.has(v.eventObject))!=null?R:!1},D=C=>{const R={intersection:v,target:u.target};T.capturedMap.has(C)?T.capturedMap.get(C).set(v.eventObject,R):T.capturedMap.set(C,new Map([[v.eventObject,R]])),u.target.setPointerCapture(C)},N=C=>{const R=T.capturedMap.get(C);R&&OL(T.capturedMap,v.eventObject,R,C)};let O={};for(let C in u){let R=u[C];typeof R!="function"&&(O[C]=R)}let z={...v,...O,pointer:M,intersections:c,stopped:m.stopped,delta:h,unprojectedPoint:E,ray:b.ray,camera:_,stopPropagation(){const C="pointerId"in u&&T.capturedMap.get(u.pointerId);if((!C||C.has(v.eventObject))&&(z.stopped=m.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(R=>R.eventObject===v.eventObject))){const R=c.slice(0,c.indexOf(v));a([...R,v])}},target:{hasPointerCapture:A,setPointerCapture:D,releasePointerCapture:N},currentTarget:{hasPointerCapture:A,setPointerCapture:D,releasePointerCapture:N},nativeEvent:u};if(d(z),m.stopped===!0)break}}}return c}function a(c){const{internal:u}=r.getState();for(const h of u.hovered.values())if(!c.length||!c.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const m=h.eventObject.__r3f;if(u.hovered.delete(Eb(h)),m!=null&&m.eventCount){const v=m.handlers,x={...h,intersections:c};v.onPointerOut==null||v.onPointerOut(x),v.onPointerLeave==null||v.onPointerLeave(x)}}}function s(c,u){for(let h=0;h<u.length;h++){const d=u[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(c)}}function o(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return u=>{const{internal:h}=r.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),a([]))})}}return function(h){const{onPointerMissed:d,internal:m}=r.getState();m.lastEvent.current=h;const v=c==="onPointerMove",x=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",M=n(h,v?t:void 0),_=x?e(h):0;c==="onPointerDown"&&(m.initialClick=[h.offsetX,h.offsetY],m.initialHits=M.map(E=>E.eventObject)),x&&!M.length&&_<=2&&(s(h,m.interaction),d&&d(h)),v&&a(M);function T(E){const A=E.eventObject,D=A.__r3f;if(!(D!=null&&D.eventCount))return;const N=D.handlers;if(v){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const O=Eb(E),z=m.hovered.get(O);z?z.stopped&&E.stopPropagation():(m.hovered.set(O,E),N.onPointerOver==null||N.onPointerOver(E),N.onPointerEnter==null||N.onPointerEnter(E))}N.onPointerMove==null||N.onPointerMove(E)}else{const O=N[c];O?(!x||m.initialHits.includes(A))&&(s(h,m.interaction.filter(z=>!m.initialHits.includes(z))),O(E)):x&&m.initialHits.includes(A)&&s(h,m.interaction.filter(z=>!m.initialHits.includes(z)))}}i(M,h,_,T)}}return{handlePointer:o}}const K4=r=>!!(r!=null&&r.render),BL=Ue.createContext(null),Vme=(r,e)=>{const t=gme((o,c)=>{const u=new xe,h=new xe,d=new xe;function m(_=c().camera,T=h,E=c().size){const{width:A,height:D,top:N,left:O}=E,z=A/D;T.isVector3?d.copy(T):d.set(...T);const C=_.getWorldPosition(u).distanceTo(d);if(NL(_))return{width:A/_.zoom,height:D/_.zoom,top:N,left:O,factor:1,distance:C,aspect:z};{const R=_.fov*Math.PI/180,F=2*Math.tan(R/2)*C,H=F*(A/D);return{width:H,height:F,top:N,left:O,factor:A/H,distance:C,aspect:z}}}let v;const x=_=>o(T=>({performance:{...T.performance,current:_}})),b=new gt;return{set:o,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(_=1)=>r(c(),_),advance:(_,T)=>e(_,T,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new nT,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=c();v&&clearTimeout(v),_.performance.current!==_.performance.min&&x(_.performance.min),v=setTimeout(()=>x(c().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:_=>o(T=>({...T,events:{...T.events,..._}})),setSize:(_,T,E=0,A=0)=>{const D=c().camera,N={width:_,height:T,top:E,left:A};o(O=>({size:N,viewport:{...O.viewport,...m(D,h,N)}}))},setDpr:_=>o(T=>{const E=CL(_);return{viewport:{...T.viewport,dpr:E,initialDpr:T.viewport.initialDpr||E}}}),setFrameloop:(_="always")=>{const T=c().clock;T.stop(),T.elapsedTime=0,_!=="never"&&(T.start(),T.elapsedTime=0),o(()=>({frameloop:_}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:Ue.createRef(),active:!1,frames:0,priority:0,subscribe:(_,T,E)=>{const A=c().internal;return A.priority=A.priority+(T>0?1:0),A.subscribers.push({ref:_,priority:T,store:E}),A.subscribers=A.subscribers.sort((D,N)=>D.priority-N.priority),()=>{const D=c().internal;D!=null&&D.subscribers&&(D.priority=D.priority-(T>0?1:0),D.subscribers=D.subscribers.filter(N=>N.ref!==_))}}}}}),n=t.getState();let i=n.size,a=n.viewport.dpr,s=n.camera;return t.subscribe(()=>{const{camera:o,size:c,viewport:u,gl:h,set:d}=t.getState();if(c.width!==i.width||c.height!==i.height||u.dpr!==a){i=c,a=u.dpr,Ime(o,c),u.dpr>0&&h.setPixelRatio(u.dpr);const m=typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(c.width,c.height,m)}o!==s&&(s=o,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>r(o)),t};function UL(){const r=Ue.useContext(BL);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Yc(r=t=>t,e){return UL()(r,e)}function bM(r,e=0){const t=UL(),n=t.getState().internal.subscribe,i=DL(r);return $y(()=>n(i,e,t),[e,n,t]),null}function qme(r){const e=Sme(r);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ue.version}),e}const zL=0,Ov={},Gme=/^three(?=[A-Z])/,_M=r=>`${r[0].toUpperCase()}${r.slice(1)}`;let kme=0;const Xme=r=>typeof r=="function";function FL(r){if(Xme(r)){const e=`${kme++}`;return Ov[e]=r,e}else Object.assign(Ov,r)}function LL(r,e){const t=_M(r),n=Ov[t];if(r!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(r==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function jme(r,e,t){var n;return r=_M(r)in Ov?r:r.replace(Gme,""),LL(r,e),r==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,cS(e.object,t,r,e)}function Yme(r){if(!r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?hS(r.parent,r):co(r.object)&&(r.object.visible=!1),r.isHidden=!0,eg(r)}}function IL(r){if(r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?fS(r.parent,r):co(r.object)&&r.props.visible!==!1&&(r.object.visible=!0),r.isHidden=!1,eg(r)}}function uT(r,e,t){const n=e.root.getState();if(!(!r.parent&&r.object!==n.scene)){if(!e.object){var i,a;const s=Ov[_M(e.type)];e.object=(i=e.props.object)!=null?i:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(lh(e.object,e.props),e.props.attach)fS(r,e);else if(co(e.object)&&co(r.object)){const s=r.object.children.indexOf(t==null?void 0:t.object);if(t&&s!==-1){const o=r.object.children.indexOf(e.object);if(o!==-1){r.object.children.splice(o,1);const c=o<s?s-1:s;r.object.children.splice(c,0,e.object)}else e.object.parent=r.object,r.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),r.object.dispatchEvent({type:"childadded",child:e.object})}else r.object.add(e.object)}for(const s of e.children)uT(e,s);eg(e)}}function SA(r,e){e&&(e.parent=r,r.children.push(e),uT(r,e))}function Q4(r,e,t){if(!e||!t)return;e.parent=r;const n=r.children.indexOf(t);n!==-1?r.children.splice(n,0,e):r.children.push(e),uT(r,e,t)}function PL(r){if(typeof r.dispose=="function"){const e=()=>{try{r.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():W4.unstable_scheduleCallback(W4.unstable_IdlePriority,e)}}function M2(r,e,t){if(!e)return;e.parent=null;const n=r.children.indexOf(e);n!==-1&&r.children.splice(n,1),e.props.attach?hS(r,e):co(e.object)&&co(r.object)&&(r.object.remove(e.object),Pme(TL(e),e.object));const i=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];M2(e,s,i)}e.children.length=0,delete e.object.__r3f,i&&e.type!=="primitive"&&e.object.type!=="Scene"&&PL(e.object),t===void 0&&eg(e)}function Wme(r,e){for(const t of[r,r.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const kb=[];function $me(){for(const[t]of kb){const n=t.parent;if(n){t.props.attach?hS(n,t):co(t.object)&&co(n.object)&&n.object.remove(t.object);for(const i of t.children)i.props.attach?hS(t,i):co(i.object)&&co(t.object)&&t.object.remove(i.object)}t.isHidden&&IL(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&PL(t.object)}for(const[t,n,i]of kb){t.props=n;const a=t.parent;if(a){var r,e;const s=Ov[_M(t.type)];t.object=(r=t.props.object)!=null?r:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,Wme(i,t.object),lh(t.object,t.props),t.props.attach?fS(a,t):co(t.object)&&co(a.object)&&a.object.add(t.object);for(const o of t.children)o.props.attach?fS(t,o):co(o.object)&&co(t.object)&&t.object.add(o.object);eg(t)}}kb.length=0}const MA=()=>{},J4={};let Ab=zL;const Zme=0,Kme=4,E2=qme({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:jme,removeChild:M2,appendChild:SA,appendInitialChild:SA,insertBefore:Q4,appendChildToContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||SA(t,e)},removeChildFromContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||M2(t,e)},insertInContainerBefore(r,e,t){const n=r.getState().scene.__r3f;!e||!t||!n||Q4(n,e,t)},getRootHostContext:()=>J4,getChildHostContext:()=>J4,commitUpdate(r,e,t,n,i){var a,s,o;LL(e,n);let c=!1;if((r.type==="primitive"&&t.object!==n.object||((a=n.args)==null?void 0:a.length)!==((s=t.args)==null?void 0:s.length)||(o=n.args)!=null&&o.some((h,d)=>{var m;return h!==((m=t.args)==null?void 0:m[d])}))&&(c=!0),c)kb.push([r,{...n},i]);else{const h=zme(r,n);Object.keys(h).length&&(Object.assign(r.props,h),lh(r.object,h))}(i.sibling===null||(i.flags&Kme)===Zme)&&$me()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:r=>r==null?void 0:r.object,prepareForCommit:()=>null,preparePortalMount:r=>cS(r.getState().scene,r,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Yme,unhideInstance:IL,createTextInstance:MA,hideTextInstance:MA,unhideTextInstance:MA,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:Ue.createContext(null),setCurrentUpdatePriority(r){Ab=r},getCurrentUpdatePriority(){return Ab},resolveUpdatePriority(){var r;if(Ab!==zL)return Ab;switch(typeof window<"u"&&((r=window.event)==null?void 0:r.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Gb.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Gb.ContinuousEventPriority;default:return Gb.DefaultEventPriority}},resetFormInstance(){}}),op=new Map,Qm={objects:"shallow",strict:!1};function Qme(r,e){if(!e&&typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:t,height:n,top:i,left:a}=r.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Jme(r){const e=op.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=n||Vme(T2,tB),s=t||E2.createContainer(a,Gb.ConcurrentRoot,null,!1,null,"",i,i,i,null);e||op.set(r,{fiber:s,store:a});let o,c,u=!1,h=null;return{async configure(d={}){let m;h=new Promise(Q=>m=Q);let{gl:v,size:x,scene:b,events:M,onCreated:_,shadows:T=!1,linear:E=!1,flat:A=!1,legacy:D=!1,orthographic:N=!1,frameloop:O="always",dpr:z=[1,2],performance:C,raycaster:R,camera:F,onPointerMissed:H}=d,X=a.getState(),$=X.gl;if(!X.gl){const Q={canvas:r,powerPreference:"high-performance",antialias:!0,alpha:!0},k=typeof v=="function"?await v(Q):v;K4(k)?$=k:$=new SL({...Q,...v}),X.set({gl:$})}let Y=X.raycaster;Y||X.set({raycaster:Y=new hL});const{params:I,...Z}=R||{};if(xi.equ(Z,Y,Qm)||lh(Y,{...Z}),xi.equ(I,Y.params,Qm)||lh(Y,{params:{...Y.params,...I}}),!X.camera||X.camera===c&&!xi.equ(c,F,Qm)){c=F;const Q=F==null?void 0:F.isCamera,k=Q?F:N?new dh(0,0,0,0,.1,1e3):new Hi(75,0,.1,1e3);Q||(k.position.z=5,F&&(lh(k,F),k.manual||("aspect"in F||"left"in F||"right"in F||"bottom"in F||"top"in F)&&(k.manual=!0,k.updateProjectionMatrix())),!X.camera&&!(F!=null&&F.rotation)&&k.lookAt(0,0,0)),X.set({camera:k}),Y.camera=k}if(!X.scene){let Q;b!=null&&b.isScene?(Q=b,cS(Q,a,"",{})):(Q=new Uw,cS(Q,a,"",{}),b&&lh(Q,b)),X.set({scene:Q})}M&&!X.events.handlers&&X.set({events:M(a)});const W=Qme(r,x);if(xi.equ(W,X.size,Qm)||X.setSize(W.width,W.height,W.top,W.left),z&&X.viewport.dpr!==CL(z)&&X.setDpr(z),X.frameloop!==O&&X.setFrameloop(O),X.onPointerMissed||X.set({onPointerMissed:H}),C&&!xi.equ(C,X.performance,Qm)&&X.set(Q=>({performance:{...Q.performance,...C}})),!X.xr){var te;const Q=(J,De)=>{const pe=a.getState();pe.frameloop!=="never"&&tB(J,!0,pe,De)},k=()=>{const J=a.getState();J.gl.xr.enabled=J.gl.xr.isPresenting,J.gl.xr.setAnimationLoop(J.gl.xr.isPresenting?Q:null),J.gl.xr.isPresenting||T2(J)},ae={connect(){const J=a.getState().gl;J.xr.addEventListener("sessionstart",k),J.xr.addEventListener("sessionend",k)},disconnect(){const J=a.getState().gl;J.xr.removeEventListener("sessionstart",k),J.xr.removeEventListener("sessionend",k)}};typeof((te=$.xr)==null?void 0:te.addEventListener)=="function"&&ae.connect(),X.set({xr:ae})}if($.shadowMap){const Q=$.shadowMap.enabled,k=$.shadowMap.type;if($.shadowMap.enabled=!!T,xi.boo(T))$.shadowMap.type=Y0;else if(xi.str(T)){var le;const ae={basic:AF,percentage:PS,soft:Y0,variance:iu};$.shadowMap.type=(le=ae[T])!=null?le:Y0}else xi.obj(T)&&Object.assign($.shadowMap,T);(Q!==$.shadowMap.enabled||k!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}return pr.enabled=!D,u||($.outputColorSpace=E?xh:ds,$.toneMapping=A?nc:xw),X.legacy!==D&&X.set(()=>({legacy:D})),X.linear!==E&&X.set(()=>({linear:E})),X.flat!==A&&X.set(()=>({flat:A})),v&&!xi.fun(v)&&!K4(v)&&!xi.equ(v,$,Qm)&&lh($,v),o=_,u=!0,m(),this},render(d){return!u&&!h&&this.configure(),h.then(()=>{E2.updateContainer(oe.jsx(eve,{store:a,children:d,onCreated:o,rootElement:r}),s,null,()=>{})}),a},unmount(){HL(r)}}}function eve({store:r,children:e,onCreated:t,rootElement:n}){return $y(()=>{const i=r.getState();i.set(a=>({internal:{...a.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),oe.jsx(BL.Provider,{value:r,children:e})}function HL(r,e){const t=op.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),E2.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var a,s,o,c;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(c=i.gl)!=null&&c.xr&&i.xr.disconnect(),Ome(i.scene),op.delete(r)}catch{}},500)})}}const tve=new Set,nve=new Set,rve=new Set;function EA(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function ny(r,e){switch(r){case"before":return EA(tve,e);case"after":return EA(nve,e);case"tail":return EA(rve,e)}}let AA,wA;function A2(r,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),AA=e.internal.subscribers;for(let i=0;i<AA.length;i++)wA=AA[i],wA.ref.current(wA.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let dS=!1,w2=!1,TA,eB,Jm;function VL(r){eB=requestAnimationFrame(VL),dS=!0,TA=0,ny("before",r),w2=!0;for(const t of op.values()){var e;Jm=t.store.getState(),Jm.internal.active&&(Jm.frameloop==="always"||Jm.internal.frames>0)&&!((e=Jm.gl.xr)!=null&&e.isPresenting)&&(TA+=A2(r,Jm))}if(w2=!1,ny("after",r),TA===0)return ny("tail",r),dS=!1,cancelAnimationFrame(eB)}function T2(r,e=1){var t;if(!r)return op.forEach(n=>T2(n.store.getState(),e));(t=r.gl.xr)!=null&&t.isPresenting||!r.internal.active||r.frameloop==="never"||(e>1?r.internal.frames=Math.min(60,r.internal.frames+e):w2?r.internal.frames=2:r.internal.frames=1,dS||(dS=!0,requestAnimationFrame(VL)))}function tB(r,e=!0,t,n){if(e&&ny("before",r),t)A2(r,t,n);else for(const i of op.values())A2(r,i.store.getState());e&&ny("after",r)}const NA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function ive(r){const{handlePointer:e}=Hme(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(NA).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{const{set:n,events:i}=r.getState();if(i.disconnect==null||i.disconnect(),n(a=>({events:{...a.events,connected:t}})),i.handlers)for(const a in i.handlers){const s=i.handlers[a],[o,c]=NA[a];t.addEventListener(o,s,{passive:c})}},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){if(n.handlers)for(const i in n.handlers){const a=n.handlers[i],[s]=NA[i];n.connected.removeEventListener(s,a)}t(i=>({events:{...i.events,connected:void 0}}))}}}}function nB(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function ave({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=Ue.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=Ue.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=r?typeof r=="number"?r:r.scroll:null,u=r?typeof r=="number"?r:r.resize:null,h=Ue.useRef(!1);Ue.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,m,v]=Ue.useMemo(()=>{const _=()=>{if(!o.current.element)return;const{left:T,top:E,width:A,height:D,bottom:N,right:O,x:z,y:C}=o.current.element.getBoundingClientRect(),R={left:T,top:E,width:A,height:D,bottom:N,right:O,x:z,y:C};o.current.element instanceof HTMLElement&&n&&(R.height=o.current.element.offsetHeight,R.width=o.current.element.offsetWidth),Object.freeze(R),h.current&&!uve(o.current.lastBounds,R)&&s(o.current.lastBounds=R)};return[_,u?nB(_,u):_,c?nB(_,c):_]},[s,n,c,u]);function x(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",v,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function b(){o.current.element&&(o.current.resizeObserver=new i(v),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(_=>_.addEventListener("scroll",v,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const M=_=>{!_||_===o.current.element||(x(),o.current.element=_,o.current.scrollContainers=qL(_),b())};return ove(v,!!e),sve(m),Ue.useEffect(()=>{x(),b()},[e,v,m]),Ue.useEffect(()=>x,[]),[M,a,d]}function sve(r){Ue.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function ove(r,e){Ue.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function qL(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(a=>a==="auto"||a==="scroll")&&e.push(r),[...e,...qL(r.parentElement)]}const lve=["x","y","top","bottom","left","right","width","height"],uve=(r,e)=>lve.every(t=>r[t]===e[t]);function cve({ref:r,children:e,fallback:t,resize:n,style:i,gl:a,events:s=ive,eventSource:o,eventPrefix:c,shadows:u,linear:h,flat:d,legacy:m,orthographic:v,frameloop:x,dpr:b,performance:M,raycaster:_,camera:T,scene:E,onPointerMissed:A,onCreated:D,...N}){Ue.useMemo(()=>FL(ime),[]);const O=Dme(),[z,C]=ave({scroll:!0,debounce:{scroll:50,resize:0},...n}),R=Ue.useRef(null),F=Ue.useRef(null);Ue.useImperativeHandle(r,()=>R.current);const H=DL(A),[X,$]=Ue.useState(!1),[Y,I]=Ue.useState(!1);if(X)throw X;if(Y)throw Y;const Z=Ue.useRef(null);$y(()=>{const te=R.current;if(C.width>0&&C.height>0&&te){Z.current||(Z.current=Jme(te));async function le(){await Z.current.configure({gl:a,scene:E,events:s,shadows:u,linear:h,flat:d,legacy:m,orthographic:v,frameloop:x,dpr:b,performance:M,raycaster:_,camera:T,size:C,onPointerMissed:(...Q)=>H.current==null?void 0:H.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(o?Tme(o)?o.current:o:F.current),c&&Q.setEvents({compute:(k,ae)=>{const J=k[c+"X"],De=k[c+"Y"];ae.pointer.set(J/ae.size.width*2-1,-(De/ae.size.height)*2+1),ae.raycaster.setFromCamera(ae.pointer,ae.camera)}}),D==null||D(Q)}}),Z.current.render(oe.jsx(O,{children:oe.jsx(Rme,{set:I,children:oe.jsx(Ue.Suspense,{fallback:oe.jsx(Cme,{set:$}),children:e??null})})}))}le()}}),Ue.useEffect(()=>{const te=R.current;if(te)return()=>HL(te)},[]);const W=o?"none":"auto";return oe.jsx("div",{ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...i},...N,children:oe.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:oe.jsx("canvas",{ref:R,style:{display:"block"},children:t})})})}function fve(r){return oe.jsx(AL,{children:oe.jsx(cve,{...r})})}const GL=parseInt(Wv.replace(/\D+/g,"")),kL=GL>=125?"uv1":"uv2";var hve=Object.defineProperty,dve=(r,e,t)=>e in r?hve(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pve=(r,e,t)=>(dve(r,e+"",t),t);class mve{constructor(){pve(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}var vve=Object.defineProperty,gve=(r,e,t)=>e in r?vve(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,sn=(r,e,t)=>(gve(r,typeof e!="symbol"?e+"":e,t),t);const wb=new bp,rB=new Zu,yve=Math.cos(70*(Math.PI/180)),iB=(r,e)=>(r%e+e)%e;let xve=class extends mve{constructor(e,t){super(),sn(this,"object"),sn(this,"domElement"),sn(this,"enabled",!0),sn(this,"target",new xe),sn(this,"minDistance",0),sn(this,"maxDistance",1/0),sn(this,"minZoom",0),sn(this,"maxZoom",1/0),sn(this,"minPolarAngle",0),sn(this,"maxPolarAngle",Math.PI),sn(this,"minAzimuthAngle",-1/0),sn(this,"maxAzimuthAngle",1/0),sn(this,"enableDamping",!1),sn(this,"dampingFactor",.05),sn(this,"enableZoom",!0),sn(this,"zoomSpeed",1),sn(this,"enableRotate",!0),sn(this,"rotateSpeed",1),sn(this,"enablePan",!0),sn(this,"panSpeed",1),sn(this,"screenSpacePanning",!0),sn(this,"keyPanSpeed",7),sn(this,"zoomToCursor",!1),sn(this,"autoRotate",!1),sn(this,"autoRotateSpeed",2),sn(this,"reverseOrbit",!1),sn(this,"reverseHorizontalOrbit",!1),sn(this,"reverseVerticalOrbit",!1),sn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),sn(this,"mouseButtons",{LEFT:Pd.ROTATE,MIDDLE:Pd.DOLLY,RIGHT:Pd.PAN}),sn(this,"touches",{ONE:Hd.ROTATE,TWO:Hd.DOLLY_PAN}),sn(this,"target0"),sn(this,"position0"),sn(this,"zoom0"),sn(this,"_domElementKeyEvents",null),sn(this,"getPolarAngle"),sn(this,"getAzimuthalAngle"),sn(this,"setPolarAngle"),sn(this,"setAzimuthalAngle"),sn(this,"getDistance"),sn(this,"getZoomScale"),sn(this,"listenToKeyEvents"),sn(this,"stopListenToKeyEvents"),sn(this,"saveState"),sn(this,"reset"),sn(this,"update"),sn(this,"connect"),sn(this,"dispose"),sn(this,"dollyIn"),sn(this,"dollyOut"),sn(this,"getScale"),sn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=ye=>{let Ve=iB(ye,2*Math.PI),G=h.phi;G<0&&(G+=2*Math.PI),Ve<0&&(Ve+=2*Math.PI);let ee=Math.abs(Ve-G);2*Math.PI-ee<ee&&(Ve<G?Ve+=2*Math.PI:G+=2*Math.PI),d.phi=Ve-G,n.update()},this.setAzimuthalAngle=ye=>{let Ve=iB(ye,2*Math.PI),G=h.theta;G<0&&(G+=2*Math.PI),Ve<0&&(Ve+=2*Math.PI);let ee=Math.abs(Ve-G);2*Math.PI-ee<ee&&(Ve<G?Ve+=2*Math.PI:G+=2*Math.PI),d.theta=Ve-G,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ye=>{ye.addEventListener("keydown",ve),this._domElementKeyEvents=ye},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ve),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),c=o.NONE},this.update=(()=>{const ye=new xe,Ve=new xe(0,1,0),G=new ys().setFromUnitVectors(e.up,Ve),ee=G.clone().invert(),Ee=new xe,ze=new ys,ft=2*Math.PI;return function(){const ct=n.object.position;G.setFromUnitVectors(e.up,Ve),ee.copy(G).invert(),ye.copy(ct).sub(n.target),ye.applyQuaternion(G),h.setFromVector3(ye),n.autoRotate&&c===o.NONE&&$(H()),n.enableDamping?(h.theta+=d.theta*n.dampingFactor,h.phi+=d.phi*n.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let Nt=n.minAzimuthAngle,It=n.maxAzimuthAngle;isFinite(Nt)&&isFinite(It)&&(Nt<-Math.PI?Nt+=ft:Nt>Math.PI&&(Nt-=ft),It<-Math.PI?It+=ft:It>Math.PI&&(It-=ft),Nt<=It?h.theta=Math.max(Nt,Math.min(It,h.theta)):h.theta=h.theta>(Nt+It)/2?Math.max(Nt,h.theta):Math.min(It,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(v,n.dampingFactor):n.target.add(v),n.zoomToCursor&&C||n.object.isOrthographicCamera?h.radius=ae(h.radius):h.radius=ae(h.radius*m),ye.setFromSpherical(h),ye.applyQuaternion(ee),ct.copy(n.target).add(ye),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,v.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),v.set(0,0,0));let yn=!1;if(n.zoomToCursor&&C){let on=null;if(n.object instanceof Hi&&n.object.isPerspectiveCamera){const Dr=ye.length();on=ae(Dr*m);const ni=Dr-on;n.object.position.addScaledVector(O,ni),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Dr=new xe(z.x,z.y,0);Dr.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix(),yn=!0;const ni=new xe(z.x,z.y,0);ni.unproject(n.object),n.object.position.sub(ni).add(Dr),n.object.updateMatrixWorld(),on=ye.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;on!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(on).add(n.object.position):(wb.origin.copy(n.object.position),wb.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(wb.direction))<yve?e.lookAt(n.target):(rB.setFromNormalAndCoplanarPoint(n.object.up,n.target),wb.intersectPlane(rB,n.target))))}else n.object instanceof dh&&n.object.isOrthographicCamera&&(yn=m!==1,yn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix()));return m=1,C=!1,yn||Ee.distanceToSquared(n.object.position)>u||8*(1-ze.dot(n.object.quaternion))>u?(n.dispatchEvent(i),Ee.copy(n.object.position),ze.copy(n.object.quaternion),yn=!1,!0):!1}})(),this.connect=ye=>{n.domElement=ye,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",We),n.domElement.addEventListener("pointerdown",Ce),n.domElement.addEventListener("pointercancel",V),n.domElement.addEventListener("wheel",Se)},this.dispose=()=>{var ye,Ve,G,ee,Ee,ze;n.domElement&&(n.domElement.style.touchAction="auto"),(ye=n.domElement)==null||ye.removeEventListener("contextmenu",We),(Ve=n.domElement)==null||Ve.removeEventListener("pointerdown",Ce),(G=n.domElement)==null||G.removeEventListener("pointercancel",V),(ee=n.domElement)==null||ee.removeEventListener("wheel",Se),(Ee=n.domElement)==null||Ee.ownerDocument.removeEventListener("pointermove",q),(ze=n.domElement)==null||ze.ownerDocument.removeEventListener("pointerup",V),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",ve)};const n=this,i={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=o.NONE;const u=1e-6,h=new y2,d=new y2;let m=1;const v=new xe,x=new gt,b=new gt,M=new gt,_=new gt,T=new gt,E=new gt,A=new gt,D=new gt,N=new gt,O=new xe,z=new gt;let C=!1;const R=[],F={};function H(){return 2*Math.PI/60/60*n.autoRotateSpeed}function X(){return Math.pow(.95,n.zoomSpeed)}function $(ye){n.reverseOrbit||n.reverseHorizontalOrbit?d.theta+=ye:d.theta-=ye}function Y(ye){n.reverseOrbit||n.reverseVerticalOrbit?d.phi+=ye:d.phi-=ye}const I=(()=>{const ye=new xe;return function(G,ee){ye.setFromMatrixColumn(ee,0),ye.multiplyScalar(-G),v.add(ye)}})(),Z=(()=>{const ye=new xe;return function(G,ee){n.screenSpacePanning===!0?ye.setFromMatrixColumn(ee,1):(ye.setFromMatrixColumn(ee,0),ye.crossVectors(n.object.up,ye)),ye.multiplyScalar(G),v.add(ye)}})(),W=(()=>{const ye=new xe;return function(G,ee){const Ee=n.domElement;if(Ee&&n.object instanceof Hi&&n.object.isPerspectiveCamera){const ze=n.object.position;ye.copy(ze).sub(n.target);let ft=ye.length();ft*=Math.tan(n.object.fov/2*Math.PI/180),I(2*G*ft/Ee.clientHeight,n.object.matrix),Z(2*ee*ft/Ee.clientHeight,n.object.matrix)}else Ee&&n.object instanceof dh&&n.object.isOrthographicCamera?(I(G*(n.object.right-n.object.left)/n.object.zoom/Ee.clientWidth,n.object.matrix),Z(ee*(n.object.top-n.object.bottom)/n.object.zoom/Ee.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function te(ye){n.object instanceof Hi&&n.object.isPerspectiveCamera||n.object instanceof dh&&n.object.isOrthographicCamera?m=ye:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function le(ye){te(m/ye)}function Q(ye){te(m*ye)}function k(ye){if(!n.zoomToCursor||!n.domElement)return;C=!0;const Ve=n.domElement.getBoundingClientRect(),G=ye.clientX-Ve.left,ee=ye.clientY-Ve.top,Ee=Ve.width,ze=Ve.height;z.x=G/Ee*2-1,z.y=-(ee/ze)*2+1,O.set(z.x,z.y,1).unproject(n.object).sub(n.object.position).normalize()}function ae(ye){return Math.max(n.minDistance,Math.min(n.maxDistance,ye))}function J(ye){x.set(ye.clientX,ye.clientY)}function De(ye){k(ye),A.set(ye.clientX,ye.clientY)}function pe(ye){_.set(ye.clientX,ye.clientY)}function _e(ye){b.set(ye.clientX,ye.clientY),M.subVectors(b,x).multiplyScalar(n.rotateSpeed);const Ve=n.domElement;Ve&&($(2*Math.PI*M.x/Ve.clientHeight),Y(2*Math.PI*M.y/Ve.clientHeight)),x.copy(b),n.update()}function ne(ye){D.set(ye.clientX,ye.clientY),N.subVectors(D,A),N.y>0?le(X()):N.y<0&&Q(X()),A.copy(D),n.update()}function ue(ye){T.set(ye.clientX,ye.clientY),E.subVectors(T,_).multiplyScalar(n.panSpeed),W(E.x,E.y),_.copy(T),n.update()}function ge(ye){k(ye),ye.deltaY<0?Q(X()):ye.deltaY>0&&le(X()),n.update()}function Ae(ye){let Ve=!1;switch(ye.code){case n.keys.UP:W(0,n.keyPanSpeed),Ve=!0;break;case n.keys.BOTTOM:W(0,-n.keyPanSpeed),Ve=!0;break;case n.keys.LEFT:W(n.keyPanSpeed,0),Ve=!0;break;case n.keys.RIGHT:W(-n.keyPanSpeed,0),Ve=!0;break}Ve&&(ye.preventDefault(),n.update())}function Te(){if(R.length==1)x.set(R[0].pageX,R[0].pageY);else{const ye=.5*(R[0].pageX+R[1].pageX),Ve=.5*(R[0].pageY+R[1].pageY);x.set(ye,Ve)}}function se(){if(R.length==1)_.set(R[0].pageX,R[0].pageY);else{const ye=.5*(R[0].pageX+R[1].pageX),Ve=.5*(R[0].pageY+R[1].pageY);_.set(ye,Ve)}}function Me(){const ye=R[0].pageX-R[1].pageX,Ve=R[0].pageY-R[1].pageY,G=Math.sqrt(ye*ye+Ve*Ve);A.set(0,G)}function Be(){n.enableZoom&&Me(),n.enablePan&&se()}function Le(){n.enableZoom&&Me(),n.enableRotate&&Te()}function Pe(ye){if(R.length==1)b.set(ye.pageX,ye.pageY);else{const G=St(ye),ee=.5*(ye.pageX+G.x),Ee=.5*(ye.pageY+G.y);b.set(ee,Ee)}M.subVectors(b,x).multiplyScalar(n.rotateSpeed);const Ve=n.domElement;Ve&&($(2*Math.PI*M.x/Ve.clientHeight),Y(2*Math.PI*M.y/Ve.clientHeight)),x.copy(b)}function Ye(ye){if(R.length==1)T.set(ye.pageX,ye.pageY);else{const Ve=St(ye),G=.5*(ye.pageX+Ve.x),ee=.5*(ye.pageY+Ve.y);T.set(G,ee)}E.subVectors(T,_).multiplyScalar(n.panSpeed),W(E.x,E.y),_.copy(T)}function Ze(ye){const Ve=St(ye),G=ye.pageX-Ve.x,ee=ye.pageY-Ve.y,Ee=Math.sqrt(G*G+ee*ee);D.set(0,Ee),N.set(0,Math.pow(D.y/A.y,n.zoomSpeed)),le(N.y),A.copy(D)}function re(ye){n.enableZoom&&Ze(ye),n.enablePan&&Ye(ye)}function be(ye){n.enableZoom&&Ze(ye),n.enableRotate&&Pe(ye)}function Ce(ye){var Ve,G;n.enabled!==!1&&(R.length===0&&((Ve=n.domElement)==null||Ve.ownerDocument.addEventListener("pointermove",q),(G=n.domElement)==null||G.ownerDocument.addEventListener("pointerup",V)),Ge(ye),ye.pointerType==="touch"?qe(ye):ie(ye))}function q(ye){n.enabled!==!1&&(ye.pointerType==="touch"?Fe(ye):fe(ye))}function V(ye){var Ve,G,ee;rt(ye),R.length===0&&((Ve=n.domElement)==null||Ve.releasePointerCapture(ye.pointerId),(G=n.domElement)==null||G.ownerDocument.removeEventListener("pointermove",q),(ee=n.domElement)==null||ee.ownerDocument.removeEventListener("pointerup",V)),n.dispatchEvent(s),c=o.NONE}function ie(ye){let Ve;switch(ye.button){case 0:Ve=n.mouseButtons.LEFT;break;case 1:Ve=n.mouseButtons.MIDDLE;break;case 2:Ve=n.mouseButtons.RIGHT;break;default:Ve=-1}switch(Ve){case Pd.DOLLY:if(n.enableZoom===!1)return;De(ye),c=o.DOLLY;break;case Pd.ROTATE:if(ye.ctrlKey||ye.metaKey||ye.shiftKey){if(n.enablePan===!1)return;pe(ye),c=o.PAN}else{if(n.enableRotate===!1)return;J(ye),c=o.ROTATE}break;case Pd.PAN:if(ye.ctrlKey||ye.metaKey||ye.shiftKey){if(n.enableRotate===!1)return;J(ye),c=o.ROTATE}else{if(n.enablePan===!1)return;pe(ye),c=o.PAN}break;default:c=o.NONE}c!==o.NONE&&n.dispatchEvent(a)}function fe(ye){if(n.enabled!==!1)switch(c){case o.ROTATE:if(n.enableRotate===!1)return;_e(ye);break;case o.DOLLY:if(n.enableZoom===!1)return;ne(ye);break;case o.PAN:if(n.enablePan===!1)return;ue(ye);break}}function Se(ye){n.enabled===!1||n.enableZoom===!1||c!==o.NONE&&c!==o.ROTATE||(ye.preventDefault(),n.dispatchEvent(a),ge(ye),n.dispatchEvent(s))}function ve(ye){n.enabled===!1||n.enablePan===!1||Ae(ye)}function qe(ye){switch(ot(ye),R.length){case 1:switch(n.touches.ONE){case Hd.ROTATE:if(n.enableRotate===!1)return;Te(),c=o.TOUCH_ROTATE;break;case Hd.PAN:if(n.enablePan===!1)return;se(),c=o.TOUCH_PAN;break;default:c=o.NONE}break;case 2:switch(n.touches.TWO){case Hd.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Be(),c=o.TOUCH_DOLLY_PAN;break;case Hd.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Le(),c=o.TOUCH_DOLLY_ROTATE;break;default:c=o.NONE}break;default:c=o.NONE}c!==o.NONE&&n.dispatchEvent(a)}function Fe(ye){switch(ot(ye),c){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;Pe(ye),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;Ye(ye),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;re(ye),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;be(ye),n.update();break;default:c=o.NONE}}function We(ye){n.enabled!==!1&&ye.preventDefault()}function Ge(ye){R.push(ye)}function rt(ye){delete F[ye.pointerId];for(let Ve=0;Ve<R.length;Ve++)if(R[Ve].pointerId==ye.pointerId){R.splice(Ve,1);return}}function ot(ye){let Ve=F[ye.pointerId];Ve===void 0&&(Ve=new gt,F[ye.pointerId]=Ve),Ve.set(ye.pageX,ye.pageY)}function St(ye){const Ve=ye.pointerId===R[0].pointerId?R[1]:R[0];return F[Ve.pointerId]}this.dollyIn=(ye=X())=>{Q(ye),n.update()},this.dollyOut=(ye=X())=>{le(ye),n.update()},this.getScale=()=>m,this.setScale=ye=>{te(ye),n.update()},this.getZoomScale=()=>X(),t!==void 0&&this.connect(t),this.update()}};const aB=new oa,Tb=new xe;class cT extends eT{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new Ht(e,3)),this.setAttribute("uv",new Ht(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new uS(t,6,1);return this.setAttribute("instanceStart",new Ho(n,3,0)),this.setAttribute("instanceEnd",new Ho(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new uS(n,t*2,1);return this.setAttribute("instanceColorStart",new Ho(i,t,0)),this.setAttribute("instanceColorEnd",new Ho(i,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new Xw(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new oa);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),aB.setFromBufferAttribute(t),this.boundingBox.union(aB))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new la),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let a=0,s=e.count;a<s;a++)Tb.fromBufferAttribute(e,a),i=Math.max(i,n.distanceToSquared(Tb)),Tb.fromBufferAttribute(t,a),i=Math.max(i,n.distanceToSquared(Tb));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class XL extends cT{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setPositions(n),this}setColors(e,t=3){const n=e.length-t,i=new Float32Array(2*n);if(t===3)for(let a=0;a<n;a+=t)i[2*a]=e[a],i[2*a+1]=e[a+1],i[2*a+2]=e[a+2],i[2*a+3]=e[a+3],i[2*a+4]=e[a+4],i[2*a+5]=e[a+5];else for(let a=0;a<n;a+=t)i[2*a]=e[a],i[2*a+1]=e[a+1],i[2*a+2]=e[a+2],i[2*a+3]=e[a+3],i[2*a+4]=e[a+4],i[2*a+5]=e[a+5],i[2*a+6]=e[a+6],i[2*a+7]=e[a+7];return super.setColors(i,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class fT extends ko{constructor(e){super({type:"LineMaterial",uniforms:xy.clone(xy.merge([Ct.common,Ct.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new gt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${GL>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const DA=new Xn,sB=new xe,oB=new xe,Va=new Xn,qa=new Xn,Yu=new Xn,CA=new xe,RA=new pn,Ga=new dL,lB=new xe,Nb=new oa,Db=new la,Wu=new Xn;let Qu,tp;function uB(r,e,t){return Wu.set(0,0,-e,1).applyMatrix4(r.projectionMatrix),Wu.multiplyScalar(1/Wu.w),Wu.x=tp/t.width,Wu.y=tp/t.height,Wu.applyMatrix4(r.projectionMatrixInverse),Wu.multiplyScalar(1/Wu.w),Math.abs(Math.max(Wu.x,Wu.y))}function bve(r,e){const t=r.matrixWorld,n=r.geometry,i=n.attributes.instanceStart,a=n.attributes.instanceEnd,s=Math.min(n.instanceCount,i.count);for(let o=0,c=s;o<c;o++){Ga.start.fromBufferAttribute(i,o),Ga.end.fromBufferAttribute(a,o),Ga.applyMatrix4(t);const u=new xe,h=new xe;Qu.distanceSqToSegment(Ga.start,Ga.end,h,u),h.distanceTo(u)<tp*.5&&e.push({point:h,pointOnLine:u,distance:Qu.origin.distanceTo(h),object:r,face:null,faceIndex:o,uv:null,[kL]:null})}}function _ve(r,e,t){const n=e.projectionMatrix,a=r.material.resolution,s=r.matrixWorld,o=r.geometry,c=o.attributes.instanceStart,u=o.attributes.instanceEnd,h=Math.min(o.instanceCount,c.count),d=-e.near;Qu.at(1,Yu),Yu.w=1,Yu.applyMatrix4(e.matrixWorldInverse),Yu.applyMatrix4(n),Yu.multiplyScalar(1/Yu.w),Yu.x*=a.x/2,Yu.y*=a.y/2,Yu.z=0,CA.copy(Yu),RA.multiplyMatrices(e.matrixWorldInverse,s);for(let m=0,v=h;m<v;m++){if(Va.fromBufferAttribute(c,m),qa.fromBufferAttribute(u,m),Va.w=1,qa.w=1,Va.applyMatrix4(RA),qa.applyMatrix4(RA),Va.z>d&&qa.z>d)continue;if(Va.z>d){const E=Va.z-qa.z,A=(Va.z-d)/E;Va.lerp(qa,A)}else if(qa.z>d){const E=qa.z-Va.z,A=(qa.z-d)/E;qa.lerp(Va,A)}Va.applyMatrix4(n),qa.applyMatrix4(n),Va.multiplyScalar(1/Va.w),qa.multiplyScalar(1/qa.w),Va.x*=a.x/2,Va.y*=a.y/2,qa.x*=a.x/2,qa.y*=a.y/2,Ga.start.copy(Va),Ga.start.z=0,Ga.end.copy(qa),Ga.end.z=0;const b=Ga.closestPointToPointParameter(CA,!0);Ga.at(b,lB);const M=Ku.lerp(Va.z,qa.z,b),_=M>=-1&&M<=1,T=CA.distanceTo(lB)<tp*.5;if(_&&T){Ga.start.fromBufferAttribute(c,m),Ga.end.fromBufferAttribute(u,m),Ga.start.applyMatrix4(s),Ga.end.applyMatrix4(s);const E=new xe,A=new xe;Qu.distanceSqToSegment(Ga.start,Ga.end,A,E),t.push({point:A,pointOnLine:E,distance:Qu.origin.distanceTo(A),object:r,face:null,faceIndex:m,uv:null,[kL]:null})}}}class jL extends Vi{constructor(e=new cT,t=new fT({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let s=0,o=0,c=t.count;s<c;s++,o+=2)sB.fromBufferAttribute(t,s),oB.fromBufferAttribute(n,s),i[o]=o===0?0:i[o-1],i[o+1]=i[o]+sB.distanceTo(oB);const a=new uS(i,2,1);return e.setAttribute("instanceDistanceStart",new Ho(a,1,0)),e.setAttribute("instanceDistanceEnd",new Ho(a,1,1)),this}raycast(e,t){const n=this.material.worldUnits,i=e.camera;i===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const a=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Qu=e.ray;const s=this.matrixWorld,o=this.geometry,c=this.material;tp=c.linewidth+a,o.boundingSphere===null&&o.computeBoundingSphere(),Db.copy(o.boundingSphere).applyMatrix4(s);let u;if(n)u=tp*.5;else{const d=Math.max(i.near,Db.distanceToPoint(Qu.origin));u=uB(i,d,c.resolution)}if(Db.radius+=u,Qu.intersectsSphere(Db)===!1)return;o.boundingBox===null&&o.computeBoundingBox(),Nb.copy(o.boundingBox).applyMatrix4(s);let h;if(n)h=tp*.5;else{const d=Math.max(i.near,Nb.distanceToPoint(Qu.origin));h=uB(i,d,c.resolution)}Nb.expandByScalar(h),Qu.intersectsBox(Nb)!==!1&&(n?bve(this,t):_ve(this,i,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(DA),this.material.uniforms.resolution.value.set(DA.z,DA.w))}}class Sve extends jL{constructor(e=new XL,t=new fT({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const cB=Ue.forwardRef(function({points:e,color:t=16777215,vertexColors:n,linewidth:i,lineWidth:a,segments:s,dashed:o,...c},u){var h,d;const m=Yc(_=>_.size),v=Ue.useMemo(()=>s?new jL:new Sve,[s]),[x]=Ue.useState(()=>new fT),b=(n==null||(h=n[0])==null?void 0:h.length)===4?4:3,M=Ue.useMemo(()=>{const _=s?new cT:new XL,T=e.map(E=>{const A=Array.isArray(E);return E instanceof xe||E instanceof Xn?[E.x,E.y,E.z]:E instanceof gt?[E.x,E.y,0]:A&&E.length===3?[E[0],E[1],E[2]]:A&&E.length===2?[E[0],E[1],0]:E});if(_.setPositions(T.flat()),n){t=16777215;const E=n.map(A=>A instanceof zt?A.toArray():A);_.setColors(E.flat(),b)}return _},[e,s,n,b]);return Ue.useLayoutEffect(()=>{v.computeLineDistances()},[e,v]),Ue.useLayoutEffect(()=>{o?x.defines.USE_DASH="":delete x.defines.USE_DASH,x.needsUpdate=!0},[o,x]),Ue.useEffect(()=>()=>{M.dispose(),x.dispose()},[M]),Ue.createElement("primitive",Ar({object:v,ref:u},c),Ue.createElement("primitive",{object:M,attach:"geometry"}),Ue.createElement("primitive",Ar({object:x,attach:"material",color:t,vertexColors:!!n,resolution:[m.width,m.height],linewidth:(d=i??a)!==null&&d!==void 0?d:1,dashed:o,transparent:b===4},c)))});function Mve(r,e,t,n){var i;return i=class extends ko{constructor(a){super({vertexShader:e,fragmentShader:t,...a});for(const s in r)this.uniforms[s]=new yM(r[s]),Object.defineProperty(this,s,{get(){return this.uniforms[s].value},set(o){this.uniforms[s].value=o}});this.uniforms=xy.clone(this.uniforms)}},i.key=Ku.generateUUID(),i}const Eve=()=>parseInt(Wv.replace(/\D+/g,"")),hT=Eve(),Ave=Ue.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:c,...u},h)=>{const d=Yc(N=>N.invalidate),m=Yc(N=>N.camera),v=Yc(N=>N.gl),x=Yc(N=>N.events),b=Yc(N=>N.setEvents),M=Yc(N=>N.set),_=Yc(N=>N.get),T=Yc(N=>N.performance),E=e||m,A=n||x.connected||v.domElement,D=Ue.useMemo(()=>new xve(E),[E]);return bM(()=>{D.enabled&&D.update()},-1),Ue.useEffect(()=>(a&&D.connect(a===!0?A:a),D.connect(A),()=>void D.dispose()),[a,A,t,D,d]),Ue.useEffect(()=>{const N=C=>{d(),t&&T.regress(),s&&s(C)},O=C=>{o&&o(C)},z=C=>{c&&c(C)};return D.addEventListener("change",N),D.addEventListener("start",O),D.addEventListener("end",z),()=>{D.removeEventListener("start",O),D.removeEventListener("end",z),D.removeEventListener("change",N)}},[s,o,c,D,d,b]),Ue.useEffect(()=>{if(r){const N=_().controls;return M({controls:D}),()=>M({controls:N})}},[r,D]),Ue.createElement("primitive",Ar({ref:h,object:D,enableDamping:i},u))}),wve=Mve({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new zt,sectionColor:new zt,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new xe,worldPlanePosition:new xe},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${hT>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),Tve=Ue.forwardRef(({args:r,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:n=.5,sectionSize:i=1,followCamera:a=!1,infiniteGrid:s=!1,fadeDistance:o=100,fadeStrength:c=1,fadeFrom:u=1,cellThickness:h=.5,sectionThickness:d=1,side:m=gs,...v},x)=>{FL({GridMaterial:wve});const b=Ue.useRef(null);Ue.useImperativeHandle(x,()=>b.current,[]);const M=new Zu,_=new xe(0,1,0),T=new xe(0,0,0);bM(D=>{M.setFromNormalAndCoplanarPoint(_,T).applyMatrix4(b.current.matrixWorld);const N=b.current.material,O=N.uniforms.worldCamProjPosition,z=N.uniforms.worldPlanePosition;M.projectPoint(D.camera.position,O.value),z.value.set(0,0,0).applyMatrix4(b.current.matrixWorld)});const E={cellSize:n,sectionSize:i,cellColor:e,sectionColor:t,cellThickness:h,sectionThickness:d},A={fadeDistance:o,fadeStrength:c,fadeFrom:u,infiniteGrid:s,followCamera:a};return Ue.createElement("mesh",Ar({ref:b,frustumCulled:!1},v),Ue.createElement("gridMaterial",Ar({transparent:!0,"extensions-derivatives":!0,side:m},E,A)),Ue.createElement("planeGeometry",{args:r}))}),OA=hT>=154?"opaque_fragment":"output_fragment";class Nve extends nM{constructor(e){super(e),this.onBeforeCompile=(t,n)=>{const{isWebGL2:i}=n.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${OA}>`,`
        ${i?`#include <${OA}>`:`#extension GL_OES_standard_derivatives : enable
#include <${OA}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${hT>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const Dve=Ue.forwardRef((r,e)=>{const[t]=Ue.useState(()=>new Nve(null));return Ue.createElement("primitive",Ar({},r,{object:t,ref:e,attach:"material"}))});function Cve(r,e){const t=r+"Geometry";return Ue.forwardRef(({args:n,children:i,...a},s)=>{const o=Ue.useRef(null);return Ue.useImperativeHandle(s,()=>o.current),Ue.useLayoutEffect(()=>void(e==null?void 0:e(o.current))),Ue.createElement("mesh",Ar({ref:o},a),Ue.createElement(t,{attach:"geometry",args:n}),i)})}const Rve=Cve("sphere");let Ld,L0;const Ove=Ue.createContext(null),fB=new pn,hB=new xe,Bve=Ue.forwardRef(({children:r,range:e,limit:t=1e3,...n},i)=>{const a=Ue.useRef(null);Ue.useImperativeHandle(i,()=>a.current,[]);const[s,o]=Ue.useState([]),[[c,u,h]]=Ue.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);Ue.useEffect(()=>{a.current.geometry.attributes.position.needsUpdate=!0}),bM(()=>{for(a.current.updateMatrix(),a.current.updateMatrixWorld(),fB.copy(a.current.matrixWorld).invert(),a.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,s.length),Ld=0;Ld<s.length;Ld++)L0=s[Ld].current,L0.getWorldPosition(hB).applyMatrix4(fB),hB.toArray(c,Ld*3),a.current.geometry.attributes.position.needsUpdate=!0,L0.matrixWorldNeedsUpdate=!0,L0.color.toArray(u,Ld*3),a.current.geometry.attributes.color.needsUpdate=!0,h.set([L0.size],Ld),a.current.geometry.attributes.size.needsUpdate=!0});const d=Ue.useMemo(()=>({getParent:()=>a,subscribe:m=>(o(v=>[...v,m]),()=>o(v=>v.filter(x=>x.current!==m.current)))}),[]);return Ue.createElement("points",Ar({userData:{instances:s},matrixAutoUpdate:!1,ref:a,raycast:()=>null},n),Ue.createElement("bufferGeometry",null,Ue.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3],usage:Qd}),Ue.createElement("bufferAttribute",{attach:"attributes-color",args:[u,3],usage:Qd}),Ue.createElement("bufferAttribute",{attach:"attributes-size",args:[h,1],usage:Qd})),Ue.createElement(Ove.Provider,{value:d},r))}),Uve=Ue.forwardRef(({children:r,positions:e,colors:t,sizes:n,stride:i=3,...a},s)=>{const o=Ue.useRef(null);return Ue.useImperativeHandle(s,()=>o.current,[]),bM(()=>{const c=o.current.geometry.attributes;c.position.needsUpdate=!0,t&&(c.color.needsUpdate=!0),n&&(c.size.needsUpdate=!0)}),Ue.createElement("points",Ar({ref:o},a),Ue.createElement("bufferGeometry",null,Ue.createElement("bufferAttribute",{attach:"attributes-position",args:[e,i],usage:Qd}),t&&Ue.createElement("bufferAttribute",{attach:"attributes-color",args:[t,i],count:t.length/i,usage:Qd}),n&&Ue.createElement("bufferAttribute",{attach:"attributes-size",args:[n,1],count:n.length/i,usage:Qd})),r)}),zve=Ue.forwardRef((r,e)=>r.positions instanceof Float32Array?Ue.createElement(Uve,Ar({},r,{ref:e})):Ue.createElement(Bve,Ar({},r,{ref:e}))),BA=({direction:r,color:e,opacity:t=1})=>{const n=r.length();if(n<.001)return null;const i=Ue.useMemo(()=>r.clone().normalize(),[r]),a=Ue.useMemo(()=>{const s=Math.min(.4,n*.4),o=Math.min(.2,n*.2),c=new mL(i,new xe(0,0,0),n,e,s,o);return c.line.material.transparent!==void 0&&(c.line.material.transparent=t<1,c.line.material.opacity=t),c.cone.material.transparent!==void 0&&(c.cone.material.transparent=t<1,c.cone.material.opacity=t),c},[i,n,e,t]);return oe.jsx(oe.Fragment,{children:oe.jsx("primitive",{object:a})})},Fve=120,dB=new zt("#111827"),Lve=r=>Number.isFinite(r)?Math.max(2,Math.floor(r)):Fve,Ive=({points:r,color:e,fading:t,maxLength:n,style:i})=>{const a=Ue.useMemo(()=>new zt(e),[e]),s=Ue.useMemo(()=>Lve(n),[n]),o=Ue.useMemo(()=>{if(!t)return r;const d=Math.max(0,r.length-s);return r.slice(d)},[r,t,s]),c=Ue.useMemo(()=>{if(!t||i!=="dots")return o;const d=Math.max(1,Math.floor(s/24));if(d<=1)return o;const m=[];for(let v=0;v<o.length;v+=d)m.push(o[v]);return o.length>0&&m[m.length-1]!==o[o.length-1]&&m.push(o[o.length-1]),m},[o,t,i,s]),u=Ue.useMemo(()=>{if(!t||i!=="dots"||c.length===0)return null;const d=new Float32Array(c.length*3),m=new Float32Array(c.length*3);return c.forEach((v,x)=>{const b=c.length<=1?1:x/(c.length-1),M=Math.pow(b,1.2),_=a.clone().lerp(dB,1-M),T=x*3;d[T]=v.x,d[T+1]=v.y,d[T+2]=v.z,m[T]=_.r,m[T+1]=_.g,m[T+2]=_.b}),{positions:d,colors:m}},[t,i,c,a]),h=Ue.useMemo(()=>!t||i==="dots"||o.length<2?null:o.map((d,m)=>{const v=o.length<=1?1:m/(o.length-1),x=Math.pow(v,1.4),b=a.clone().lerp(dB,1-x),M=Math.max(0,Math.min(1,x*.95+.05));return[b.r,b.g,b.b,M]}),[t,i,o,a]);if(o.length<2)return null;if(!t)return oe.jsx(cB,{points:o,color:e,lineWidth:3});if(i==="dots"){if(!u)return null;const{positions:d,colors:m}=u;return oe.jsx(zve,{positions:d,colors:m,stride:3,children:oe.jsx(Dve,{transparent:!0,vertexColors:!0,depthWrite:!1,sizeAttenuation:!0,size:.08,opacity:.95})})}return h?oe.jsx(cB,{points:o,vertexColors:h,transparent:!0,depthWrite:!1,lineWidth:3}):null},UA=({position:r,color:e,opacity:t=1,size:n=.08})=>{if(r.length()<.001)return null;const i=Math.max(.005,n);return oe.jsx(Rve,{args:[i,16,16],position:r,children:oe.jsx("meshStandardMaterial",{color:e,transparent:t<1,opacity:t,emissive:e,emissiveIntensity:.5})})},YL=Wb.memo(({sceneData:r,walls:e,dotMode:t,dotSize:n,fadingPath:i,fadingPathLength:a,fadingPathStyle:s,showStartMarkers:o,showEndMarkers:c,dynamicFadingPath:u})=>{const h=Ue.useRef(r),d=Ue.useRef(e);Ue.useEffect(()=>{h.current=r},[r]),Ue.useEffect(()=>{d.current=e},[e]);const m=Ue.useMemo(()=>h.current===r?h.current:r.map(_=>({..._,path:_.path.slice()})),[r]),v=Ue.useMemo(()=>d.current===e?d.current:e.map(_=>({..._})),[e]),x=40,b=(_,T)=>{switch(_){case"x":return{position:[T,0,0],rotation:[0,Math.PI/2,0]};case"y":return{position:[0,T,0],rotation:[Math.PI/2,0,0]};case"z":default:return{position:[0,0,T],rotation:[0,0,0]}}},M=m.flatMap(_=>_.contacts.map(T=>({...T,color:_.color})));return oe.jsxs(fve,{camera:{position:[5,5,5],fov:50},children:[oe.jsx("color",{attach:"background",args:["#111827"]}),oe.jsx("ambientLight",{intensity:.5}),oe.jsx("pointLight",{position:[10,10,10],intensity:1}),oe.jsx(Tve,{args:[20,20],infiniteGrid:!0,fadeDistance:25,fadeStrength:1}),oe.jsx("axesHelper",{args:[5]}),v.map(_=>{const{position:T,rotation:E}=b(_.axis,_.position);return oe.jsxs("mesh",{position:T,rotation:E,children:[oe.jsx("planeGeometry",{args:[x,x]}),oe.jsx("meshStandardMaterial",{color:"#0f172a",transparent:!0,opacity:.18,side:Io,metalness:.1,roughness:.6})]},_.id)}),M.map(({wallId:_,axis:T,point:E,color:A,normalDirection:D})=>{const{rotation:N}=b(T,0),O=`${_}-${E.x.toFixed(3)}-${E.y.toFixed(3)}-${E.z.toFixed(3)}`,z=.03,C={x:T==="x"?z*D:0,y:T==="y"?z*D:0,z:T==="z"?z*D:0};return oe.jsxs("group",{position:[E.x+C.x,E.y+C.y,E.z+C.z],rotation:N,children:[oe.jsx("pointLight",{color:A,intensity:.6,distance:1.5,decay:2.5,position:[0,0,0]}),oe.jsxs("mesh",{children:[oe.jsx("circleGeometry",{args:[.55,32]}),oe.jsx("meshBasicMaterial",{color:A,transparent:!0,opacity:.75,side:Io,blending:ly,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1,depthWrite:!1})]}),oe.jsxs("mesh",{children:[oe.jsx("circleGeometry",{args:[.85,32]}),oe.jsx("meshBasicMaterial",{color:"#fde68a",transparent:!0,opacity:.25,side:Io,blending:ly,polygonOffset:!0,polygonOffsetFactor:-1.5,polygonOffsetUnits:-1.5,depthWrite:!1})]})]},O)}),m.map(({id:_,color:T,initialVector:E,finalVector:A,interpolatedVector:D,path:N,showMarkers:O})=>{const z=O??!0;return oe.jsxs(Wb.Fragment,{children:[t?oe.jsxs(oe.Fragment,{children:[z&&o&&oe.jsx(UA,{position:E,color:T,size:n}),z&&c&&A&&oe.jsx(UA,{position:A,color:T,opacity:.5,size:n}),z&&D&&oe.jsx(UA,{position:D,color:"#fde047",size:n})]}):oe.jsxs(oe.Fragment,{children:[z&&o&&oe.jsx(BA,{direction:E,color:T}),z&&c&&A&&oe.jsx(BA,{direction:A,color:T,opacity:.5}),z&&D&&oe.jsx(BA,{direction:D,color:"#fde047"})]}),oe.jsx(Ive,{points:N,color:T,fading:i,maxLength:a,style:s,dynamic:u})]},_)}),oe.jsx(Ave,{})]})});YL.displayName="Scene";const np={linear:r=>r,easeInSine:r=>1-Math.cos(r*Math.PI/2),easeOutSine:r=>Math.sin(r*Math.PI/2),easeInOutSine:r=>-(Math.cos(Math.PI*r)-1)/2,easeInQuad:r=>r*r,easeOutQuad:r=>1-(1-r)*(1-r),easeInOutQuad:r=>r<.5?2*r*r:1-Math.pow(-2*r+2,2)/2,easeInCubic:r=>r*r*r,easeOutCubic:r=>1-Math.pow(1-r,3),easeInOutCubic:r=>r<.5?4*r*r*r:1-Math.pow(-2*r+2,3)/2,easeInQuart:r=>r*r*r*r,easeOutQuart:r=>1-Math.pow(1-r,4),easeInOutQuart:r=>r<.5?8*r*r*r*r:1-Math.pow(-2*r+2,4)/2,easeInBack:r=>2.70158*r*r*r-1.70158*r*r,easeOutBack:r=>1+2.70158*Math.pow(r-1,3)+1.70158*Math.pow(r-1,2),easeInOutBack:r=>{const t=2.5949095;return r<.5?Math.pow(2*r,2)*((t+1)*2*r-t)/2:(Math.pow(2*r-2,2)*((t+1)*(r*2-2)+t)+2)/2},easeInElastic:r=>{const e=2*Math.PI/3;return r===0?0:r===1?1:-Math.pow(2,10*r-10)*Math.sin((r*10-10.75)*e)},easeOutElastic:r=>{const e=2*Math.PI/3;return r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r*10-.75)*e)+1},easeInOutElastic:r=>{const e=2*Math.PI/4.5;return r===0?0:r===1?1:r<.5?-(Math.pow(2,20*r-10)*Math.sin((20*r-11.125)*e))/2:Math.pow(2,-20*r+10)*Math.sin((20*r-11.125)*e)/2+1},easeInBounce:r=>1-np.easeOutBounce(1-r),easeOutBounce:r=>r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375,easeInOutBounce:r=>r<.5?(1-np.easeOutBounce(1-2*r))/2:(1+np.easeOutBounce(2*r-1))/2},zA={identity:r=>r,relu:r=>Math.max(0,r),sigmoid:r=>1/(1+Math.exp(-r)),tanh:r=>Math.tanh(r),leakyRelu:r=>Math.max(.1*r,r),elu:r=>r>=0?r:1*(Math.exp(r)-1)},Pve=[{name:"Identity",value:"identity"},{name:"ReLU",value:"relu"},{name:"Sigmoid",value:"sigmoid"},{name:"Tanh",value:"tanh"},{name:"Leaky ReLU",value:"leakyRelu"},{name:"ELU",value:"elu"},{name:"Custom",value:"custom"}];function Hve(r){if(!r.trim())return{fn:e=>e,error:null};try{const t=Tl(r).compile(),n=a=>{try{const s=t.evaluate({x:a});return typeof s!="number"||!isFinite(s)?NaN:s}catch(s){return console.error("Custom function evaluation error:",s),NaN}},i=n(1);if(typeof i!="number"||isNaN(i))throw new Error("Function did not return a valid number. Ensure you use 'x' as the variable.");return{fn:n,error:null}}catch(e){return{fn:null,error:e.message||"Invalid expression"}}}const fv=1e-9,WL=1e-7,$L=1e-6,Vve=r=>typeof r=="object"&&r!==null&&typeof r.re=="number"&&typeof r.im=="number",qve=r=>typeof r=="object"&&r!==null&&typeof r.toNumber=="function",Gve=r=>{if(typeof r=="number")return{real:r,imag:0};if(Vve(r))return{real:r.re,imag:r.im};if(qve(r))return{real:r.toNumber(),imag:0};const e=Number(r);return{real:Number.isFinite(e)?e:NaN,imag:0}},kve=r=>{const{real:e,imag:t}=Gve(r);return!Number.isFinite(e)||!Number.isFinite(t)?!1:Math.abs(t)>$L?!0:e>fv},ZL=r=>r.every(kve),dT=()=>[[1,0,0],[0,1,0],[0,0,1]],pB=r=>[[r[0][0],r[0][1],r[0][2]],[r[1][0],r[1][1],r[1][2]],[r[2][0],r[2][1],r[2][2]]],Bv=(r,e)=>{const t=[[0,0,0],[0,0,0],[0,0,0]];for(let n=0;n<3;n++)for(let i=0;i<3;i++){let a=0;for(let s=0;s<3;s++)a+=r[n][s]*e[s][i];t[n][i]=a}return t},pS=(r,e)=>[[r[0][0]+e[0][0],r[0][1]+e[0][1],r[0][2]+e[0][2]],[r[1][0]+e[1][0],r[1][1]+e[1][1],r[1][2]+e[1][2]],[r[2][0]+e[2][0],r[2][1]+e[2][1],r[2][2]+e[2][2]]],N2=(r,e)=>[[r[0][0]-e[0][0],r[0][1]-e[0][1],r[0][2]-e[0][2]],[r[1][0]-e[1][0],r[1][1]-e[1][1],r[1][2]-e[1][2]],[r[2][0]-e[2][0],r[2][1]-e[2][1],r[2][2]-e[2][2]]],lp=(r,e)=>[[r[0][0]*e,r[0][1]*e,r[0][2]*e],[r[1][0]*e,r[1][1]*e,r[1][2]*e],[r[2][0]*e,r[2][1]*e,r[2][2]*e]],Xve=r=>[[r[0][0],r[1][0],r[2][0]],[r[0][1],r[1][1],r[2][1]],[r[0][2],r[1][2],r[2][2]]],pT=r=>{const[e,t,n]=r[0],[i,a,s]=r[1],[o,c,u]=r[2];return e*(a*u-s*c)-t*(i*u-s*o)+n*(i*c-a*o)},Xb=r=>[[r[0],0,0],[0,r[1],0],[0,0,r[2]]],KL=r=>[[0,-r[2],r[1]],[r[2],0,-r[0]],[-r[1],r[0],0]],jve=r=>[r[2][1],r[0][2],r[1][0]],QL=r=>Math.hypot(r[0],r[1],r[2]),D2=r=>{const e=QL(r);return e<fv?[1,0,0]:[r[0]/e,r[1]/e,r[2]/e]},Yve=(r,e)=>{if(Math.abs(e)<WL){const c=dT(),u=KL(r),h=lp(u,e),d=lp(Bv(h,h),.5);return pS(c,pS(h,d))}const[t,n,i]=D2(r),a=Math.cos(e),s=Math.sin(e),o=1-a;return[[a+t*t*o,t*n*o-i*s,t*i*o+n*s],[n*t*o+i*s,a+n*n*o,n*i*o-t*s],[i*t*o-n*s,i*n*o+t*s,a+i*i*o]]},Xc=r=>{if(typeof r=="number")return Number.isFinite(r)?r:NaN;if(typeof r=="object"&&r!==null){if("re"in r&&"im"in r){const t=r;return Math.abs(t.im)>$L&&console.warn("Dropping imaginary component during matrix conversion:",t.im),t.re}if("toNumber"in r&&typeof r.toNumber=="function")return r.toNumber()}const e=Number(r);return Number.isFinite(e)?e:NaN},C2=r=>{const e=Array.isArray(r)?r:r.toArray();return[[Xc(e[0][0]),Xc(e[0][1]),Xc(e[0][2])],[Xc(e[1][0]),Xc(e[1][1]),Xc(e[1][2])],[Xc(e[2][0]),Xc(e[2][1]),Xc(e[2][2])]]},Wve=(r,e)=>{const t=[e[0][0]>=0?1:-1,e[1][1]>=0?1:-1,e[2][2]>=0?1:-1],n=pB(r),i=pB(e);for(let a=0;a<3;a++){const s=t[a];if(s<0)for(let o=0;o<3;o++)n[o][a]*=s}for(let a=0;a<3;a++){const s=t[a];if(s<0)for(let o=0;o<3;o++)i[a][o]*=s}if(pT(n)<0){for(let a=0;a<3;a++)n[a][2]*=-1;for(let a=0;a<3;a++)i[2][a]*=-1}return{Q:n,R:i}},$ve=r=>{const e=r[0][0]+r[1][1]+r[2][2],t=Math.min(1,Math.max(-1,(e-1)/2));let n=Math.acos(t),i;if(n<WL){const s=lp(N2(r,Xve(r)),.5),o=jve(s),c=QL(o);i=c>fv?o.map(u=>u/c):[1,0,0],n=Math.max(n,c)}else if(Math.abs(Math.PI-n)<1e-4){const s=[r[0][0],r[1][1],r[2][2]];let o=0;s[1]>s[o]&&(o=1),s[2]>s[o]&&(o=2);let c;o===0?c=[r[0][0]+1,r[1][0],r[2][0]]:o===1?c=[r[0][1],r[1][1]+1,r[2][1]]:c=[r[0][2],r[1][2],r[2][2]+1],i=D2(c)}else{const s=2*Math.sin(n);i=[(r[2][1]-r[1][2])/s,(r[0][2]-r[2][0])/s,(r[1][0]-r[0][1])/s],i=D2(i)}const a=lp(KL(i),n);return{axis:i,angle:n,logQ:a}},Zve=r=>{const e=dT(),t=N2(r,e),n=Bv(t,t),i=N2(t,lp(n,.5)),a=Bv(i,i);return{logU:i,logUSquared:a}},Kve=r=>r!=null&&r.linearEigenInterpolation?"linear":"pow",JL=r=>Number.isFinite(r)?Number(r.toFixed(6)):NaN,mT=(r,e)=>{const[t,n,i]=e;return[r[0][0]*t+r[0][1]*n+r[0][2]*i,r[1][0]*t+r[1][1]*n+r[1][2]*i,r[2][0]*t+r[2][1]*n+r[2][2]*i]},Qve=r=>{const e=pT(r);if(!Number.isFinite(e)||e<=0)return null;const t=LS(bt(r)),n=C2(t.Q),i=C2(t.R),{Q:a,R:s}=Wve(n,i),o=[s[0][0],s[1][1],s[2][2]];if(o.some(_=>!Number.isFinite(_)||_<=0))return null;Xb(o);const c=Xb([1/o[0],1/o[1],1/o[2]]),u=Bv(c,s),{axis:h,angle:d,logQ:m}=$ve(a),v=Xb([Math.log(o[0]),Math.log(o[1]),Math.log(o[2])]),x=[v[0][0],v[1][1],v[2][2]],{logU:b,logUSquared:M}=Zve(u);return{rotationAxis:h,rotationAngle:d,logQ:m,logD:v,logU:b,logUSquared:M,diagLogs:x}},Jve=(r,e)=>{if(!Number.isFinite(r))return null;const t=Yve(e.rotationAxis,e.rotationAngle*r),n=Xb([Math.exp(e.diagLogs[0]*r),Math.exp(e.diagLogs[1]*r),Math.exp(e.diagLogs[2]*r)]),i=dT(),a=lp(e.logU,r),s=.5*r*r,o=lp(e.logUSquared,s),c=pS(i,pS(a,o));return Bv(Bv(t,n),c)},ege=r=>{try{const e=Qve(r);if(!e)return null;let t=[];try{const s=qv(bt(r));s.values&&(t=bt(s.values).toArray())}catch(s){console.warn("Eigenvalue computation failed:",s)}const n=new Map,i=(s,o)=>{const c=Kve(o),u=n.get(c)??new Map;n.has(c)||n.set(c,u);const h=JL(s);if(!Number.isFinite(h))return null;if(u.has(h))return u.get(h);const d=Jve(s,e);return d?(u.set(h,d),d):null};return{eigenValues:t,getMatrixAt:i,applyToVector:(s,o,c)=>{const u=i(s,c);return u?mT(u,o):null}}}catch(e){return console.error("Matrix evaluator error:",e),null}},tge=r=>{try{const e=pT(r);if(!Number.isFinite(e)||Math.abs(e)<fv)return console.warn("Exp-log backend requires an invertible matrix."),null;const t=qv(bt(r)),n=t.eigenvectors||t.vectors;if(!t.values||!Array.isArray(n))return null;const i=bt(t.values).toArray();if(i.some(_=>{if(typeof _=="number")return Math.abs(_)<fv;const T=_;return Math.hypot(T.re,T.im)<fv}))return console.warn("Exp-log backend requires eigenvalues with non-zero magnitude."),null;if(!ZL(i))return console.warn("Exp-log backend requires strictly positive real eigenvalues or complex conjugate pairs."),null;const s=i.map(_=>zS(_)),o=aw(s),c=n.map(_=>{var E;const T=typeof((E=_.vector)==null?void 0:E.toArray)=="function"?_.vector.toArray():_.vector;return Array.isArray(T)&&Array.isArray(T[0])&&T[0].length===1?T.map(A=>A[0]):T});if(c.length===0)return null;const u=Array.isArray(c[0])?c[0].length:0;if(u===0||c.some(_=>!Array.isArray(_)||_.length!==u))return console.warn("Invalid eigenvector data for exp-log backend"),null;const h=Array.from({length:u},(_,T)=>c.map(E=>E[T])),d=bt(h),m=Th(d),v=vr(d,vr(o,m)),x=new Map,b=_=>{const T=JL(_);if(!Number.isFinite(T))return null;if(x.has(T))return x.get(T);const E=vr(v,_),A=iF(E),D=C2(A);return x.set(T,D),D},M=(_,T)=>{const E=b(_);return E?mT(E,T):null};return{eigenValues:i,getMatrixAt:(_,T)=>b(_),applyToVector:(_,T,E)=>M(_,T)}}catch(e){return console.error("Exp-log evaluator error:",e),null}};function mB(r,e="kan"){return e==="exp-log"?tge(r):ege(r)}const eI=r=>{try{const e=qv(bt(r));if(!e.values)return{valid:!1,reason:"exp(t ln A) requires computable eigenvalues."};const t=bt(e.values).toArray();return ZL(t)?{valid:!0,reason:null}:{valid:!1,reason:"exp(t ln A) requires strictly positive real eigenvalues (complex conjugate pairs are allowed)."}}catch(e){return console.warn("Exp-log validation error:",e),{valid:!1,reason:"exp(t ln A) requires positive real eigenvalues or complex conjugate pairs."}}},jc=()=>parseFloat((Math.random()*4-2).toFixed(2)),vB=()=>[[jc(),jc(),jc()],[jc(),jc(),jc()],[jc(),jc(),jc()]],gB=r=>{const[e,t,n]=r[0],[i,a,s]=r[1],[o,c,u]=r[2];return e*(a*u-s*c)-t*(i*u-s*o)+n*(i*c-a*o)},yB=(r,e=0)=>{const t=r.map(n=>[...n]);for(let n=0;n<3;n++)t[n][e]*=-1;return t},nge=()=>[[1+Math.random(),0,0],[0,1+Math.random(),0],[0,0,1+Math.random()]],tI=r=>{const t=!!(r!=null&&r.requirePositiveEigenvalues);for(let i=0;i<30;i++){const a=vB(),s=gB(a);if(Math.abs(s)<1e-5)continue;const o=s>0?a:yB(a);if(!t||eI(o).valid)return o}if(t)return nge();const n=vB();for(let i=0;i<3;i++)n[i][i]+=1;return gB(n)<=0?yB(n):n},$u=({value:r,onChange:e,disabled:t,className:n="",step:i=.1,min:a,max:s})=>oe.jsx("input",{type:"number",step:i,min:a,max:s,value:r,onChange:o=>e(parseFloat(o.target.value)||0),className:`w-20 bg-gray-700 text-white rounded p-2 text-center focus:outline-none focus:ring-2 focus:ring-cyan-500 disabled:opacity-50 ${n}`,disabled:t}),rge=({vector:r,onVectorChange:e,onVectorColorChange:t,onRemoveVector:n,onToggleVisibility:i})=>{const a=(s,o)=>{const c=[...r.value];c[s]=o,e(r.id,c)};return oe.jsx("div",{className:"p-3 bg-gray-900/50 rounded-lg",children:oe.jsxs("div",{className:"flex items-center gap-2",children:[oe.jsxs("div",{className:"relative w-6 h-6 rounded-md flex-shrink-0",children:[oe.jsx("div",{className:"w-full h-full rounded-md",style:{backgroundColor:r.color}}),oe.jsx("input",{type:"color",value:r.color,onChange:s=>t(r.id,s.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Change vector color"})]}),oe.jsx("div",{className:"grid grid-cols-3 gap-2 flex-grow",children:r.value.map((s,o)=>oe.jsx($u,{value:s,onChange:c=>a(o,c),className:"w-full"},o))}),oe.jsx("button",{onClick:()=>i(r.id),className:"p-2 text-gray-400 hover:text-white transition-colors","aria-label":r.visible?"Hide vector":"Show vector",children:r.visible?oe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[oe.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),oe.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):oe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:oe.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2 2 0 012.828 2.828l1.515 1.515A4 4 0 0014 10a4 4 0 10-5.432-3.432z",clipRule:"evenodd"})})}),oe.jsx("button",{onClick:()=>n(r.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors","aria-label":"Remove vector",children:oe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:oe.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})})})]})})},Cb=({active:r,onClick:e,children:t})=>oe.jsx("button",{onClick:e,className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors 
            ${r?"bg-gray-800 text-cyan-400":"bg-gray-900 text-gray-400 hover:bg-gray-700/50 hover:text-gray-200"}`,children:t}),ige=.02,age=.2,sge=r=>{const{matrix:e,vectors:t,autoNormalizeVectors:n,walls:i,t:a,tPrecision:s,dotMode:o,dotSize:c,fadingPath:u,fadingPathLength:h,fadingPathStyle:d,showStartMarkers:m,showEndMarkers:v,dynamicFadingPath:x,isPlaying:b,isExploring:M,exploreRandomizeVectors:_,animationConfig:T,repeatAnimation:E,activationConfig:A,selectedPresetName:D,matrixScalar:N,matrixExponent:O,normalizeMatrix:z,linearEigenInterpolation:C,matrixBackend:R,compareBackends:F,normalizationWarning:H,onMatrixChange:X,onPresetSelect:$,onMatrixScalarChange:Y,onMatrixExponentChange:I,onNormalizeToggle:Z,onLinearInterpolationToggle:W,onVectorChange:te,onVectorColorChange:le,onAddVector:Q,onNormalizeVectors:k,onAutoNormalizeVectorsChange:ae,onRemoveVector:J,onToggleVisibility:De,onTChange:pe,onTPrecisionChange:_e,onDotModeChange:ne,onDotSizeChange:ue,onFadingPathToggle:ge,onFadingPathLengthChange:Ae,onFadingPathStyleChange:Te,onDynamicFadingPathChange:se,onShowStartMarkersChange:Me,onShowEndMarkersChange:Be,onResetTime:Le,onPlayPause:Pe,onExploreToggle:Ye,onMatrixBackendChange:Ze,onExploreRandomizeVectorsChange:re,onAnimationConfigChange:be,onRepeatToggle:Ce,onActivationConfigChange:q,onCompareBackendsChange:V,onAddWall:ie,onUpdateWall:fe,onRemoveWall:Se,profileSummaries:ve,activeProfileName:qe,onProfileSave:Fe,onProfileLoad:We,onProfileDelete:Ge,error:rt,backendError:ot,onCollapse:St}=r,[ye,Ve]=Ue.useState("controls"),[G,ee]=Ue.useState(""),[Ee,ze]=Ue.useState(null);Ue.useEffect(()=>{qe&&G.trim().length===0&&ee(qe)},[qe,G]),Ue.useEffect(()=>{if(!Ee)return;const ht=window.setTimeout(()=>ze(null),3500);return()=>window.clearTimeout(ht)},[Ee]);const ft=(ht,ln,qr)=>{const tn=e.map(zr=>[...zr]);tn[ht][ln]=qr,X(tn)},it=ht=>{const ln={...T,startT:ht,endT:Math.max(ht,T.endT)};be(ln),a<ln.startT&&pe(ln.startT)},ct=ht=>{const ln={...T,endT:Math.max(ht,T.startT)};be(ln),a>ln.endT&&pe(ln.endT)},Nt=()=>{X(tI({requirePositiveEigenvalues:R==="exp-log"||F}))},It=ht=>{const ln=Math.pow(10,-ht);_e(ln)},yn=()=>{const ht=Fe(G);ze(ht),ht.success&&ee(G.trim())},on=ht=>{const ln=We(ht);ze(ln),ln.success&&ee(ht)},Dr=ht=>{const ln=Ge(ht);ze(ln),ln.success&&G.trim()===ht&&ee("")},ni=ht=>Number.isFinite(ht)?new Date(ht).toLocaleString():"unknown",Es=ht=>Math.max(1,-Math.log10(ht)),_i=hv.filter(ht=>ht.name!=="Custom"),Ci=_i.findIndex(ht=>ht.name===D),[Ri,Wa]=Ue.useState(()=>Math.max(0,Ci));return Ue.useEffect(()=>{Ci!==-1&&Wa(Ci)},[Ci]),oe.jsxs("div",{className:"w-full md:w-[28rem] bg-gray-800 flex flex-col flex-shrink-0 shadow-2xl z-10",children:[oe.jsx("div",{className:"p-6 pb-0",children:oe.jsxs("div",{className:"flex items-start justify-between gap-4",children:[oe.jsxs("div",{children:[oe.jsx("h1",{className:"text-2xl font-bold text-cyan-400 mb-1",children:"Matrix Path Visualizer"}),oe.jsx("p",{className:"text-sm text-gray-400 italic mb-4",children:"Made by Islam Aldaraghmeh"})]}),St&&oe.jsx("button",{onClick:St,className:"text-xs uppercase tracking-wide text-gray-400 hover:text-white border border-gray-600/70 hover:border-cyan-500 rounded px-3 py-1 transition-colors",children:"Hide"})]})}),oe.jsx("div",{className:"border-b border-gray-700 px-4",children:oe.jsxs("nav",{className:"-mb-px flex space-x-2","aria-label":"Tabs",children:[oe.jsx(Cb,{active:ye==="controls",onClick:()=>Ve("controls"),children:"Controls"}),oe.jsx(Cb,{active:ye==="animation",onClick:()=>Ve("animation"),children:"Config"}),oe.jsx(Cb,{active:ye==="walls",onClick:()=>Ve("walls"),children:"Walls"}),oe.jsx(Cb,{active:ye==="profiles",onClick:()=>Ve("profiles"),children:"Profiles"})]})}),oe.jsxs("div",{className:"flex-grow p-6 overflow-y-auto",children:[ye==="controls"&&oe.jsxs("div",{className:"space-y-6",children:[oe.jsxs("div",{children:[oe.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-200",children:"Settings"}),oe.jsxs("div",{className:"space-y-3",children:[oe.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg",children:[oe.jsx("label",{htmlFor:"dotModeToggle",className:"font-medium text-gray-300",children:"Dot Mode"}),oe.jsx("button",{id:"dotModeToggle",role:"switch","aria-checked":o,onClick:()=>ne(!o),className:`${o?"bg-cyan-500":"bg-gray-600"} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500`,children:oe.jsx("span",{className:`${o?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})})]}),oe.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg",children:[oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"dotSizeControl",className:"font-medium text-gray-300",children:"Dot Size"}),oe.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Tweak dot radius when Dot Mode is active."})]}),oe.jsxs("div",{className:"flex flex-col items-end w-36",children:[oe.jsx("input",{id:"dotSizeControl",type:"range",min:ige,max:age,step:.01,value:c,onChange:ht=>ue(parseFloat(ht.target.value)),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-cyan-500 disabled:opacity-40",disabled:!o}),oe.jsx("span",{className:"text-xs text-gray-400 mt-1",children:c.toFixed(2)})]})]}),oe.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg",children:[oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"startMarkerToggle",className:"font-medium text-gray-300",children:"Show Start Marker"}),oe.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Hide the initial point for a cleaner animation."})]}),oe.jsx("button",{id:"startMarkerToggle",role:"switch","aria-checked":m,onClick:()=>Me(!m),className:`${m?"bg-cyan-500":"bg-gray-600"} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500`,children:oe.jsx("span",{className:`${m?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})})]}),oe.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg",children:[oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"endMarkerToggle",className:"font-medium text-gray-300",children:"Show End Marker"}),oe.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Toggle the target marker for minimal end-state clutter."})]}),oe.jsx("button",{id:"endMarkerToggle",role:"switch","aria-checked":v,onClick:()=>Be(!v),className:`${v?"bg-cyan-500":"bg-gray-600"} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500`,children:oe.jsx("span",{className:`${v?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})})]}),oe.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg",children:[oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"fadingPathToggle",className:"font-medium text-gray-300",children:"Fading Path"}),oe.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Leave a dynamic trailing glow instead of a full trace."})]}),oe.jsx("button",{id:"fadingPathToggle",role:"switch","aria-checked":u,onClick:()=>ge(!u),className:`${u?"bg-cyan-500":"bg-gray-600"} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500`,children:oe.jsx("span",{className:`${u?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})})]}),u&&oe.jsxs("div",{className:"space-y-3 bg-gray-800/60 border border-cyan-500/40 rounded-lg p-3",children:[oe.jsxs("div",{children:[oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{htmlFor:"fadingLengthSlider",className:"font-medium text-gray-200",children:"Trail Length"}),oe.jsx("span",{className:"text-sm text-cyan-300 font-mono",children:h})]}),oe.jsx("input",{id:"fadingLengthSlider",type:"range",min:10,max:400,step:10,value:Math.min(400,Math.max(10,Math.round(h))),onChange:ht=>Ae(Math.max(2,Math.round(parseFloat(ht.target.value)))),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 mt-2"})]}),oe.jsxs("div",{className:"flex items-center justify-between bg-gray-900/60 rounded-md px-3 py-2",children:[oe.jsxs("div",{children:[oe.jsx("label",{htmlFor:"dynamicFadingToggle",className:"font-medium text-gray-200",children:"Dynamic"}),oe.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Tail responds to real-time motion and fades when idle."})]}),oe.jsx("button",{id:"dynamicFadingToggle",role:"switch","aria-checked":x,onClick:()=>se(!x),className:`${x?"bg-cyan-500":"bg-gray-600"} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500`,children:oe.jsx("span",{className:`${x?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})})]}),oe.jsxs("div",{children:[oe.jsx("span",{className:"font-medium text-gray-200 block mb-2",children:"Trail Style"}),oe.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[oe.jsx("button",{type:"button",onClick:()=>Te("smooth"),className:`px-3 py-2 text-sm font-semibold rounded-md transition-colors ${d==="smooth"?"bg-cyan-500 text-gray-900 shadow-lg shadow-cyan-500/40":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Smooth Tail"}),oe.jsx("button",{type:"button",onClick:()=>Te("dots"),className:`px-3 py-2 text-sm font-semibold rounded-md transition-colors ${d==="dots"?"bg-cyan-500 text-gray-900 shadow-lg shadow-cyan-500/40":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Chopped Dots"})]})]})]})]})]}),oe.jsxs("div",{children:[oe.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-200",children:"Matrix A"}),oe.jsxs("div",{className:"p-3 bg-gray-900/50 rounded-lg",children:[oe.jsxs("div",{className:"mb-3 pb-3 border-b border-gray-700",children:[oe.jsxs("div",{className:"flex items-center gap-4",children:[oe.jsx("label",{htmlFor:"presetSlider",className:"text-sm font-medium text-gray-300 flex-shrink-0",children:"Preset"}),oe.jsx("input",{id:"presetSlider",type:"range",min:"0",max:_i.length-1,step:"1",value:Ci===-1?Ri:Ci,onChange:ht=>{const ln=parseInt(ht.target.value,10);$(_i[ln].name)},className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),oe.jsxs("div",{className:"mt-3 flex gap-2",children:[oe.jsx("select",{value:D,onChange:ht=>$(ht.target.value),className:"flex-1 bg-gray-700 text-white rounded p-2 focus:outline-none focus:ring-2 focus:ring-cyan-500",children:hv.map(ht=>oe.jsx("option",{value:ht.name,children:ht.name},ht.name))}),oe.jsx("button",{onClick:Nt,className:"bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-semibold px-3 py-2 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",type:"button",disabled:M,children:"Random"})]}),oe.jsx("p",{className:"text-center text-cyan-400 font-medium text-xs mt-2",children:D}),oe.jsxs("div",{className:"mt-3 space-y-3",children:[oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Scalar"}),oe.jsx($u,{value:N,onChange:ht=>Y(ht),className:"w-24"})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Exponent"}),oe.jsx($u,{value:O,onChange:ht=>I(Math.max(1,Math.round(ht||1))),step:1,min:1,className:"w-24"})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{htmlFor:"normalizeToggle",className:"text-sm font-medium text-gray-300",children:"Normalize"}),oe.jsx("button",{id:"normalizeToggle",role:"switch","aria-checked":z,onClick:()=>Z(!z),className:`${z?"bg-cyan-500":"bg-gray-600"} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500`,children:oe.jsx("span",{className:`${z?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{htmlFor:"linearInterpolationToggle",className:"text-sm font-medium text-gray-300",children:"Linear Eigen Interp."}),oe.jsx("button",{id:"linearInterpolationToggle",role:"switch","aria-checked":C,onClick:()=>W(!C),className:`${C?"bg-cyan-500":"bg-gray-600"} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500`,type:"button",children:oe.jsx("span",{className:`${C?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})})]}),H&&oe.jsx("p",{className:"text-xs text-amber-300 bg-amber-900/30 border border-amber-500/40 rounded px-3 py-2",children:H})]})]}),oe.jsx("div",{className:"grid grid-cols-3 gap-2 pt-3",children:e.map((ht,ln)=>ht.map((qr,tn)=>oe.jsx($u,{value:qr,onChange:zr=>ft(ln,tn,zr),className:"w-full"},`${ln}-${tn}`)))})]})]}),oe.jsxs("div",{children:[oe.jsxs("div",{className:"flex justify-between items-center mb-2",children:[oe.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Initial Vectors"}),oe.jsxs("div",{className:"flex items-center gap-2",children:[oe.jsx("button",{onClick:k,className:"bg-gray-700 hover:bg-gray-600 text-cyan-300 text-xs font-semibold py-1 px-2 rounded transition-colors duration-300",type:"button",children:"Normalize"}),oe.jsxs("div",{className:"flex items-center gap-2 bg-gray-900/60 rounded px-2 py-1",children:[oe.jsx("span",{className:"text-xs font-semibold text-gray-300",children:"Auto"}),oe.jsx("button",{id:"autoNormalizeToggle",role:"switch","aria-checked":n,onClick:()=>ae(!n),className:`${n?"bg-cyan-500":"bg-gray-600"} relative inline-flex items-center h-5 rounded-full w-10 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500`,children:oe.jsx("span",{className:`${n?"translate-x-5":"translate-x-1"} inline-block w-3 h-3 transform bg-white rounded-full transition-transform`})})]}),oe.jsx("button",{onClick:Q,className:"bg-gray-700 hover:bg-gray-600 text-cyan-400 text-xs font-bold py-1 px-2 rounded transition-colors duration-300",type:"button",children:"+ ADD"})]})]}),oe.jsx("div",{className:"space-y-2",children:t.map(ht=>oe.jsx(rge,{vector:ht,onVectorChange:te,onVectorColorChange:le,onRemoveVector:J,onToggleVisibility:De},ht.id))})]}),oe.jsxs("div",{children:[oe.jsxs("h2",{className:"text-lg font-semibold mb-2 text-gray-200",children:["Parameter t = ",a.toFixed(Es(s))]}),oe.jsxs("div",{className:"p-3 bg-gray-900/50 rounded-lg",children:[oe.jsx("div",{className:"mb-4",children:oe.jsx("input",{type:"range",min:T.startT,max:T.endT,step:s,value:a,onChange:ht=>pe(parseFloat(ht.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500",disabled:b})}),oe.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Min t"}),oe.jsx($u,{value:T.startT,onChange:it})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Max t"}),oe.jsx($u,{value:T.endT,onChange:ct})]})]}),oe.jsxs("div",{children:[oe.jsxs("div",{className:"flex justify-between items-center",children:[oe.jsx("label",{htmlFor:"precisionSlider",className:"text-sm font-medium text-gray-300",children:"Step Precision"}),oe.jsx("span",{className:"text-sm font-mono text-cyan-400",children:s})]}),oe.jsx("input",{id:"precisionSlider",type:"range",min:"1",max:"3",step:"1",value:Es(s),onChange:ht=>It(parseInt(ht.target.value,10)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500 mt-1"})]})]})]})]}),ye==="animation"&&oe.jsxs("div",{className:"space-y-6",children:[oe.jsxs("div",{children:[oe.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-200",children:"Preset Matrix"}),oe.jsx("select",{value:D,onChange:ht=>$(ht.target.value),className:"w-full bg-gray-700 text-white rounded p-2 focus:outline-none focus:ring-2 focus:ring-cyan-500",children:hv.map(ht=>oe.jsx("option",{value:ht.name,children:ht.name},ht.name))})]}),oe.jsxs("div",{children:[oe.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-200",children:"Computation Backend"}),oe.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-3 border border-gray-800/70",children:[oe.jsxs("p",{className:"text-xs text-gray-400 mb-2",children:["Pick how A",oe.jsx("sup",{children:"t"})," is built when animating."]}),oe.jsx("div",{className:"flex bg-gray-800/70 rounded-full p-1",children:[{value:"kan",label:"KAN",helper:"RotationScaleShear"},{value:"exp-log",label:"exp(t ln A)",helper:"Log / exp path"}].map(ht=>{const ln=R===ht.value;return oe.jsxs("button",{type:"button",onClick:()=>Ze(ht.value),className:`flex-1 text-xs sm:text-sm py-2 px-3 rounded-full transition-colors ${ln?"bg-cyan-500 text-gray-900 font-semibold shadow-lg shadow-cyan-500/30":"text-gray-300"}`,children:[oe.jsx("span",{className:"block",children:ht.label}),oe.jsx("span",{className:`text-[10px] uppercase tracking-wide ${ln?"text-gray-900/70":"text-gray-300/60"}`,children:ht.helper})]},ht.value)})}),ot&&oe.jsx("p",{className:"text-xs text-red-400 mt-2",children:ot}),oe.jsxs("div",{className:"mt-3 flex items-center justify-between bg-gray-800/70 rounded-lg p-3",children:[oe.jsxs("div",{children:[oe.jsx("p",{className:"text-sm font-semibold text-gray-200",children:"Compare Backends"}),oe.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Plot both KAN and exp(t ln A) paths together."})]}),oe.jsx("button",{type:"button",role:"switch","aria-checked":F,onClick:()=>V(!F),className:`${F?"bg-cyan-500":"bg-gray-700"} relative inline-flex items-center h-6 rounded-full w-12 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-cyan-500`,children:oe.jsx("span",{className:`${F?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})})]})]})]}),oe.jsxs("div",{children:[oe.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-200",children:"Activation Function"}),oe.jsxs("div",{className:"space-y-3 bg-gray-900/50 p-3 rounded-lg",children:[oe.jsx("select",{value:A.name,onChange:ht=>q({...A,name:ht.target.value}),className:"w-full bg-gray-700 text-white rounded p-2 focus:outline-none focus:ring-2 focus:ring-cyan-500",children:Pve.map(ht=>oe.jsx("option",{value:ht.value,children:ht.name},ht.value))}),A.name==="custom"&&oe.jsxs("div",{children:[oe.jsx("input",{type:"text",value:A.customFnStr,onChange:ht=>q({...A,customFnStr:ht.target.value}),placeholder:"e.g. x^2 - 1",className:"w-full bg-gray-700 text-white rounded p-2 font-mono focus:outline-none focus:ring-2 focus:ring-cyan-500"}),A.error&&oe.jsx("p",{className:"text-red-400 text-xs mt-2",children:A.error})]})]})]}),oe.jsxs("div",{children:[oe.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-200",children:"Animation Config"}),oe.jsxs("div",{className:"space-y-3 bg-gray-900/50 p-3 rounded-lg",children:[oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{className:"text-gray-300",children:"Start Time (t)"}),oe.jsx($u,{value:T.startT,onChange:ht=>be({...T,startT:ht,endT:Math.max(ht,T.endT)})})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{className:"text-gray-300",children:"End Time (t)"}),oe.jsx($u,{value:T.endT,onChange:ht=>be({...T,endT:Math.max(ht,T.startT)})})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{className:"text-gray-300",children:"Duration (s)"}),oe.jsx($u,{value:T.duration,onChange:ht=>be({...T,duration:Math.max(.1,ht)})})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{className:"text-gray-300",children:"Repeat (ping-pong)"}),oe.jsx("button",{role:"switch","aria-checked":E,onClick:()=>Ce(!E),className:`${E?"bg-cyan-500":"bg-gray-600"} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500`,type:"button",children:oe.jsx("span",{className:`${E?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{className:"text-gray-300",children:"Easing"}),oe.jsx("select",{value:T.easing,onChange:ht=>be({...T,easing:ht.target.value}),className:"w-1/2 bg-gray-700 text-white rounded p-2 focus:outline-none focus:ring-2 focus:ring-cyan-500",children:Object.keys(np).map(ht=>oe.jsx("option",{value:ht,children:ht},ht))})]})]})]}),oe.jsxs("div",{children:[oe.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-200",children:"Playback"}),oe.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg space-y-3",children:[oe.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2.5",children:oe.jsx("div",{className:"bg-cyan-500 h-2.5 rounded-full",style:{width:`${((a-T.startT)/(T.endT-T.startT)||0)*100}%`}})}),oe.jsxs("div",{className:"flex justify-center items-center gap-4",children:[oe.jsx("button",{onClick:Le,"aria-label":"Reset Animation",className:"p-3 text-gray-300 bg-gray-700 hover:bg-gray-600 rounded-full transition-colors",children:oe.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:oe.jsx("path",{d:"M8.445 14.832A1 1 0 0010 14V6a1 1 0 00-1.555-.832L4.6 8.432A1 1 0 004 9.236v1.528a1 1 0 00.6-1.368l3.845-2.268-3.845 2.268A1 1 0 004 9.236v1.528a1 1 0 00.6.928l3.845 2.136z M12.555 5.168A1 1 0 0011 6v8a1 1 0 001.555.832l3.845-2.268A1 1 0 0017 11.764V9.236a1 1 0 00-.6-1.368L12.555 5.168z"})})}),oe.jsx("button",{onClick:Pe,"aria-label":b?"Pause Animation":"Play Animation",className:"p-4 text-white bg-cyan-600 hover:bg-cyan-500 rounded-full transition-colors text-2xl",children:b?oe.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:oe.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):oe.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:oe.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),oe.jsx("button",{onClick:Ye,type:"button",className:`px-4 py-2 rounded-full text-sm font-semibold transition-colors ${M?"bg-amber-400 text-gray-900 shadow-lg shadow-amber-500/30":"bg-gray-700 text-cyan-300 hover:bg-gray-600"}`,children:M?"Stop Explore":"Explore"})]}),oe.jsxs("div",{className:"flex items-center justify-between bg-gray-800/60 rounded-lg p-3 gap-4",children:[oe.jsxs("div",{children:[oe.jsx("p",{className:"text-sm font-semibold text-gray-200",children:"Randomize vectors while exploring"}),oe.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Disable to keep current inputs as matrices shuffle."})]}),oe.jsx("button",{type:"button",role:"switch","aria-checked":_,onClick:()=>re(!_),className:`${_?"bg-cyan-500":"bg-gray-600"} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500`,children:oe.jsx("span",{className:`${_?"translate-x-6":"translate-x-1"} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`})})]})]})]})]}),ye==="walls"&&oe.jsxs("div",{className:"space-y-6",children:[oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Collision Walls"}),oe.jsx("button",{onClick:ie,className:"bg-gray-700 hover:bg-gray-600 text-cyan-400 text-xs font-bold py-1 px-2 rounded transition-colors duration-300",children:"+ ADD"})]}),oe.jsxs("div",{className:"space-y-3",children:[i.length===0&&oe.jsx("p",{className:"text-sm text-gray-400 bg-gray-900/40 border border-gray-700 rounded-lg p-4",children:"Add planes aligned to the global axes. Each wall reflects the plane defined by the chosen axis at the specified position."}),i.map(ht=>oe.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-3 space-y-3 border border-gray-800",children:[oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsxs("span",{className:"text-sm font-semibold text-gray-200",children:["Wall #",ht.id.toString().slice(-4)]}),oe.jsx("button",{onClick:()=>Se(ht.id),className:"text-xs text-red-400 hover:text-red-300","aria-label":"Remove wall",children:"Remove"})]}),oe.jsxs("div",{className:"flex items-center gap-3",children:[oe.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Axis"}),oe.jsxs("select",{value:ht.axis,onChange:ln=>fe(ht.id,{axis:ln.target.value}),className:"flex-1 bg-gray-700 text-white rounded p-2 focus:outline-none focus:ring-2 focus:ring-cyan-500 uppercase",children:[oe.jsx("option",{value:"x",children:"x"}),oe.jsx("option",{value:"y",children:"y"}),oe.jsx("option",{value:"z",children:"z"})]})]}),oe.jsxs("div",{className:"flex items-center justify-between",children:[oe.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Position"}),oe.jsx($u,{value:ht.position,onChange:ln=>fe(ht.id,{position:ln}),className:"w-28",step:.1})]}),oe.jsx("p",{className:"text-xs text-gray-500",children:`Plane: ${ht.axis.toUpperCase()} = ${ht.position.toFixed(2)}`})]},ht.id))]})]}),ye==="profiles"&&oe.jsxs("div",{className:"space-y-6",children:[oe.jsxs("div",{className:"bg-gray-900/60 rounded-lg p-4 border border-gray-700/60 space-y-4",children:[oe.jsxs("div",{children:[oe.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Save Current Setup"}),oe.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Store the full scene configuration so you can reload it later or after a refresh."}),oe.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your latest changes are auto-saved for the next visit; use named profiles to switch between scenarios instantly."})]}),oe.jsxs("div",{children:[oe.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400 block mb-1",children:"Profile Name"}),oe.jsx("input",{type:"text",value:G,onChange:ht=>ee(ht.target.value),onKeyDown:ht=>{ht.key==="Enter"&&(ht.preventDefault(),yn())},placeholder:"e.g. Rotating spiral study",className:"w-full bg-gray-700 text-white rounded p-2 focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),oe.jsxs("div",{className:"flex flex-wrap gap-2",children:[oe.jsx("button",{onClick:yn,className:"flex-1 min-w-[120px] bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-semibold py-2 rounded transition-colors",children:"Save Profile"}),oe.jsx("button",{onClick:()=>ee(""),className:"px-3 py-2 text-sm bg-gray-700 hover:bg-gray-600 text-gray-200 rounded transition-colors",children:"Clear Name"})]}),qe&&oe.jsxs("p",{className:"text-xs text-gray-400",children:["Active profile: ",oe.jsx("span",{className:"text-cyan-300",children:qe})]})]}),Ee&&oe.jsx("div",{className:`text-sm rounded-md border px-3 py-2 ${Ee.status==="success"?"border-cyan-500/60 text-cyan-300 bg-cyan-900/10":Ee.status==="info"?"border-blue-500/60 text-blue-300 bg-blue-900/10":"border-red-500/60 text-red-300 bg-red-900/20"}`,children:Ee.message}),oe.jsxs("div",{children:[oe.jsxs("div",{className:"flex items-center justify-between mb-2",children:[oe.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Saved Profiles"}),oe.jsxs("span",{className:"text-xs text-gray-500",children:[ve.length," total"]})]}),ve.length===0?oe.jsx("p",{className:"text-sm text-gray-400 bg-gray-900/40 border border-gray-700 rounded-lg p-4",children:"No profiles yet. Save one above and it will appear here."}):oe.jsx("div",{className:"space-y-3",children:ve.map(ht=>{const ln=qe===ht.name;return oe.jsxs("div",{className:`bg-gray-900/50 border rounded-lg p-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 ${ln?"border-cyan-500/60":"border-gray-800"}`,children:[oe.jsxs("div",{children:[oe.jsx("p",{className:"text-sm font-semibold text-gray-100",children:ht.name}),oe.jsxs("p",{className:"text-xs text-gray-400",children:["Updated ",ni(ht.updatedAt)]})]}),oe.jsxs("div",{className:"flex gap-2",children:[oe.jsx("button",{onClick:()=>on(ht.name),className:"px-3 py-1.5 text-xs font-semibold rounded bg-cyan-600 hover:bg-cyan-500 text-white transition-colors",children:"Load"}),oe.jsx("button",{onClick:()=>Dr(ht.name),className:"px-3 py-1.5 text-xs font-semibold rounded bg-gray-700 hover:bg-red-500 text-gray-200 transition-colors",children:"Delete"})]})]},ht.name)})})]})]})]}),oe.jsxs("div",{className:"p-6 pt-2",children:[rt&&oe.jsxs("div",{className:"p-3 bg-red-900 border border-red-700 rounded-lg",children:[oe.jsx("p",{className:"text-red-300 font-semibold",children:"Error"}),oe.jsx("p",{className:"text-red-400 text-sm",children:rt})]}),oe.jsx("div",{className:"mt-4 text-xs text-center text-gray-500",children:oe.jsx("p",{children:"Use your mouse to rotate, pan, and zoom the 3D view."})})]})]})},Wc=r=>r!==void 0&&isFinite(r)?r.toFixed(2).padStart(7," "):"  -    ",jb=r=>r?`[${Wc(r[0])},${Wc(r[1])},${Wc(r[2])}]`:`[${Wc(void 0)},${Wc(void 0)},${Wc(void 0)}]`,FA=r=>{if(!r){const e=`| ${jb(null)} |`;return`${e}
${e}
${e}`}return r.map(e=>`|${Wc(e[0])},${Wc(e[1])},${Wc(e[2])}|`).join(`
`)},oge=r=>Number.isFinite(r)?r.toFixed(2):"",I0=r=>r===null||!Number.isFinite(r)?"":r.toFixed(3),xB=r=>{const e=Number.isFinite(r.re),t=Number.isFinite(r.im)&&Math.abs(r.im)>1e-6,n=e?r.re.toFixed(3):"";if(!t)return n;const i=Math.abs(r.im).toFixed(3),a=r.im>=0?"+":"-";return`${n} ${a} ${i}i`},lge=({baseMatrix:r,effectiveMatrix:e,matrixScalar:t,matrixExponent:n,normalizeRequested:i,normalizeApplied:a,determinantBefore:s,determinantAfter:o,normalizationWarning:c,walls:u,wallContactCounts:h,eigenvalues:d,eigenvaluesAtT:m,matrixAt:v,determinantAtT:x,vectorV:b,rawTransformedV:M,transformedV:_,activationFnName:T,customActivationFnStr:E,onCollapse:A})=>{const D=T.toLowerCase()==="custom"?`f(x) = ${E||"x"}`:`f(x) = ${T}`,N=a?`on (det  ${I0(o)})`:i?`requested (det  ${I0(s)}; pending)`:c?`off (det  ${I0(s)}; unavailable)`:"off",O=u.length===0?"none":u.map(R=>{const F=h[R.id]??0,H=F>0?`  contact: ${F}`:"";return`${R.axis.toUpperCase()} = ${R.position.toFixed(2)}${H}`}).join(`
`),z=!d||d.length===0?"":d.map((R,F)=>`${F+1}: ${xB(R)}`).join(`
`),C=!m||m.length===0?"":m.map((R,F)=>`${F+1}: ${xB(R)}`).join(`
`);return oe.jsxs("div",{className:"absolute top-6 right-6 bg-gray-900/80 backdrop-blur-md text-white p-6 rounded-xl shadow-2xl font-mono text-sm border border-gray-700 pointer-events-auto w-[22rem] max-w-[24rem]",children:[oe.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[oe.jsxs("div",{children:[oe.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Panel"}),oe.jsx("p",{className:"text-cyan-300 font-semibold",children:"Info & Diagnostics"})]}),A&&oe.jsx("button",{onClick:A,className:"text-xs uppercase tracking-wide text-gray-400 hover:text-white border border-gray-600/70 hover:border-cyan-500 rounded px-3 py-1 transition-colors",children:"Hide"})]}),oe.jsxs("div",{className:"mb-3",children:[oe.jsx("p",{className:"text-cyan-400",children:"A (base input):"}),oe.jsx("pre",{className:"text-gray-300",children:FA(r)})]}),oe.jsxs("div",{className:"mb-3",children:[oe.jsx("p",{className:"text-cyan-400",children:"A (effective):"}),oe.jsx("pre",{className:"text-gray-300",children:FA(e)})]}),oe.jsxs("div",{className:"mb-3",children:[oe.jsx("p",{className:"text-cyan-400",children:"Eigenvalues (A):"}),oe.jsx("pre",{className:"text-gray-300 whitespace-pre-wrap",children:z})]}),oe.jsxs("div",{className:"mb-3",children:[oe.jsxs("p",{className:"text-cyan-400",children:["Eigenvalues (A",oe.jsx("sup",{children:"t"}),"):"]}),oe.jsx("pre",{className:"text-gray-300 whitespace-pre-wrap",children:C})]}),oe.jsxs("div",{className:"mb-3 space-y-1",children:[oe.jsx("p",{className:"text-cyan-400",children:"Adjustments:"}),oe.jsxs("p",{className:"text-gray-300",children:["scalar: ",oge(t)]}),oe.jsxs("p",{className:"text-gray-300",children:["exponent: ",n]}),oe.jsxs("p",{className:"text-gray-300",children:["normalize: ",N]}),oe.jsxs("p",{className:"text-gray-500",children:["det (pre-normalize): ",I0(s)]}),c&&oe.jsxs("p",{className:"text-amber-300",children:[" ",c]})]}),oe.jsxs("div",{className:"mb-3",children:[oe.jsx("p",{className:"text-cyan-400",children:"Walls:"}),oe.jsx("pre",{className:"text-gray-300 whitespace-pre-wrap",children:O})]}),oe.jsxs("div",{className:"mb-3",children:[oe.jsxs("p",{className:"text-cyan-400",children:["A",oe.jsx("sup",{children:"t"}),":"]}),oe.jsx("pre",{className:"text-gray-300",children:FA(v)}),oe.jsxs("p",{className:"text-gray-500 mt-1",children:["det(A",oe.jsx("sup",{children:"t"}),"): ",I0(x)]})]}),oe.jsxs("div",{className:"mb-3",children:[oe.jsx("p",{className:"text-cyan-400",children:"v (first visible):"}),oe.jsx("pre",{className:"text-gray-300",children:jb(b)})]}),oe.jsxs("div",{className:"mb-3",children:[oe.jsxs("p",{className:"text-cyan-400",children:["A",oe.jsx("sup",{children:"t"}),"v:"]}),oe.jsx("pre",{className:"text-gray-300",children:jb(M)})]}),oe.jsxs("div",{className:"mb-3",children:[oe.jsxs("p",{className:"text-cyan-400",children:["f(A",oe.jsx("sup",{children:"t"}),"v):"]}),oe.jsx("pre",{className:"text-gray-300",children:jb(_)})]}),oe.jsxs("div",{children:[oe.jsx("p",{className:"text-cyan-400",children:"Activation:"}),oe.jsx("pre",{className:"text-gray-300",children:D})]})]})},nI="mtv.profiles.v1",rI="mtv.last_session.v1",R2="mtv.last_used_profile.v1",vT=1,zh=typeof window<"u"&&typeof window.localStorage<"u",iI=r=>{if(!r)return null;try{return JSON.parse(r)}catch(e){return console.warn("Failed to parse stored profile data",e),null}},SM=()=>{if(!zh)return{};const r=iI(window.localStorage.getItem(nI));return!r||typeof r!="object"?{}:r},aI=r=>{zh&&window.localStorage.setItem(nI,JSON.stringify(r))},uge=()=>{const r=SM();return Object.values(r).map(e=>({name:e.name,updatedAt:e.updatedAt})).sort((e,t)=>t.updatedAt-e.updatedAt)},bB=r=>{const t=SM()[r];return t?t.data:null},cge=(r,e)=>{const t=r.trim();if(!t)throw new Error("Profile name must be non-empty");if(!zh)return console.warn("Attempted to save profile outside browser context"),"created";const n=SM(),i=!!n[t];return n[t]={name:t,updatedAt:Date.now(),data:{...e,version:vT}},aI(n),i?"updated":"created"},fge=r=>{if(!r||!zh)return!1;const e=SM();return e[r]?(delete e[r],aI(e),!0):!1},hge=()=>zh?iI(window.localStorage.getItem(rI)):null,dge=r=>{zh&&window.localStorage.setItem(rI,JSON.stringify({...r,version:vT}))},pge=()=>{if(!zh)return null;const r=window.localStorage.getItem(R2);return typeof r=="string"&&r.trim().length>0?r:null},mge=r=>{zh&&(r&&r.trim().length>0?window.localStorage.setItem(R2,r.trim()):window.localStorage.removeItem(R2))},vge=()=>vT,gT=[[Math.cos(2),-Math.sin(2),0],[Math.sin(2),Math.cos(2),0],[0,0,1]],hv=[{name:"Rotation (XY, 2rad)",matrix:gT},{name:"Shear",matrix:[[1,1,0],[0,1,0],[0,0,1]]},{name:"Scale (Uniform)",matrix:[[1.5,0,0],[0,1.5,0],[0,0,1.5]]},{name:"Scale (Non-uniform)",matrix:[[1.5,0,0],[0,.5,0],[0,0,1]]},{name:"Spiral Sink (XY)",matrix:[[1,-1,0],[1,1,0],[0,0,.8]]},{name:"Spiral Source (XY)",matrix:[[1,-1,0],[1,1,0],[0,0,1.2]]},{name:"Saddle Point",matrix:[[1.2,0,0],[0,.8,0],[0,0,1]]},{name:"Custom",matrix:[[1,0,0],[0,1,0],[0,0,1]]}],dv=["#f87171","#60a5fa","#facc15","#4ade80","#a78bfa","#fb923c"],sI=[{id:Date.now(),value:[2,0,.5],visible:!0,color:dv[0]}],O2=.08,oI=.02,lI=.2,gge={kan:"KAN Path","exp-log":"exp(t ln A) Path"},yge={kan:"#22d3ee","exp-log":"#f97316"},_B=(r=!1)=>{const e=[Math.random()*4-2,Math.random()*4-2,Math.random()*4-2];return r?e.map(t=>Math.abs(t)):e},Yb=r=>{const[e,t,n]=r,i=Math.hypot(e,t,n);return!Number.isFinite(i)||i===0?[e,t,n]:[e/i,t/i,n/i]},LA=r=>{const e=Yb(r.value);return e[0]===r.value[0]&&e[1]===r.value[1]&&e[2]===r.value[2]?r:{...r,value:e}},xge=100,SB=.07,ps=(r,e)=>{const t=typeof r=="number"?r:Number(r);return Number.isFinite(t)?t:e},bge=(r,e=gT)=>{var n,i,a;if(!Array.isArray(r))return e;const t=[];for(let s=0;s<3;s++){const o=Array.isArray(r[s])?r[s]:[];t.push([ps(o[0],((n=e[s])==null?void 0:n[0])??0),ps(o[1],((i=e[s])==null?void 0:i[1])??0),ps(o[2],((a=e[s])==null?void 0:a[2])??0)])}return t},_ge=(r,e=sI)=>{if(!Array.isArray(r))return e;const t=[];let n=Date.now();for(const i of r){if(!i||typeof i!="object")continue;const a=i,s=typeof a.id=="number"&&Number.isFinite(a.id)?a.id:n++,o=Array.isArray(a.value)?a.value:[],c=[ps(o[0],0),ps(o[1],0),ps(o[2],0)],u=typeof a.visible=="boolean"?a.visible:!0,h=typeof a.color=="string"&&a.color?a.color:dv[s%dv.length]??"#ffffff";t.push({id:s,value:c,visible:u,color:h})}return t.length>0?t:e},Sge=r=>{if(!Array.isArray(r))return[];const e=["x","y","z"],t=[];let n=Date.now();for(const i of r){if(!i||typeof i!="object")continue;const a=i,s=typeof a.axis=="string"&&e.includes(a.axis)?a.axis:null;if(!s)continue;const o=ps(a.position,0),c=typeof a.id=="number"&&Number.isFinite(a.id)?a.id:n++;t.push({id:c,axis:s,position:o})}return t},Mge=r=>r==="dots"?"dots":"smooth",Ege=r=>{const e={duration:5,startT:0,endT:2,easing:"easeInOutSine"};if(!r||typeof r!="object")return e;const t=r,n=Math.max(.1,ps(t.duration,e.duration)),i=ps(t.startT,e.startT),a=ps(t.endT,e.endT),s=typeof t.easing=="string"&&t.easing in np?t.easing:e.easing,o=Number.isFinite(i)?i:e.startT,c=Number.isFinite(a)?Math.max(a,o):Math.max(e.endT,o);return{duration:n,startT:o,endT:c,easing:s}},Age=r=>{if(!r||typeof r!="object")return{name:"identity",customFnStr:"x"};const e=r,t=typeof e.name=="string"&&e.name.length>0?e.name:"identity",n=typeof e.customFnStr=="string"?e.customFnStr:"x";return{name:t,customFnStr:n}},wge=r=>{if(!r)return null;const e=Ege(r.animationConfig),t=Age(r.activation),n=(c,u)=>typeof c=="boolean"?c:u,i=ps(r.tPrecision,.01),a=ps(r.t,e.startT),s=Ku.clamp(a,e.startT,e.endT),o=c=>c==="exp-log"?"exp-log":"kan";return{version:r.version??1,matrixA:bge(r.matrixA),vectors:_ge(r.vectors),walls:Sge(r.walls),t:s,tPrecision:i>0?i:.01,dotMode:n(r.dotMode,!1),fadingPath:n(r.fadingPath,!1),fadingPathLength:Math.max(2,Math.round(ps(r.fadingPathLength,120))),fadingPathStyle:Mge(r.fadingPathStyle),showStartMarkers:n(r.showStartMarkers,!0),showEndMarkers:n(r.showEndMarkers,!0),dynamicFadingPath:n(r.dynamicFadingPath,!1),animationConfig:e,repeatAnimation:n(r.repeatAnimation,!1),activation:t,selectedPresetName:typeof r.selectedPresetName=="string"?r.selectedPresetName:hv[0].name,matrixScalar:ps(r.matrixScalar,1),matrixExponent:Math.max(1,Math.round(ps(r.matrixExponent,1))),normalizeMatrix:n(r.normalizeMatrix,!1),linearEigenInterpolation:n(r.linearEigenInterpolation,!1),dotSize:Ku.clamp(ps(r.dotSize,O2),oI,lI),autoNormalizeVectors:n(r.autoNormalizeVectors,!1),exploreRandomizeVectors:n(r.exploreRandomizeVectors,!0),matrixBackend:o(r.matrixBackend),compareBackends:n(r.compareBackends,!1)}},MB=r=>{if(!r)return null;const e=Array.isArray(r)?r:typeof(r==null?void 0:r.toArray)=="function"?r.toArray():null;return e?e.map(t=>{if(typeof t=="number")return{re:t,im:0};if(typeof t=="object"&&t!==null&&"re"in t&&"im"in t){const i=t;return{re:Number.isFinite(i.re)?i.re:NaN,im:Number.isFinite(i.im)?i.im:NaN}}const n=Number(t);return{re:Number.isFinite(n)?n:NaN,im:NaN}}):null};function Tge(){const[r,e]=Ue.useState(gT),[t,n]=Ue.useState(sI),[i,a]=Ue.useState(!1),[s,o]=Ue.useState([]),[c,u]=Ue.useState(0),[h,d]=Ue.useState(.01),[m,v]=Ue.useState(null),[x,b]=Ue.useState(null),[M,_]=Ue.useState(!1),[T,E]=Ue.useState(O2),[A,D]=Ue.useState(!1),[N,O]=Ue.useState(120),[z,C]=Ue.useState("smooth"),[R,F]=Ue.useState(!0),[H,X]=Ue.useState(!0),[$,Y]=Ue.useState(!1),[I,Z]=Ue.useState(!0),[W,te]=Ue.useState("kan"),[le,Q]=Ue.useState(!1),[k,ae]=Ue.useState(hv[0].name),[J,De]=Ue.useState(1),[pe,_e]=Ue.useState(1),[ne,ue]=Ue.useState(!1),[ge,Ae]=Ue.useState(null),[Te,se]=Ue.useState(!1),[Me,Be]=Ue.useState([]),[Le,Pe]=Ue.useState(null),[Ye,Ze]=Ue.useState(!0),[re,be]=Ue.useState(!0),[Ce,q]=Ue.useState(!1),[V,ie]=Ue.useState(!1),[fe,Se]=Ue.useState(!1),[ve,qe]=Ue.useState({duration:5,startT:0,endT:2,easing:"easeInOutSine"}),Fe=Ue.useRef(null),We=Ue.useRef(null),Ge=Ue.useRef(1),rt=Ue.useRef(c),ot=Ue.useRef(new Map),St=Ue.useRef(new Map),[ye,Ve]=Ue.useState({name:"identity",customFnStr:"x",currentFn:zA.identity,error:null});Ue.useEffect(()=>{if(ye.name==="custom"){const{fn:at,error:tt}=Hve(ye.customFnStr);Ve(Dt=>({...Dt,currentFn:at||(Yt=>NaN),error:tt}))}else Ve(at=>({...at,currentFn:zA[at.name]||zA.identity,error:null}))},[ye.name,ye.customFnStr]);const G=Ue.useCallback(()=>{q(!1),ie(!1),Fe.current&&(cancelAnimationFrame(Fe.current),Fe.current=null),We.current=null,Ge.current=1},[]),ee=Ue.useCallback(()=>{G(),u(ve.startT)},[G,ve.startT]);Ue.useEffect(()=>{(!A||!$)&&(ot.current.clear(),St.current.clear())},[A,$]);const Ee=Ue.useCallback((at=!1)=>{n(tt=>tt.map(Dt=>{const Yt=_B(at),nn=i?Yb(Yt):Yt;return{...Dt,value:nn}}))},[i]),ze=Ue.useCallback(at=>{const tt=tI({requirePositiveEigenvalues:W==="exp-log"||le});e(tt),ae("Custom"),((at==null?void 0:at.randomizeVectors)??!0)&&Ee((at==null?void 0:at.nonNegativeVectors)??!1)},[Ee,W,le]);Ue.useEffect(()=>{if(!Ce)return;const at=tt=>{We.current||(We.current=tt);const Dt=tt-We.current,Yt=Math.min(Dt/(ve.duration*1e3),1),An=(np[ve.easing]||np.linear)(Yt),Rr=Ge.current,er=Rr===1?ve.startT:ve.endT,Gt=Rr===1?ve.endT:ve.startT;u(er+An*(Gt-er)),Yt<1?Fe.current=requestAnimationFrame(at):(u(Gt),fe||V?(V&&Rr===-1&&(ze({randomizeVectors:I,nonNegativeVectors:!0}),u(ve.startT)),Ge.current=Rr===1?-1:1,We.current=null,Fe.current=requestAnimationFrame(at)):G())};return Fe.current=requestAnimationFrame(at),()=>{Fe.current&&cancelAnimationFrame(Fe.current)}},[Ce,ve,fe,G,V,ze,I]);const ft=Ue.useCallback(at=>{e(at),ae("Custom")},[]),it=Ue.useCallback(at=>{const tt=hv.find(Dt=>Dt.name===at);tt&&(ae(at),e(tt.matrix))},[]),ct=Ue.useCallback(()=>{n(at=>{if(at.length>=dv.length)return at;const tt=_B(),Dt={id:Date.now(),value:i?Yb(tt):tt,visible:!0,color:dv[at.length%dv.length]};return[...at,Dt]})},[i]),Nt=Ue.useCallback(at=>{n(tt=>tt.filter(Dt=>Dt.id!==at))},[]),It=Ue.useCallback((at,tt)=>{n(Dt=>Dt.map(Yt=>{if(Yt.id!==at)return Yt;const nn=i?Yb(tt):tt;return{...Yt,value:nn}}))},[i]),yn=Ue.useCallback((at,tt)=>{n(Dt=>Dt.map(Yt=>Yt.id===at?{...Yt,color:tt}:Yt))},[]),on=Ue.useCallback(at=>{n(tt=>tt.map(Dt=>Dt.id===at?{...Dt,visible:!Dt.visible}:Dt))},[]),Dr=Ue.useCallback(()=>{n(at=>at.map(LA))},[]),ni=Ue.useCallback(at=>{a(at),at&&n(tt=>tt.map(LA))},[]),Es=Ue.useCallback(()=>{const at={id:Date.now()+Math.floor(Math.random()*1e3),axis:"x",position:0};o(tt=>[...tt,at])},[]),_i=Ue.useCallback((at,tt)=>{o(Dt=>Dt.map(Yt=>{if(Yt.id!==at)return Yt;const nn=tt.position!==void 0&&Number.isFinite(tt.position)?tt.position:Yt.position,An=tt.axis??Yt.axis;return{...Yt,axis:An,position:nn}}))},[]),Ci=Ue.useCallback(at=>{o(tt=>tt.filter(Dt=>Dt.id!==at))},[]),Ri=Ue.useCallback(()=>{Ce?G():(c>=ve.endT&&(u(ve.startT),Ge.current=1),q(!0))},[Ce,c,ve.startT,ve.endT,G]),Wa=Ue.useCallback(()=>{G(),ze({randomizeVectors:I,nonNegativeVectors:!0}),u(ve.startT),Ge.current=1,We.current=null,ie(!0),q(!0)},[G,ze,ve.startT,I]),ht=Ue.useCallback(()=>{V?G():Wa()},[V,Wa,G]),ln=Ue.useCallback(at=>{G(),u(at)},[G]),qr=Ue.useCallback(at=>{const tt=Number.isFinite(at)?at:1;De(tt)},[]),tn=Ue.useCallback(at=>{const tt=Number.isFinite(at)?at:1,Dt=Math.max(1,Math.round(tt));_e(Dt)},[]),zr=Ue.useCallback(at=>{const tt=Number.isFinite(at)?at:O2,Dt=Ku.clamp(tt,oI,lI);E(Dt)},[]),$a=Ue.useCallback(at=>{ue(at),at||Ae(null)},[]),Yo=Ue.useCallback(at=>{se(at)},[]),pu=Ue.useCallback(at=>{Se(at),at||(Ge.current=1)},[]),Dl=Ue.useCallback(at=>{const tt=Number.isFinite(at)?Math.max(2,Math.min(600,Math.round(at))):120;O(tt)},[]),As=Ue.useMemo(()=>{const at=r.map(Yt=>[...Yt]),tt=t.map(Yt=>({...Yt,value:[...Yt.value]})),Dt=s.map(Yt=>({...Yt}));return{version:vge(),matrixA:at,vectors:tt,walls:Dt,t:c,tPrecision:h,dotMode:M,fadingPath:A,fadingPathLength:N,fadingPathStyle:z,showStartMarkers:R,showEndMarkers:H,dynamicFadingPath:$,exploreRandomizeVectors:I,animationConfig:{duration:ve.duration,startT:ve.startT,endT:ve.endT,easing:ve.easing},repeatAnimation:fe,activation:{name:ye.name,customFnStr:ye.customFnStr},selectedPresetName:k,matrixScalar:J,matrixExponent:pe,normalizeMatrix:ne,linearEigenInterpolation:Te,dotSize:T,autoNormalizeVectors:i,matrixBackend:W,compareBackends:le}},[r,t,s,c,h,M,A,N,z,R,H,$,I,ve.duration,ve.startT,ve.endT,ve.easing,fe,ye.name,ye.customFnStr,k,J,pe,ne,Te,T,i,W,le]),Zi=Ue.useCallback(at=>{const tt=wge(at);tt&&(G(),e(tt.matrixA),n(tt.autoNormalizeVectors?tt.vectors.map(LA):tt.vectors),o(tt.walls),qr(tt.matrixScalar),tn(tt.matrixExponent),ue(tt.normalizeMatrix),se(tt.linearEigenInterpolation),a(tt.autoNormalizeVectors),_(tt.dotMode),E(tt.dotSize),D(tt.fadingPath),Dl(tt.fadingPathLength),C(tt.fadingPathStyle),F(tt.showStartMarkers),X(tt.showEndMarkers),Y(tt.dynamicFadingPath),Z(tt.exploreRandomizeVectors),te(tt.matrixBackend),Q(!!tt.compareBackends),qe({duration:tt.animationConfig.duration,startT:tt.animationConfig.startT,endT:tt.animationConfig.endT,easing:tt.animationConfig.easing}),Se(tt.repeatAnimation),Ve(Dt=>({...Dt,name:tt.activation.name,customFnStr:tt.activation.customFnStr})),ae(tt.selectedPresetName),d(tt.tPrecision),u(tt.t),v(null))},[G,qr,tn,Dl]),he=Ue.useCallback(()=>{Be(uge())},[]);Ue.useEffect(()=>{he();const at=pge();if(at){const Dt=bB(at);if(Dt){Zi(Dt),Pe(at);return}}const tt=hge();tt&&(Zi(tt),Pe(null))},[Zi,he]),Ue.useEffect(()=>{dge(As)},[As]),Ue.useEffect(()=>{mge(Le)},[Le]);const He=Ue.useCallback(at=>{const tt=at.trim();if(!tt)return{success:!1,status:"error",message:"Profile name cannot be empty."};try{const Dt=cge(tt,As);return he(),Pe(tt),Dt==="created"?{success:!0,status:"success",message:`Saved profile "${tt}".`}:{success:!0,status:"info",message:`Updated profile "${tt}".`}}catch(Dt){return console.error("Profile save failed:",Dt),{success:!1,status:"error",message:"Failed to save profile."}}},[As,he]),$e=Ue.useCallback(at=>{const tt=at.trim();if(!tt)return{success:!1,status:"error",message:"Select a profile to load."};const Dt=bB(tt);return Dt?(Zi(Dt),he(),Pe(tt),{success:!0,status:"success",message:`Loaded profile "${tt}".`}):{success:!1,status:"error",message:"Profile not found."}},[Zi,he]),Qe=Ue.useCallback(at=>{const tt=at.trim();return tt?fge(tt)?(he(),Le===tt&&Pe(null),{success:!0,status:"info",message:`Deleted profile "${tt}".`}):{success:!1,status:"error",message:"Profile not found."}:{success:!1,status:"error",message:"Select a profile to delete."}},[he,Le]),Ne=Ue.useMemo(()=>{const at=nn=>{if(typeof nn=="number")return nn;if(typeof nn=="object"&&nn!==null&&"re"in nn)return Number(nn.re);const An=Number(nn);return Number.isFinite(An)?An:0},tt=nn=>nn.map(An=>[at(An[0]),at(An[1]),at(An[2])]),Dt=Number.isFinite(J)?J:1,Yt=Math.max(1,Math.round(Number.isFinite(pe)?pe:1));try{const nn=bt(r),An=vr(nn,Dt),Rr=Yt===1?An:wl(An,Yt),er=Rr.toArray(),Gt=tt(er),or=Number(j0(Rr));let vn=!1,Za=!1,Oi=null,tr=Gt;if(ne)if(Math.abs(or)<1e-8)Za=!0;else{const Bi=Math.cbrt(Math.abs(or)),Tr=Da(Rr,Bi),lr=Tr.toArray();tr=tt(lr),vn=!0,Oi=Number(j0(Tr))}return{matrix:tr,adjustedMatrix:Gt,scalar:Dt,exponent:Yt,normalizationApplied:vn,normalizationFailed:Za,determinantBefore:or,determinantAfter:Oi,error:null}}catch(nn){return console.error("Matrix adjustment error:",nn),{matrix:null,adjustedMatrix:r,scalar:Dt,exponent:Yt,normalizationApplied:!1,normalizationFailed:!1,determinantBefore:null,determinantAfter:null,error:"Matrix adjustment error. Check scalar or exponent values."}}},[r,J,pe,ne]);Ue.useEffect(()=>{ne&&Ne.normalizationFailed?(Ae("Normalization requires a non-zero determinant. Matrix left unnormalized."),ue(!1)):ne&&Ne.normalizationApplied&&Ae(null)},[ne,Ne.normalizationFailed,Ne.normalizationApplied]),Ue.useEffect(()=>{Ae(null)},[r,J,pe]),Ue.useEffect(()=>{b(null)},[Ne.matrix]);const ut=Ue.useMemo(()=>Ne.matrix?eI(Ne.matrix):{valid:!1,reason:"Provide a valid matrix to evaluate exp(t ln A)."},[Ne.matrix]),wt=Ue.useCallback(at=>{if(at==="exp-log"&&!ut.valid){b(ut.reason??"exp(t ln A) requires strictly positive real eigenvalues or complex conjugate pairs.");return}b(null),te(at)},[ut]),Ot=Ue.useCallback(at=>{if(at&&!ut.valid){b(ut.reason??"exp(t ln A) requires strictly positive real eigenvalues or complex conjugate pairs.");return}b(null),Q(at)},[ut]),Tt=Ue.useMemo(()=>Ne.matrix?mB(Ne.matrix,"kan"):null,[Ne.matrix]),Lt=Ue.useMemo(()=>!Ne.matrix||!ut.valid?null:mB(Ne.matrix,"exp-log"),[Ne.matrix,ut.valid]),Vt=Ue.useMemo(()=>W==="exp-log"?Lt:Tt,[W,Tt,Lt]),qt=Ue.useMemo(()=>{const at=ve.endT-ve.startT,tt=Number.isFinite(h)&&h>0?h:.01,Dt=1/xge,Yt=Math.min(tt,Dt);if(at<=0)return{times:[],range:at,totalSteps:0};const nn=Math.max(1,Math.ceil(at/Yt)),An=new Array(nn+1);for(let Rr=0;Rr<=nn;Rr++)An[Rr]=ve.startT+Rr/nn*at;return{times:An,range:at,totalSteps:nn}},[ve.startT,ve.endT,h]);Ue.useMemo(()=>{if(!Vt)return null;const{times:at}=qt;return at.length===0?[]:at.map(tt=>Vt.getMatrixAt(tt,{linearEigenInterpolation:Te}))},[Vt,qt,Te]);const mn=Ue.useMemo(()=>{var Gt,or;const at=Ne.error??(ye.error?`Activation Function Error: ${ye.error}`:null);if(at)return{visualizations:[],error:at};if(qt.range<=0)return{visualizations:[],error:"Animation End Time must be greater than Start Time."};const Dt=qt.times;if(Dt.length===0)return{visualizations:[],error:"No sampling points available."};const Yt=le?["kan","exp-log"]:[W],nn=vn=>vn==="kan"?Tt:Lt,An=ye.currentFn,Rr=[];let er=null;for(const vn of Yt){const Za=nn(vn);if(!Za){vn==="exp-log"?er=er??ut.reason??"exp(t ln A) backend unavailable.":er=er??"Matrix unavailable.";continue}const Oi=Dt.map(Tr=>Za.getMatrixAt(Tr,{linearEigenInterpolation:Te}));if(Oi.some(Tr=>!Tr)){er=er??"Matrix generation failed at specific time samples.";continue}const tr={};let Bi=!1;for(const Tr of t){const lr=[];for(const Ra of Oi){if(!Ra){Bi=!0;break}const hf=mT(Ra,Tr.value).map(An);lr.push(new xe(...hf))}if(Bi||lr.length===0){Bi=!0;break}const ws=((Gt=lr[0])==null?void 0:Gt.clone())??new xe(...Tr.value.map(An)),bo=((or=lr[lr.length-1])==null?void 0:or.clone())??ws.clone();tr[Tr.id]={initial:ws,final:bo,fullPath:lr}}if(Bi){er=er??"Calculation Error: The matrix might be singular or non-diagonalizable.";continue}Rr.push({backend:vn,label:gge[vn],color:yge[vn],transformations:tr})}return{visualizations:Rr,error:Rr.length===0?er??"Matrix unavailable.":er}},[Ne,t,ye.currentFn,ye.error,Tt,Lt,qt,W,le,ut,Te]),Jn=mn.visualizations,$n=Ue.useMemo(()=>{const at=Jn;if(at.length===0)return[];const tt=ve.endT-ve.startT;if(tt<=0)return[];rt.current,rt.current=c;const Dt={x:Gt=>Gt.x,y:Gt=>Gt.y,z:Gt=>Gt.z},Yt=(Gt,or,vn)=>{or==="x"&&Gt.setX(vn),or==="y"&&Gt.setY(vn),or==="z"&&Gt.setZ(vn)},nn=(Gt,or)=>Math.abs(Gt)>1e-6?Gt>=0?1:-1:or!==void 0&&Math.abs(or)>1e-6?or>=0?1:-1:1,An=(Gt,or,vn)=>{const Za=Dt[Gt.axis](or),Oi=Za-Gt.position;if(Math.abs(Oi)<=SB){const tr=or.clone();Yt(tr,Gt.axis,Gt.position);const Bi=nn(Oi,vn?Dt[Gt.axis](vn)-Gt.position:void 0);return{wallId:Gt.id,axis:Gt.axis,position:Gt.position,point:tr,normalDirection:Bi}}if(vn){const tr=Dt[Gt.axis](vn),Bi=tr-Gt.position;if(Math.abs(Bi)<=SB){const Tr=vn.clone();Yt(Tr,Gt.axis,Gt.position);const lr=nn(Bi,Oi);return{wallId:Gt.id,axis:Gt.axis,position:Gt.position,point:Tr,normalDirection:lr}}if(Bi*Oi<0){const Tr=Za-tr;if(Math.abs(Tr)>1e-8){const lr=(Gt.position-tr)/Tr,ws=Ku.clamp(lr,0,1),bo=vn.clone().lerp(or,ws);Yt(bo,Gt.axis,Gt.position);const Ra=nn(Oi,Bi);return{wallId:Gt.id,axis:Gt.axis,position:Gt.position,point:bo,normalDirection:Ra}}}}return null},Rr=t.filter(Gt=>Gt.visible);if($&&A){const Gt=new Set;at.forEach(or=>{Rr.forEach(vn=>Gt.add(`${or.backend}-${vn.id}`))}),ot.current.forEach((or,vn)=>{Gt.has(vn)||(ot.current.delete(vn),St.current.delete(vn))})}const er=[];return at.forEach(Gt=>{Rr.forEach(or=>{const vn=Gt.transformations[or.id];if(!vn)return;const Za=(c-ve.startT)/tt,Oi=Math.floor(Za*(vn.fullPath.length-1)),tr=Ku.clamp(Oi,0,vn.fullPath.length-1),Bi=Math.min(N,vn.fullPath.length),Tr=`${Gt.backend}-${or.id}`;let lr;if($&&A){const Oa=typeof performance<"u"?performance.now():Date.now(),Wo=Math.max(2,Math.min(Bi,Math.round(Math.max(2,N)))),Cl=Ku.lerp(450,6500,Ku.clamp(N/400,0,1));let Zr=ot.current.get(Tr)??[],Si=St.current.get(Tr);const $o=(ma,Rl)=>{const Ui=vn.fullPath[ma];Ui&&Zr.push({position:Ui.clone(),timestamp:Rl,index:ma})};(Si===void 0||Si<0||Si>=vn.fullPath.length)&&(Zr=[],Si=tr);const So=Zr[Zr.length-1],Mo=(Si<tr?1:-1)===1;if(((Mo?Si!==void 0&&Si>tr:Si!==void 0&&Si<tr)||Math.abs(Si-tr)>Wo*2)&&(Zr=[],Si=Mo?Math.max(0,tr-1):Math.min(vn.fullPath.length-1,tr+1)),Si===void 0)$o(tr,Oa);else if(Si!==tr){const ma=Si<tr?1:-1;for(let Rl=Si+ma;Rl!==tr+ma;Rl+=ma)$o(Rl,Oa)}else(!So||Oa-So.timestamp>120)&&$o(tr,Oa);St.current.set(Tr,tr),Zr=Zr.filter(ma=>Oa-ma.timestamp<=Cl),Zr.length===0&&$o(tr,Oa),Zr.length>Wo&&(Zr=Zr.slice(Zr.length-Wo)),ot.current.set(Tr,Zr),lr=Zr.map(ma=>ma.position.clone())}else if(St.current.set(Tr,tr),ot.current.delete(Tr),A){const Oa=Math.max(0,tr-Bi+1);lr=vn.fullPath.slice(Oa,tr+1)}else lr=vn.fullPath.slice(0,tr+1);const ws=lr[lr.length-1]||vn.initial,bo=lr.length>1?lr[lr.length-2]:vn.initial,Ra=[];s.forEach(Oa=>{const Wo=An(Oa,ws,bo);Wo&&Ra.push(Wo)});const _o=le?Gt.color:or.color;er.push({id:`${Gt.backend}-${or.id}`,color:_o,initialVector:vn.initial,finalVector:vn.final,interpolatedVector:ws,path:lr,contacts:Ra,backend:Gt.backend,sourceVectorId:or.id,showMarkers:!0})})}),er},[Jn,ve.startT,ve.endT,c,t,s,A,$,N,le,W]),sr=Ue.useMemo(()=>{const at={};return $n.forEach(tt=>{tt.contacts.forEach(Dt=>{at[Dt.wallId]=(at[Dt.wallId]??0)+1})}),at},[$n]),Cn=Ue.useMemo(()=>Vt?MB(Vt.eigenValues):null,[Vt]),Ut=Ue.useMemo(()=>Vt?Vt.getMatrixAt(c,{linearEigenInterpolation:Te}):null,[Vt,c,Te]),Cr=Ue.useMemo(()=>{if(!Ut)return null;try{const at=j0(Ut);if(typeof at=="number")return Number.isFinite(at)?at:null;if(at&&typeof at=="object"&&"re"in at){const tt=at.re;return Number.isFinite(tt)?tt:null}return null}catch{return null}},[Ut]),kn=Ue.useMemo(()=>{if(!Ut)return null;try{const at=qv(bt(Ut));return MB(at.values??null)}catch(at){return console.warn("Eigenvalue evaluation at t failed:",at),null}},[Ut]),wr=t.find(at=>at.visible),Ki=Ue.useMemo(()=>wr?$n.find(at=>at.sourceVectorId===wr.id&&(!le||at.backend===W))??$n.find(at=>at.sourceVectorId===wr.id)??null:null,[wr,$n,le,W]),ai=Ue.useMemo(()=>!wr||!Vt?null:Vt.applyToVector(c,wr.value,{linearEigenInterpolation:Te}),[Vt,c,wr,Te]);return Ue.useEffect(()=>{x?v(x):mn.error?v(mn.error):v(ge||null)},[x,mn.error,ge]),oe.jsxs("div",{className:"w-screen h-screen flex flex-col md:flex-row bg-gray-900 overflow-hidden",children:[Ye&&oe.jsx(sge,{matrix:r,vectors:t,autoNormalizeVectors:i,walls:s,t:c,tPrecision:h,dotMode:M,dotSize:T,fadingPath:A,fadingPathLength:N,fadingPathStyle:z,showStartMarkers:R,showEndMarkers:H,dynamicFadingPath:$,isPlaying:Ce,isExploring:V,exploreRandomizeVectors:I,animationConfig:ve,repeatAnimation:fe,activationConfig:ye,selectedPresetName:k,matrixScalar:J,matrixExponent:pe,normalizeMatrix:ne,linearEigenInterpolation:Te,matrixBackend:W,compareBackends:le,normalizationWarning:ge,onMatrixChange:ft,onPresetSelect:it,onMatrixScalarChange:qr,onMatrixExponentChange:tn,onNormalizeToggle:$a,onLinearInterpolationToggle:Yo,onVectorChange:It,onVectorColorChange:yn,onAddVector:ct,onNormalizeVectors:Dr,onAutoNormalizeVectorsChange:ni,onRemoveVector:Nt,onToggleVisibility:on,onTChange:ln,onTPrecisionChange:d,onDotModeChange:_,onDotSizeChange:zr,onFadingPathToggle:D,onFadingPathLengthChange:Dl,onFadingPathStyleChange:C,onDynamicFadingPathChange:Y,onShowStartMarkersChange:F,onShowEndMarkersChange:X,onResetTime:ee,onPlayPause:Ri,onExploreToggle:ht,onExploreRandomizeVectorsChange:Z,onAnimationConfigChange:qe,onRepeatToggle:pu,onActivationConfigChange:Ve,onCompareBackendsChange:Ot,onMatrixBackendChange:wt,onAddWall:Es,onUpdateWall:_i,onRemoveWall:Ci,profileSummaries:Me,activeProfileName:Le,onProfileSave:He,onProfileLoad:$e,onProfileDelete:Qe,error:m,backendError:x,onCollapse:()=>Ze(!1)}),oe.jsxs("div",{className:"flex-grow h-1/2 md:h-full w-full md:w-auto relative pointer-events-none",children:[oe.jsxs("div",{className:"absolute inset-0 pointer-events-auto",children:[oe.jsx(YL,{sceneData:$n,walls:s,dotMode:M,dotSize:T,fadingPath:A,fadingPathLength:N,fadingPathStyle:z,showStartMarkers:R,showEndMarkers:H,dynamicFadingPath:$}),le&&mn.visualizations.length>0&&oe.jsxs("div",{className:"absolute bottom-6 left-6 bg-gray-900/80 border border-gray-700 rounded-xl p-4 text-sm text-gray-200 shadow-xl pointer-events-auto",children:[oe.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400 mb-2",children:"Path Legend"}),oe.jsx("div",{className:"space-y-2",children:mn.visualizations.map(at=>oe.jsxs("div",{className:"flex items-center gap-2",children:[oe.jsx("span",{className:"inline-block w-3 h-3 rounded-full",style:{backgroundColor:at.color}}),oe.jsx("span",{children:at.label})]},at.backend))})]})]}),!Ye&&oe.jsx("button",{onClick:()=>Ze(!0),className:"absolute top-6 left-6 px-4 py-2 rounded-lg bg-gray-900/80 border border-gray-700 text-cyan-300 hover:text-white hover:border-cyan-400 transition-colors pointer-events-auto shadow-lg",children:"Show Controls"}),re?oe.jsx(lge,{baseMatrix:r,effectiveMatrix:Ne.matrix,matrixScalar:J,matrixExponent:Ne.exponent,normalizeRequested:ne,normalizeApplied:Ne.normalizationApplied,determinantBefore:Ne.determinantBefore,determinantAfter:Ne.determinantAfter,normalizationWarning:ge,walls:s,wallContactCounts:sr,eigenvalues:Cn,eigenvaluesAtT:kn,matrixAt:Ut,determinantAtT:Cr,vectorV:(wr==null?void 0:wr.value)||null,rawTransformedV:ai,transformedV:Ki!=null&&Ki.interpolatedVector?[Ki.interpolatedVector.x,Ki.interpolatedVector.y,Ki.interpolatedVector.z]:null,activationFnName:ye.name,customActivationFnStr:ye.customFnStr,onCollapse:()=>be(!1)}):oe.jsx("button",{onClick:()=>be(!0),className:"absolute top-6 right-6 px-4 py-2 rounded-lg bg-gray-900/80 border border-gray-700 text-cyan-300 hover:text-white hover:border-cyan-400 transition-colors pointer-events-auto shadow-lg",children:"Show Info"})]})]})}const uI=document.getElementById("root");if(!uI)throw new Error("Could not find root element to mount to");const Nge=fP.createRoot(uI);Nge.render(oe.jsx(Wb.StrictMode,{children:oe.jsx(Tge,{})}));
